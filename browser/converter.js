/* Generated by the Nim Compiler v1.4.2 */
var framePtr = null;
var excHandler = 0;
var lastJSError = null;
var NTI13916030 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI13605019 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI13585865 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI11776497 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI2427621 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI2427643 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI12557202 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12557204 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI12557206 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI12557208 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI12557210 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI12676031 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI12676017 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12676021 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI12676015 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI12676133 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI12461107 = {size: 0,kind: 19,base: null,node: null,finalizer: null};
var NTI12425250 = {size: 0,kind: 19,base: null,node: null,finalizer: null};
var NTI12210253 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI2421011 = {size: 0,kind: 2,base: null,node: null,finalizer: null};
var NTI12316026 = {size: 0,kind: 19,base: null,node: null,finalizer: null};
var NTI12046179 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI12046173 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI12046167 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI12046161 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI12046155 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI12046144 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI12046140 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI12046135 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI12046131 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI12046127 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI12046126 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI12046124 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI12316018 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI12461021 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12461065 = {size: 0,kind: 19,base: null,node: null,finalizer: null};
var NTI12461019 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12461017 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12461015 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12461023 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI11776472 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI11776790 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI11776147 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI13185025 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI13200016 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI13200025 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI13200026 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI3520020 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI11776463 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI2421044 = {size: 0,kind: 31,base: null,node: null,finalizer: null};
var NTI11601056 = {size: 0,kind: 31,base: null,node: null,finalizer: null};
var NTI11776452 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI11776449 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI11776446 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI11776402 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI2421064 = {size: 0,kind: 1,base: null,node: null,finalizer: null};
var NTI11776433 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI11776404 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI11776715 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI2427408 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI2427728 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI2421015 = {size: 0,kind: 29,base: null,node: null,finalizer: null};
var NTI2427723 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI2427617 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI2427619 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI2427651 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI2421013 = {size: 0,kind: 28,base: null,node: null,finalizer: null};
var NNI2427651 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI2427651.node = NNI2427651;
var NNI2427619 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI2427619.node = NNI2427619;
NTI2427723.base = NTI2427617;
NTI2427728.base = NTI2427617;
var NNI2427617 = {kind: 2, len: 5, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "parent", len: 0, typ: NTI2427723, name: "parent", sons: null}, 
{kind: 1, offset: "name", len: 0, typ: NTI2421015, name: "name", sons: null}, 
{kind: 1, offset: "message", len: 0, typ: NTI2421013, name: "msg", sons: null}, 
{kind: 1, offset: "trace", len: 0, typ: NTI2421013, name: "trace", sons: null}, 
{kind: 1, offset: "up", len: 0, typ: NTI2427728, name: "up", sons: null}]};
NTI2427617.node = NNI2427617;
var NNI2427408 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI2427408.node = NNI2427408;
NTI2427617.base = NTI2427408;
NTI2427619.base = NTI2427617;
NTI2427651.base = NTI2427619;
var NNI11776402 = {kind: 2, offset: 0, typ: null, name: null, len: 26, sons: {"0": {kind: 1, offset: 0, typ: NTI11776402, name: "noTag", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI11776402, name: "p", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI11776402, name: "br", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI11776402, name: "h1", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI11776402, name: "h2", len: 0, sons: null}, 
"5": {kind: 1, offset: 5, typ: NTI11776402, name: "h3", len: 0, sons: null}, 
"6": {kind: 1, offset: 6, typ: NTI11776402, name: "h4", len: 0, sons: null}, 
"7": {kind: 1, offset: 7, typ: NTI11776402, name: "h5", len: 0, sons: null}, 
"8": {kind: 1, offset: 8, typ: NTI11776402, name: "h6", len: 0, sons: null}, 
"9": {kind: 1, offset: 9, typ: NTI11776402, name: "ul", len: 0, sons: null}, 
"10": {kind: 1, offset: 10, typ: NTI11776402, name: "ol", len: 0, sons: null}, 
"11": {kind: 1, offset: 11, typ: NTI11776402, name: "li", len: 0, sons: null}, 
"12": {kind: 1, offset: 12, typ: NTI11776402, name: "blockquote", len: 0, sons: null}, 
"13": {kind: 1, offset: 13, typ: NTI11776402, name: "sup", len: 0, sons: null}, 
"14": {kind: 1, offset: 14, typ: NTI11776402, name: "sub", len: 0, sons: null}, 
"15": {kind: 1, offset: 15, typ: NTI11776402, name: "em", len: 0, sons: null}, 
"16": {kind: 1, offset: 16, typ: NTI11776402, name: "strong", len: 0, sons: null}, 
"17": {kind: 1, offset: 17, typ: NTI11776402, name: "pre", len: 0, sons: null}, 
"18": {kind: 1, offset: 18, typ: NTI11776402, name: "code", len: 0, sons: null}, 
"19": {kind: 1, offset: 19, typ: NTI11776402, name: "u", len: 0, sons: null}, 
"20": {kind: 1, offset: 20, typ: NTI11776402, name: "s", len: 0, sons: null}, 
"21": {kind: 1, offset: 21, typ: NTI11776402, name: "img", len: 0, sons: null}, 
"22": {kind: 1, offset: 22, typ: NTI11776402, name: "input", len: 0, sons: null}, 
"23": {kind: 1, offset: 23, typ: NTI11776402, name: "a", len: 0, sons: null}, 
"24": {kind: 1, offset: 24, typ: NTI11776402, name: "video", len: 0, sons: null}, 
"25": {kind: 1, offset: 25, typ: NTI11776402, name: "audio", len: 0, sons: null}}};
NTI11776402.node = NNI11776402;
var NNI11776452 = {kind: 2, len: 4, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI11601056, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI2421044, name: "Field1", sons: null}, 
{kind: 1, offset: "Field2", len: 0, typ: NTI2421015, name: "Field2", sons: null}, 
{kind: 1, offset: "Field3", len: 0, typ: NTI2421015, name: "Field3", sons: null}]};
NTI11776452.node = NNI11776452;
NTI11776449.base = NTI11776452;
var NNI11776446 = {kind: 2, len: 4, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "data", len: 0, typ: NTI11776449, name: "data", sons: null}, 
{kind: 1, offset: "counter", len: 0, typ: NTI2421044, name: "counter", sons: null}, 
{kind: 1, offset: "first", len: 0, typ: NTI2421044, name: "first", sons: null}, 
{kind: 1, offset: "last", len: 0, typ: NTI2421044, name: "last", sons: null}]};
NTI11776446.node = NNI11776446;
NTI11776463.base = NTI11776404;
var NNI11776433 = {kind: 3, offset: "isText", len: 2, typ: NTI2421064, name: "isText", sons: [[setConstr(1), {kind: 1, offset: "str", len: 0, typ: NTI2421015, name: "str", sons: null}], 
[setConstr(2), {kind: 2, len: 3, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "tag", len: 0, typ: NTI11776402, name: "tag", sons: null}, 
{kind: 1, offset: "attrs", len: 0, typ: NTI11776446, name: "attrs", sons: null}, 
{kind: 1, offset: "content", len: 0, typ: NTI11776463, name: "content", sons: null}]}]]};
NTI11776433.node = NNI11776433;
NTI11776404.base = NTI11776433;
NTI11776715.base = NTI11776404;
var NNI3520020 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "a", len: 0, typ: NTI2421044, name: "a", sons: null}, 
{kind: 1, offset: "b", len: 0, typ: NTI2421044, name: "b", sons: null}]};
NTI3520020.node = NNI3520020;
NTI13200026.base = NTI11776404;
var NNI13200016 = {kind: 2, offset: 0, typ: null, name: null, len: 3, sons: {"0": {kind: 1, offset: 0, typ: NTI13200016, name: "frDone", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI13200016, name: "frReachedEnd", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI13200016, name: "frFailed", len: 0, sons: null}}};
NTI13200016.node = NNI13200016;
var NNI13200025 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI13200016, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI13200026, name: "Field1", sons: null}]};
NTI13200025.node = NNI13200025;
var NNI13185025 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI2421015, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI2421015, name: "Field1", sons: null}]};
NTI13185025.node = NNI13185025;
var NNI11776147 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "a", len: 0, typ: NTI2421044, name: "a", sons: null}, 
{kind: 1, offset: "b", len: 0, typ: NTI2421044, name: "b", sons: null}]};
NTI11776147.node = NNI11776147;
NTI11776790.base = NTI11776404;
NTI11776472.base = NTI11776404;
var NNI12461015 = {kind: 2, offset: 0, typ: null, name: null, len: 14, sons: {"0": {kind: 1, offset: 0, typ: NTI12461015, name: "xmlError", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12461015, name: "xmlEof", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12461015, name: "xmlCharData", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI12461015, name: "xmlWhitespace", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI12461015, name: "xmlComment", len: 0, sons: null}, 
"5": {kind: 1, offset: 5, typ: NTI12461015, name: "xmlPI", len: 0, sons: null}, 
"6": {kind: 1, offset: 6, typ: NTI12461015, name: "xmlElementStart", len: 0, sons: null}, 
"7": {kind: 1, offset: 7, typ: NTI12461015, name: "xmlElementEnd", len: 0, sons: null}, 
"8": {kind: 1, offset: 8, typ: NTI12461015, name: "xmlElementOpen", len: 0, sons: null}, 
"9": {kind: 1, offset: 9, typ: NTI12461015, name: "xmlAttribute", len: 0, sons: null}, 
"10": {kind: 1, offset: 10, typ: NTI12461015, name: "xmlElementClose", len: 0, sons: null}, 
"11": {kind: 1, offset: 11, typ: NTI12461015, name: "xmlCData", len: 0, sons: null}, 
"12": {kind: 1, offset: 12, typ: NTI12461015, name: "xmlEntity", len: 0, sons: null}, 
"13": {kind: 1, offset: 13, typ: NTI12461015, name: "xmlSpecial", len: 0, sons: null}}};
NTI12461015.node = NNI12461015;
var NNI12461017 = {kind: 2, offset: 0, typ: null, name: null, len: 10, sons: {"0": {kind: 1, offset: 0, typ: NTI12461017, name: "errNone", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12461017, name: "errEndOfCDataExpected", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12461017, name: "errNameExpected", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI12461017, name: "errSemicolonExpected", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI12461017, name: "errQmGtExpected", len: 0, sons: null}, 
"5": {kind: 1, offset: 5, typ: NTI12461017, name: "errGtExpected", len: 0, sons: null}, 
"6": {kind: 1, offset: 6, typ: NTI12461017, name: "errEqExpected", len: 0, sons: null}, 
"7": {kind: 1, offset: 7, typ: NTI12461017, name: "errQuoteExpected", len: 0, sons: null}, 
"8": {kind: 1, offset: 8, typ: NTI12461017, name: "errEndOfCommentExpected", len: 0, sons: null}, 
"9": {kind: 1, offset: 9, typ: NTI12461017, name: "errAttributeValueExpected", len: 0, sons: null}}};
NTI12461017.node = NNI12461017;
var NNI12461019 = {kind: 2, offset: 0, typ: null, name: null, len: 5, sons: {"0": {kind: 1, offset: 0, typ: NTI12461019, name: "stateStart", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12461019, name: "stateNormal", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12461019, name: "stateAttr", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI12461019, name: "stateEmptyElementTag", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI12461019, name: "stateError", len: 0, sons: null}}};
NTI12461019.node = NNI12461019;
var NNI12461021 = {kind: 2, offset: 0, typ: null, name: null, len: 4, sons: {"0": {kind: 1, offset: 0, typ: NTI12461021, name: "reportWhitespace", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12461021, name: "reportComments", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12461021, name: "allowUnquotedAttribs", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI12461021, name: "allowEmptyAttribs", len: 0, sons: null}}};
NTI12461021.node = NNI12461021;
NTI12461065.base = NTI12461021;
var NNI12461023 = {kind: 2, len: 9, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "a", len: 0, typ: NTI2421013, name: "a", sons: null}, 
{kind: 1, offset: "b", len: 0, typ: NTI2421013, name: "b", sons: null}, 
{kind: 1, offset: "c", len: 0, typ: NTI2421013, name: "c", sons: null}, 
{kind: 1, offset: "kind", len: 0, typ: NTI12461015, name: "kind", sons: null}, 
{kind: 1, offset: "err", len: 0, typ: NTI12461017, name: "err", sons: null}, 
{kind: 1, offset: "state", len: 0, typ: NTI12461019, name: "state", sons: null}, 
{kind: 1, offset: "cIsEmpty", len: 0, typ: NTI2421064, name: "cIsEmpty", sons: null}, 
{kind: 1, offset: "filename", len: 0, typ: NTI2421013, name: "filename", sons: null}, 
{kind: 1, offset: "options", len: 0, typ: NTI12461065, name: "options", sons: null}]};
NTI12461023.node = NNI12461023;
var NNI12046126 = {kind: 2, len: 10, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "closeImpl", len: 0, typ: NTI12046127, name: "closeImpl", sons: null}, 
{kind: 1, offset: "atEndImpl", len: 0, typ: NTI12046131, name: "atEndImpl", sons: null}, 
{kind: 1, offset: "setPositionImpl", len: 0, typ: NTI12046135, name: "setPositionImpl", sons: null}, 
{kind: 1, offset: "getPositionImpl", len: 0, typ: NTI12046140, name: "getPositionImpl", sons: null}, 
{kind: 1, offset: "readDataStrImpl", len: 0, typ: NTI12046144, name: "readDataStrImpl", sons: null}, 
{kind: 1, offset: "readLineImpl", len: 0, typ: NTI12046155, name: "readLineImpl", sons: null}, 
{kind: 1, offset: "readDataImpl", len: 0, typ: NTI12046161, name: "readDataImpl", sons: null}, 
{kind: 1, offset: "peekDataImpl", len: 0, typ: NTI12046167, name: "peekDataImpl", sons: null}, 
{kind: 1, offset: "writeDataImpl", len: 0, typ: NTI12046173, name: "writeDataImpl", sons: null}, 
{kind: 1, offset: "flushImpl", len: 0, typ: NTI12046179, name: "flushImpl", sons: null}]};
NTI12046126.node = NNI12046126;
NTI12046126.base = NTI2427408;
NTI12046124.base = NTI12046126;
NTI12316026.base = NTI2421011;
var NNI12316018 = {kind: 2, len: 8, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "bufpos", len: 0, typ: NTI2421044, name: "bufpos", sons: null}, 
{kind: 1, offset: "buf", len: 0, typ: NTI2421013, name: "buf", sons: null}, 
{kind: 1, offset: "input", len: 0, typ: NTI12046124, name: "input", sons: null}, 
{kind: 1, offset: "lineNumber", len: 0, typ: NTI2421044, name: "lineNumber", sons: null}, 
{kind: 1, offset: "sentinel", len: 0, typ: NTI2421044, name: "sentinel", sons: null}, 
{kind: 1, offset: "lineStart", len: 0, typ: NTI2421044, name: "lineStart", sons: null}, 
{kind: 1, offset: "offsetBase", len: 0, typ: NTI2421044, name: "offsetBase", sons: null}, 
{kind: 1, offset: "refillChars", len: 0, typ: NTI12316026, name: "refillChars", sons: null}]};
NTI12316018.node = NNI12316018;
NTI12316018.base = NTI2427408;
NTI12461023.base = NTI12316018;
var NNI12210253 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "data", len: 0, typ: NTI2421013, name: "data", sons: null}, 
{kind: 1, offset: "pos", len: 0, typ: NTI2421044, name: "pos", sons: null}]};
NTI12210253.node = NNI12210253;
NTI12210253.base = NTI12046126;
NTI12425250.base = NTI2421011;
NTI12461107.base = NTI12461021;
var NNI12676017 = {kind: 2, offset: 0, typ: null, name: null, len: 6, sons: {"0": {kind: 1, offset: 0, typ: NTI12676017, name: "xnText", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12676017, name: "xnVerbatimText", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12676017, name: "xnElement", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI12676017, name: "xnCData", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI12676017, name: "xnEntity", len: 0, sons: null}, 
"5": {kind: 1, offset: 5, typ: NTI12676017, name: "xnComment", len: 0, sons: null}}};
NTI12676017.node = NNI12676017;
NTI12676031.base = NTI12676015;
var NNI12557204 = {kind: 2, len: 3, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI2421013, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI2421013, name: "Field1", sons: null}, 
{kind: 1, offset: "Field2", len: 0, typ: NTI2421064, name: "Field2", sons: null}]};
NTI12557204.node = NNI12557204;
NTI12557206.base = NTI12557204;
var NNI12557202 = {kind: 2, offset: 0, typ: null, name: null, len: 3, sons: {"0": {kind: 1, offset: 0, typ: NTI12557202, name: "modeCaseSensitive", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12557202, name: "modeCaseInsensitive", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12557202, name: "modeStyleInsensitive", len: 0, sons: null}}};
NTI12557202.node = NNI12557202;
var NNI12557208 = {kind: 2, len: 3, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "counter", len: 0, typ: NTI2421044, name: "counter", sons: null}, 
{kind: 1, offset: "data", len: 0, typ: NTI12557206, name: "data", sons: null}, 
{kind: 1, offset: "mode", len: 0, typ: NTI12557202, name: "mode", sons: null}]};
NTI12557208.node = NNI12557208;
NTI12557208.base = NTI2427408;
NTI12557210.base = NTI12557208;
var NNI12676021 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 3, offset: "k", len: 6, typ: NTI12676017, name: "k", sons: [[setConstr(0, 1, 5, 3, 4), {kind: 1, offset: "fText", len: 0, typ: NTI2421013, name: "fText", sons: null}], 
[setConstr(2), {kind: 2, len: 3, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "fTag", len: 0, typ: NTI2421013, name: "fTag", sons: null}, 
{kind: 1, offset: "s", len: 0, typ: NTI12676031, name: "s", sons: null}, 
{kind: 1, offset: "fAttr", len: 0, typ: NTI12557210, name: "fAttr", sons: null}]}]]}, 
{kind: 1, offset: "fClientData", len: 0, typ: NTI2421044, name: "fClientData", sons: null}]};
NTI12676021.node = NNI12676021;
NTI12676015.base = NTI12676021;
NTI12676133.base = NTI12676015;
var NNI2427643 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI2427643.node = NNI2427643;
var NNI2427621 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI2427621.node = NNI2427621;
NTI2427621.base = NTI2427617;
NTI2427643.base = NTI2427621;
var NNI11776497 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI2421064, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI2421044, name: "Field1", sons: null}]};
NTI11776497.node = NNI11776497;
NTI13585865.base = NTI11776404;
NTI13605019.base = NTI11776404;
NTI13916030.base = NTI11776404;
function setConstr() {
        var result = {};
    for (var i = 0; i < arguments.length; ++i) {
      var x = arguments[i];
      if (typeof(x) == "object") {
        for (var j = x[0]; j <= x[1]; ++j) {
          result[j] = true;
        }
      } else {
        result[x] = true;
      }
    }
    return result;
  

  
}
var ConstSet1 = setConstr(13, 10);
var ConstSet2 = setConstr(true);
var ConstSet3 = setConstr(17, 16, 4, 18, 27, 19, 23, 22, 21);
function nimCopy(dest_2705023, src_2705024, ti_2705025) {
  var result_2710219 = null;

    switch (ti_2705025.kind) {
    case 21:
    case 22:
    case 23:
    case 5:
      if (!(isFatPointer_2700401(ti_2705025))) {
      result_2710219 = src_2705024;
      }
      else {
        result_2710219 = [src_2705024[0], src_2705024[1]];
      }
      
      break;
    case 19:
            if (dest_2705023 === null || dest_2705023 === undefined) {
        dest_2705023 = {};
      }
      else {
        for (var key in dest_2705023) { delete dest_2705023[key]; }
      }
      for (var key in src_2705024) { dest_2705023[key] = src_2705024[key]; }
      result_2710219 = dest_2705023;
    
      break;
    case 18:
    case 17:
      if (!((ti_2705025.base == null))) {
      result_2710219 = nimCopy(dest_2705023, src_2705024, ti_2705025.base);
      }
      else {
      if ((ti_2705025.kind == 17)) {
      result_2710219 = (dest_2705023 === null || dest_2705023 === undefined) ? {m_type: ti_2705025} : dest_2705023;
      }
      else {
        result_2710219 = (dest_2705023 === null || dest_2705023 === undefined) ? {} : dest_2705023;
      }
      }
      nimCopyAux(result_2710219, src_2705024, ti_2705025.node);
      break;
    case 24:
    case 4:
    case 27:
    case 16:
            if (src_2705024 === null) {
        result_2710219 = null;
      }
      else {
        if (dest_2705023 === null || dest_2705023 === undefined) {
          dest_2705023 = new Array(src_2705024.length);
        }
        else {
          dest_2705023.length = src_2705024.length;
        }
        result_2710219 = dest_2705023;
        for (var i = 0; i < src_2705024.length; ++i) {
          result_2710219[i] = nimCopy(result_2710219[i], src_2705024[i], ti_2705025.base);
        }
      }
    
      break;
    case 28:
            if (src_2705024 !== null) {
        result_2710219 = src_2705024.slice(0);
      }
    
      break;
    default: 
      result_2710219 = src_2705024;
      break;
    }

  return result_2710219;

}
function makeNimstrLit(c_2690062) {
      var ln = c_2690062.length;
  var result = new Array(ln);
  for (var i = 0; i < ln; ++i) {
    result[i] = c_2690062.charCodeAt(i);
  }
  return result;
  

  
}
function toJSStr(s_2690096) {
                    var Tmp5;
            var Tmp7;

  var result_2690097 = null;

    var res_2690170 = newSeq_2690128((s_2690096).length);
    var i_2690172 = 0;
    var j_2690174 = 0;
    L1: do {
        L2: while (true) {
        if (!(i_2690172 < (s_2690096).length)) break L2;
          var c_2690175 = s_2690096[i_2690172];
          if ((c_2690175 < 128)) {
          res_2690170[j_2690174] = String.fromCharCode(c_2690175);
          i_2690172 += 1;
          }
          else {
            var helper_2690198 = newSeq_2690128(0);
            L3: do {
                L4: while (true) {
                if (!true) break L4;
                  var code_2690199 = c_2690175.toString(16);
                  if (((code_2690199).length == 1)) {
                  helper_2690198.push("%0");;
                  }
                  else {
                  helper_2690198.push("%");;
                  }
                  
                  helper_2690198.push(code_2690199);;
                  i_2690172 += 1;
                    if (((s_2690096).length <= i_2690172)) Tmp5 = true; else {                      Tmp5 = (s_2690096[i_2690172] < 128);                    }                  if (Tmp5) {
                  break L3;
                  }
                  
                  c_2690175 = s_2690096[i_2690172];
                }
            } while(false);
++excHandler;
            Tmp7 = framePtr;
            try {
            res_2690170[j_2690174] = decodeURIComponent(helper_2690198.join(""));
--excHandler;
} catch (EXC) {
 var prevJSError = lastJSError;
 lastJSError = EXC;
 --excHandler;
            framePtr = Tmp7;
            res_2690170[j_2690174] = helper_2690198.join("");
            lastJSError = prevJSError;
            } finally {
            framePtr = Tmp7;
            }
          }
          
          j_2690174 += 1;
        }
    } while(false);
    if (res_2690170.length < j_2690174) { for (var i=res_2690170.length;i<j_2690174;++i) res_2690170.push(null); }
               else { res_2690170.length = j_2690174; };
    result_2690097 = res_2690170.join("");

  return result_2690097;

}
function raiseException(e_2655218, ename_2655219) {
    e_2655218.name = ename_2655219;
    if ((excHandler == 0)) {
    unhandledException(e_2655218);
    }
    
    throw e_2655218;

  
}
function raiseFieldError(f_2685047) {
    raiseException({message: nimCopy(null, f_2685047, NTI2421013), parent: null, m_type: NTI2427651, name: null, trace: [], up: null}, "FieldDefect");

  
}
var ConstSet4 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet5 = setConstr(true);
var ConstSet6 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet7 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet8 = setConstr(true);
var ConstSet9 = setConstr(true);
var ConstSet10 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet11 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet12 = setConstr([97, 122], [65, 90], [48, 57], 45, 95, 58, 46);
var ConstSet13 = setConstr(true);
var ConstSet14 = setConstr(0);
var ConstSet15 = setConstr(2, 1);
var ConstSet16 = setConstr(0);
var ConstSet17 = setConstr(2, 1);
var ConstSet18 = setConstr(0);
var ConstSet19 = setConstr(2, 1);
var ConstSet20 = setConstr(0);
var ConstSet21 = setConstr(2, 1);
var ConstSet22 = setConstr(true);
var ConstSet23 = setConstr(true);
var ConstSet24 = setConstr(9, [11, 13], 32);
function addChar(x_2740031, c_2740032) {
    x_2740031.push(c_2740032);

  
}
var ConstSet25 = setConstr(true);
var ConstSet26 = setConstr(true);
function cstrToNimstr(c_2690079) {
      var ln = c_2690079.length;
  var result = new Array(ln);
  var r = 0;
  for (var i = 0; i < ln; ++i) {
    var ch = c_2690079.charCodeAt(i);

    if (ch < 128) {
      result[r] = ch;
    }
    else {
      if (ch < 2048) {
        result[r] = (ch >> 6) | 192;
      }
      else {
        if (ch < 55296 || ch >= 57344) {
          result[r] = (ch >> 12) | 224;
        }
        else {
            ++i;
            ch = 65536 + (((ch & 1023) << 10) | (c_2690079.charCodeAt(i) & 1023));
            result[r] = (ch >> 18) | 240;
            ++r;
            result[r] = ((ch >> 12) & 63) | 128;
        }
        ++r;
        result[r] = ((ch >> 6) & 63) | 128;
      }
      ++r;
      result[r] = (ch & 63) | 128;
    }
    ++r;
  }
  return result;
  

  
}
function genericReset(x_2715044, ti_2715045) {
  var result_2715046 = null;

    result_2715046 = null;
    switch (ti_2715045.kind) {
    case 21:
    case 22:
    case 23:
    case 5:
      if (isFatPointer_2700401(ti_2715045)) {
              result_2715046 = [null, 0];
      
      }
      
      break;
    case 19:
            result_2715046 = {};
    
      break;
    case 18:
    case 17:
      if ((ti_2715045.kind == 17)) {
      result_2715046 = {m_type: ti_2715045};
      }
      else {
        result_2715046 = {};
      }
      
      break;
    case 24:
    case 27:
            result_2715046 = [];
    
      break;
    case 4:
    case 16:
            result_2715046 = new Array(x_2715044.length);
      for (var i = 0; i < x_2715044.length; ++i) {
        result_2715046[i] = genericReset(x_2715044[i], ti_2715045.base);
      }
    
      break;
    default: 
      break;
    }

  return result_2715046;

}
var ConstSet27 = setConstr(true);
var ConstSet28 = setConstr(true);
var ConstSet29 = setConstr(true);
var ConstSet30 = setConstr(true);
var ConstSet31 = setConstr(true);
var ConstSet32 = setConstr(true);
var ConstSet33 = setConstr(true);
var ConstSet34 = setConstr(true);
var ConstSet35 = setConstr(true);
var ConstSet36 = setConstr(true);
var ConstSet37 = setConstr(true);
var ConstSet38 = setConstr(true);
var ConstSet39 = setConstr(true);
var ConstSet40 = setConstr(true);
var ConstSet41 = setConstr(true);
var ConstSet42 = setConstr(2, 1);
var ConstSet43 = setConstr(true);
var ConstSet44 = setConstr(2, 1);
var ConstSet45 = setConstr(0);
var ConstSet46 = setConstr(2, 1);
var ConstSet47 = setConstr(0, 1);
var ConstSet48 = setConstr(2, 1);
var ConstSet49 = setConstr(0);
var ConstSet50 = setConstr(2, 1);
var ConstSet51 = setConstr(0);
var ConstSet52 = setConstr(2, 1);
function nimMin(a_2695803, b_2695804) {
    var Tmp1;

  var result_2695805 = 0;

  BeforeRet: do {
    if ((a_2695803 <= b_2695804)) {
    Tmp1 = a_2695803;
    }
    else {
    Tmp1 = b_2695804;
    }
    
    result_2695805 = Tmp1;
    break BeforeRet;
  } while (false);

  return result_2695805;

}
function nimMax(a_2695821, b_2695822) {
    var Tmp1;

  var result_2695823 = 0;

  BeforeRet: do {
    if ((b_2695822 <= a_2695821)) {
    Tmp1 = a_2695821;
    }
    else {
    Tmp1 = b_2695822;
    }
    
    result_2695823 = Tmp1;
    break BeforeRet;
  } while (false);

  return result_2695823;

}
function mnewString(len_2695044) {
        return new Array(len_2695044);
  

  
}
var ConstSet53 = setConstr(13, 10, 47);
var ConstSet54 = setConstr(2, 1);
var ConstSet55 = setConstr([65, 90], [97, 122], 95, 58, [128, 255]);
var ConstSet56 = setConstr([65, 90], [97, 122], [48, 57], 46, 45, 95, 58, [128, 255]);
var ConstSet57 = setConstr([65, 90], [97, 122], 95, 58, [128, 255]);
var ConstSet58 = setConstr([48, 57]);
var ConstSet59 = setConstr(2, 4, 12);
function eqStrings(a_2695222, b_2695223) {
        if (a_2695222 == b_2695223) return true;
    if (a_2695222 === null && b_2695223.length == 0) return true;
    if (b_2695223 === null && a_2695222.length == 0) return true;
    if ((!a_2695222) || (!b_2695223)) return false;
    var alen = a_2695222.length;
    if (alen != b_2695223.length) return false;
    for (var i = 0; i < alen; ++i)
      if (a_2695222[i] != b_2695223[i]) return false;
    return true;
  

  
}
var ConstSet60 = setConstr(39, 34);
var ConstSet61 = setConstr(34, 39, 96, 61, 60, 62, 32, 0, 9, 10, 12, 12);
var ConstSet62 = setConstr(2);
var ConstSet63 = setConstr(2);
var ConstSet64 = setConstr(2);
var ConstSet65 = setConstr([48, 57]);
var ConstSet66 = setConstr(0, 125);
var ConstSet67 = setConstr([48, 57]);
var ConstSet68 = setConstr([65, 90]);
var ConstSet69 = setConstr([97, 122], [65, 90], [48, 57], [128, 255], 95);
var ConstSet70 = setConstr(2);
var ConstSet71 = setConstr(0, 1, 5, 3, 4);
var ConstSet72 = setConstr(0, 1, 5, 3, 4);
    var errorMessages_12461072 = [makeNimstrLit("no error"), makeNimstrLit("\']]>\' expected"), makeNimstrLit("name expected"), makeNimstrLit("\';\' expected"), makeNimstrLit("\'?>\' expected"), makeNimstrLit("\'>\' expected"), makeNimstrLit("\'=\' expected"), makeNimstrLit("\'\"\' or \"\'\" expected"), makeNimstrLit("\'-->\' expected"), makeNimstrLit("attribute value expected")];
var ConstSet73 = setConstr(2);
var ConstSet74 = setConstr([65, 90]);
var ConstSet75 = setConstr([65, 90]);
var ConstSet76 = setConstr(2);
var ConstSet77 = setConstr(0, 1, 5, 3, 4);
var ConstSet78 = setConstr(0, 1, 5, 3, 4);
var ConstSet79 = setConstr(true);
var ConstSet80 = setConstr(true);
var ConstSet81 = setConstr(true);
var ConstSet82 = setConstr(true);
var ConstSet83 = setConstr([65, 90], [97, 122]);
var ConstSet84 = setConstr([48, 57]);
var ConstSet85 = setConstr(true);
var ConstSet86 = setConstr(true);
var ConstSet87 = setConstr(true);
var ConstSet88 = setConstr(40, 91, 123, 58);
var ConstSet89 = setConstr([97, 122], [65, 90], [48, 57], 45, 95, 58, 46);
var ConstSet90 = setConstr(true);
var ConstSet91 = setConstr(true);
var ConstSet92 = setConstr(true);
var ConstSet93 = setConstr(true);
var ConstSet94 = setConstr([48, 57]);
var ConstSet95 = setConstr(40, 91, 123, 58);
var ConstSet96 = setConstr(true);
var ConstSet97 = setConstr(true);
var ConstSet98 = setConstr(9, [11, 12], 32);
var ConstSet99 = setConstr(9, 10, 12);
var ConstSet100 = setConstr(true);
var ConstSet101 = setConstr(true);
var ConstSet102 = setConstr(40, 91, 123, 58);
var ConstSet103 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet104 = setConstr(40, 91, 123, 58);
var ConstSet105 = setConstr(true);
var ConstSet106 = setConstr([48, 57]);
var ConstSet107 = setConstr(40, 91, 123, 58);
var ConstSet108 = setConstr(40, 91, 123, 58);
var ConstSet109 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet110 = setConstr(true);
function reprEnum(e_2780272, typ_2780273) {
  var result_2780274 = [];

    var tmp_2780275 = false;
    var item_2780276 = typ_2780273.node.sons[e_2780272];
    tmp_2780275 = item_2780276 !== undefined
    if (tmp_2780275) {
    result_2780274 = nimCopy(null, makeNimstrLit(item_2780276.name), NTI2421013);
    }
    else {
      result_2780274 = nimCopy(null, (cstrToNimstr((e_2780272)+"") || []).concat(makeNimstrLit(" (invalid data!)") || []), NTI2421013);
    }
    

  return result_2780274;

}
var ConstSet111 = setConstr(true);
var ConstSet112 = setConstr(true);
var ConstSet113 = setConstr(true);
var ConstSet114 = setConstr(true);
var ConstSet115 = setConstr(true);
if (!Math.trunc) {
  Math.trunc = function(v) {
    v = +v;
    if (!isFinite(v)) return v;
    return (v - v % 1) || (v < 0 ? -0 : v === 0 ? v : 0);
  };
}

var objectID_11605031 = [0];
function input_13970015() {
  var result_13970017 = null;

    result_13970017 = document.getElementById("input").value;

  return result_13970017;

}
function newMarggersParser_11776616(text_11776618) {
  var result_11776619 = null;

    result_11776619 = {str: text_11776618, pos: 0, topLevelLast: null, linkReferrers: ({data: [], counter: 0}), inlineHtmlHandler: null, codeBlockLanguageHandler: null, setLinkHandler: null};

  return result_11776619;

}
function paragraphIfText_11776776(elem_11776778) {
    var Tmp1;

  var result_11776779 = null;

    if (elem_11776778.isText) {
    Tmp1 = {isText: false, tag: 1, content: [elem_11776778], str: null, attrs: ({data: [], counter: 0, first: 0, last: 0})};
    }
    else {
    Tmp1 = elem_11776778;
    }
    
    result_11776779 = Tmp1;

  return result_11776779;

}
function isFatPointer_2700401(ti_2700403) {
  var result_2700404 = false;

  BeforeRet: do {
    result_2700404 = !((ConstSet3[ti_2700403.base.kind] != undefined));
    break BeforeRet;
  } while (false);

  return result_2700404;

}
function nimCopyAux(dest_2705028, src_2705029, n_2705031) {
    switch (n_2705031.kind) {
    case 0:
      break;
    case 1:
            dest_2705028[n_2705031.offset] = nimCopy(dest_2705028[n_2705031.offset], src_2705029[n_2705031.offset], n_2705031.typ);
    
      break;
    case 2:
          for (var i = 0; i < n_2705031.sons.length; i++) {
      nimCopyAux(dest_2705028, src_2705029, n_2705031.sons[i]);
    }
    
      break;
    case 3:
            dest_2705028[n_2705031.offset] = nimCopy(dest_2705028[n_2705031.offset], src_2705029[n_2705031.offset], n_2705031.typ);
      for (var i = 0; i < n_2705031.sons.length; ++i) {
        nimCopyAux(dest_2705028, src_2705029, n_2705031.sons[i][1]);
      }
    
      break;
    }

  
}
function add_2592211(x_2592214, x_2592214_Idx, y_2592215) {
          if (x_2592214[x_2592214_Idx] === null) { x_2592214[x_2592214_Idx] = []; }
      var off = x_2592214[x_2592214_Idx].length;
      x_2592214[x_2592214_Idx].length += y_2592215.length;
      for (var i = 0; i < y_2592215.length; ++i) {
        x_2592214[x_2592214_Idx][off+i] = y_2592215.charCodeAt(i);
      }
    

  
}
function newSeq_2690128(len_2690131) {
  var result_2690133 = [];

    result_2690133 = new Array(len_2690131); for (var i=0;i<len_2690131;++i) {result_2690133[i]=null;}
  return result_2690133;

}
function unhandledException(e_2650059) {
    var buf_2650060 = [[]];
    if (!(((e_2650059.message).length == 0))) {
    buf_2650060[0].push.apply(buf_2650060[0], makeNimstrLit("Error: unhandled exception: "));;
    buf_2650060[0].push.apply(buf_2650060[0], e_2650059.message);;
    }
    else {
    buf_2650060[0].push.apply(buf_2650060[0], makeNimstrLit("Error: unhandled exception"));;
    }
    
    buf_2650060[0].push.apply(buf_2650060[0], makeNimstrLit(" ["));;
    add_2592211(buf_2650060, 0, e_2650059.name);
    buf_2650060[0].push.apply(buf_2650060[0], makeNimstrLit("]\x0A"));;
    var cbuf_2655201 = toJSStr(buf_2650060[0]);
    framePtr = null;
      if (typeof(Error) !== "undefined") {
    throw new Error(cbuf_2655201);
  }
  else {
    throw cbuf_2655201;
  }
  

  
}
function anyNext_11985020(parser_11985022, offset_11985023) {
  var result_11985024 = false;

    result_11985024 = ((parser_11985022.pos + offset_11985023) < (parser_11985022.str).length);

  return result_11985024;

}
function peekMatch_11995014(parser_11995016, pat_11995018, offset_11995019) {
    var Tmp1;

  var result_11995020 = false;

    if (!anyNext_11985020(parser_11995016, offset_11995019)) Tmp1 = false; else {      Tmp1 = (pat_11995018[parser_11995016.str.charCodeAt((parser_11995016.pos + offset_11995019))] != undefined);    }    result_11995020 = Tmp1;

  return result_11995020;

}
function nextMatch_12045111(parser_12045113, parser_12045113_Idx, pat_12045115, offset_12045116) {
  var result_12045117 = false;

    result_12045117 = peekMatch_11995014(parser_12045113[parser_12045113_Idx], pat_12045115, offset_12045116);
    if (result_12045117) {
    parser_12045113[parser_12045113_Idx].pos += (offset_12045116 + 1);
    }
    

  return result_12045117;

}
function newElem_11776712(tag_11776714, content_11776731) {
  var result_11776732 = null;

    result_11776732 = {isText: false, tag: tag_11776714, content: nimCopy(null, content_11776731, NTI11776715), str: null, attrs: ({data: [], counter: 0, first: 0, last: 0})};

  return result_11776732;

}
function newStr_11776663(s_11776665) {
  var result_11776666 = null;

    result_11776666 = {isText: true, str: s_11776665, tag: 0, attrs: ({data: [], counter: 0, first: 0, last: 0}), content: []};

  return result_11776666;

}
function HEX5BHEX5D_11776088(c_11776090, ind_11776095) {
  var result_11776096 = null;

    result_11776096 = c_11776090.substring(ind_11776095.a, (ind_11776095.b + 1));

  return result_11776096;

}
function HEX2EHEX2E_4625220(a_4625225, b_4625227) {
  var result_4625229 = ({a: 0, b: 0});

    nimCopy(result_4625229, {a: a_4625225, b: b_4625227}, NTI3520020);

  return result_4625229;

}
function peekMatch_12025020(parser_12025022, pat_12025023, offset_12025024) {
    var Tmp1;

  var result_12025025 = false;

    if (!anyNext_11985020(parser_12025022, ((offset_12025024 + (pat_12025023).length) - 1))) Tmp1 = false; else {      Tmp1 = (HEX5BHEX5D_11776088(parser_12025022.str, HEX2EHEX2E_4625220((parser_12025022.pos + offset_12025024), (((parser_12025022.pos + offset_12025024) + (pat_12025023).length) - 1))) == toJSStr(pat_12025023));    }    result_12025025 = Tmp1;

  return result_12025025;

}
function nextMatch_12045190(parser_12045192, parser_12045192_Idx, pat_12045193, offset_12045194) {
  var result_12045195 = false;

    result_12045195 = peekMatch_12025020(parser_12045192[parser_12045192_Idx], pat_12045193, offset_12045194);
    if (result_12045195) {
    parser_12045192[parser_12045192_Idx].pos += (offset_12045194 + (pat_12045193).length);
    }
    

  return result_12045195;

}
function anyPrev_11985038(parser_11985040, offset_11985041) {
  var result_11985042 = false;

    result_11985042 = (0 <= ((parser_11985040.pos + offset_11985041) - 1));

  return result_11985042;

}
function peekPrevMatch_12040001(parser_12040004, pat_12040005, offset_12040006) {
  var result_12040007 = false;

    result_12040007 = (anyPrev_11985038(parser_12040004, offset_12040006) && peekMatch_11995014(parser_12040004, pat_12040005, (offset_12040006 - 1)));

  return result_12040007;

}
function prevWhitespace_12035288(parser_12035290, offset_12035291) {
  var result_12035292 = false;

    result_12035292 = (!(anyPrev_11985038(parser_12035290, offset_12035291)) || peekPrevMatch_12040001(parser_12035290, ConstSet6, offset_12035291));

  return result_12035292;

}
function nextWhitespace_12040034(parser_12040036, offset_12040037) {
  var result_12040038 = false;

    result_12040038 = (!(anyNext_11985020(parser_12040036, offset_12040037)) || peekMatch_11995014(parser_12040036, ConstSet7, (offset_12040037 + 1)));

  return result_12040038;

}
function surroundedWhitespace_12045014(parser_12045016, offset_12045017) {
  var result_12045018 = false;

    result_12045018 = (prevWhitespace_12035288(parser_12045016, offset_12045017) && nextWhitespace_12040034(parser_12045016, offset_12045017));

  return result_12045018;

}
function add_13290003(x_13290006, x_13290006_Idx) {
    x_13290006[x_13290006_Idx] += "*";;

  
}
function onlyNextWhitespace_12045050(parser_12045052, offset_12045053) {
  var result_12045054 = false;

    result_12045054 = (!(prevWhitespace_12035288(parser_12045052, offset_12045053)) && nextWhitespace_12040034(parser_12045052, offset_12045053));

  return result_12045054;

}
function add_13305003(x_13305006, x_13305006_Idx) {
    x_13305006[x_13305006_Idx] += "_";;

  
}
function peekMatch_11990024(parser_11990026, pat_11990027, offset_11990028) {
    var Tmp1;

  var result_11990029 = false;

    if (!anyNext_11985020(parser_11990026, offset_11990028)) Tmp1 = false; else {      Tmp1 = (parser_11990026.str.charCodeAt((parser_11990026.pos + offset_11990028)) == pat_11990027);    }    result_11990029 = Tmp1;

  return result_11990029;

}
function nextMatch_12045086(parser_12045088, parser_12045088_Idx, pat_12045089, offset_12045090) {
  var result_12045091 = false;

    result_12045091 = peekMatch_11990024(parser_12045088[parser_12045088_Idx], pat_12045089, offset_12045090);
    if (result_12045091) {
    parser_12045088[parser_12045088_Idx].pos += (offset_12045090 + 1);
    }
    

  return result_12045091;

}
function add_11776050(x_11776053, x_11776053_Idx, y_11776054) {
    x_11776053[x_11776053_Idx] += String.fromCharCode(y_11776054);;

  
}
function peekMatch_12005020(parser_12005022, pat_12005023, offset_12005024, len_12005025) {
    var Tmp1;

  var result_12005026 = false;

  BeforeRet: do {
    if (anyNext_11985020(parser_12005022, ((offset_12005024 + len_12005025) - 1))) {
    L2: do {
      var i_12005034 = 0;
      var colontmp__13970174 = 0;
      colontmp__13970174 = len_12005025;
      var i_13970175 = 0;
      L3: do {
          L4: while (true) {
          if (!(i_13970175 < colontmp__13970174)) break L4;
            i_12005034 = i_13970175;
            if (!((parser_12005022.str.charCodeAt((parser_12005022.pos + (offset_12005024 + i_12005034))) == pat_12005023))) {
            result_12005026 = false;
            break BeforeRet;
            }
            
            i_13970175 += 1;
          }
      } while(false);
    } while(false);
    Tmp1 = true;
    }
    else {
    Tmp1 = false;
    }
    
    result_12005026 = Tmp1;
  } while (false);

  return result_12005026;

}
function nextMatch_12045137(parser_12045139, parser_12045139_Idx, pat_12045140, offset_12045141, len_12045142) {
  var result_12045143 = false;

    result_12045143 = peekMatch_12005020(parser_12045139[parser_12045139_Idx], pat_12045140, offset_12045141, len_12045142);
    if (result_12045143) {
    parser_12045139[parser_12045139_Idx].pos += (offset_12045141 + len_12045142);
    }
    

  return result_12045143;

}
function parseCodeBlockStr_13185021(parser_13185023, parser_13185023_Idx, delimChar_13185024) {
              var Tmp10;

  var result_13185028 = {Field0: null, Field1: null};

  BeforeRet: do {
    var colontmp__13970166 = "";
    var colontmp__13970167 = "";
    nimCopy(result_13185028, {Field0: colontmp__13970166, Field1: colontmp__13970167}, NTI13185025);
    var delimLen_13185031 = 3;
    L1: do {
        L2: while (true) {
        if (!nextMatch_12045086(parser_13185023, parser_13185023_Idx, delimChar_13185024, 0)) break L2;
          delimLen_13185031 += 1;
        }
    } while(false);
    L3: do {
        L4: while (true) {
        if (!nextMatch_12045111(parser_13185023, parser_13185023_Idx, ConstSet11, 0)) break L4;
        }
    } while(false);
    if (!((parser_13185023[parser_13185023_Idx].codeBlockLanguageHandler == null))) {
    L5: do {
        L6: while (true) {
          var ch_13190001 = parser_13185023[parser_13185023_Idx].str.charCodeAt((parser_13185023[parser_13185023_Idx].pos + 0));
        if (!nextMatch_12045111(parser_13185023, parser_13185023_Idx, ConstSet12, 0)) break L6;
          add_11776050(result_13185028, "Field0", ch_13190001);
        }
    } while(false);
    }
    
    L7: do {
      var ch_13190003 = 0;
      L8: do {
          L9: while (true) {
          if (!(parser_13185023[parser_13185023_Idx].pos < (parser_13185023[parser_13185023_Idx].str).length)) break L9;
            ch_13190003 = parser_13185023[parser_13185023_Idx].str.charCodeAt((parser_13185023[parser_13185023_Idx].pos + 0));
            if (nextMatch_12045137(parser_13185023, parser_13185023_Idx, delimChar_13185024, 0, delimLen_13185031)) {
            parser_13185023[parser_13185023_Idx].pos -= 1;
            break BeforeRet;
            }
            else {
              switch (ch_13190003) {
              case 62:
                Tmp10 = "&gt;";
                break;
              case 60:
                Tmp10 = "&lt;";
                break;
              case 38:
                Tmp10 = "&amp;";
                break;
              default: 
                Tmp10 = String.fromCharCode(ch_13190003);
                break;
              }
            result_13185028.Field1 += Tmp10;;
            }
            
            parser_13185023[parser_13185023_Idx].pos += 1;
          }
      } while(false);
    } while(false);
  } while (false);

  return result_13185028;

}
function parseCodeBlock_13195014(parser_13195016, parser_13195016_Idx, delimChar_13195017) {
      var Tmp1;

  var result_13195018 = null;

    var str_13195019 = parseCodeBlockStr_13185021(parser_13195016, parser_13195016_Idx, delimChar_13195017);
    result_13195018 = newElem_11776712(17, [newStr_11776663(str_13195019.Field1)]);
      if (!!((parser_13195016[parser_13195016_Idx].codeBlockLanguageHandler == null))) Tmp1 = false; else {        Tmp1 = !(((str_13195019.Field0).length == 0));      }    if (Tmp1) {
    parser_13195016[parser_13195016_Idx].codeBlockLanguageHandler(result_13195018, str_13195019.Field0);
    }
    

  return result_13195018;

}
function add_11950733(x_11950738, x_11950738_Idx, y_11950740) {
    var Tmp1;

    var xl_11950746 = (x_11950738[x_11950738_Idx]).length;
    if (x_11950738[x_11950738_Idx].length < (Tmp1 = (xl_11950746 + (y_11950740).length), Tmp1)) { for (var i=x_11950738[x_11950738_Idx].length;i<Tmp1;++i) x_11950738[x_11950738_Idx].push(null); }
               else { x_11950738[x_11950738_Idx].length = Tmp1; };
    L2: do {
      var i_11950771 = 0;
      var colontmp__13970179 = 0;
      colontmp__13970179 = ((y_11950740).length-1);
      var res_13970180 = 0;
      L3: do {
          L4: while (true) {
          if (!(res_13970180 <= colontmp__13970179)) break L4;
            i_11950771 = res_13970180;
            x_11950738[x_11950738_Idx][(xl_11950746 + i_11950771)] = y_11950740[i_11950771];
            res_13970180 += 1;
          }
      } while(false);
    } while(false);

  
}
function parseLink_13475033(parser_13475035, parser_13475035_Idx, failOnNewline_13475036) {
                var Tmp6;

  var result_13475041 = {Field0: false, Field1: [], Field2: []};

  BeforeRet: do {
    var state_13475048 = 0;
    var delim_13475049 = 0;
    var escaped_13475050 = false;
    var openparens_13475052 = 1;
    L1: do {
        L2: while (true) {
        if (!nextMatch_12045111(parser_13475035, parser_13475035_Idx, ConstSet24, 0)) break L2;
        }
    } while(false);
    L3: do {
      var ch_13475062 = 0;
      L4: do {
          L5: while (true) {
          if (!(parser_13475035[parser_13475035_Idx].pos < (parser_13475035[parser_13475035_Idx].str).length)) break L5;
            ch_13475062 = parser_13475035[parser_13475035_Idx].str.charCodeAt((parser_13475035[parser_13475035_Idx].pos + 0));
            switch (state_13475048) {
            case 0:
              switch (ch_13475062) {
              case 9:
              case 11:
              case 12:
              case 13:
              case 32:
                state_13475048 = 1;
                break;
              case 10:
                result_13475041.Field0 = failOnNewline_13475036;
                break BeforeRet;
                break;
              case 40:
                openparens_13475052 += 1;
                addChar(result_13475041.Field1, 40);;
                break;
              case 41:
                openparens_13475052 -= 1;
                if ((openparens_13475052 == 0)) {
                result_13475041.Field0 = true;
                break BeforeRet;
                }
                else {
                addChar(result_13475041.Field1, 41);;
                }
                
                break;
              default: 
                addChar(result_13475041.Field1, ch_13475062);;
                break;
              }
              break;
            case 1:
              switch (ch_13475062) {
              case 34:
              case 39:
              case 60:
                state_13475048 = 2;
                if ((ch_13475062 == 60)) {
                Tmp6 = 62;
                }
                else {
                Tmp6 = ch_13475062;
                }
                
                delim_13475049 = Tmp6;
                break;
              case 41:
                result_13475041.Field0 = true;
                break BeforeRet;
                break;
              case 10:
                result_13475041.Field0 = failOnNewline_13475036;
                break BeforeRet;
                break;
              case 9:
              case 11:
              case 12:
              case 13:
              case 32:
                break;
              default: 
                parser_13475035[parser_13475035_Idx].pos -= 1;
                state_13475048 = 2;
                delim_13475049 = 41;
                break;
              }
              break;
            case 2:
              if (!(escaped_13475050)) {
              if ((ch_13475062 == 92)) {
              escaped_13475050 = true;
              }
              else {
              if ((ch_13475062 == delim_13475049)) {
              if ((delim_13475049 == 41)) {
              parser_13475035[parser_13475035_Idx].pos -= 1;
              }
              
              state_13475048 = 3;
              }
              else {
              if ((ch_13475062 == 10)) {
              result_13475041.Field0 = failOnNewline_13475036;
              break BeforeRet;
              }
              else {
              addChar(result_13475041.Field2, ch_13475062);;
              }
              }}
              }
              else {
                if (!((setConstr(92, delim_13475049)[ch_13475062] != undefined))) {
                addChar(result_13475041.Field2, 92);;
                }
                
                addChar(result_13475041.Field2, ch_13475062);;
                escaped_13475050 = false;
              }
              
              break;
            case 3:
              switch (ch_13475062) {
              case 41:
                result_13475041.Field0 = true;
                break BeforeRet;
                break;
              case 10:
                result_13475041.Field0 = failOnNewline_13475036;
                break BeforeRet;
                break;
              case 9:
              case 11:
              case 12:
              case 13:
              case 32:
                break;
              default: 
                result_13475041.Field0 = false;
                break BeforeRet;
                break;
              }
              break;
            }
            parser_13475035[parser_13475035_Idx].pos += 1;
          }
      } while(false);
    } while(false);
    result_13475041.Field0 = failOnNewline_13475036;
  } while (false);

  return result_13475041;

}
function nextPowerOfTwo_3715014(x_3715016) {
  var result_3715017 = 0;

    result_3715017 = (x_3715016 - 1);
    result_3715017 = (result_3715017 | (result_3715017 >> 16));
    result_3715017 = (result_3715017 | (result_3715017 >> 8));
    result_3715017 = (result_3715017 | (result_3715017 >> 4));
    result_3715017 = (result_3715017 | (result_3715017 >> 2));
    result_3715017 = (result_3715017 | (result_3715017 >> 1));
    result_3715017 += (1 + ((x_3715016 <= 0) ? 1:0));

  return result_3715017;

}
function slotsNeeded_11680048(count_11680050) {
  var result_11680051 = 0;

    result_11680051 = nextPowerOfTwo_3715014((Math.trunc((count_11680050 * 3) / 2) + 4));

  return result_11680051;

}
function imul_11616082(a_11616084, b_11616085) {
  var result_11616086 = 0;

    var mask_11616087 = 65535;
    var aHi_11616096 = (((a_11616084 >>> 0) >>> 16) & mask_11616087);
    var aLo_11616097 = (a_11616084 & mask_11616087);
    var bHi_11616106 = (((b_11616085 >>> 0) >>> 16) & mask_11616087);
    var bLo_11616107 = (b_11616085 & mask_11616087);
    result_11616086 = ((((aLo_11616097 * bLo_11616107) >>> 0) + (((((aHi_11616096 * bLo_11616107) >>> 0) + ((aLo_11616097 * bHi_11616106) >>> 0)) >>> 0) << 16)) >>> 0);

  return result_11616086;

}
function rotl32_11616201(x_11616203, r_11616204) {
  var result_11616205 = 0;

    result_11616205 = ((x_11616203 << r_11616204) | ((x_11616203 >>> 0) >>> (32 - r_11616204)));

  return result_11616205;

}
function murmurHash_11616229(x_11616232) {
  var result_11616233 = 0;

  BeforeRet: do {
    var size_11616243 = (x_11616232).length;
    var stepSize_11616245 = 4;
    var n_11616246 = Math.trunc(size_11616243 / stepSize_11616245);
    var h1_11616247 = 0;
    var i_11616249 = 0;
    L1: do {
        L2: while (true) {
        if (!(i_11616249 < (n_11616246 * stepSize_11616245))) break L2;
          var k1_11616250 = 0;
          var j_11616251 = stepSize_11616245;
          L3: do {
              L4: while (true) {
              if (!(0 < j_11616251)) break L4;
                j_11616251 -= 1;
                k1_11616250 = ((k1_11616250 << 8) | x_11616232[(i_11616249 + j_11616251)]);
              }
          } while(false);
          i_11616249 += stepSize_11616245;
          k1_11616250 = imul_11616082(k1_11616250, 3432918353);
          k1_11616250 = rotl32_11616201(k1_11616250, 15);
          k1_11616250 = imul_11616082(k1_11616250, 461845907);
          h1_11616247 = (h1_11616247 ^ k1_11616250);
          h1_11616247 = rotl32_11616201(h1_11616247, 13);
          h1_11616247 = ((((h1_11616247 * 5) >>> 0) + 3864292196) >>> 0);
        }
    } while(false);
    var k1_11620207 = 0;
    var rem_11620208 = Math.trunc(size_11616243 % stepSize_11616245);
    L5: do {
        L6: while (true) {
        if (!(0 < rem_11620208)) break L6;
          rem_11620208 -= 1;
          k1_11620207 = ((k1_11620207 << 8) | x_11616232[(i_11616249 + rem_11620208)]);
        }
    } while(false);
    k1_11620207 = imul_11616082(k1_11620207, 3432918353);
    k1_11620207 = rotl32_11616201(k1_11620207, 15);
    k1_11620207 = imul_11616082(k1_11620207, 461845907);
    h1_11616247 = (h1_11616247 ^ k1_11620207);
    h1_11616247 = (h1_11616247 ^ size_11616243);
    h1_11616247 = (h1_11616247 ^ ((h1_11616247 >>> 0) >>> 16));
    h1_11616247 = imul_11616082(h1_11616247, 2246822507);
    h1_11616247 = (h1_11616247 ^ ((h1_11616247 >>> 0) >>> 13));
    h1_11616247 = imul_11616082(h1_11616247, 3266489909);
    h1_11616247 = (h1_11616247 ^ ((h1_11616247 >>> 0) >>> 16));
    result_11616233 = (h1_11616247|0);
    break BeforeRet;
  } while (false);

  return result_11616233;

}
function hash_11655814(x_11655816) {
  var result_11655817 = 0;

    var xx_11656201 = cstrToNimstr(x_11655816);
    result_11655817 = murmurHash_11616229((xx_11656201.slice(0, ((xx_11656201).length-1)+1)));

  return result_11655817;

}
function isFilled_11676218(hcode_11676220) {
  var result_11676221 = false;

    result_11676221 = !((hcode_11676220 == 0));

  return result_11676221;

}
function nextTry_11680014(h_11680016, maxHash_11680017) {
  var result_11680018 = 0;

    result_11680018 = ((h_11680016 + 1) & maxHash_11680017);

  return result_11680018;

}
function rawGet_11810621(t_11810626, key_11810627, hc_11810628, hc_11810628_Idx) {
            var Tmp3;

  var result_11810629 = 0;

  BeforeRet: do {
    hc_11810628[hc_11810628_Idx] = hash_11655814(key_11810627);
    if ((hc_11810628[hc_11810628_Idx] == 0)) {
    hc_11810628[hc_11810628_Idx] = 314159265;
    }
    
    if (((t_11810626.data).length == 0)) {
    result_11810629 = -1;
    break BeforeRet;
    }
    
    var h_11820138 = (hc_11810628[hc_11810628_Idx] & ((t_11810626.data).length-1));
    L1: do {
        L2: while (true) {
        if (!isFilled_11676218(t_11810626.data[h_11820138].Field0)) break L2;
            if (!(t_11810626.data[h_11820138].Field0 == hc_11810628[hc_11810628_Idx])) Tmp3 = false; else {              Tmp3 = (t_11810626.data[h_11820138].Field2 == key_11810627);            }          if (Tmp3) {
          result_11810629 = h_11820138;
          break BeforeRet;
          }
          
          h_11820138 = nextTry_11680014(h_11820138, ((t_11810626.data).length-1));
        }
    } while(false);
    result_11810629 = (-1 - h_11820138);
  } while (false);

  return result_11810629;

}
function mustRehash_11835601(t_11835604) {
  var result_11835605 = false;

    result_11835605 = ((((t_11835604.data).length * 2) < (t_11835604.counter * 3)) || (((t_11835604.data).length - t_11835604.counter) < 4));

  return result_11835605;

}
function rawInsert_11861317(t_11861323, data_11861326, data_11861326_Idx, key_11861327, val_11861329, hc_11861330, h_11861331) {
    data_11861326[data_11861326_Idx][h_11861331].Field2 = key_11861327;
    data_11861326[data_11861326_Idx][h_11861331].Field3 = val_11861329;
    data_11861326[data_11861326_Idx][h_11861331].Field0 = hc_11861330;
    data_11861326[data_11861326_Idx][h_11861331].Field1 = -1;
    if ((t_11861323.first < 0)) {
    t_11861323.first = h_11861331;
    }
    
    if ((0 <= t_11861323.last)) {
    data_11861326[data_11861326_Idx][t_11861323.last].Field1 = h_11861331;
    }
    
    t_11861323.last = h_11861331;

  
}
function enlarge_11860180(t_11860186) {
          var Tmp6;
          var Tmp7;

    var n_11860194 = [];
    n_11860194 = new Array(((t_11860186.data).length * 2)); for (var i=0;i<((t_11860186.data).length * 2);++i) {n_11860194[i]={Field0: 0, Field1: 0, Field2: null, Field3: null};}    var h_11860333 = t_11860186.first;
    t_11860186.first = -1;
    t_11860186.last = -1;
    var Tmp1 = t_11860186.data; t_11860186.data = n_11860194; n_11860194 = Tmp1;    L2: do {
        L3: while (true) {
        if (!(0 <= h_11860333)) break L3;
          var nxt_11860489 = n_11860194[h_11860333].Field1;
          var eh_11860638 = n_11860194[h_11860333].Field0;
          if (isFilled_11676218(eh_11860638)) {
          var j_11860645 = (eh_11860638 & ((t_11860186.data).length-1));
          L4: do {
              L5: while (true) {
              if (!isFilled_11676218(t_11860186.data[j_11860645].Field0)) break L5;
                j_11860645 = nextTry_11680014(j_11860645, ((t_11860186.data).length-1));
              }
          } while(false);
          Tmp6 = n_11860194[h_11860333].Field2;
          n_11860194[h_11860333].Field2 = genericReset(n_11860194[h_11860333].Field2, NTI2421015);
          Tmp7 = n_11860194[h_11860333].Field3;
          n_11860194[h_11860333].Field3 = genericReset(n_11860194[h_11860333].Field3, NTI2421015);
          rawInsert_11861317(t_11860186, t_11860186, "data", Tmp6, Tmp7, n_11860194[h_11860333].Field0, j_11860645);
          }
          
          h_11860333 = nxt_11860489;
        }
    } while(false);

  
}
function rawGetKnownHC_11862133(t_11862138, key_11862139, hc_11862140) {
  var result_11862141 = 0;

  BeforeRet: do {
    if (((t_11862138.data).length == 0)) {
    result_11862141 = -1;
    break BeforeRet;
    }
    
    var h_11865138 = (hc_11862140 & ((t_11862138.data).length-1));
    L1: do {
        L2: while (true) {
        if (!isFilled_11676218(t_11862138.data[h_11865138].Field0)) break L2;
          if (((t_11862138.data[h_11865138].Field0 == hc_11862140) && (t_11862138.data[h_11865138].Field2 == key_11862139))) {
          result_11862141 = h_11865138;
          break BeforeRet;
          }
          
          h_11865138 = nextTry_11680014(h_11865138, ((t_11862138.data).length-1));
        }
    } while(false);
    result_11862141 = (-1 - h_11865138);
  } while (false);

  return result_11862141;

}
function HEX5BHEX5DHEX3D_11795186(t_11795192, key_11795193, val_11795195) {
    if (((t_11795192.data).length == 0)) {
    var correctSizeHEX60gensym5_11805001 = slotsNeeded_11680048(32);
    t_11795192.counter = 0;
    t_11795192.data = new Array(correctSizeHEX60gensym5_11805001); for (var i=0;i<correctSizeHEX60gensym5_11805001;++i) {t_11795192.data[i]={Field0: 0, Field1: 0, Field2: null, Field3: null};}    t_11795192.first = -1;
    t_11795192.last = -1;
    }
    
    var hc_11810601 = [0];
    var index_11820603 = rawGet_11810621(t_11795192, key_11795193, hc_11810601, 0);
    if ((0 <= index_11820603)) {
    t_11795192.data[index_11820603].Field3 = val_11795195;
    }
    else {
      if (((t_11795192.data).length == 0)) {
      var correctSizeHEX60gensym10_11830001 = slotsNeeded_11680048(32);
      t_11795192.counter = 0;
      t_11795192.data = new Array(correctSizeHEX60gensym10_11830001); for (var i=0;i<correctSizeHEX60gensym10_11830001;++i) {t_11795192.data[i]={Field0: 0, Field1: 0, Field2: null, Field3: null};}      t_11795192.first = -1;
      t_11795192.last = -1;
      }
      
      if (mustRehash_11835601(t_11795192)) {
      enlarge_11860180(t_11795192);
      index_11820603 = rawGetKnownHC_11862133(t_11795192, key_11795193, hc_11810601[0]);
      }
      
      index_11820603 = (-1 - index_11820603);
      rawInsert_11861317(t_11795192, t_11795192, "data", key_11795193, val_11795195, hc_11810601[0], index_11820603);
      t_11795192.counter += 1;
    }
    

  
}
function attr_11795071(elem_11795073, key_11795074, val_11795075) {
    var Tmp1;

    var Tmp1 = elem_11795073;
    if (ConstSet27[Tmp1.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'attrs\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    HEX5BHEX5DHEX3D_11795186(Tmp1.attrs, key_11795074, val_11795075);

  
}
function attrEscaped_11865682(elem_11865684, key_11865685, val_11865686) {
    var esc_11865801 = [""];
    L1: do {
      var v_11865802 = 0;
      var i_13970194 = 0;
      var L_13970195 = (val_11865686).length;
      L2: do {
          L3: while (true) {
          if (!(i_13970194 < L_13970195)) break L3;
            v_11865802 = val_11865686.charCodeAt(i_13970194);
            if ((v_11865802 == 34)) {
            esc_11865801[0] += "&quot;";;
            }
            else {
            add_11776050(esc_11865801, 0, v_11865802);
            }
            
            i_13970194 += 1;
          }
      } while(false);
    } while(false);
    attr_11795071(elem_11865684, key_11865685, esc_11865801[0]);

  
}
function find_11895134(a_11895138, item_11895139) {
  var result_11895140 = 0;

  BeforeRet: do {
    result_11895140 = 0;
    L1: do {
      var i_11895173 = null;
      var i_11895173_Idx = 0;
      var i_13970215 = 0;
      L2: do {
          L3: while (true) {
          if (!(i_13970215 < (a_11895138).length)) break L3;
            i_11895173 = a_11895138; i_11895173_Idx = i_13970215;
            if ((i_11895173[i_11895173_Idx] == item_11895139)) {
            break BeforeRet;
            }
            
            result_11895140 += 1;
            i_13970215 += 1;
          }
      } while(false);
    } while(false);
    result_11895140 = -1;
  } while (false);

  return result_11895140;

}
function contains_11895127(a_11895131, item_11895132) {
  var result_11895133 = false;

  BeforeRet: do {
    result_11895133 = (0 <= find_11895134(a_11895131, item_11895132));
    break BeforeRet;
  } while (false);

  return result_11895133;

}
function HEX5BHEX5D_11776135(c_11776137, ind_11776150) {
  var result_11776151 = null;

    result_11776151 = c_11776137.substring(((c_11776137).length - ind_11776150.a), (((c_11776137).length - ind_11776150.b) + 1));

  return result_11776151;

}
function HEX2EHEX2E_11895001(a_11895006, b_11895008) {
  var result_11895010 = ({a: 0, b: 0});

    nimCopy(result_11895010, {a: a_11895006, b: b_11895008}, NTI11776147);

  return result_11895010;

}
function del_11866111(t_11866117, key_11866118) {
            var Tmp4;
            var Tmp5;

  BeforeRet: do {
    if ((t_11866117.counter == 0)) {
    break BeforeRet;
    }
    
    var n_11866126 = [];
    n_11866126 = new Array((t_11866117.data).length); for (var i=0;i<(t_11866117.data).length;++i) {n_11866126[i]={Field0: 0, Field1: 0, Field2: null, Field3: null};}    var h_11866265 = t_11866117.first;
    t_11866117.first = -1;
    t_11866117.last = -1;
    var Tmp1 = t_11866117.data; t_11866117.data = n_11866126; n_11866126 = Tmp1;    var resHEX60gensym18_11870001 = 0;
    resHEX60gensym18_11870001 = hash_11655814(key_11866118);
    if ((resHEX60gensym18_11870001 == 0)) {
    resHEX60gensym18_11870001 = 314159265;
    }
    
    var hc_11875002 = resHEX60gensym18_11870001;
    L2: do {
        L3: while (true) {
        if (!(0 <= h_11866265)) break L3;
          var nxt_11875151 = n_11866126[h_11866265].Field1;
          if (isFilled_11676218(n_11866126[h_11866265].Field0)) {
          if (((n_11866126[h_11866265].Field0 == hc_11875002) && (n_11866126[h_11866265].Field2 == key_11866118))) {
          t_11866117.counter -= 1;
          }
          else {
            var j_11875925 = (-1 - rawGetKnownHC_11862133(t_11866117, n_11866126[h_11866265].Field2, n_11866126[h_11866265].Field0));
            Tmp4 = n_11866126[h_11866265].Field2;
            n_11866126[h_11866265].Field2 = genericReset(n_11866126[h_11866265].Field2, NTI2421015);
            Tmp5 = n_11866126[h_11866265].Field3;
            n_11866126[h_11866265].Field3 = genericReset(n_11866126[h_11866265].Field3, NTI2421015);
            rawInsert_11861317(t_11866117, t_11866117, "data", Tmp4, Tmp5, n_11866126[h_11866265].Field0, j_11875925);
          }
          
          }
          
          h_11866265 = nxt_11875151;
        }
    } while(false);
  } while (false);

  
}
function pop_11950119(t_11950125, key_11950126, val_11950128, val_11950128_Idx) {
    var Tmp1;

  var result_11950129 = false;

    var hc_11950130 = [0];
    var index_11950159 = rawGet_11810621(t_11950125, key_11950126, hc_11950130, 0);
    result_11950129 = (0 <= index_11950159);
    if (result_11950129) {
    Tmp1 = t_11950125.data[index_11950159].Field3;
    t_11950125.data[index_11950159].Field3 = genericReset(t_11950125.data[index_11950159].Field3, NTI2421015);
    val_11950128[val_11950128_Idx] = Tmp1;
    del_11866111(t_11950125, key_11950126);
    }
    

  return result_11950129;

}
function setLinkDefault_11876472(elem_11876474, link_11876475) {
    var Tmp1;
        var Tmp2;
        var Tmp3;
          var Tmp4;
      var Tmp5;
        var Tmp6;
        var Tmp7;
          var Tmp8;
      var Tmp9;
        var Tmp10;
        var Tmp11;
      var Tmp12;

    var Tmp1 = elem_11876474;
    if (ConstSet30[Tmp1.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    switch (Tmp1.tag) {
    case 23:
      attrEscaped_11865682(elem_11876474, "href", link_11876475);
      break;
    case 21:
        if (!(4 <= (link_11876475).length)) Tmp3 = false; else {          Tmp3 = contains_11895127([".mp4", ".m4v", ".mov", ".ogv"], HEX5BHEX5D_11776135(link_11876475, HEX2EHEX2E_11895001(4, 1)));        }        if (Tmp3) Tmp2 = true; else {          if (!(5 <= (link_11876475).length)) Tmp4 = false; else {            Tmp4 = (HEX5BHEX5D_11776135(link_11876475, HEX2EHEX2E_11895001(5, 1)) == ".webm");          }          Tmp2 = Tmp4;        }      if (Tmp2) {
      var Tmp5 = elem_11876474;
      if (ConstSet31[Tmp5.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp5.tag = 24;
      }
      else {
        if (!(4 <= (link_11876475).length)) Tmp7 = false; else {          Tmp7 = contains_11895127([".mp3", ".oga", ".ogg", ".wav"], HEX5BHEX5D_11776135(link_11876475, HEX2EHEX2E_11895001(4, 1)));        }        if (Tmp7) Tmp6 = true; else {          if (!(5 <= (link_11876475).length)) Tmp8 = false; else {            Tmp8 = (HEX5BHEX5D_11776135(link_11876475, HEX2EHEX2E_11895001(5, 1)) == ".flac");          }          Tmp6 = Tmp8;        }      if (Tmp6) {
      var Tmp9 = elem_11876474;
      if (ConstSet32[Tmp9.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp9.tag = 25;
      }
      }
        var Tmp10 = elem_11876474;
        if (ConstSet33[Tmp10.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      if (!((Tmp10.tag == 21))) {
      attr_11795071(elem_11876474, "controls", "");
      var altText_11950008 = [null];
        var Tmp11 = elem_11876474;
        if (ConstSet34[Tmp11.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'attrs\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      if (pop_11950119(Tmp11.attrs, "alt", altText_11950008, 0)) {
      var Tmp12 = elem_11876474;
      if (ConstSet35[Tmp12.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp12.content = nimCopy(null, [newStr_11776663(altText_11950008[0])], NTI11776790);
      }
      
      }
      
      attrEscaped_11865682(elem_11876474, "src", link_11876475);
      break;
    default: 
      attrEscaped_11865682(elem_11876474, "src", link_11876475);
      break;
    }

  
}
function setLink_11950487(parser_11950489, elem_11950490, link_11950491) {
    if (!((parser_11950489.setLinkHandler == null))) {
    parser_11950489.setLinkHandler(elem_11950490, link_11950491);
    }
    else {
    setLinkDefault_11876472(elem_11950490, link_11950491);
    }
    

  
}
function add_13480063(x_13480066, x_13480066_Idx) {
    x_13480066[x_13480066_Idx] += "[";;

  
}
function add_13480090(x_13480093, x_13480093_Idx) {
    x_13480093[x_13480093_Idx] += "]";;

  
}
function escapeHtmlChar_11776819(ch_11776821) {
    var Tmp1;

  var result_11776822 = null;

    switch (ch_11776821) {
    case 60:
      Tmp1 = "&lt;";
      break;
    case 62:
      Tmp1 = "&gt;";
      break;
    case 38:
      Tmp1 = "&amp;";
      break;
    default: 
      Tmp1 = String.fromCharCode(ch_11776821);
      break;
    }
    result_11776822 = Tmp1;

  return result_11776822;

}
function parseReferenceName_13480046(parser_13480048, parser_13480048_Idx, failed_13480050, failed_13480050_Idx) {
              var Tmp4;

  var result_13480051 = [null];

  BeforeRet: do {
    result_13480051[0] = "";
    var openbracks_13480053 = 1;
    var escaped_13480054 = false;
    L1: do {
      var ch_13480055 = 0;
      L2: do {
          L3: while (true) {
          if (!(parser_13480048[parser_13480048_Idx].pos < (parser_13480048[parser_13480048_Idx].str).length)) break L3;
            ch_13480055 = parser_13480048[parser_13480048_Idx].str.charCodeAt((parser_13480048[parser_13480048_Idx].pos + 0));
            if (!(escaped_13480054)) {
            switch (ch_13480055) {
            case 92:
              escaped_13480054 = true;
              break;
            case 91:
              openbracks_13480053 += 1;
              add_13480063(result_13480051, 0);
              break;
            case 93:
              openbracks_13480053 -= 1;
              if ((openbracks_13480053 == 0)) {
              break BeforeRet;
              }
              else {
              add_13480090(result_13480051, 0);
              }
              
              break;
            case 10:
              failed_13480050[failed_13480050_Idx] = true;
              break BeforeRet;
              break;
            default: 
              result_13480051[0] += escapeHtmlChar_11776819(ch_13480055);;
              break;
            }
            }
            else {
              switch (ch_13480055) {
              case 92:
              case 91:
              case 93:
                Tmp4 = String.fromCharCode(ch_13480055);
                break;
              default: 
                Tmp4 = ("\\\\" + escapeHtmlChar_11776819(ch_13480055));
                break;
              }
              result_13480051[0] += Tmp4;;
              escaped_13480054 = false;
            }
            
            parser_13480048[parser_13480048_Idx].pos += 1;
          }
      } while(false);
    } while(false);
    failed_13480050[failed_13480050_Idx] = true;
  } while (false);

  return result_13480051[0];

}
function rawGet_13530602(t_13530606, key_13530607, hc_13530608, hc_13530608_Idx) {
            var Tmp3;

  var result_13530609 = 0;

  BeforeRet: do {
    hc_13530608[hc_13530608_Idx] = hash_11655814(key_13530607);
    if ((hc_13530608[hc_13530608_Idx] == 0)) {
    hc_13530608[hc_13530608_Idx] = 314159265;
    }
    
    if (((t_13530606.data).length == 0)) {
    result_13530609 = -1;
    break BeforeRet;
    }
    
    var h_13540138 = (hc_13530608[hc_13530608_Idx] & ((t_13530606.data).length-1));
    L1: do {
        L2: while (true) {
        if (!isFilled_11676218(t_13530606.data[h_13540138].Field0)) break L2;
            if (!(t_13530606.data[h_13540138].Field0 == hc_13530608[hc_13530608_Idx])) Tmp3 = false; else {              Tmp3 = (t_13530606.data[h_13540138].Field1 == key_13530607);            }          if (Tmp3) {
          result_13530609 = h_13540138;
          break BeforeRet;
          }
          
          h_13540138 = nextTry_11680014(h_13540138, ((t_13530606.data).length-1));
        }
    } while(false);
    result_13530609 = (-1 - h_13540138);
  } while (false);

  return result_13530609;

}
function mustRehash_13555601(t_13555604) {
  var result_13555605 = false;

    result_13555605 = ((((t_13555604.data).length * 2) < (t_13555604.counter * 3)) || (((t_13555604.data).length - t_13555604.counter) < 4));

  return result_13555605;

}
function rawInsert_13581108(t_13581114, data_13581117, data_13581117_Idx, key_13581118, val_13581120, hc_13581121, h_13581122) {
    data_13581117[data_13581117_Idx][h_13581122].Field1 = key_13581118;
    data_13581117[data_13581117_Idx][h_13581122].Field2 = nimCopy(null, val_13581120, NTI11776472);
    data_13581117[data_13581117_Idx][h_13581122].Field0 = hc_13581121;

  
}
function enlarge_13580161(t_13580167) {
    var n_13580175 = [];
    n_13580175 = new Array(((t_13580167.data).length * 2)); for (var i=0;i<((t_13580167.data).length * 2);++i) {n_13580175[i]={Field0: 0, Field1: null, Field2: []};}    var Tmp1 = t_13580167.data; t_13580167.data = n_13580175; n_13580175 = Tmp1;    L2: do {
      var i_13580334 = 0;
      var colontmp__13970227 = 0;
      colontmp__13970227 = ((n_13580175).length-1);
      var res_13970232 = 0;
      L3: do {
          L4: while (true) {
          if (!(res_13970232 <= colontmp__13970227)) break L4;
            i_13580334 = res_13970232;
            var eh_13580483 = n_13580175[i_13580334].Field0;
            if (isFilled_11676218(eh_13580483)) {
            var j_13580490 = (eh_13580483 & ((t_13580167.data).length-1));
            L5: do {
                L6: while (true) {
                if (!isFilled_11676218(t_13580167.data[j_13580490].Field0)) break L6;
                  j_13580490 = nextTry_11680014(j_13580490, ((t_13580167.data).length-1));
                }
            } while(false);
            rawInsert_13581108(t_13580167, t_13580167, "data", n_13580175[i_13580334].Field1, n_13580175[i_13580334].Field2, eh_13580483, j_13580490);
            }
            
            res_13970232 += 1;
          }
      } while(false);
    } while(false);

  
}
function rawGetKnownHC_13581594(t_13581598, key_13581599, hc_13581600) {
  var result_13581601 = 0;

  BeforeRet: do {
    if (((t_13581598.data).length == 0)) {
    result_13581601 = -1;
    break BeforeRet;
    }
    
    var h_13585138 = (hc_13581600 & ((t_13581598.data).length-1));
    L1: do {
        L2: while (true) {
        if (!isFilled_11676218(t_13581598.data[h_13585138].Field0)) break L2;
          if (((t_13581598.data[h_13585138].Field0 == hc_13581600) && (t_13581598.data[h_13585138].Field1 == key_13581599))) {
          result_13581601 = h_13585138;
          break BeforeRet;
          }
          
          h_13585138 = nextTry_11680014(h_13585138, ((t_13581598.data).length-1));
        }
    } while(false);
    result_13581601 = (-1 - h_13585138);
  } while (false);

  return result_13581601;

}
function mgetOrPut_13515103(t_13515109, key_13515110, val_13515111) {
  var result_13515113 = null;
  var result_13515113_Idx = 0;

    if (((t_13515109.data).length == 0)) {
    var correctSizeHEX60gensym70_13525001 = slotsNeeded_11680048(32);
    t_13515109.counter = 0;
    t_13515109.data = new Array(correctSizeHEX60gensym70_13525001); for (var i=0;i<correctSizeHEX60gensym70_13525001;++i) {t_13515109.data[i]={Field0: 0, Field1: null, Field2: []};}    }
    
    var hc_13530601 = [0];
    var index_13540633 = rawGet_13530602(t_13515109, key_13515110, hc_13530601, 0);
    if ((index_13540633 < 0)) {
    if (((t_13515109.data).length == 0)) {
    var correctSizeHEX60gensym75_13550001 = slotsNeeded_11680048(32);
    t_13515109.counter = 0;
    t_13515109.data = new Array(correctSizeHEX60gensym75_13550001); for (var i=0;i<correctSizeHEX60gensym75_13550001;++i) {t_13515109.data[i]={Field0: 0, Field1: null, Field2: []};}    }
    
    if (mustRehash_13555601(t_13515109)) {
    enlarge_13580161(t_13515109);
    index_13540633 = rawGetKnownHC_13581594(t_13515109, key_13515110, hc_13530601[0]);
    }
    
    index_13540633 = (-1 - index_13540633);
    rawInsert_13581108(t_13515109, t_13515109, "data", key_13515110, val_13515111, hc_13530601[0], index_13540633);
    t_13515109.counter += 1;
    }
    
    result_13515113 = t_13515109.data[index_13540633]; result_13515113_Idx = "Field2";

  return [result_13515113, result_13515113_Idx];

}
function parseBracket_13161414(image_13161416, parser_13161417, parser_13161417_Idx, singleLine_13161418) {
    var Tmp1;
    var Tmp2;
      var Tmp3;
      var Tmp4;
        var Tmp5;
    var Tmp6;
    var Tmp7;
    var Tmp8;
    var Tmp9;
      var Tmp10;
    var Tmp11;
    var Tmp12;
      var Tmp13;
      var Tmp14;
      var Tmp15;
        var Tmp16;
        var Tmp17;
      var Tmp18;
    var Tmp19;

  var result_13485019 = null;

  BeforeRet: do {
    if (!!(image_13161416)) Tmp1 = false; else {      Tmp1 = !(prevWhitespace_12035288(parser_13161417[parser_13161417_Idx], -1));    }    var canBeSub_13485020 = Tmp1;
    var firstPos_13485021 = parser_13161417[parser_13161417_Idx].pos;
    var colontmp__13970187 = parseDelimed_13200020(parser_13161417, parser_13161417_Idx, makeNimstrLit("]"), singleLine_13161418);
    var textWorked_13485022 = colontmp__13970187["Field0"];
    var textElems_13485023 = nimCopy(null, colontmp__13970187["Field1"], NTI13200026);
    parser_13161417[parser_13161417_Idx].pos += 1;
    var secondPos_13485030 = (parser_13161417[parser_13161417_Idx].pos - 2);
    if (!((textWorked_13485022 == 0))) {
    result_13485019 = newElem_11776712(0, textElems_13485023);
    break BeforeRet;
    }
    
      if (!(!(image_13161416) && ((textElems_13485023).length == 1))) Tmp4 = false; else {        Tmp4 = textElems_13485023[0].isText;      }      if (!Tmp4) Tmp3 = false; else {        var Tmp5 = textElems_13485023[0];
        if (ConstSet22[Tmp5.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
        Tmp3 = ((Tmp5.str).length == 1);      }    if (Tmp3) {
    var Tmp6 = textElems_13485023[0];
    if (ConstSet23[Tmp6.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    switch ((Tmp7 = Tmp6.str, Tmp7).charCodeAt(0)) {
    case 32:
      Tmp8 = 1;
      break;
    case 120:
      Tmp8 = 2;
      break;
    default: 
      Tmp8 = 0;
      break;
    }
    Tmp2 = Tmp8;
    }
    else {
    Tmp2 = 0;
    }
    
    var checkMark_13490013 = Tmp2;
    if ((parser_13161417[parser_13161417_Idx].pos < (parser_13161417[parser_13161417_Idx].str).length)) {
    var initialPos_13490014 = parser_13161417[parser_13161417_Idx].pos;
    if (nextMatch_12045086(parser_13161417, parser_13161417_Idx, 40, 0)) {
    var colontmp__13970188 = parseLink_13475033(parser_13161417, parser_13161417_Idx, false);
    var linkWorked_13495001 = colontmp__13970188["Field0"];
    var link_13495002 = nimCopy(null, colontmp__13970188["Field1"], NTI2421013);
    var tip_13495003 = nimCopy(null, colontmp__13970188["Field2"], NTI2421013);
    if (linkWorked_13495001) {
      if (!((!(image_13161416) && ((link_13495002).length == 0)) && ((textElems_13485023).length == 1))) Tmp10 = false; else {        Tmp10 = textElems_13485023[0].isText;      }    if (Tmp10) {
    var Tmp11 = textElems_13485023[0];
    if (ConstSet25[Tmp11.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    Tmp9 = Tmp11.str;
    }
    else {
    Tmp9 = toJSStr(link_13495002);
    }
    
    var realLink_13500202 = Tmp9.trim();
    result_13485019 = {isText: false, str: null, tag: 0, attrs: ({data: [], counter: 0, first: 0, last: 0}), content: []};
    if (image_13161416) {
    var Tmp12 = result_13485019;
    if (ConstSet26[Tmp12.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    Tmp12.tag = 21;
    if ((0 < (secondPos_13485030 - firstPos_13485021))) {
    attrEscaped_11865682(result_13485019, "alt", HEX5BHEX5D_11776088(parser_13161417[parser_13161417_Idx].str, HEX2EHEX2E_4625220(firstPos_13485021, secondPos_13485030)));
    }
    
    }
    else {
      var Tmp13 = result_13485019;
      if (ConstSet28[Tmp13.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp13.tag = 23;
      var Tmp14 = result_13485019;
      if (ConstSet29[Tmp14.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp14.content = nimCopy(null, textElems_13485023, NTI13200026);
    }
    
    if (!(((tip_13495003).length == 0))) {
    attrEscaped_11865682(result_13485019, "title", toJSStr(tip_13495003));
    }
    
    setLink_11950487(parser_13161417[parser_13161417_Idx], result_13485019, realLink_13500202);
    break BeforeRet;
    }
    else {
      parser_13161417[parser_13161417_Idx].pos = initialPos_13490014;
    }
    
    }
    else {
    if (nextMatch_12045086(parser_13161417, parser_13161417_Idx, 91, 0)) {
    var refNameFailed_13510002 = [false];
    var refName_13510004 = parseReferenceName_13480046(parser_13161417, parser_13161417_Idx, refNameFailed_13510002, 0);
    if (refNameFailed_13510002[0]) {
    parser_13161417[parser_13161417_Idx].pos = initialPos_13490014;
    }
    else {
      if (((refName_13510004).length == 0)) {
      refName_13510004 = HEX5BHEX5D_11776088(parser_13161417[parser_13161417_Idx].str, HEX2EHEX2E_4625220(firstPos_13485021, secondPos_13485030));
      }
      
      result_13485019 = {isText: false, str: null, tag: 0, attrs: ({data: [], counter: 0, first: 0, last: 0}), content: []};
      if (image_13161416) {
      var Tmp15 = result_13485019;
      if (ConstSet36[Tmp15.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp15.tag = 21;
      if ((0 < (secondPos_13485030 - firstPos_13485021))) {
      attrEscaped_11865682(result_13485019, "alt", HEX5BHEX5D_11776088(parser_13161417[parser_13161417_Idx].str, HEX2EHEX2E_4625220(firstPos_13485021, secondPos_13485030)));
      }
      
      }
      else {
        var Tmp16 = result_13485019;
        if (ConstSet37[Tmp16.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
        Tmp16.tag = 23;
        var Tmp17 = result_13485019;
        if (ConstSet38[Tmp17.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
        Tmp17.content = nimCopy(null, textElems_13485023, NTI13200026);
      }
      
      (Tmp18 = mgetOrPut_13515103(parser_13161417[parser_13161417_Idx].linkReferrers, refName_13510004, []), Tmp18)[0][Tmp18[1]].push(result_13485019);;
      break BeforeRet;
    }
    
    }
    else {
    parser_13161417[parser_13161417_Idx].pos -= 1;
    }
    }
    }
    
    if (image_13161416) {
    result_13485019 = newElem_11776712(0, textElems_13485023);
    }
    else {
    if ((checkMark_13490013 == 0)) {
    if (canBeSub_13485020) {
    Tmp19 = 14;
    }
    else {
      parser_13161417[parser_13161417_Idx].pos -= 1;
    Tmp19 = 0;
    }
    
    result_13485019 = newElem_11776712(Tmp19, textElems_13485023);
    }
    else {
      result_13485019 = newElem_11776712(22, []);
      attr_11795071(result_13485019, "type", "checkbox");
      attr_11795071(result_13485019, "disabled", "");
      if ((checkMark_13490013 == 2)) {
      attr_11795071(result_13485019, "checked", "");
      }
      
    }
    }
  } while (false);

  return result_13485019;

}
function add_13161613(x_13161616, x_13161616_Idx) {
    x_13161616[x_13161616_Idx] += "{";;

  
}
function add_13161640(x_13161643, x_13161643_Idx) {
    x_13161643[x_13161643_Idx] += "}";;

  
}
function parseCurly_13161419(parser_13161421, parser_13161421_Idx) {
              var Tmp4;
              var Tmp5;

  var result_13161422 = [null];

  BeforeRet: do {
    result_13161422[0] = "";
    var noHtmlEscape_13161601 = nextMatch_12045086(parser_13161421, parser_13161421_Idx, 33, 0);
    var opencurlys_13161603 = 1;
    var escaped_13161604 = false;
    L1: do {
      var ch_13161605 = 0;
      L2: do {
          L3: while (true) {
          if (!(parser_13161421[parser_13161421_Idx].pos < (parser_13161421[parser_13161421_Idx].str).length)) break L3;
            ch_13161605 = parser_13161421[parser_13161421_Idx].str.charCodeAt((parser_13161421[parser_13161421_Idx].pos + 0));
            if (!(escaped_13161604)) {
            switch (ch_13161605) {
            case 92:
              escaped_13161604 = true;
              break;
            case 123:
              opencurlys_13161603 += 1;
              add_13161613(result_13161422, 0);
              break;
            case 125:
              opencurlys_13161603 -= 1;
              if ((opencurlys_13161603 == 0)) {
              break BeforeRet;
              }
              else {
              add_13161640(result_13161422, 0);
              }
              
              break;
            default: 
              if (noHtmlEscape_13161601) {
              Tmp4 = String.fromCharCode(ch_13161605);
              }
              else {
              Tmp4 = escapeHtmlChar_11776819(ch_13161605);
              }
              
              result_13161422[0] += Tmp4;;
              break;
            }
            }
            else {
              switch (ch_13161605) {
              case 62:
              case 60:
              case 38:
                Tmp5 = escapeHtmlChar_11776819(ch_13161605);
                break;
              case 92:
              case 125:
              case 123:
                Tmp5 = String.fromCharCode(ch_13161605);
                break;
              default: 
                Tmp5 = ("\\\\" + String.fromCharCode(ch_13161605));
                break;
              }
              result_13161422[0] += Tmp5;;
              escaped_13161604 = false;
            }
            
            parser_13161421[parser_13161421_Idx].pos += 1;
          }
      } while(false);
    } while(false);
  } while (false);

  return result_13161422[0];

}
function noAdjacentWhitespace_12045068(parser_12045070, offset_12045071) {
  var result_12045072 = false;

    result_12045072 = (!(prevWhitespace_12035288(parser_12045070, offset_12045071)) && !(nextWhitespace_12040034(parser_12045070, offset_12045071)));

  return result_12045072;

}
function onlyPrevWhitespace_12045032(parser_12045034, offset_12045035) {
  var result_12045036 = false;

    result_12045036 = (prevWhitespace_12035288(parser_12045034, offset_12045035) && !(nextWhitespace_12040034(parser_12045034, offset_12045035)));

  return result_12045036;

}
function ssClose_12305021(s_12305023) {
    var s_12305024 = s_12305023;
    s_12305024.data = nimCopy(null, [], NTI2421013);

  
}
function ssAtEnd_12210297(s_12210299) {
  var result_12210300 = false;

  BeforeRet: do {
    var s_12210301 = s_12210299;
    result_12210300 = ((s_12210301.data).length <= s_12210301.pos);
    break BeforeRet;
  } while (false);

  return result_12210300;

}
function clamp_12215049(x_12215052, a_12215053, b_12215054) {
  var result_12215055 = 0;

  BeforeRet: do {
    if ((x_12215052 < a_12215053)) {
    result_12215055 = a_12215053;
    break BeforeRet;
    }
    
    if ((b_12215054 < x_12215052)) {
    result_12215055 = b_12215054;
    break BeforeRet;
    }
    
    result_12215055 = x_12215052;
    break BeforeRet;
  } while (false);

  return result_12215055;

}
function ssSetPosition_12215044(s_12215046, pos_12215047) {
    var s_12215048 = s_12215046;
    s_12215048.pos = clamp_12215049(pos_12215047, 0, (s_12215048.data).length);

  
}
function ssGetPosition_12215082(s_12215084) {
  var result_12215085 = 0;

  BeforeRet: do {
    var s_12215086 = s_12215084;
    result_12215085 = s_12215086.pos;
    break BeforeRet;
  } while (false);

  return result_12215085;

}
function HEX5BHEX5DHEX3D_11130021(s_11130025, s_11130025_Idx, x_11130027, b_11130028) {
    var a_11130201 = x_11130027.a;
    var L_11130401 = ((x_11130027.b - a_11130201) + 1);
    if ((L_11130401 == (b_11130028).length)) {
    L1: do {
      var i_11130409 = 0;
      var i_13970247 = 0;
      L2: do {
          L3: while (true) {
          if (!(i_13970247 < L_11130401)) break L3;
            i_11130409 = i_13970247;
            s_11130025[s_11130025_Idx][(i_11130409 + a_11130201)] = b_11130028[i_11130409];
            i_13970247 += 1;
          }
      } while(false);
    } while(false);
    }
    else {
      var shiftHEX60gensym78_11140002 = ((b_11130028).length - nimMax(0, L_11130401));
      var newLenHEX60gensym78_11140003 = ((s_11130025[s_11130025_Idx]).length + shiftHEX60gensym78_11140002);
      if ((0 < shiftHEX60gensym78_11140002)) {
      (s_11130025[s_11130025_Idx].length = newLenHEX60gensym78_11140003);
      L4: do {
        var iHEX60gensym78_11140010 = 0;
        var colontmp__13970250 = 0;
        var colontmp__13970251 = 0;
        colontmp__13970250 = (newLenHEX60gensym78_11140003 - 1);
        colontmp__13970251 = (a_11130201 + (b_11130028).length);
        var res_13970256 = colontmp__13970250;
        L5: do {
            L6: while (true) {
            if (!(colontmp__13970251 <= res_13970256)) break L6;
              iHEX60gensym78_11140010 = res_13970256;
              s_11130025[s_11130025_Idx][iHEX60gensym78_11140010] = s_11130025[s_11130025_Idx][(iHEX60gensym78_11140010 - shiftHEX60gensym78_11140002)];
              res_13970256 -= 1;
            }
        } while(false);
      } while(false);
      }
      else {
        L7: do {
          var iHEX60gensym78_11140017 = 0;
          var colontmp__13970262 = 0;
          var colontmp__13970263 = 0;
          colontmp__13970262 = (a_11130201 + (b_11130028).length);
          colontmp__13970263 = (newLenHEX60gensym78_11140003 - 1);
          var res_13970264 = colontmp__13970262;
          L8: do {
              L9: while (true) {
              if (!(res_13970264 <= colontmp__13970263)) break L9;
                iHEX60gensym78_11140017 = res_13970264;
                s_11130025[s_11130025_Idx][iHEX60gensym78_11140017] = s_11130025[s_11130025_Idx][(iHEX60gensym78_11140017 - shiftHEX60gensym78_11140002)];
                res_13970264 += 1;
              }
          } while(false);
        } while(false);
        (s_11130025[s_11130025_Idx].length = newLenHEX60gensym78_11140003);
      }
      
      L10: do {
        var iHEX60gensym78_11140025 = 0;
        var colontmp__13970270 = 0;
        colontmp__13970270 = (b_11130028).length;
        var i_13970271 = 0;
        L11: do {
            L12: while (true) {
            if (!(i_13970271 < colontmp__13970270)) break L12;
              iHEX60gensym78_11140025 = i_13970271;
              s_11130025[s_11130025_Idx][(a_11130201 + iHEX60gensym78_11140025)] = b_11130028[iHEX60gensym78_11140025];
              i_13970271 += 1;
            }
        } while(false);
      } while(false);
    }
    

  
}
function HEX5BHEX5D_4625283(s_4625287, x_4625289) {
  var result_4625290 = [];

    var a_4625401 = x_4625289.a;
    var L_4625601 = ((x_4625289.b - a_4625401) + 1);
    result_4625290 = nimCopy(null, mnewString(L_4625601), NTI2421013);
    L1: do {
      var i_4625609 = 0;
      var i_13970276 = 0;
      L2: do {
          L3: while (true) {
          if (!(i_13970276 < L_4625601)) break L3;
            i_4625609 = i_13970276;
            result_4625290[i_4625609] = s_4625287[(i_4625609 + a_4625401)];
            i_13970276 += 1;
          }
      } while(false);
    } while(false);

  return result_4625290;

}
function ssReadDataStr_12215100(s_12215102, buffer_12215104, buffer_12215104_Idx, slice_12215109) {
  var result_12215110 = 0;

    var s_12215111 = s_12215102;
    result_12215110 = nimMin(((slice_12215109.b + 1) - slice_12215109.a), ((s_12215111.data).length - s_12215111.pos));
    if ((0 < result_12215110)) {
    L1: do {
    } while(false);
    HEX5BHEX5DHEX3D_11130021(buffer_12215104, buffer_12215104_Idx, HEX2EHEX2E_4625220(slice_12215109.a, ((slice_12215109.a + result_12215110) - 1)), HEX5BHEX5D_4625283(s_12215111.data, HEX2EHEX2E_4625220(s_12215111.pos, ((s_12215111.pos + result_12215110) - 1))));
    s_12215111.pos += result_12215110;
    }
    else {
      result_12215110 = 0;
    }
    

  return result_12215110;

}
function isNimException_2610704() {
    return lastJSError && lastJSError.m_type;

  
}
function getCurrentException() {
  var result_2610723 = null;

    if (isNimException_2610704()) {
    result_2610723 = lastJSError;
    }
    

  return result_2610723;

}
function ssReadData_12245420(s_12245422, buffer_12245423, buffer_12245423_Idx, bufLen_12245424) {
    var Tmp2;

  var result_12245425 = 0;

    var s_12245426 = s_12245422;
    result_12245425 = nimMin(bufLen_12245424, ((s_12245426.data).length - s_12245426.pos));
    if ((0 < result_12245425)) {
++excHandler;
    Tmp2 = framePtr;
    try {
    HEX5BHEX5DHEX3D_11130021(buffer_12245423, buffer_12245423_Idx, HEX2EHEX2E_4625220(0, (result_12245425 - 1)), HEX5BHEX5D_4625283(s_12245426.data, HEX2EHEX2E_4625220(s_12245426.pos, ((s_12245426.pos + result_12245425) - 1))));
--excHandler;
} catch (EXC) {
 var prevJSError = lastJSError;
 lastJSError = EXC;
 --excHandler;
    framePtr = Tmp2;
    raiseException({message: makeNimstrLit("could not read string stream, did you use a non-string buffer pointer?"), parent: getCurrentException(), m_type: NTI2427619, name: null, trace: [], up: null}, "Defect");
    lastJSError = prevJSError;
    } finally {
    framePtr = Tmp2;
    }
    s_12245426.pos += result_12245425;
    }
    else {
      result_12245425 = 0;
    }
    

  return result_12245425;

}
function ssPeekData_12265051(s_12265053, buffer_12265054, buffer_12265054_Idx, bufLen_12265055) {
    var Tmp2;

  var result_12265056 = 0;

    var s_12265057 = s_12265053;
    result_12265056 = nimMin(bufLen_12265055, ((s_12265057.data).length - s_12265057.pos));
    if ((0 < result_12265056)) {
++excHandler;
    Tmp2 = framePtr;
    try {
    HEX5BHEX5DHEX3D_11130021(buffer_12265054, buffer_12265054_Idx, HEX2EHEX2E_4625220(0, (result_12265056 - 1)), HEX5BHEX5D_4625283(s_12265057.data, HEX2EHEX2E_4625220(s_12265057.pos, ((s_12265057.pos + result_12265056) - 1))));
--excHandler;
} catch (EXC) {
 var prevJSError = lastJSError;
 lastJSError = EXC;
 --excHandler;
    framePtr = Tmp2;
    raiseException({message: makeNimstrLit("could not peek string stream, did you use a non-string buffer pointer?"), parent: getCurrentException(), m_type: NTI2427619, name: null, trace: [], up: null}, "Defect");
    lastJSError = prevJSError;
    } finally {
    framePtr = Tmp2;
    }
    }
    else {
      result_12265056 = 0;
    }
    

  return result_12265056;

}
function ssWriteData_12285015(s_12285017, buffer_12285018, buffer_12285018_Idx, bufLen_12285019) {
    var Tmp2;

  BeforeRet: do {
    var s_12285020 = s_12285017;
    if ((bufLen_12285019 <= 0)) {
    break BeforeRet;
    }
    
    if (((s_12285020.data).length < (s_12285020.pos + bufLen_12285019))) {
    (s_12285020.data.length = (s_12285020.pos + bufLen_12285019));
    }
    
++excHandler;
    Tmp2 = framePtr;
    try {
    HEX5BHEX5DHEX3D_11130021(s_12285020, "data", HEX2EHEX2E_4625220(s_12285020.pos, ((s_12285020.pos + bufLen_12285019) - 1)), HEX5BHEX5D_4625283(buffer_12285018[buffer_12285018_Idx], HEX2EHEX2E_4625220(0, (bufLen_12285019 - 1))));
--excHandler;
} catch (EXC) {
 var prevJSError = lastJSError;
 lastJSError = EXC;
 --excHandler;
    framePtr = Tmp2;
    raiseException({message: makeNimstrLit("could not write to string stream, did you use a non-string buffer pointer?"), parent: getCurrentException(), m_type: NTI2427619, name: null, trace: [], up: null}, "Defect");
    lastJSError = prevJSError;
    } finally {
    framePtr = Tmp2;
    }
    s_12285020.pos += bufLen_12285019;
  } while (false);

  
}
function newStringStream_12305214(s_12305216) {
  var result_12305218 = null;

    result_12305218 = ({m_type: NTI12210253, data: [], pos: 0, closeImpl: null, atEndImpl: null, setPositionImpl: null, getPositionImpl: null, readDataStrImpl: null, readLineImpl: null, readDataImpl: null, peekDataImpl: null, writeDataImpl: null, flushImpl: null});
    result_12305218.data = nimCopy(null, s_12305216, NTI2421013);
    result_12305218.pos = 0;
    result_12305218.closeImpl = ssClose_12305021;
    result_12305218.atEndImpl = ssAtEnd_12210297;
    result_12305218.setPositionImpl = ssSetPosition_12215044;
    result_12305218.getPositionImpl = ssGetPosition_12215082;
    result_12305218.readDataStrImpl = ssReadDataStr_12215100;
    result_12305218.readDataImpl = ssReadData_12245420;
    result_12305218.peekDataImpl = ssPeekData_12265051;
    result_12305218.writeDataImpl = ssWriteData_12285015;

  return result_12305218;

}
function setPosition_12046240(s_12046242, pos_12046243) {
    s_12046242.setPositionImpl(s_12046242, pos_12046243);

  
}
function readData_12046274(s_12046276, buffer_12046277, buffer_12046277_Idx, bufLen_12046278) {
  var result_12046279 = 0;

    result_12046279 = s_12046276.readDataImpl(s_12046276, buffer_12046277, buffer_12046277_Idx, bufLen_12046278);

  return result_12046279;

}
function readDataStr_12046293(s_12046295, buffer_12046297, buffer_12046297_Idx, slice_12046302) {
  var result_12046303 = 0;

    if (!((s_12046295.readDataStrImpl == null))) {
    result_12046303 = s_12046295.readDataStrImpl(s_12046295, buffer_12046297, buffer_12046297_Idx, slice_12046302);
    }
    else {
      result_12046303 = readData_12046274(s_12046295, buffer_12046297[buffer_12046297_Idx], slice_12046302.a, ((slice_12046302.b + 1) - slice_12046302.a));
    }
    

  return result_12046303;

}
function fillBuffer_12316058(L_12316061) {
                  var Tmp8;

    var charsRead_12316062 = 0;
    var toCopy_12316063 = 0;
    var s_12316064 = 0;
    var oldBufLen_12316065 = 0;
    toCopy_12316063 = ((L_12316061.buf).length - (L_12316061.sentinel + 1));
    if ((0 < toCopy_12316063)) {
    L1: do {
      var i_12345208 = 0;
      var i_13970286 = 0;
      L2: do {
          L3: while (true) {
          if (!(i_13970286 < toCopy_12316063)) break L3;
            i_12345208 = i_13970286;
            L_12316061.buf[i_12345208] = L_12316061.buf[((L_12316061.sentinel + 1) + i_12345208)];
            i_13970286 += 1;
          }
      } while(false);
    } while(false);
    }
    
    charsRead_12316062 = readDataStr_12046293(L_12316061.input, L_12316061, "buf", HEX2EHEX2E_4625220(toCopy_12316063, (((toCopy_12316063 + L_12316061.sentinel) + 1) - 1)));
    s_12316064 = (toCopy_12316063 + charsRead_12316062);
    if ((charsRead_12316062 < (L_12316061.sentinel + 1))) {
    L_12316061.buf[s_12316064] = 0;
    L_12316061.sentinel = s_12316064;
    }
    else {
      s_12316064 -= 1;
      L4: do {
          L5: while (true) {
          if (!true) break L5;
            L6: do {
                L7: while (true) {
                  if (!(0 <= s_12316064)) Tmp8 = false; else {                    Tmp8 = !((L_12316061.refillChars[L_12316061.buf[s_12316064]] != undefined));                  }                if (!Tmp8) break L7;
                  s_12316064 -= 1;
                }
            } while(false);
            if ((0 <= s_12316064)) {
            L_12316061.sentinel = s_12316064;
            break L4;
            }
            else {
              oldBufLen_12316065 = (L_12316061.buf).length;
              (L_12316061.buf.length = ((L_12316061.buf).length * 2));
              charsRead_12316062 = readDataStr_12046293(L_12316061.input, L_12316061, "buf", HEX2EHEX2E_4625220(oldBufLen_12316065, ((L_12316061.buf).length - 1)));
              if ((charsRead_12316062 < oldBufLen_12316065)) {
              L_12316061.buf[(oldBufLen_12316065 + charsRead_12316062)] = 0;
              L_12316061.sentinel = (oldBufLen_12316065 + charsRead_12316062);
              break L4;
              }
              
              s_12316064 = ((L_12316061.buf).length - 1);
            }
            
          }
      } while(false);
    }
    

  
}
function skipUtf8Bom_12425214(L_12425217) {
      var Tmp1;
      var Tmp2;

      if (!(L_12425217.buf[0] == 239)) Tmp2 = false; else {        Tmp2 = (L_12425217.buf[1] == 187);      }      if (!Tmp2) Tmp1 = false; else {        Tmp1 = (L_12425217.buf[2] == 191);      }    if (Tmp1) {
    L_12425217.bufpos += 3;
    L_12425217.lineStart += 3;
    }
    

  
}
function open_12425243(L_12425246, input_12425247, bufLen_12425249, refillChars_12425251) {
    L_12425246.input = input_12425247;
    L_12425246.bufpos = 0;
    L_12425246.offsetBase = 0;
    nimCopy(L_12425246.refillChars, refillChars_12425251, NTI12425250);
    L_12425246.buf = nimCopy(null, mnewString(bufLen_12425249), NTI2421013);
    L_12425246.sentinel = (bufLen_12425249 - 1);
    L_12425246.lineStart = 0;
    L_12425246.lineNumber = 1;
    fillBuffer_12316058(L_12425246);
    skipUtf8Bom_12425214(L_12425246);

  
}
function open_12461101(my_12461104, input_12461105, filename_12461106, options_12461110) {
    open_12425243(my_12461104, input_12461105, 8192, ConstSet53);
    my_12461104.filename = nimCopy(null, filename_12461106, NTI2421013);
    my_12461104.state = 0;
    my_12461104.kind = 0;
    my_12461104.a = nimCopy(null, [], NTI2421013);
    my_12461104.b = nimCopy(null, [], NTI2421013);
    my_12461104.c = nimCopy(null, [], NTI2421013);
    my_12461104.cIsEmpty = true;
    nimCopy(my_12461104.options, options_12461110, NTI12461107);

  
}
function fillBaseLexer_12380229(L_12380232, pos_12380233) {
  var result_12380234 = 0;

    if ((pos_12380233 < L_12380232.sentinel)) {
    result_12380234 = (pos_12380233 + 1);
    }
    else {
      fillBuffer_12316058(L_12380232);
      L_12380232.offsetBase += pos_12380233;
      L_12380232.bufpos = 0;
      result_12380234 = 0;
    }
    

  return result_12380234;

}
function handleRefillChar_12410220(L_12410223, pos_12410224) {
  var result_12410225 = 0;

    result_12410225 = fillBaseLexer_12380229(L_12410223, pos_12410224);

  return result_12410225;

}
function markError_12470286(my_12470289, kind_12470290) {
    my_12470289.err = kind_12470290;
    my_12470289.state = 4;

  
}
function parseName_12470463(my_12470466, dest_12470468, dest_12470468_Idx) {
    var pos_12470469 = my_12470466.bufpos;
    if ((ConstSet55[my_12470466.buf[pos_12470469]] != undefined)) {
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          addChar(dest_12470468[dest_12470468_Idx], my_12470466.buf[pos_12470469]);;
          pos_12470469 += 1;
          if (!((ConstSet56[my_12470466.buf[pos_12470469]] != undefined))) {
          break L1;
          }
          
        }
    } while(false);
    my_12470466.bufpos = pos_12470469;
    }
    else {
    markError_12470286(my_12470466, 2);
    }
    

  
}
function handleCR_12390220(L_12390223, pos_12390224) {
  var result_12390225 = 0;

    L_12390223.lineNumber += 1;
    result_12390225 = fillBaseLexer_12380229(L_12390223, pos_12390224);
    if ((L_12390223.buf[result_12390225] == 10)) {
    result_12390225 = fillBaseLexer_12380229(L_12390223, result_12390225);
    }
    
    L_12390223.lineStart = result_12390225;

  return result_12390225;

}
function handleLF_12400220(L_12400223, pos_12400224) {
  var result_12400225 = 0;

    L_12400223.lineNumber += 1;
    result_12400225 = fillBaseLexer_12380229(L_12400223, pos_12400224);
    L_12400223.lineStart = result_12400225;

  return result_12400225;

}
function parseWhitespace_12470421(my_12470424, skip_12470425) {
    var pos_12470426 = my_12470424.bufpos;
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12470424.buf[pos_12470426]) {
          case 32:
          case 9:
            if (!(skip_12470425)) {
            addChar(my_12470424.a, my_12470424.buf[pos_12470426]);;
            }
            
            pos_12470426 += 1;
            break;
          case 13:
            pos_12470426 = handleCR_12390220(my_12470424, pos_12470426);
            if (!(skip_12470425)) {
            addChar(my_12470424.a, 10);;
            }
            
            break;
          case 10:
            pos_12470426 = handleLF_12400220(my_12470424, pos_12470426);
            if (!(skip_12470425)) {
            addChar(my_12470424.a, 10);;
            }
            
            break;
          default: 
            break L1;
            break;
          }
        }
    } while(false);
    my_12470424.bufpos = pos_12470426;

  
}
function parseEndTag_12495033(my_12495036) {
    my_12495036.bufpos = handleRefillChar_12410220(my_12495036, (my_12495036.bufpos + 1));
    parseName_12470463(my_12495036, my_12495036, "a");
    parseWhitespace_12470421(my_12495036, true);
    if ((my_12495036.buf[my_12495036.bufpos] == 62)) {
    my_12495036.bufpos += 1;
    }
    else {
    markError_12470286(my_12495036, 5);
    }
    
    my_12495036.kind = 7;

  
}
function parseCDATA_12470319(my_12470322) {
              var Tmp3;

    var pos_12470323 = (my_12470322.bufpos + 9);
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12470322.buf[pos_12470323]) {
          case 93:
              if (!(my_12470322.buf[(pos_12470323 + 1)] == 93)) Tmp3 = false; else {                Tmp3 = (my_12470322.buf[(pos_12470323 + 2)] == 62);              }            if (Tmp3) {
            pos_12470323 += 3;
            break L1;
            }
            
            addChar(my_12470322.a, 93);;
            pos_12470323 += 1;
            break;
          case 0:
            markError_12470286(my_12470322, 1);
            break L1;
            break;
          case 13:
            pos_12470323 = handleCR_12390220(my_12470322, pos_12470323);
            addChar(my_12470322.a, 10);;
            break;
          case 10:
            pos_12470323 = handleLF_12400220(my_12470322, pos_12470323);
            addChar(my_12470322.a, 10);;
            break;
          case 47:
            pos_12470323 = handleRefillChar_12410220(my_12470322, pos_12470323);
            addChar(my_12470322.a, 47);;
            break;
          default: 
            addChar(my_12470322.a, my_12470322.buf[pos_12470323]);;
            pos_12470323 += 1;
            break;
          }
        }
    } while(false);
    my_12470322.bufpos = pos_12470323;
    my_12470322.kind = 11;

  
}
function parseComment_12470355(my_12470358) {
              var Tmp3;

    var pos_12470359 = (my_12470358.bufpos + 4);
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12470358.buf[pos_12470359]) {
          case 45:
              if (!(my_12470358.buf[(pos_12470359 + 1)] == 45)) Tmp3 = false; else {                Tmp3 = (my_12470358.buf[(pos_12470359 + 2)] == 62);              }            if (Tmp3) {
            pos_12470359 += 3;
            break L1;
            }
            
            if ((my_12470358.options[1] != undefined)) {
            addChar(my_12470358.a, 45);;
            }
            
            pos_12470359 += 1;
            break;
          case 0:
            markError_12470286(my_12470358, 8);
            break L1;
            break;
          case 13:
            pos_12470359 = handleCR_12390220(my_12470358, pos_12470359);
            if ((my_12470358.options[1] != undefined)) {
            addChar(my_12470358.a, 10);;
            }
            
            break;
          case 10:
            pos_12470359 = handleLF_12400220(my_12470358, pos_12470359);
            if ((my_12470358.options[1] != undefined)) {
            addChar(my_12470358.a, 10);;
            }
            
            break;
          case 47:
            pos_12470359 = handleRefillChar_12410220(my_12470358, pos_12470359);
            if ((my_12470358.options[1] != undefined)) {
            addChar(my_12470358.a, 47);;
            }
            
            break;
          default: 
            if ((my_12470358.options[1] != undefined)) {
            addChar(my_12470358.a, my_12470358.buf[pos_12470359]);;
            }
            
            pos_12470359 += 1;
            break;
          }
        }
    } while(false);
    my_12470358.bufpos = pos_12470359;
    my_12470358.kind = 4;

  
}
function parseSpecial_12490068(my_12490071) {
    var pos_12490072 = (my_12490071.bufpos + 2);
    var opentags_12490074 = 0;
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12490071.buf[pos_12490072]) {
          case 0:
            markError_12470286(my_12490071, 5);
            break L1;
            break;
          case 60:
            opentags_12490074 += 1;
            pos_12490072 += 1;
            addChar(my_12490071.a, 60);;
            break;
          case 62:
            if ((opentags_12490074 <= 0)) {
            pos_12490072 += 1;
            break L1;
            }
            
            opentags_12490074 -= 1;
            pos_12490072 += 1;
            addChar(my_12490071.a, 62);;
            break;
          case 13:
            pos_12490072 = handleCR_12390220(my_12490071, pos_12490072);
            addChar(my_12490071.a, 10);;
            break;
          case 10:
            pos_12490072 = handleLF_12400220(my_12490071, pos_12490072);
            addChar(my_12490071.a, 10);;
            break;
          case 47:
            pos_12490072 = handleRefillChar_12410220(my_12490071, pos_12490072);
            addChar(my_12490071.b, 47);;
            break;
          default: 
            addChar(my_12490071.a, my_12490071.buf[pos_12490072]);;
            pos_12490072 += 1;
            break;
          }
        }
    } while(false);
    my_12490071.bufpos = pos_12490072;
    my_12490071.kind = 13;

  
}
function parsePI_12490025(my_12490028) {
    my_12490028.bufpos += 2;
    parseName_12470463(my_12490028, my_12490028, "a");
    var pos_12490036 = my_12490028.bufpos;
    (my_12490028.b.length = 0);
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12490028.buf[pos_12490036]) {
          case 0:
            markError_12470286(my_12490028, 4);
            break L1;
            break;
          case 63:
            if ((my_12490028.buf[(pos_12490036 + 1)] == 62)) {
            pos_12490036 += 2;
            break L1;
            }
            
            addChar(my_12490028.b, 63);;
            pos_12490036 += 1;
            break;
          case 13:
            pos_12490036 = handleCR_12390220(my_12490028, pos_12490036);
            addChar(my_12490028.b, 10);;
            break;
          case 10:
            pos_12490036 = handleLF_12400220(my_12490028, pos_12490036);
            addChar(my_12490028.b, 10);;
            break;
          case 47:
            pos_12490036 = handleRefillChar_12410220(my_12490028, pos_12490036);
            addChar(my_12490028.b, 47);;
            break;
          default: 
            addChar(my_12490028.b, my_12490028.buf[pos_12490036]);;
            pos_12490036 += 1;
            break;
          }
        }
    } while(false);
    my_12490028.bufpos = pos_12490036;
    my_12490028.kind = 5;

  
}
function parseTag_12490124(my_12490127) {
        var Tmp1;

  BeforeRet: do {
    my_12490127.bufpos += 1;
    parseName_12470463(my_12490127, my_12490127, "a");
    if (((my_12490127.a).length == 0)) {
    my_12490127.kind = 2;
    addChar(my_12490127.a, 60);;
    break BeforeRet;
    }
    
    parseWhitespace_12470421(my_12490127, true);
    if ((ConstSet57[my_12490127.buf[my_12490127.bufpos]] != undefined)) {
    my_12490127.kind = 8;
    my_12490127.state = 2;
    my_12490127.c = nimCopy(null, my_12490127.a, NTI2421013);
    my_12490127.cIsEmpty = false;
    }
    else {
      my_12490127.kind = 6;
      var slash_12495007 = (my_12490127.buf[my_12490127.bufpos] == 47);
      if (slash_12495007) {
      my_12490127.bufpos = handleRefillChar_12410220(my_12490127, my_12490127.bufpos);
      }
      
        if (!slash_12495007) Tmp1 = false; else {          Tmp1 = (my_12490127.buf[my_12490127.bufpos] == 62);        }      if (Tmp1) {
      my_12490127.bufpos += 1;
      my_12490127.state = 3;
      my_12490127.c = nimCopy(null, [], NTI2421013);
      my_12490127.cIsEmpty = true;
      }
      else {
      if ((my_12490127.buf[my_12490127.bufpos] == 62)) {
      my_12490127.bufpos += 1;
      }
      else {
      markError_12470286(my_12490127, 5);
      }
      }
    }
    
  } while (false);

  
}
function HEX3CHEX3DHEX25_2425474(x_2425476, y_2425477) {
  var result_2425478 = false;

    result_2425478 = ((x_2425476 >>> 0) <= (y_2425477 >>> 0));

  return result_2425478;

}
function nuctoUTF8(c_3990474) {
  var result_3990475 = [];

    result_3990475 = nimCopy(null, [], NTI2421013);
    var iHEX60gensym49_3995001 = c_3990474;
    if (HEX3CHEX3DHEX25_2425474(iHEX60gensym49_3995001, 127)) {
    (result_3990475.length = 1);
    result_3990475[0] = iHEX60gensym49_3995001;
    }
    else {
    if (HEX3CHEX3DHEX25_2425474(iHEX60gensym49_3995001, 2047)) {
    (result_3990475.length = 2);
    result_3990475[0] = ((iHEX60gensym49_3995001 >> 6) | 192);
    result_3990475[1] = ((iHEX60gensym49_3995001 & 63) | 128);
    }
    else {
    if (HEX3CHEX3DHEX25_2425474(iHEX60gensym49_3995001, 65535)) {
    (result_3990475.length = 3);
    result_3990475[0] = ((iHEX60gensym49_3995001 >> 12) | 224);
    result_3990475[1] = (((iHEX60gensym49_3995001 >> 6) & 63) | 128);
    result_3990475[2] = ((iHEX60gensym49_3995001 & 63) | 128);
    }
    else {
    if (HEX3CHEX3DHEX25_2425474(iHEX60gensym49_3995001, 2097151)) {
    (result_3990475.length = 4);
    result_3990475[0] = ((iHEX60gensym49_3995001 >> 18) | 240);
    result_3990475[1] = (((iHEX60gensym49_3995001 >> 12) & 63) | 128);
    result_3990475[2] = (((iHEX60gensym49_3995001 >> 6) & 63) | 128);
    result_3990475[3] = ((iHEX60gensym49_3995001 & 63) | 128);
    }
    else {
    if (HEX3CHEX3DHEX25_2425474(iHEX60gensym49_3995001, 67108863)) {
    (result_3990475.length = 5);
    result_3990475[0] = ((iHEX60gensym49_3995001 >> 24) | 248);
    result_3990475[1] = (((iHEX60gensym49_3995001 >> 18) & 63) | 128);
    result_3990475[2] = (((iHEX60gensym49_3995001 >> 12) & 63) | 128);
    result_3990475[3] = (((iHEX60gensym49_3995001 >> 6) & 63) | 128);
    result_3990475[4] = ((iHEX60gensym49_3995001 & 63) | 128);
    }
    else {
    if (HEX3CHEX3DHEX25_2425474(iHEX60gensym49_3995001, 2147483647)) {
    (result_3990475.length = 6);
    result_3990475[0] = ((iHEX60gensym49_3995001 >> 30) | 252);
    result_3990475[1] = (((iHEX60gensym49_3995001 >> 24) & 63) | 128);
    result_3990475[2] = (((iHEX60gensym49_3995001 >> 18) & 63) | 128);
    result_3990475[3] = (((iHEX60gensym49_3995001 >> 12) & 63) | 128);
    result_3990475[4] = (((iHEX60gensym49_3995001 >> 6) & 63) | 128);
    result_3990475[5] = ((iHEX60gensym49_3995001 & 63) | 128);
    }
    else {
    }
    }}}}}

  return result_3990475;

}
function parseEntity_12480020(my_12480023, dest_12480025, dest_12480025_Idx) {
      var Tmp5;
      var Tmp6;
      var Tmp7;
      var Tmp8;
      var Tmp9;
      var Tmp10;
      var Tmp11;
      var Tmp12;
      var Tmp13;
      var Tmp14;
      var Tmp15;
      var Tmp16;
      var Tmp17;
      var Tmp18;
      var Tmp19;
        var Tmp20;

    var pos_12480026 = (my_12480023.bufpos + 1);
    my_12480023.kind = 2;
    if ((my_12480023.buf[pos_12480026] == 35)) {
    var r_12480027 = 0;
    pos_12480026 += 1;
    if ((my_12480023.buf[pos_12480026] == 120)) {
    pos_12480026 += 1;
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12480023.buf[pos_12480026]) {
          case 48:
          case 49:
          case 50:
          case 51:
          case 52:
          case 53:
          case 54:
          case 55:
          case 56:
          case 57:
            r_12480027 = ((r_12480027 << 4) | (my_12480023.buf[pos_12480026] - 48));
            break;
          case 97:
          case 98:
          case 99:
          case 100:
          case 101:
          case 102:
            r_12480027 = ((r_12480027 << 4) | ((my_12480023.buf[pos_12480026] - 97) + 10));
            break;
          case 65:
          case 66:
          case 67:
          case 68:
          case 69:
          case 70:
            r_12480027 = ((r_12480027 << 4) | ((my_12480023.buf[pos_12480026] - 65) + 10));
            break;
          default: 
            break L1;
            break;
          }
          pos_12480026 += 1;
        }
    } while(false);
    }
    else {
      L3: do {
          L4: while (true) {
          if (!(ConstSet58[my_12480023.buf[pos_12480026]] != undefined)) break L4;
            r_12480027 = ((r_12480027 * 10) + (my_12480023.buf[pos_12480026] - 48));
            pos_12480026 += 1;
          }
      } while(false);
    }
    
    dest_12480025[dest_12480025_Idx].push.apply(dest_12480025[dest_12480025_Idx], nuctoUTF8(((r_12480027)|0)));;
    }
    else {
      if (!(my_12480023.buf[pos_12480026] == 108)) Tmp6 = false; else {        Tmp6 = (my_12480023.buf[(pos_12480026 + 1)] == 116);      }      if (!Tmp6) Tmp5 = false; else {        Tmp5 = (my_12480023.buf[(pos_12480026 + 2)] == 59);      }    if (Tmp5) {
    addChar(dest_12480025[dest_12480025_Idx], 60);;
    pos_12480026 += 2;
    }
    else {
      if (!(my_12480023.buf[pos_12480026] == 103)) Tmp8 = false; else {        Tmp8 = (my_12480023.buf[(pos_12480026 + 1)] == 116);      }      if (!Tmp8) Tmp7 = false; else {        Tmp7 = (my_12480023.buf[(pos_12480026 + 2)] == 59);      }    if (Tmp7) {
    addChar(dest_12480025[dest_12480025_Idx], 62);;
    pos_12480026 += 2;
    }
    else {
      if (!(my_12480023.buf[pos_12480026] == 97)) Tmp11 = false; else {        Tmp11 = (my_12480023.buf[(pos_12480026 + 1)] == 109);      }      if (!Tmp11) Tmp10 = false; else {        Tmp10 = (my_12480023.buf[(pos_12480026 + 2)] == 112);      }      if (!Tmp10) Tmp9 = false; else {        Tmp9 = (my_12480023.buf[(pos_12480026 + 3)] == 59);      }    if (Tmp9) {
    addChar(dest_12480025[dest_12480025_Idx], 38);;
    pos_12480026 += 3;
    }
    else {
      if (!(my_12480023.buf[pos_12480026] == 97)) Tmp15 = false; else {        Tmp15 = (my_12480023.buf[(pos_12480026 + 1)] == 112);      }      if (!Tmp15) Tmp14 = false; else {        Tmp14 = (my_12480023.buf[(pos_12480026 + 2)] == 111);      }      if (!Tmp14) Tmp13 = false; else {        Tmp13 = (my_12480023.buf[(pos_12480026 + 3)] == 115);      }      if (!Tmp13) Tmp12 = false; else {        Tmp12 = (my_12480023.buf[(pos_12480026 + 4)] == 59);      }    if (Tmp12) {
    addChar(dest_12480025[dest_12480025_Idx], 39);;
    pos_12480026 += 4;
    }
    else {
      if (!(my_12480023.buf[pos_12480026] == 113)) Tmp19 = false; else {        Tmp19 = (my_12480023.buf[(pos_12480026 + 1)] == 117);      }      if (!Tmp19) Tmp18 = false; else {        Tmp18 = (my_12480023.buf[(pos_12480026 + 2)] == 111);      }      if (!Tmp18) Tmp17 = false; else {        Tmp17 = (my_12480023.buf[(pos_12480026 + 3)] == 116);      }      if (!Tmp17) Tmp16 = false; else {        Tmp16 = (my_12480023.buf[(pos_12480026 + 4)] == 59);      }    if (Tmp16) {
    addChar(dest_12480025[dest_12480025_Idx], 34);;
    pos_12480026 += 4;
    }
    else {
      my_12480023.bufpos = pos_12480026;
      var name_12485052 = [[]];
      parseName_12470463(my_12480023, name_12485052, 0);
      pos_12480026 = my_12480023.bufpos;
        if (!!((my_12480023.err == 2))) Tmp20 = false; else {          Tmp20 = (my_12480023.buf[pos_12480026] == 59);        }      if (Tmp20) {
      my_12480023.kind = 12;
      }
      else {
      addChar(dest_12480025[dest_12480025_Idx], 38);;
      }
      
      dest_12480025[dest_12480025_Idx].push.apply(dest_12480025[dest_12480025_Idx], name_12485052[0]);;
    }
    }}}}}
    if ((my_12480023.buf[pos_12480026] == 59)) {
    pos_12480026 += 1;
    }
    else {
      my_12480023.err = 3;
    }
    
    my_12480023.bufpos = pos_12480026;

  
}
function parseCharData_12535020(my_12535023) {
    var pos_12535024 = my_12535023.bufpos;
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12535023.buf[pos_12535024]) {
          case 0:
          case 60:
          case 38:
            break L1;
            break;
          case 13:
            pos_12535024 = handleCR_12390220(my_12535023, pos_12535024);
            addChar(my_12535023.a, 10);;
            break;
          case 10:
            pos_12535024 = handleLF_12400220(my_12535023, pos_12535024);
            addChar(my_12535023.a, 10);;
            break;
          case 47:
            pos_12535024 = handleRefillChar_12410220(my_12535023, pos_12535024);
            addChar(my_12535023.a, 47);;
            break;
          default: 
            addChar(my_12535023.a, my_12535023.buf[pos_12535024]);;
            pos_12535024 += 1;
            break;
          }
        }
    } while(false);
    my_12535023.bufpos = pos_12535024;
    my_12535023.kind = 2;

  
}
function rawGetTok_12535044(my_12535047) {
          var Tmp1;
          var Tmp2;
          var Tmp3;
          var Tmp4;
          var Tmp5;
          var Tmp6;
          var Tmp7;

    my_12535047.kind = 0;
    (my_12535047.a.length = 0);
    var pos_12535048 = my_12535047.bufpos;
    switch (my_12535047.buf[pos_12535048]) {
    case 60:
      switch (my_12535047.buf[(pos_12535048 + 1)]) {
      case 47:
        parseEndTag_12495033(my_12535047);
        break;
      case 33:
          if (!(my_12535047.buf[(pos_12535048 + 2)] == 91)) Tmp6 = false; else {            Tmp6 = (my_12535047.buf[(pos_12535048 + 3)] == 67);          }          if (!Tmp6) Tmp5 = false; else {            Tmp5 = (my_12535047.buf[(pos_12535048 + 4)] == 68);          }          if (!Tmp5) Tmp4 = false; else {            Tmp4 = (my_12535047.buf[(pos_12535048 + 5)] == 65);          }          if (!Tmp4) Tmp3 = false; else {            Tmp3 = (my_12535047.buf[(pos_12535048 + 6)] == 84);          }          if (!Tmp3) Tmp2 = false; else {            Tmp2 = (my_12535047.buf[(pos_12535048 + 7)] == 65);          }          if (!Tmp2) Tmp1 = false; else {            Tmp1 = (my_12535047.buf[(pos_12535048 + 8)] == 91);          }        if (Tmp1) {
        parseCDATA_12470319(my_12535047);
        }
        else {
          if (!(my_12535047.buf[(pos_12535048 + 2)] == 45)) Tmp7 = false; else {            Tmp7 = (my_12535047.buf[(pos_12535048 + 3)] == 45);          }        if (Tmp7) {
        parseComment_12470355(my_12535047);
        }
        else {
        parseSpecial_12490068(my_12535047);
        }
        }
        break;
      case 63:
        parsePI_12490025(my_12535047);
        break;
      default: 
        parseTag_12490124(my_12535047);
        break;
      }
      break;
    case 32:
    case 9:
    case 13:
    case 10:
      parseWhitespace_12470421(my_12535047, false);
      my_12535047.kind = 3;
      break;
    case 0:
      my_12535047.kind = 1;
      break;
    case 38:
      parseEntity_12480020(my_12535047, my_12535047, "a");
      break;
    default: 
      parseCharData_12535020(my_12535047);
      break;
    }

  
}
function getTok_12550214(my_12550217) {
              var Tmp3;

    L1: do {
        L2: while (true) {
        if (!true) break L2;
          var lastKind_12550218 = my_12550217.kind;
          rawGetTok_12535044(my_12550217);
          switch (my_12550217.kind) {
          case 4:
            if ((my_12550217.options[1] != undefined)) {
            break L1;
            }
            
            break;
          case 3:
              if ((my_12550217.options[0] != undefined)) Tmp3 = true; else {                Tmp3 = (ConstSet59[lastKind_12550218] != undefined);              }            if (Tmp3) {
            break L1;
            }
            
            break;
          default: 
            break L1;
            break;
          }
        }
    } while(false);

  
}
function parseAttribute_12495057(my_12495060) {
      var Tmp1;
        var Tmp2;
            var Tmp9;

  BeforeRet: do {
    my_12495060.kind = 9;
    (my_12495060.a.length = 0);
    (my_12495060.b.length = 0);
    parseName_12470463(my_12495060, my_12495060, "a");
    if (((my_12495060.a).length == 0)) {
    markError_12470286(my_12495060, 5);
    break BeforeRet;
    }
    
    var startPos_12495062 = my_12495060.bufpos;
    parseWhitespace_12470421(my_12495060, true);
    if (!((my_12495060.buf[my_12495060.bufpos] == 61))) {
      if (!((my_12495060.options[3] != undefined))) Tmp1 = true; else {        if (!!((my_12495060.buf[my_12495060.bufpos] == 62))) Tmp2 = false; else {          Tmp2 = (my_12495060.bufpos == startPos_12495062);        }        Tmp1 = Tmp2;      }    if (Tmp1) {
    markError_12470286(my_12495060, 6);
    }
    
    break BeforeRet;
    }
    
    my_12495060.bufpos += 1;
    parseWhitespace_12470421(my_12495060, true);
    var pos_12510007 = my_12495060.bufpos;
    if ((ConstSet60[my_12495060.buf[pos_12510007]] != undefined)) {
    var quote_12515008 = my_12495060.buf[pos_12510007];
    var pendingSpace_12515009 = false;
    pos_12510007 += 1;
    L3: do {
        L4: while (true) {
        if (!true) break L4;
          switch (my_12495060.buf[pos_12510007]) {
          case 0:
            markError_12470286(my_12495060, 7);
            break L3;
            break;
          case 38:
            if (pendingSpace_12515009) {
            addChar(my_12495060.b, 32);;
            pendingSpace_12515009 = false;
            }
            
            my_12495060.bufpos = pos_12510007;
            parseEntity_12480020(my_12495060, my_12495060, "b");
            my_12495060.kind = 9;
            pos_12510007 = my_12495060.bufpos;
            break;
          case 32:
          case 9:
            pendingSpace_12515009 = true;
            pos_12510007 += 1;
            break;
          case 13:
            pos_12510007 = handleCR_12390220(my_12495060, pos_12510007);
            pendingSpace_12515009 = true;
            break;
          case 10:
            pos_12510007 = handleLF_12400220(my_12495060, pos_12510007);
            pendingSpace_12515009 = true;
            break;
          case 47:
            pos_12510007 = handleRefillChar_12410220(my_12495060, pos_12510007);
            addChar(my_12495060.b, 47);;
            break;
          default: 
            if ((my_12495060.buf[pos_12510007] == quote_12515008)) {
            pos_12510007 += 1;
            break L3;
            }
            else {
              if (pendingSpace_12515009) {
              addChar(my_12495060.b, 32);;
              pendingSpace_12515009 = false;
              }
              
              addChar(my_12495060.b, my_12495060.buf[pos_12510007]);;
              pos_12510007 += 1;
            }
            
            break;
          }
        }
    } while(false);
    }
    else {
    if ((my_12495060.options[2] != undefined)) {
    var startPos_12520009 = pos_12510007;
    L5: do {
        L6: while (true) {
          var c_12520010 = my_12495060.buf[pos_12510007];
        if (!!((ConstSet61[c_12520010] != undefined))) break L6;
          if ((c_12520010 == 38)) {
          my_12495060.bufpos = pos_12510007;
          parseEntity_12480020(my_12495060, my_12495060, "b");
          my_12495060.kind = 9;
          pos_12510007 = my_12495060.bufpos;
          }
          else {
          if ((c_12520010 == 47)) {
          pos_12510007 = handleRefillChar_12410220(my_12495060, pos_12510007);
          addChar(my_12495060.b, 47);;
          }
          else {
            addChar(my_12495060.b, c_12520010);;
            pos_12510007 += 1;
          }
          }
        }
    } while(false);
    if ((pos_12510007 == startPos_12520009)) {
    markError_12470286(my_12495060, 9);
    }
    
    }
    else {
      markError_12470286(my_12495060, 7);
      L7: do {
          L8: while (true) {
            if (!!((my_12495060.buf[pos_12510007] == 62))) Tmp9 = false; else {              Tmp9 = (32 < my_12495060.buf[pos_12510007]);            }          if (!Tmp9) break L8;
            addChar(my_12495060.b, my_12495060.buf[pos_12510007]);;
            pos_12510007 += 1;
          }
      } while(false);
    }
    }
    my_12495060.bufpos = pos_12510007;
    parseWhitespace_12470421(my_12495060, true);
  } while (false);

  
}
function next_12555021(my_12555024) {
        var Tmp1;

    switch (my_12555024.state) {
    case 1:
      getTok_12550214(my_12555024);
      break;
    case 0:
      my_12555024.state = 1;
      getTok_12550214(my_12555024);
        if (!(my_12555024.kind == 5)) Tmp1 = false; else {          Tmp1 = eqStrings(my_12555024.a, makeNimstrLit("xml"));        }      if (Tmp1) {
      getTok_12550214(my_12555024);
      }
      
      break;
    case 2:
      if ((my_12555024.buf[my_12555024.bufpos] == 62)) {
      my_12555024.kind = 10;
      my_12555024.bufpos += 1;
      my_12555024.state = 1;
      }
      else {
      if ((my_12555024.buf[my_12555024.bufpos] == 47)) {
      my_12555024.bufpos = handleRefillChar_12410220(my_12555024, my_12555024.bufpos);
      if ((my_12555024.buf[my_12555024.bufpos] == 62)) {
      my_12555024.kind = 10;
      my_12555024.bufpos += 1;
      my_12555024.state = 3;
      }
      else {
      markError_12470286(my_12555024, 5);
      }
      
      }
      else {
      parseAttribute_12495057(my_12555024);
      }
      }
      break;
    case 3:
      my_12555024.state = 1;
      my_12555024.kind = 7;
      if (!(my_12555024.cIsEmpty)) {
      my_12555024.a = nimCopy(null, my_12555024.c, NTI2421013);
      }
      
      break;
    case 4:
      my_12555024.kind = 0;
      my_12555024.state = 1;
      break;
    }

  
}
function kind_12461215(my_12461217) {
  var result_12461218 = 0;

  BeforeRet: do {
    result_12461218 = my_12461217.kind;
    break BeforeRet;
  } while (false);

  return result_12461218;

}
function newXmlNode_12676049(kind_12676051) {
  var result_12676052 = null;

    result_12676052 = {k: kind_12676051, fText: [], fTag: [], s: [], fAttr: null, fClientData: 0};

  return result_12676052;

}
function newElement_12676113(tag_12676115) {
    var Tmp1;
    var Tmp2;

  var result_12676116 = null;

    result_12676116 = newXmlNode_12676049(2);
    var Tmp1 = result_12676116;
    if (ConstSet62[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fTag\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.fTag = nimCopy(null, tag_12676115, NTI2421013);
    var Tmp2 = result_12676116;
    if (ConstSet63[Tmp2.k]===undefined) { raiseFieldError(makeNimstrLit("\'s\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp2.s = nimCopy(null, [], NTI12676133);

  return result_12676116;

}
function tag_12715215(n_12715217) {
    var Tmp1;

  var result_12715218 = [];

    var Tmp1 = n_12715217;
    if (ConstSet64[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fTag\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    result_12715218 = nimCopy(null, Tmp1.fTag, NTI2421013);

  return result_12715218;

}
function invalidFormatString_11500046() {
    raiseException({message: makeNimstrLit("invalid format string"), parent: null, m_type: NTI2427643, name: null, trace: [], up: null}, "ValueError");

  
}
function nsuToLowerAsciiChar(c_10595023) {
  var result_10595024 = 0;

    if ((ConstSet68[c_10595023] != undefined)) {
    result_10595024 = (c_10595023 + 32);
    }
    else {
      result_10595024 = c_10595023;
    }
    

  return result_10595024;

}
function nsuCmpIgnoreStyle(a_10675022, b_10675023) {
          var Tmp7;
          var Tmp8;

  var result_10675024 = 0;

  BeforeRet: do {
    var i_10675026 = 0;
    var j_10675028 = 0;
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          L3: do {
              L4: while (true) {
              if (!((i_10675026 < (a_10675022).length) && (a_10675022[i_10675026] == 95))) break L4;
                i_10675026 += 1;
              }
          } while(false);
          L5: do {
              L6: while (true) {
              if (!((j_10675028 < (b_10675023).length) && (b_10675023[j_10675028] == 95))) break L6;
                j_10675028 += 1;
              }
          } while(false);
          if ((i_10675026 < (a_10675022).length)) {
          Tmp7 = nsuToLowerAsciiChar(a_10675022[i_10675026]);
          }
          else {
          Tmp7 = 0;
          }
          
          var aa_10675041 = Tmp7;
          if ((j_10675028 < (b_10675023).length)) {
          Tmp8 = nsuToLowerAsciiChar(b_10675023[j_10675028]);
          }
          else {
          Tmp8 = 0;
          }
          
          var bb_10675042 = Tmp8;
          result_10675024 = (aa_10675041 - bb_10675042);
          if (!((result_10675024 == 0))) {
          break BeforeRet;
          }
          
          if (((a_10675022).length <= i_10675026)) {
          if (((b_10675023).length <= j_10675028)) {
          result_10675024 = 0;
          break BeforeRet;
          }
          
          result_10675024 = -1;
          break BeforeRet;
          }
          else {
          if (((b_10675023).length <= j_10675028)) {
          result_10675024 = 1;
          break BeforeRet;
          }
          }
          i_10675026 += 1;
          j_10675028 += 1;
        }
    } while(false);
  } while (false);

  return result_10675024;

}
function findNormalized_11500014(x_11500016, inArray_11500018) {
  var result_11500019 = 0;

  BeforeRet: do {
    var i_11500021 = 0;
    L1: do {
        L2: while (true) {
        if (!(i_11500021 < ((inArray_11500018).length-1))) break L2;
          if ((nsuCmpIgnoreStyle(x_11500016, inArray_11500018[i_11500021]) == 0)) {
          result_11500019 = i_11500021;
          break BeforeRet;
          }
          
          i_11500021 += 2;
        }
    } while(false);
    result_11500019 = -1;
    break BeforeRet;
  } while (false);

  return result_11500019;

}
function substr_2806022(s_2806024, first_2806025, last_2806026) {
  var result_2806027 = [];

    var first_2806028 = nimMax(first_2806025, 0);
    var L_2806030 = nimMax(((nimMin(last_2806026, ((s_2806024).length-1)) - first_2806028) + 1), 0);
    result_2806027 = nimCopy(null, mnewString(L_2806030), NTI2421013);
    L1: do {
      var i_2806039 = 0;
      var colontmp__13970319 = 0;
      colontmp__13970319 = (L_2806030 - 1);
      var res_13970320 = 0;
      L2: do {
          L3: while (true) {
          if (!(res_13970320 <= colontmp__13970319)) break L3;
            i_2806039 = res_13970320;
            result_2806027[i_2806039] = s_2806024[(i_2806039 + first_2806028)];
            res_13970320 += 1;
          }
      } while(false);
    } while(false);

  return result_2806027;

}
function nsuAddf(s_11505018, s_11505018_Idx, formatstr_11505019, a_11505021) {
                  var Tmp5;
            var Tmp6;
              var Tmp7;
            var Tmp10;
              var Tmp11;
                var Tmp12;
                  var Tmp15;
              var Tmp16;

    var i_11505025 = 0;
    var num_11505027 = 0;
    L1: do {
        L2: while (true) {
        if (!(i_11505025 < (formatstr_11505019).length)) break L2;
          if (((formatstr_11505019[i_11505025] == 36) && ((i_11505025 + 1) < (formatstr_11505019).length))) {
          switch (formatstr_11505019[(i_11505025 + 1)]) {
          case 35:
            if ((((a_11505021).length-1) < num_11505027)) {
            invalidFormatString_11500046();
            }
            
            s_11505018[s_11505018_Idx].push.apply(s_11505018[s_11505018_Idx], a_11505021[num_11505027]);;
            i_11505025 += 2;
            num_11505027 += 1;
            break;
          case 36:
            addChar(s_11505018[s_11505018_Idx], 36);;
            i_11505025 += 2;
            break;
          case 49:
          case 50:
          case 51:
          case 52:
          case 53:
          case 54:
          case 55:
          case 56:
          case 57:
          case 45:
            var j_11510025 = 0;
            i_11505025 += 1;
            var negative_11510032 = (formatstr_11505019[i_11505025] == 45);
            if (negative_11510032) {
            i_11505025 += 1;
            }
            
            L3: do {
                L4: while (true) {
                  if (!(i_11505025 < (formatstr_11505019).length)) Tmp5 = false; else {                    Tmp5 = (ConstSet65[formatstr_11505019[i_11505025]] != undefined);                  }                if (!Tmp5) break L4;
                  j_11510025 = (((j_11510025 * 10) + formatstr_11505019[i_11505025]) - 48);
                  i_11505025 += 1;
                }
            } while(false);
            if (!(negative_11510032)) {
            Tmp6 = (j_11510025 - 1);
            }
            else {
            Tmp6 = ((a_11505021).length - j_11510025);
            }
            
            var idx_11515025 = Tmp6;
              if ((idx_11515025 < 0)) Tmp7 = true; else {                Tmp7 = (((a_11505021).length-1) < idx_11515025);              }            if (Tmp7) {
            invalidFormatString_11500046();
            }
            
            s_11505018[s_11505018_Idx].push.apply(s_11505018[s_11505018_Idx], a_11505021[idx_11515025]);;
            break;
          case 123:
            var j_11520006 = (i_11505025 + 2);
            var k_11520008 = 0;
            var negative_11520009 = (formatstr_11505019[j_11520006] == 45);
            if (negative_11520009) {
            j_11520006 += 1;
            }
            
            var isNumber_11520017 = 0;
            L8: do {
                L9: while (true) {
                if (!((j_11520006 < (formatstr_11505019).length) && !((ConstSet66[formatstr_11505019[j_11520006]] != undefined)))) break L9;
                  if ((ConstSet67[formatstr_11505019[j_11520006]] != undefined)) {
                  k_11520008 = (((k_11520008 * 10) + formatstr_11505019[j_11520006]) - 48);
                  if ((isNumber_11520017 == 0)) {
                  isNumber_11520017 = 1;
                  }
                  
                  }
                  else {
                    isNumber_11520017 = -1;
                  }
                  
                  j_11520006 += 1;
                }
            } while(false);
            if ((isNumber_11520017 == 1)) {
            if (!(negative_11520009)) {
            Tmp10 = (k_11520008 - 1);
            }
            else {
            Tmp10 = ((a_11505021).length - k_11520008);
            }
            
            var idx_11530025 = Tmp10;
              if ((idx_11530025 < 0)) Tmp11 = true; else {                Tmp11 = (((a_11505021).length-1) < idx_11530025);              }            if (Tmp11) {
            invalidFormatString_11500046();
            }
            
            s_11505018[s_11505018_Idx].push.apply(s_11505018[s_11505018_Idx], a_11505021[idx_11530025]);;
            }
            else {
              var x_11535006 = findNormalized_11500014(substr_2806022(formatstr_11505019, (i_11505025 + 2), (j_11520006 - 1)), a_11505021);
                if (!(0 <= x_11535006)) Tmp12 = false; else {                  Tmp12 = (x_11535006 < ((a_11505021).length-1));                }              if (Tmp12) {
              s_11505018[s_11505018_Idx].push.apply(s_11505018[s_11505018_Idx], a_11505021[(x_11535006 + 1)]);;
              }
              else {
              invalidFormatString_11500046();
              }
              
            }
            
            i_11505025 = (j_11520006 + 1);
            break;
          case 97:
          case 98:
          case 99:
          case 100:
          case 101:
          case 102:
          case 103:
          case 104:
          case 105:
          case 106:
          case 107:
          case 108:
          case 109:
          case 110:
          case 111:
          case 112:
          case 113:
          case 114:
          case 115:
          case 116:
          case 117:
          case 118:
          case 119:
          case 120:
          case 121:
          case 122:
          case 65:
          case 66:
          case 67:
          case 68:
          case 69:
          case 70:
          case 71:
          case 72:
          case 73:
          case 74:
          case 75:
          case 76:
          case 77:
          case 78:
          case 79:
          case 80:
          case 81:
          case 82:
          case 83:
          case 84:
          case 85:
          case 86:
          case 87:
          case 88:
          case 89:
          case 90:
          case 128:
          case 129:
          case 130:
          case 131:
          case 132:
          case 133:
          case 134:
          case 135:
          case 136:
          case 137:
          case 138:
          case 139:
          case 140:
          case 141:
          case 142:
          case 143:
          case 144:
          case 145:
          case 146:
          case 147:
          case 148:
          case 149:
          case 150:
          case 151:
          case 152:
          case 153:
          case 154:
          case 155:
          case 156:
          case 157:
          case 158:
          case 159:
          case 160:
          case 161:
          case 162:
          case 163:
          case 164:
          case 165:
          case 166:
          case 167:
          case 168:
          case 169:
          case 170:
          case 171:
          case 172:
          case 173:
          case 174:
          case 175:
          case 176:
          case 177:
          case 178:
          case 179:
          case 180:
          case 181:
          case 182:
          case 183:
          case 184:
          case 185:
          case 186:
          case 187:
          case 188:
          case 189:
          case 190:
          case 191:
          case 192:
          case 193:
          case 194:
          case 195:
          case 196:
          case 197:
          case 198:
          case 199:
          case 200:
          case 201:
          case 202:
          case 203:
          case 204:
          case 205:
          case 206:
          case 207:
          case 208:
          case 209:
          case 210:
          case 211:
          case 212:
          case 213:
          case 214:
          case 215:
          case 216:
          case 217:
          case 218:
          case 219:
          case 220:
          case 221:
          case 222:
          case 223:
          case 224:
          case 225:
          case 226:
          case 227:
          case 228:
          case 229:
          case 230:
          case 231:
          case 232:
          case 233:
          case 234:
          case 235:
          case 236:
          case 237:
          case 238:
          case 239:
          case 240:
          case 241:
          case 242:
          case 243:
          case 244:
          case 245:
          case 246:
          case 247:
          case 248:
          case 249:
          case 250:
          case 251:
          case 252:
          case 253:
          case 254:
          case 255:
          case 95:
            var j_11540006 = (i_11505025 + 1);
            L13: do {
                L14: while (true) {
                  if (!(j_11540006 < (formatstr_11505019).length)) Tmp15 = false; else {                    Tmp15 = (ConstSet69[formatstr_11505019[j_11540006]] != undefined);                  }                if (!Tmp15) break L14;
                  j_11540006 += 1;
                }
            } while(false);
            var x_11545013 = findNormalized_11500014(substr_2806022(formatstr_11505019, (i_11505025 + 1), (j_11540006 - 1)), a_11505021);
              if (!(0 <= x_11545013)) Tmp16 = false; else {                Tmp16 = (x_11545013 < ((a_11505021).length-1));              }            if (Tmp16) {
            s_11505018[s_11505018_Idx].push.apply(s_11505018[s_11505018_Idx], a_11505021[(x_11545013 + 1)]);;
            }
            else {
            invalidFormatString_11500046();
            }
            
            i_11505025 = j_11540006;
            break;
          default: 
            invalidFormatString_11500046();
            break;
          }
          }
          else {
            addChar(s_11505018[s_11505018_Idx], formatstr_11505019[i_11505025]);;
            i_11505025 += 1;
          }
          
        }
    } while(false);

  
}
function nsuFormatOpenArray(formatstr_11550027, a_11550029) {
  var result_11550030 = [[]];

    result_11550030[0] = nimCopy(null, mnewString(0), NTI2421013);
    nsuAddf(result_11550030, 0, formatstr_11550027, a_11550029);

  return result_11550030[0];

}
function getLine_12461332(my_12461334) {
  var result_12461335 = 0;

    result_12461335 = my_12461334.lineNumber;

  return result_12461335;

}
function getColNumber_12455214(L_12455216, pos_12455217) {
  var result_12455218 = 0;

    result_12455218 = Math.abs((pos_12455217 - L_12455216.lineStart));

  return result_12455218;

}
function getColumn_12461300(my_12461302) {
  var result_12461303 = 0;

    result_12461303 = getColNumber_12455214(my_12461302, my_12461302.bufpos);

  return result_12461303;

}
function errorMsg_12470266(my_12470268, msg_12470269) {
  var result_12470270 = [];

    result_12470270 = nimCopy(null, nsuFormatOpenArray(makeNimstrLit("$1($2, $3) Error: $4"), [nimCopy(null, my_12470268.filename, NTI2421013), cstrToNimstr((getLine_12461332(my_12470268))+""), cstrToNimstr((getColumn_12461300(my_12470268))+""), nimCopy(null, msg_12470269, NTI2421013)]), NTI2421013);

  return result_12470270;

}
function add_12745257(father_12745259, son_12745260) {
    var Tmp1;

    var Tmp1 = father_12745259;
    if (ConstSet70[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'s\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.s.push(son_12745260);;

  
}
function addNode_12901027(father_12901029, son_12901030) {
    if (!((son_12901030 == null))) {
    add_12745257(father_12901029, son_12901030);
    }
    

  
}
function newComment_12685214(comment_12685216) {
    var Tmp1;

  var result_12685217 = null;

    result_12685217 = newXmlNode_12676049(5);
    var Tmp1 = result_12685217;
    if (ConstSet71[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fText\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.fText = nimCopy(null, comment_12685216, NTI2421013);

  return result_12685217;

}
function newText_12676162(text_12676164) {
    var Tmp1;

  var result_12676165 = null;

    result_12676165 = newXmlNode_12676049(0);
    var Tmp1 = result_12676165;
    if (ConstSet72[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fText\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.fText = nimCopy(null, text_12676164, NTI2421013);

  return result_12676165;

}
function errorMsg_12461366(my_12461368) {
  var result_12461369 = [];

    result_12461369 = nimCopy(null, nsuFormatOpenArray(makeNimstrLit("$1($2, $3) Error: $4"), [nimCopy(null, my_12461368.filename, NTI2421013), cstrToNimstr((getLine_12461332(my_12461368))+""), cstrToNimstr((getColumn_12461300(my_12461368))+""), nimCopy(null, errorMessages_12461072[my_12461368.err], NTI2421013)]), NTI2421013);

  return result_12461369;

}
function attrsHEX3D_12830215(n_12830217, attr_12830218) {
    var Tmp1;

    var Tmp1 = n_12830217;
    if (ConstSet73[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fAttr\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.fAttr = attr_12830218;

  
}
function nstnewStringTable(mode_12600028) {
  var result_12600030 = null;

    result_12600030 = ({m_type: NTI12557208, counter: 0, data: [], mode: 0});
    result_12600030.mode = mode_12600028;
    result_12600030.counter = 0;
    result_12600030.data = new Array(64); for (var i=0;i<64;++i) {result_12600030.data[i]={Field0: [], Field1: [], Field2: false};}
  return result_12600030;

}
function hash_11655214(x_11655216) {
  var result_11655217 = 0;

    result_11655217 = murmurHash_11616229((x_11655216.slice(0, ((x_11655216).length-1)+1)));

  return result_11655217;

}
function HEX21HEX26_11601057(h_11601059, val_11601060) {
  var result_11601061 = 0;

    var h_11601062 = (h_11601059 >>> 0);
    var val_11601063 = (val_11601060 >>> 0);
    var res_11601064 = ((h_11601062 + val_11601063) >>> 0);
    res_11601064 = ((res_11601064 + (res_11601064 << 10)) >>> 0);
    res_11601064 = (res_11601064 ^ ((res_11601064 >>> 0) >>> 6));
    result_11601061 = (res_11601064|0);

  return result_11601061;

}
function HEX21HEX24_11601092(h_11601094) {
  var result_11601095 = 0;

    var h_11601096 = (h_11601094 >>> 0);
    var res_11601104 = ((h_11601096 + (h_11601096 << 3)) >>> 0);
    res_11601104 = (res_11601104 ^ ((res_11601104 >>> 0) >>> 11));
    res_11601104 = ((res_11601104 + (res_11601104 << 15)) >>> 0);
    result_11601095 = (res_11601104|0);

  return result_11601095;

}
function hashIgnoreCase_11665045(x_11665047) {
  var result_11665048 = 0;

    var h_11665049 = 0;
    L1: do {
      var i_11665058 = 0;
      var colontmp__13970333 = 0;
      colontmp__13970333 = ((x_11665047).length - 1);
      var res_13970334 = 0;
      L2: do {
          L3: while (true) {
          if (!(res_13970334 <= colontmp__13970333)) break L3;
            i_11665058 = res_13970334;
            var c_11665059 = x_11665047[i_11665058];
            if ((ConstSet74[c_11665059] != undefined)) {
            c_11665059 = (c_11665059 + 32);
            }
            
            h_11665049 = HEX21HEX26_11601057(h_11665049, c_11665059);
            res_13970334 += 1;
          }
      } while(false);
    } while(false);
    result_11665048 = HEX21HEX24_11601092(h_11665049);

  return result_11665048;

}
function hashIgnoreStyle_11656414(x_11656416) {
  var result_11656417 = 0;

    var h_11656418 = 0;
    var i_11656420 = 0;
    var xLen_11656421 = (x_11656416).length;
    L1: do {
        L2: while (true) {
        if (!(i_11656420 < xLen_11656421)) break L2;
          var c_11656422 = x_11656416[i_11656420];
          if ((c_11656422 == 95)) {
          i_11656420 += 1;
          }
          else {
            if ((ConstSet75[c_11656422] != undefined)) {
            c_11656422 = (c_11656422 + 32);
            }
            
            h_11656418 = HEX21HEX26_11601057(h_11656418, c_11656422);
            i_11656420 += 1;
          }
          
        }
    } while(false);
    result_11656417 = HEX21HEX24_11601092(h_11656418);

  return result_11656417;

}
function myhash_12557419(t_12557421, key_12557422) {
  var result_12557423 = 0;

    switch (t_12557421.mode) {
    case 0:
      result_12557423 = hash_11655214(key_12557422);
      break;
    case 1:
      result_12557423 = hashIgnoreCase_11665045(key_12557422);
      break;
    case 2:
      result_12557423 = hashIgnoreStyle_11656414(key_12557422);
      break;
    }

  return result_12557423;

}
function cmpStrings(a_2695186, b_2695187) {
        if (a_2695186 == b_2695187) return 0;
    if (!a_2695186) return -1;
    if (!b_2695187) return 1;
    for (var i = 0; i < a_2695186.length && i < b_2695187.length; i++) {
      var result = a_2695186[i] - b_2695187[i];
      if (result != 0) return result;
    }
    return a_2695186.length - b_2695187.length;
  

  
}
function cmp_2429060(x_2429062, y_2429063) {
  var result_2695206 = 0;

  BeforeRet: do {
    result_2695206 = cmpStrings(x_2429062, y_2429063);
    break BeforeRet;
  } while (false);

  return result_2695206;

}
function nsuCmpIgnoreCase(a_10670016, b_10670017) {
  var result_10670018 = 0;

  BeforeRet: do {
    var i_10670020 = 0;
    var m_10670021 = nimMin((a_10670016).length, (b_10670017).length);
    L1: do {
        L2: while (true) {
        if (!(i_10670020 < m_10670021)) break L2;
          result_10670018 = (nsuToLowerAsciiChar(a_10670016[i_10670020]) - nsuToLowerAsciiChar(b_10670017[i_10670020]));
          if (!((result_10670018 == 0))) {
          break BeforeRet;
          }
          
          i_10670020 += 1;
        }
    } while(false);
    result_10670018 = ((a_10670016).length - (b_10670017).length);
  } while (false);

  return result_10670018;

}
function myCmp_12557439(t_12557441, a_12557442, b_12557443) {
  var result_12557444 = false;

    switch (t_12557441.mode) {
    case 0:
      result_12557444 = (cmp_2429060(a_12557442, b_12557443) == 0);
      break;
    case 1:
      result_12557444 = (nsuCmpIgnoreCase(a_12557442, b_12557443) == 0);
      break;
    case 2:
      result_12557444 = (nsuCmpIgnoreStyle(a_12557442, b_12557443) == 0);
      break;
    }

  return result_12557444;

}
function nextTry_12570214(h_12570216, maxHash_12570217) {
  var result_12570218 = 0;

    result_12570218 = ((h_12570216 + 1) & maxHash_12570217);

  return result_12570218;

}
function rawGet_12570232(t_12570234, key_12570235) {
  var result_12570236 = 0;

  BeforeRet: do {
    var h_12570243 = (myhash_12557419(t_12570234, key_12570235) & ((t_12570234.data).length-1));
    L1: do {
        L2: while (true) {
        if (!t_12570234.data[h_12570243].Field2) break L2;
          if (myCmp_12557439(t_12570234, t_12570234.data[h_12570243].Field0, key_12570235)) {
          result_12570236 = h_12570243;
          break BeforeRet;
          }
          
          h_12570243 = nextTry_12570214(h_12570243, ((t_12570234.data).length-1));
        }
    } while(false);
    result_12570236 = -1;
  } while (false);

  return result_12570236;

}
function mustRehash_12557458(length_12557460, counter_12557461) {
  var result_12557462 = false;

    result_12557462 = (((length_12557460 * 2) < (counter_12557461 * 3)) || ((length_12557460 - counter_12557461) < 4));

  return result_12557462;

}
function rawInsert_12595032(t_12595034, data_12595036, data_12595036_Idx, key_12595037, val_12595038) {
    var h_12595045 = (myhash_12557419(t_12595034, key_12595037) & ((data_12595036[data_12595036_Idx]).length-1));
    L1: do {
        L2: while (true) {
        if (!data_12595036[data_12595036_Idx][h_12595045].Field2) break L2;
          h_12595045 = nextTry_12570214(h_12595045, ((data_12595036[data_12595036_Idx]).length-1));
        }
    } while(false);
    data_12595036[data_12595036_Idx][h_12595045].Field0 = nimCopy(null, key_12595037, NTI2421013);
    data_12595036[data_12595036_Idx][h_12595045].Field1 = nimCopy(null, val_12595038, NTI2421013);
    data_12595036[data_12595036_Idx][h_12595045].Field2 = true;

  
}
function enlarge_12595065(t_12595067) {
            var Tmp4;
            var Tmp5;

    var n_12595068 = [[]];
    n_12595068[0] = new Array(((t_12595067.data).length * 2)); for (var i=0;i<((t_12595067.data).length * 2);++i) {n_12595068[0][i]={Field0: [], Field1: [], Field2: false};}    L1: do {
      var i_12595094 = 0;
      var colontmp__13970347 = 0;
      colontmp__13970347 = ((t_12595067.data).length-1);
      var res_13970348 = 0;
      L2: do {
          L3: while (true) {
          if (!(res_13970348 <= colontmp__13970347)) break L3;
            i_12595094 = res_13970348;
            if (t_12595067.data[i_12595094].Field2) {
            Tmp4 = t_12595067.data[i_12595094].Field0;
            t_12595067.data[i_12595094].Field0 = genericReset(t_12595067.data[i_12595094].Field0, NTI2421013);
            Tmp5 = t_12595067.data[i_12595094].Field1;
            t_12595067.data[i_12595094].Field1 = genericReset(t_12595067.data[i_12595094].Field1, NTI2421013);
            rawInsert_12595032(t_12595067, n_12595068, 0, Tmp4, Tmp5);
            }
            
            res_13970348 += 1;
          }
      } while(false);
    } while(false);
    var Tmp6 = t_12595067.data; t_12595067.data = n_12595068[0]; n_12595068[0] = Tmp6;
  
}
function nstPut(t_12595175, key_12595176, val_12595177) {
    var index_12595178 = rawGet_12570232(t_12595175, key_12595176);
    if ((0 <= index_12595178)) {
    t_12595175.data[index_12595178].Field1 = nimCopy(null, val_12595177, NTI2421013);
    }
    else {
      if (mustRehash_12557458((t_12595175.data).length, t_12595175.counter)) {
      enlarge_12595065(t_12595175);
      }
      
      rawInsert_12595032(t_12595175, t_12595175, "data", key_12595176, val_12595177);
      t_12595175.counter += 1;
    }
    

  
}
function nstnewStringTableWithTableConstr(keyValuePairs_12600126, mode_12600127) {
  var result_12600129 = null;

    result_12600129 = nstnewStringTable(mode_12600127);
    L1: do {
      var key_12600162 = null;
      var key_12600162_Idx = 0;
      var val_12600164 = null;
      var val_12600164_Idx = 0;
      var i_13970329 = 0;
      L2: do {
          L3: while (true) {
          if (!(i_13970329 < (keyValuePairs_12600126).length)) break L3;
            key_12600162 = keyValuePairs_12600126[i_13970329]; key_12600162_Idx = "Field0";
            val_12600164 = keyValuePairs_12600126[i_13970329]; val_12600164_Idx = "Field1";
            nstPut(result_12600129, key_12600162[key_12600162_Idx], val_12600164[val_12600164_Idx]);
            i_13970329 += 1;
          }
      } while(false);
    } while(false);

  return result_12600129;

}
function attrs_12820246(n_12820248) {
    var Tmp1;

  var result_12820249 = null;

    var Tmp1 = n_12820248;
    if (ConstSet76[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fAttr\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    result_12820249 = Tmp1.fAttr;

  return result_12820249;

}
function newCData_12685232(cdata_12685234) {
    var Tmp1;

  var result_12685235 = null;

    result_12685235 = newXmlNode_12676049(3);
    var Tmp1 = result_12685235;
    if (ConstSet77[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fText\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.fText = nimCopy(null, cdata_12685234, NTI2421013);

  return result_12685235;

}
function newEntity_12685250(entity_12685252) {
    var Tmp1;

  var result_12685253 = null;

    result_12685253 = newXmlNode_12676049(4);
    var Tmp1 = result_12685253;
    if (ConstSet78[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fText\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.fText = nimCopy(null, entity_12685252, NTI2421013);

  return result_12685253;

}
function parse_12905022(x_12905025, errors_12905028, errors_12905028_Idx) {
  var result_12925243 = null;

    switch (kind_12461215(x_12905025)) {
    case 4:
      result_12925243 = newComment_12685214(x_12905025.a);
      next_12555021(x_12905025);
      break;
    case 2:
    case 3:
      result_12925243 = newText_12676162(x_12905025.a);
      next_12555021(x_12905025);
      break;
    case 5:
    case 13:
      next_12555021(x_12905025);
      break;
    case 0:
      errors_12905028[errors_12905028_Idx].push(errorMsg_12461366(x_12905025));;
      next_12555021(x_12905025);
      break;
    case 6:
      result_12925243 = newElement_12676113(x_12905025.a);
      next_12555021(x_12905025);
      untilElementEnd_12905029(x_12905025, result_12925243, errors_12905028, errors_12905028_Idx);
      break;
    case 7:
      errors_12905028[errors_12905028_Idx].push(errorMsg_12470266(x_12905025, (makeNimstrLit("unexpected ending tag: ") || []).concat(x_12905025.a || [])));;
      break;
    case 8:
      result_12925243 = newElement_12676113(x_12905025.a);
      next_12555021(x_12905025);
      attrsHEX3D_12830215(result_12925243, nstnewStringTableWithTableConstr([], 0));
      L1: do {
          L2: while (true) {
          if (!true) break L2;
            switch (kind_12461215(x_12905025)) {
            case 9:
              nstPut(attrs_12820246(result_12925243), x_12905025.a, x_12905025.b);
              next_12555021(x_12905025);
              break;
            case 10:
              next_12555021(x_12905025);
              break L1;
              break;
            case 0:
              errors_12905028[errors_12905028_Idx].push(errorMsg_12461366(x_12905025));;
              next_12555021(x_12905025);
              break L1;
              break;
            default: 
              errors_12905028[errors_12905028_Idx].push(errorMsg_12470266(x_12905025, makeNimstrLit("\'>\' expected")));;
              next_12555021(x_12905025);
              break L1;
              break;
            }
          }
      } while(false);
      untilElementEnd_12905029(x_12905025, result_12925243, errors_12905028, errors_12905028_Idx);
      break;
    case 9:
    case 10:
      errors_12905028[errors_12905028_Idx].push(errorMsg_12470266(x_12905025, makeNimstrLit("<some_tag> expected")));;
      next_12555021(x_12905025);
      break;
    case 11:
      result_12925243 = newCData_12685232(x_12905025.a);
      next_12555021(x_12905025);
      break;
    case 12:
      result_12925243 = newEntity_12685250(x_12905025.a);
      next_12555021(x_12905025);
      break;
    case 1:
      break;
    }

  return result_12925243;

}
function untilElementEnd_12905029(x_12905032, result_12905033, errors_12905036, errors_12905036_Idx) {
  BeforeRet: do {
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (kind_12461215(x_12905032)) {
          case 7:
            if (eqStrings(x_12905032.a, tag_12715215(result_12905033))) {
            break BeforeRet;
            }
            else {
            errors_12905036[errors_12905036_Idx].push(errorMsg_12470266(x_12905032, (makeNimstrLit("</") || []).concat(tag_12715215(result_12905033) || [],makeNimstrLit("> expected") || [])));;
            }
            
            break L1;
            break;
          case 1:
            errors_12905036[errors_12905036_Idx].push(errorMsg_12470266(x_12905032, (makeNimstrLit("</") || []).concat(tag_12715215(result_12905033) || [],makeNimstrLit("> expected") || [])));;
            break L1;
            break;
          default: 
            addNode_12901027(result_12905033, parse_12905022(x_12905032, errors_12905036, errors_12905036_Idx));
            break;
          }
        }
    } while(false);
  } while (false);

  
}
function parseXml_13135229(text_13135231, i_13135232) {
  var result_13135234 = {Field0: false, Field1: 0};

    var errors_13135236 = [[]];
    var x_13135237 = [({m_type: NTI12461023, a: [], b: [], c: [], kind: 0, err: 0, state: 0, cIsEmpty: false, filename: [], options: {}, bufpos: 0, buf: [], input: null, lineNumber: 0, sentinel: 0, lineStart: 0, offsetBase: 0, refillChars: {}})];
    var stream_13135238 = newStringStream_12305214(text_13135231);
    setPosition_12046240(stream_13135238, i_13135232);
    open_12461101(x_13135237[0], stream_13135238, [], ConstSet54);
    next_12555021(x_13135237[0]);
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (kind_12461215(x_13135237[0])) {
          case 8:
          case 6:
            var node_13160201 = newElement_12676113(x_13135237[0].a);
            untilElementEnd_12905029(x_13135237[0], node_13160201, errors_13135236, 0);
            result_13135234["Field0"] = true;
            break;
          case 4:
          case 13:
          case 5:
          case 11:
            next_12555021(x_13135237[0]);
            result_13135234["Field0"] = true;
            break;
          case 7:
          case 2:
          case 3:
          case 1:
            result_13135234["Field0"] = true;
            break L1;
            break;
          default: 
            result_13135234["Field0"] = false;
            break L1;
            break;
          }
        }
    } while(false);
    result_13135234["Field1"] = (i_13135232 + x_13135237[0].bufpos);

  return result_13135234;

}
function parseAmpStr_13175026(parser_13175028, parser_13175028_Idx) {
    var Tmp1;

  var result_13175029 = [null];

  BeforeRet: do {
    var initialPos_13175030 = parser_13175028[parser_13175028_Idx].pos;
    if ((initialPos_13175030 < (parser_13175028[parser_13175028_Idx].str).length)) {
    Tmp1 = parser_13175028[parser_13175028_Idx].str.charCodeAt(initialPos_13175030);
    }
    else {
    Tmp1 = 32;
    }
    
    var firstChar_13175031 = Tmp1;
    switch (firstChar_13175031) {
    case 65:
    case 66:
    case 67:
    case 68:
    case 69:
    case 70:
    case 71:
    case 72:
    case 73:
    case 74:
    case 75:
    case 76:
    case 77:
    case 78:
    case 79:
    case 80:
    case 81:
    case 82:
    case 83:
    case 84:
    case 85:
    case 86:
    case 87:
    case 88:
    case 89:
    case 90:
    case 97:
    case 98:
    case 99:
    case 100:
    case 101:
    case 102:
    case 103:
    case 104:
    case 105:
    case 106:
    case 107:
    case 108:
    case 109:
    case 110:
    case 111:
    case 112:
    case 113:
    case 114:
    case 115:
    case 116:
    case 117:
    case 118:
    case 119:
    case 120:
    case 121:
    case 122:
      parser_13175028[parser_13175028_Idx].pos += 2;
      result_13175029[0] = "&";
      L2: do {
        var ch_13175038 = 0;
        L3: do {
            L4: while (true) {
            if (!(parser_13175028[parser_13175028_Idx].pos < (parser_13175028[parser_13175028_Idx].str).length)) break L4;
              ch_13175038 = parser_13175028[parser_13175028_Idx].str.charCodeAt((parser_13175028[parser_13175028_Idx].pos + 0));
              add_11776050(result_13175029, 0, ch_13175038);
              if ((ch_13175038 == 59)) {
              break L2;
              }
              else {
              if (!((ConstSet83[ch_13175038] != undefined))) {
              parser_13175028[parser_13175028_Idx].pos = initialPos_13175030;
              result_13175029[0] = "&amp;";
              break BeforeRet;
              }
              }
              parser_13175028[parser_13175028_Idx].pos += 1;
            }
        } while(false);
      } while(false);
      break;
    case 35:
      parser_13175028[parser_13175028_Idx].pos += 2;
      result_13175029[0] = "&";
      L5: do {
        var ch_13180014 = 0;
        L6: do {
            L7: while (true) {
            if (!(parser_13175028[parser_13175028_Idx].pos < (parser_13175028[parser_13175028_Idx].str).length)) break L7;
              ch_13180014 = parser_13175028[parser_13175028_Idx].str.charCodeAt((parser_13175028[parser_13175028_Idx].pos + 0));
              add_11776050(result_13175029, 0, ch_13180014);
              if ((ch_13180014 == 59)) {
              break L5;
              }
              else {
              if (!((ConstSet84[ch_13180014] != undefined))) {
              parser_13175028[parser_13175028_Idx].pos = initialPos_13175030;
              result_13175029[0] = "&amp;";
              break BeforeRet;
              }
              }
              parser_13175028[parser_13175028_Idx].pos += 1;
            }
        } while(false);
      } while(false);
      break;
    default: 
      result_13175029[0] = "&amp;";
      break;
    }
  } while (false);

  return result_13175029[0];

}
function parseDelimed_13200020(parser_13200022, parser_13200022_Idx, delim_13200023, singleLine_13200024) {
                    var Tmp5;
                  var Tmp6;
                    var Tmp7;
                  var Tmp8;
              var Tmp9;
              function parseAux_13215401(tag_13215403, del_13215404, parser_13215405, parser_13215405_Idx, acceptedReasons_13215407) {
                    var Tmp1;

                var result_13215408 = 0;

                  var currentPos_13215409 = parser_13215405[parser_13215405_Idx].pos;
                  var colontmp__13970177 = parseDelimed_13200020(parser_13215405, parser_13215405_Idx, del_13215404, singleLine_13200024);
                  var finishReason_13215410 = colontmp__13970177["Field0"];
                  var parsedElems_13215411 = nimCopy(null, colontmp__13970177["Field1"], NTI13200026);
                  if ((acceptedReasons_13215407[finishReason_13215410] != undefined)) {
                  elems_13200041[0].push(newElem_11776712(tag_13215403, parsedElems_13215411));;
                  lastStr_13200029 = newStr_11776663("");
                  elems_13200041[0].push(lastStr_13200029);;
                  result_13215408 = 0;
                  }
                  else {
                    var Tmp1 = lastStr_13200029;
                    if (ConstSet13[Tmp1.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                    Tmp1.str += HEX5BHEX5D_11776088(parser_13215405[parser_13215405_Idx].str, HEX2EHEX2E_4625220(initialPos_13215202, (currentPos_13215409 - 1)));;
                    add_11950733(elems_13200041, 0, parsedElems_13215411);
                    lastStr_13200029 = newStr_11776663("");
                    elems_13200041[0].push(lastStr_13200029);;
                    result_13215408 = finishReason_13215410;
                  }
                  

                return result_13215408;

              }
              function bracket_13250059(image_13250061, parser_13250062, parser_13250062_Idx) {
                    var Tmp1;
                  var Tmp2;
                  var Tmp3;
                  var Tmp4;

                var result_13250063 = 0;

                  var elem_13250064 = parseBracket_13161414(image_13250061, parser_13250062, parser_13250062_Idx, singleLine_13200024);
                    var Tmp1 = elem_13250064;
                    if (ConstSet39[Tmp1.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                  if ((Tmp1.tag == 0)) {
                  var Tmp2 = lastStr_13200029;
                  if (ConstSet40[Tmp2.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                  if (image_13250061) {
                  Tmp3 = "![";
                  }
                  else {
                  Tmp3 = "[";
                  }
                  
                  Tmp2.str += Tmp3;;
                  var Tmp4 = elem_13250064;
                  if (ConstSet41[Tmp4.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                  add_11950733(elems_13200041, 0, Tmp4.content);
                  lastStr_13200029 = newStr_11776663("");
                  elems_13200041[0].push(lastStr_13200029);;
                  }
                  else {
                    elems_13200041[0].push(elem_13250064);;
                    lastStr_13200029 = newStr_11776663("");
                    elems_13200041[0].push(lastStr_13200029);;
                  }
                  
                  result_13250063 = 0;

                return result_13250063;

              }
              var Tmp10;
                var Tmp11;
                var Tmp12;
                var Tmp13;
              var Tmp14;
              var Tmp15;
                var Tmp16;
              var Tmp17;
              var Tmp18;
                var Tmp19;
                var Tmp20;

  var result_13200027 = {Field0: 0, Field1: []};

  BeforeRet: do {
    var escaped_13200028 = false;
    var lastStr_13200029 = newStr_11776663("");
    var elems_13200041 = [[lastStr_13200029]];
    L1: do {
      var ch_13200062 = 0;
      L2: do {
          L3: while (true) {
          if (!(parser_13200022[parser_13200022_Idx].pos < (parser_13200022[parser_13200022_Idx].str).length)) break L3;
            ch_13200062 = parser_13200022[parser_13200022_Idx].str.charCodeAt((parser_13200022[parser_13200022_Idx].pos + 0));
            L4: do {
              if (!(escaped_13200028)) {
              var initialPos_13215202 = parser_13200022[parser_13200022_Idx].pos;
              switch (toJSStr(delim_13200023)) {
              case "":
                break;
              case "*":
                if (nextMatch_12045190(parser_13200022, parser_13200022_Idx, makeNimstrLit("**"), 0)) {
                var colontmp__13970164 = parseDelimed_13200020(parser_13200022, parser_13200022_Idx, makeNimstrLit("**"), singleLine_13200024);
                var finishReason_13275022 = colontmp__13970164["Field0"];
                var parsedElems_13275023 = nimCopy(null, colontmp__13970164["Field1"], NTI13200026);
                if ((finishReason_13275022 == 0)) {
                elems_13200041[0].push(newElem_11776712(16, parsedElems_13275023));;
                lastStr_13200029 = newStr_11776663("");
                elems_13200041[0].push(lastStr_13200029);;
                break L4;
                }
                else {
                  parser_13200022[parser_13200022_Idx].pos = initialPos_13215202;
                  if (!(surroundedWhitespace_12045014(parser_13200022[parser_13200022_Idx], 0))) {
                  var colontmp__13970124 = 0;
                  var colontmp__13970125 = nimCopy(null, elems_13200041[0], NTI13200026);
                  nimCopy(result_13200027, {Field0: colontmp__13970124, Field1: nimCopy(null, colontmp__13970125, NTI13200026)}, NTI13200025);
                  break BeforeRet;
                  }
                  else {
                    var Tmp5 = lastStr_13200029;
                    if (ConstSet8[Tmp5.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                    add_13290003(Tmp5, "str");
                    break L4;
                  }
                  
                }
                
                }
                else {
                  if (!!(surroundedWhitespace_12045014(parser_13200022[parser_13200022_Idx], 0))) Tmp6 = false; else {                    Tmp6 = nextMatch_12045190(parser_13200022, parser_13200022_Idx, makeNimstrLit("*"), 0);                  }                if (Tmp6) {
                parser_13200022[parser_13200022_Idx].pos -= 1;
                var colontmp__13970126 = 0;
                var colontmp__13970127 = nimCopy(null, elems_13200041[0], NTI13200026);
                nimCopy(result_13200027, {Field0: colontmp__13970126, Field1: nimCopy(null, colontmp__13970127, NTI13200026)}, NTI13200025);
                break BeforeRet;
                }
                }
                break;
              case "_":
                if (nextMatch_12045190(parser_13200022, parser_13200022_Idx, makeNimstrLit("__"), 0)) {
                var colontmp__13970165 = parseDelimed_13200020(parser_13200022, parser_13200022_Idx, makeNimstrLit("__"), singleLine_13200024);
                var finishReason_13290030 = colontmp__13970165["Field0"];
                var parsedElems_13290031 = nimCopy(null, colontmp__13970165["Field1"], NTI13200026);
                if ((finishReason_13290030 == 0)) {
                elems_13200041[0].push(newElem_11776712(19, parsedElems_13290031));;
                lastStr_13200029 = newStr_11776663("");
                elems_13200041[0].push(lastStr_13200029);;
                break L4;
                }
                else {
                  parser_13200022[parser_13200022_Idx].pos = initialPos_13215202;
                  if (onlyNextWhitespace_12045050(parser_13200022[parser_13200022_Idx], 0)) {
                  var colontmp__13970128 = 0;
                  var colontmp__13970129 = nimCopy(null, elems_13200041[0], NTI13200026);
                  nimCopy(result_13200027, {Field0: colontmp__13970128, Field1: nimCopy(null, colontmp__13970129, NTI13200026)}, NTI13200025);
                  break BeforeRet;
                  }
                  else {
                    var Tmp7 = lastStr_13200029;
                    if (ConstSet9[Tmp7.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                    add_13305003(Tmp7, "str");
                    break L4;
                  }
                  
                }
                
                }
                else {
                  if (!onlyNextWhitespace_12045050(parser_13200022[parser_13200022_Idx], 0)) Tmp8 = false; else {                    Tmp8 = nextMatch_12045190(parser_13200022, parser_13200022_Idx, makeNimstrLit("_"), 0);                  }                if (Tmp8) {
                parser_13200022[parser_13200022_Idx].pos -= 1;
                var colontmp__13970130 = 0;
                var colontmp__13970131 = nimCopy(null, elems_13200041[0], NTI13200026);
                nimCopy(result_13200027, {Field0: colontmp__13970130, Field1: nimCopy(null, colontmp__13970131, NTI13200026)}, NTI13200025);
                break BeforeRet;
                }
                }
                break;
              case " ":
                if ((ConstSet10[ch_13200062] != undefined)) {
                parser_13200022[parser_13200022_Idx].pos -= 1;
                var colontmp__13970132 = 0;
                var colontmp__13970133 = nimCopy(null, elems_13200041[0], NTI13200026);
                nimCopy(result_13200027, {Field0: colontmp__13970132, Field1: nimCopy(null, colontmp__13970133, NTI13200026)}, NTI13200025);
                break BeforeRet;
                }
                
                break;
              default: 
                if (nextMatch_12045190(parser_13200022, parser_13200022_Idx, delim_13200023, 0)) {
                parser_13200022[parser_13200022_Idx].pos -= 1;
                var colontmp__13970134 = 0;
                var colontmp__13970135 = nimCopy(null, elems_13200041[0], NTI13200026);
                nimCopy(result_13200027, {Field0: colontmp__13970134, Field1: nimCopy(null, colontmp__13970135, NTI13200026)}, NTI13200025);
                break BeforeRet;
                }
                
                break;
              }
              if (((singleLine_13200024 && (nextMatch_12045190(parser_13200022, parser_13200022_Idx, makeNimstrLit("\x0D\x0A"), 0) || nextMatch_12045190(parser_13200022, parser_13200022_Idx, makeNimstrLit("\x0A"), 0))) || (!(singleLine_13200024) && (nextMatch_12045190(parser_13200022, parser_13200022_Idx, makeNimstrLit("\x0D\x0A\x0D\x0A"), 0) || nextMatch_12045190(parser_13200022, parser_13200022_Idx, makeNimstrLit("\x0A\x0A"), 0))))) {
              if ((singleLine_13200024 && ((delim_13200023).length == 0))) {
              parser_13200022[parser_13200022_Idx].pos -= 1;
              }
              else {
                parser_13200022[parser_13200022_Idx].pos = initialPos_13215202;
              }
              
              if (((delim_13200023).length == 0)) {
              Tmp9 = 1;
              }
              else {
              Tmp9 = 0;
              }
              
              var colontmp__13970136 = Tmp9;
              var colontmp__13970137 = nimCopy(null, elems_13200041[0], NTI13200026);
              nimCopy(result_13200027, {Field0: colontmp__13970136, Field1: nimCopy(null, colontmp__13970137, NTI13200026)}, NTI13200025);
              break BeforeRet;
              }
              else {
              if ((nextMatch_12045190(parser_13200022, parser_13200022_Idx, makeNimstrLit("  \x0D\x0A"), 0) || nextMatch_12045190(parser_13200022, parser_13200022_Idx, makeNimstrLit("  \x0A"), 0))) {
              elems_13200041[0].push(newElem_11776712(2, []));;
              lastStr_13200029 = newStr_11776663("");
              elems_13200041[0].push(lastStr_13200029);;
              }
              else {
              if (nextMatch_12045190(parser_13200022, parser_13200022_Idx, makeNimstrLit("```"), 0)) {
              elems_13200041[0].push(parseCodeBlock_13195014(parser_13200022, parser_13200022_Idx, 96));;
              lastStr_13200029 = newStr_11776663("");
              elems_13200041[0].push(lastStr_13200029);;
              }
              else {
              if (nextMatch_12045190(parser_13200022, parser_13200022_Idx, makeNimstrLit("~~~"), 0)) {
              elems_13200041[0].push(parseCodeBlock_13195014(parser_13200022, parser_13200022_Idx, 126));;
              lastStr_13200029 = newStr_11776663("");
              elems_13200041[0].push(lastStr_13200029);;
              }
              else {
              if (nextMatch_12045190(parser_13200022, parser_13200022_Idx, makeNimstrLit("^("), 0)) {
              var reasonHEX60gensym36_13350001 = parseAux_13215401(13, makeNimstrLit(")"), parser_13200022, parser_13200022_Idx, ConstSet14);
              if ((ConstSet15[reasonHEX60gensym36_13350001] != undefined)) {
              var colontmp__13970138 = reasonHEX60gensym36_13350001;
              var colontmp__13970139 = nimCopy(null, elems_13200041[0], NTI13200026);
              nimCopy(result_13200027, {Field0: colontmp__13970138, Field1: nimCopy(null, colontmp__13970139, NTI13200026)}, NTI13200025);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch_12045190(parser_13200022, parser_13200022_Idx, makeNimstrLit("**"), 0)) {
              var reasonHEX60gensym38_13360001 = parseAux_13215401(16, makeNimstrLit("**"), parser_13200022, parser_13200022_Idx, ConstSet16);
              if ((ConstSet17[reasonHEX60gensym38_13360001] != undefined)) {
              var colontmp__13970140 = reasonHEX60gensym38_13360001;
              var colontmp__13970141 = nimCopy(null, elems_13200041[0], NTI13200026);
              nimCopy(result_13200027, {Field0: colontmp__13970140, Field1: nimCopy(null, colontmp__13970141, NTI13200026)}, NTI13200025);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch_12045190(parser_13200022, parser_13200022_Idx, makeNimstrLit("__"), 0)) {
              var reasonHEX60gensym40_13370001 = parseAux_13215401(19, makeNimstrLit("__"), parser_13200022, parser_13200022_Idx, ConstSet18);
              if ((ConstSet19[reasonHEX60gensym40_13370001] != undefined)) {
              var colontmp__13970142 = reasonHEX60gensym40_13370001;
              var colontmp__13970143 = nimCopy(null, elems_13200041[0], NTI13200026);
              nimCopy(result_13200027, {Field0: colontmp__13970142, Field1: nimCopy(null, colontmp__13970143, NTI13200026)}, NTI13200025);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch_12045190(parser_13200022, parser_13200022_Idx, makeNimstrLit("~~"), 0)) {
              var reasonHEX60gensym42_13380001 = parseAux_13215401(20, makeNimstrLit("~~"), parser_13200022, parser_13200022_Idx, ConstSet20);
              if ((ConstSet21[reasonHEX60gensym42_13380001] != undefined)) {
              var colontmp__13970144 = reasonHEX60gensym42_13380001;
              var colontmp__13970145 = nimCopy(null, elems_13200041[0], NTI13200026);
              nimCopy(result_13200027, {Field0: colontmp__13970144, Field1: nimCopy(null, colontmp__13970145, NTI13200026)}, NTI13200025);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch_12045190(parser_13200022, parser_13200022_Idx, makeNimstrLit("!["), 0)) {
              var reason_13385010 = bracket_13250059(true, parser_13200022, parser_13200022_Idx);
              if ((ConstSet42[reason_13385010] != undefined)) {
              var colontmp__13970146 = reason_13385010;
              var colontmp__13970147 = nimCopy(null, elems_13200041[0], NTI13200026);
              nimCopy(result_13200027, {Field0: colontmp__13970146, Field1: nimCopy(null, colontmp__13970147, NTI13200026)}, NTI13200025);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch_12045086(parser_13200022, parser_13200022_Idx, 123, 0)) {
              var Tmp10 = lastStr_13200029;
              if (ConstSet43[Tmp10.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp10.str += parseCurly_13161419(parser_13200022, parser_13200022_Idx);;
              }
              else {
              if (nextMatch_12045086(parser_13200022, parser_13200022_Idx, 91, 0)) {
              var reason_13395002 = bracket_13250059(false, parser_13200022, parser_13200022_Idx);
              if ((ConstSet44[reason_13395002] != undefined)) {
              var colontmp__13970148 = reason_13395002;
              var colontmp__13970149 = nimCopy(null, elems_13200041[0], NTI13200026);
              nimCopy(result_13200027, {Field0: colontmp__13970148, Field1: nimCopy(null, colontmp__13970149, NTI13200026)}, NTI13200025);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch_12045086(parser_13200022, parser_13200022_Idx, 96, 0)) {
              var reasonHEX60gensym47_13405001 = parseAux_13215401(18, makeNimstrLit("`"), parser_13200022, parser_13200022_Idx, ConstSet45);
              if ((ConstSet46[reasonHEX60gensym47_13405001] != undefined)) {
              var colontmp__13970150 = reasonHEX60gensym47_13405001;
              var colontmp__13970151 = nimCopy(null, elems_13200041[0], NTI13200026);
              nimCopy(result_13200027, {Field0: colontmp__13970150, Field1: nimCopy(null, colontmp__13970151, NTI13200026)}, NTI13200025);
              break BeforeRet;
              }
              
              }
              else {
                if (!noAdjacentWhitespace_12045068(parser_13200022[parser_13200022_Idx], 0)) Tmp11 = false; else {                  Tmp11 = nextMatch_12045086(parser_13200022, parser_13200022_Idx, 94, 0);                }              if (Tmp11) {
              var reasonHEX60gensym49_13415001 = parseAux_13215401(13, makeNimstrLit(" "), parser_13200022, parser_13200022_Idx, ConstSet47);
              if ((ConstSet48[reasonHEX60gensym49_13415001] != undefined)) {
              var colontmp__13970152 = reasonHEX60gensym49_13415001;
              var colontmp__13970153 = nimCopy(null, elems_13200041[0], NTI13200026);
              nimCopy(result_13200027, {Field0: colontmp__13970152, Field1: nimCopy(null, colontmp__13970153, NTI13200026)}, NTI13200025);
              break BeforeRet;
              }
              
              }
              else {
                if (!!(surroundedWhitespace_12045014(parser_13200022[parser_13200022_Idx], 0))) Tmp12 = false; else {                  Tmp12 = nextMatch_12045086(parser_13200022, parser_13200022_Idx, 42, 0);                }              if (Tmp12) {
              var reasonHEX60gensym51_13425001 = parseAux_13215401(15, makeNimstrLit("*"), parser_13200022, parser_13200022_Idx, ConstSet49);
              if ((ConstSet50[reasonHEX60gensym51_13425001] != undefined)) {
              var colontmp__13970154 = reasonHEX60gensym51_13425001;
              var colontmp__13970155 = nimCopy(null, elems_13200041[0], NTI13200026);
              nimCopy(result_13200027, {Field0: colontmp__13970154, Field1: nimCopy(null, colontmp__13970155, NTI13200026)}, NTI13200025);
              break BeforeRet;
              }
              
              }
              else {
                if (!onlyPrevWhitespace_12045032(parser_13200022[parser_13200022_Idx], 0)) Tmp13 = false; else {                  Tmp13 = nextMatch_12045086(parser_13200022, parser_13200022_Idx, 95, 0);                }              if (Tmp13) {
              var reasonHEX60gensym53_13435001 = parseAux_13215401(15, makeNimstrLit("_"), parser_13200022, parser_13200022_Idx, ConstSet51);
              if ((ConstSet52[reasonHEX60gensym53_13435001] != undefined)) {
              var colontmp__13970156 = reasonHEX60gensym53_13435001;
              var colontmp__13970157 = nimCopy(null, elems_13200041[0], NTI13200026);
              nimCopy(result_13200027, {Field0: colontmp__13970156, Field1: nimCopy(null, colontmp__13970157, NTI13200026)}, NTI13200025);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch_12045086(parser_13200022, parser_13200022_Idx, 60, 0)) {
              parser_13200022[parser_13200022_Idx].pos -= 1;
              if (!((parser_13200022[parser_13200022_Idx].inlineHtmlHandler == null))) {
              Tmp14 = parser_13200022[parser_13200022_Idx].inlineHtmlHandler(parser_13200022[parser_13200022_Idx].str, parser_13200022[parser_13200022_Idx].pos);
              }
              else {
              Tmp14 = parseXml_13135229(cstrToNimstr(parser_13200022[parser_13200022_Idx].str), parser_13200022[parser_13200022_Idx].pos);
              }
              
              var colontmp__13970240 = nimCopy(null, Tmp14, NTI11776497);
              var change_13440201 = colontmp__13970240["Field0"];
              var pos_13440202 = colontmp__13970240["Field1"];
              if (change_13440201) {
              var Tmp15 = lastStr_13200029;
              if (ConstSet79[Tmp15.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp15.str += HEX5BHEX5D_11776088(parser_13200022[parser_13200022_Idx].str, HEX2EHEX2E_4625220(parser_13200022[parser_13200022_Idx].pos, (pos_13440202 - 1)));;
              parser_13200022[parser_13200022_Idx].pos = (pos_13440202 - 1);
              }
              else {
                var Tmp16 = lastStr_13200029;
                if (ConstSet80[Tmp16.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp16.str += "&lt;";;
              }
              
              }
              else {
              if (nextMatch_12045086(parser_13200022, parser_13200022_Idx, 62, 0)) {
              parser_13200022[parser_13200022_Idx].pos -= 1;
              var Tmp17 = lastStr_13200029;
              if (ConstSet81[Tmp17.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp17.str += "&gt;";;
              }
              else {
              if (nextMatch_12045086(parser_13200022, parser_13200022_Idx, 38, 0)) {
              var Tmp18 = lastStr_13200029;
              if (ConstSet82[Tmp18.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp18.str += parseAmpStr_13175026(parser_13200022, parser_13200022_Idx);;
              }
              else {
              if (nextMatch_12045086(parser_13200022, parser_13200022_Idx, 92, 0)) {
              parser_13200022[parser_13200022_Idx].pos -= 1;
              escaped_13200028 = true;
              }
              else {
                var Tmp19 = lastStr_13200029;
                if (ConstSet85[Tmp19.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              add_11776050(Tmp19, "str", ch_13200062);
              }
              }}}}}}}}}}}}}}}}}}
              }
              else {
                var Tmp20 = lastStr_13200029;
                if (ConstSet86[Tmp20.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_11776050(Tmp20, "str", ch_13200062);
                escaped_13200028 = false;
              }
              
            } while(false);
            parser_13200022[parser_13200022_Idx].pos += 1;
          }
      } while(false);
    } while(false);
    var colontmp__13970159 = 1;
    var colontmp__13970160 = nimCopy(null, elems_13200041[0], NTI13200026);
    nimCopy(result_13200027, {Field0: colontmp__13970159, Field1: nimCopy(null, colontmp__13970160, NTI13200026)}, NTI13200025);
  } while (false);

  return result_13200027;

}
function parseInline_13585861(parser_13585863, parser_13585863_Idx, singleLine_13585864) {
  var result_13585866 = [];

    var colontmp__13970121 = parseDelimed_13200020(parser_13585863, parser_13585863_Idx, [], singleLine_13585864);
    var finishReason_13585867 = colontmp__13970121["Field0"];
    var elems_13585868 = nimCopy(null, colontmp__13970121["Field1"], NTI13200026);
    result_13585866 = nimCopy(null, elems_13585868, NTI13200026);

  return result_13585866;

}
function add_11950700(elem_11950702, cont_11950703) {
    var Tmp1;

    var Tmp1 = elem_11950702;
    if (ConstSet87[Tmp1.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    Tmp1.content.push(cont_11950703);;

  
}
function parseId_13600251(parser_13600253, parser_13600253_Idx, startChar_13600254) {
    var Tmp1;

  var result_13600255 = [null];

    switch (startChar_13600254) {
    case 40:
      Tmp1 = 41;
      break;
    case 91:
      Tmp1 = 93;
      break;
    case 123:
      Tmp1 = 125;
      break;
    default: 
      Tmp1 = 0;
      break;
    }
    var idDelim_13600256 = Tmp1;
    result_13600255[0] = "";
    L2: do {
        L3: while (true) {
          var ch_13605001 = parser_13600253[parser_13600253_Idx].str.charCodeAt((parser_13600253[parser_13600253_Idx].pos + 0));
        if (!nextMatch_12045111(parser_13600253, parser_13600253_Idx, ConstSet89, 0)) break L3;
          add_11776050(result_13600255, 0, ch_13605001);
        }
    } while(false);
    var _ = nextMatch_12045086(parser_13600253, parser_13600253_Idx, idDelim_13600256, 0);

  return result_13600255[0];

}
function add_11950814(elem_11950816, str_11950817) {
    var Tmp1;

    var Tmp1 = elem_11950816;
    if (ConstSet91[Tmp1.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    Tmp1.content.push(newStr_11776663(str_11950817));;

  
}
function HEX5BHEX5D_11950571(s_11950576, i_11950577) {
  var result_11950579 = null;
  var result_11950579_Idx = 0;

    result_11950579 = s_11950576; result_11950579_Idx = ((s_11950576).length - i_11950577);

  return [result_11950579, result_11950579_Idx];

}
function HEX5BHEX5D_11950561(elem_11950563, i_11950564) {
    var Tmp1;
    var Tmp2;

  var result_11950565 = null;

    var Tmp1 = elem_11950563;
    if (ConstSet92[Tmp1.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    result_11950565 = (Tmp2 = HEX5BHEX5D_11950571(Tmp1.content, i_11950564), Tmp2)[0][Tmp2[1]];

  return result_11950565;

}
function add_11950726(elem_11950728, cont_11950730) {
    var Tmp1;

    var Tmp1 = elem_11950728;
    if (ConstSet93[Tmp1.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    add_11950733(Tmp1, "content", cont_11950730);

  
}
function HEX5BHEX5DHEX3D_11950662(s_11950667, i_11950668, x_11950669) {
    s_11950667[((s_11950667).length - i_11950668)] = x_11950669;

  
}
function HEX5BHEX5DHEX3D_11950654(elem_11950656, i_11950657, el_11950658) {
    var Tmp1;

    var Tmp1 = elem_11950656;
    if (ConstSet97[Tmp1.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    HEX5BHEX5DHEX3D_11950662(Tmp1.content, i_11950657, el_11950658);

  
}
function peekPrevMatch_12035269(parser_12035271, pat_12035272, offset_12035273) {
  var result_12035274 = false;

    result_12035274 = (anyPrev_11985038(parser_12035271, (offset_12035273 - (pat_12035272).length)) && peekMatch_12025020(parser_12035271, pat_12035272, (offset_12035273 - (pat_12035272).length)));

  return result_12035274;

}
function style_11876454(elem_11876456, style_11876457) {
    attr_11795071(elem_11876456, "style", style_11876457);

  
}
function getOrDefault_13875219(t_13875224, key_13875225, default_13875226) {
    var Tmp1;

  var result_13875227 = [];

    var hcHEX60gensym140_13880001 = [0];
    var indexHEX60gensym140_13880010 = rawGet_13530602(t_13875224, key_13875225, hcHEX60gensym140_13880001, 0);
    if ((0 <= indexHEX60gensym140_13880010)) {
    Tmp1 = t_13875224.data[indexHEX60gensym140_13880010].Field2;
    }
    else {
    Tmp1 = default_13875226;
    }
    
    result_13875227 = nimCopy(null, Tmp1, NTI11776472);

  return result_13875227;

}
function nsuStrip(s_11550118, leading_11550119, trailing_11550120, chars_11550122) {
          var Tmp5;

  var result_11550123 = [];

    var first_11550125 = 0;
    var last_11550126 = ((s_11550118).length - 1);
    if (leading_11550119) {
    L1: do {
        L2: while (true) {
        if (!((first_11550125 <= last_11550126) && (chars_11550122[s_11550118[first_11550125]] != undefined))) break L2;
          first_11550125 += 1;
        }
    } while(false);
    }
    
    if (trailing_11550120) {
    L3: do {
        L4: while (true) {
          if (!(0 <= last_11550126)) Tmp5 = false; else {            Tmp5 = (chars_11550122[s_11550118[last_11550126]] != undefined);          }        if (!Tmp5) break L4;
          last_11550126 -= 1;
        }
    } while(false);
    }
    
    result_11550123 = nimCopy(null, substr_2806022(s_11550118, first_11550125, last_11550126), NTI2421013);

  return result_11550123;

}
function parseTopLevel_13605016(parser_13605018, parser_13605018_Idx) {
            var Tmp4;
              var Tmp5;
              var Tmp6;
              var Tmp9;
              function skipWhitespaceUntilNewline_13680007(parser_13680009, parser_13680009_Idx) {
                var result_13680010 = false;

                BeforeRet: do {
                  var i_13680012 = 0;
                  L1: do {
                      L2: while (true) {
                      if (!((parser_13680009[parser_13680009_Idx].pos + i_13680012) < (parser_13680009[parser_13680009_Idx].str).length)) break L2;
                        var ch_13685001 = parser_13680009[parser_13680009_Idx].str.charCodeAt((parser_13680009[parser_13680009_Idx].pos + i_13680012));
                        switch (ch_13685001) {
                        case 10:
                          parser_13680009[parser_13680009_Idx].pos += i_13680012;
                          result_13680010 = true;
                          break BeforeRet;
                          break;
                        case 9:
                        case 11:
                        case 12:
                        case 13:
                        case 32:
                          break;
                        default: 
                          result_13680010 = false;
                          break BeforeRet;
                          break;
                        }
                        i_13680012 += 1;
                      }
                  } while(false);
                } while (false);

                return result_13680010;

              }
                  var Tmp10;
                  var Tmp11;
                  var Tmp12;
                    var Tmp13;
                    var Tmp14;
                    var Tmp15;
                    var Tmp16;
                    var Tmp17;
                var Tmp18;
                var Tmp19;
                      var Tmp22;
                var Tmp23;
                  var Tmp26;
                  var Tmp27;

  var result_13605020 = [];

    L1: do {
      var firstCh_13605025 = 0;
      L2: do {
          L3: while (true) {
          if (!(parser_13605018[parser_13605018_Idx].pos < (parser_13605018[parser_13605018_Idx].str).length)) break L3;
            firstCh_13605025 = parser_13605018[parser_13605018_Idx].str.charCodeAt((parser_13605018[parser_13605018_Idx].pos + 0));
            if ((ConstSet1[firstCh_13605025] != undefined)) {
            if (!((parser_13605018[parser_13605018_Idx].topLevelLast == null))) {
            result_13605020.push(paragraphIfText_11776776(parser_13605018[parser_13605018_Idx].topLevelLast));;
            parser_13605018[parser_13605018_Idx].topLevelLast = null;
            }
            
            }
            else {
            if (!((parser_13605018[parser_13605018_Idx].topLevelLast == null))) {
            var Tmp4 = parser_13605018[parser_13605018_Idx].topLevelLast;
            if (ConstSet2[Tmp4.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
            switch (Tmp4.tag) {
            case 9:
              if (nextMatch_12045111(parser_13605018, parser_13605018_Idx, ConstSet4, 1)) {
              var item_13625202 = newElem_11776712(11, []);
              var Tmp5 = item_13625202;
              if (ConstSet5[Tmp5.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp5.content = nimCopy(null, parseInline_13585861(parser_13605018, parser_13605018_Idx, true), NTI13585865);
              add_11950700(parser_13605018[parser_13605018_Idx].topLevelLast, item_13625202);
              }
              else {
              if (nextMatch_12045111(parser_13605018, parser_13605018_Idx, ConstSet88, 1)) {
              var item_13630002 = newElem_11776712(11, []);
              attr_11795071(item_13630002, "id", parseId_13600251(parser_13605018, parser_13605018_Idx, parser_13605018[parser_13605018_Idx].str.charCodeAt((parser_13605018[parser_13605018_Idx].pos + -1))));
              var Tmp6 = item_13630002;
              if (ConstSet90[Tmp6.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp6.content = nimCopy(null, parseInline_13585861(parser_13605018, parser_13605018_Idx, true), NTI13585865);
              add_11950700(parser_13605018[parser_13605018_Idx].topLevelLast, item_13630002);
              }
              else {
                add_11950814(HEX5BHEX5D_11950561(parser_13605018[parser_13605018_Idx].topLevelLast, 1), "\n");
                add_11950726(HEX5BHEX5D_11950561(parser_13605018[parser_13605018_Idx].topLevelLast, 1), parseInline_13585861(parser_13605018, parser_13605018_Idx, true));
              }
              }
              break;
            case 10:
              var i_13655002 = 0;
              L7: do {
                  L8: while (true) {
                  if (!peekMatch_11995014(parser_13605018[parser_13605018_Idx], ConstSet94, i_13655002)) break L8;
                    i_13655002 += 1;
                  }
              } while(false);
              if (nextMatch_12045086(parser_13605018, parser_13605018_Idx, 46, i_13655002)) {
              var item_13655009 = newElem_11776712(11, []);
                var ch_13660001 = parser_13605018[parser_13605018_Idx].str.charCodeAt((parser_13605018[parser_13605018_Idx].pos + 0));
              if (nextMatch_12045111(parser_13605018, parser_13605018_Idx, ConstSet95, 0)) {
              attr_11795071(item_13655009, "id", parseId_13600251(parser_13605018, parser_13605018_Idx, ch_13660001));
              }
              
              var Tmp9 = item_13655009;
              if (ConstSet96[Tmp9.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp9.content = nimCopy(null, parseInline_13585861(parser_13605018, parser_13605018_Idx, true), NTI13585865);
              add_11950700(parser_13605018[parser_13605018_Idx].topLevelLast, item_13655009);
              }
              else {
                add_11950814(HEX5BHEX5D_11950561(parser_13605018[parser_13605018_Idx].topLevelLast, 1), "\n ");
                add_11950726(HEX5BHEX5D_11950561(parser_13605018[parser_13605018_Idx].topLevelLast, 1), parseInline_13585861(parser_13605018, parser_13605018_Idx, true));
              }
              
              break;
            case 12:
              if ((firstCh_13605025 == 62)) {
              parser_13605018[parser_13605018_Idx].pos += 1;
              }
              
              var rem_13685036 = skipWhitespaceUntilNewline_13680007(parser_13605018, parser_13605018_Idx);
              if (rem_13685036) {
              if ((firstCh_13605025 == 62)) {
              HEX5BHEX5DHEX3D_11950654(parser_13605018[parser_13605018_Idx].topLevelLast, 1, paragraphIfText_11776776(HEX5BHEX5D_11950561(parser_13605018[parser_13605018_Idx].topLevelLast, 1)));
              add_11950814(parser_13605018[parser_13605018_Idx].topLevelLast, "\n");
              if (peekPrevMatch_12035269(parser_13605018[parser_13605018_Idx], makeNimstrLit("  "), 0)) {
              add_11950700(parser_13605018[parser_13605018_Idx].topLevelLast, newElem_11776712(2, []));
              }
              
              }
              else {
                HEX5BHEX5DHEX3D_11950654(parser_13605018[parser_13605018_Idx].topLevelLast, 1, paragraphIfText_11776776(HEX5BHEX5D_11950561(parser_13605018[parser_13605018_Idx].topLevelLast, 1)));
                result_13605020.push(parser_13605018[parser_13605018_Idx].topLevelLast);;
                if (peekPrevMatch_12035269(parser_13605018[parser_13605018_Idx], makeNimstrLit("  "), 0)) {
                result_13605020.push(newElem_11776712(2, []));;
                }
                
              }
              
              }
              else {
              if (HEX5BHEX5D_11950561(parser_13605018[parser_13605018_Idx].topLevelLast, 1).isText) {
              add_11950814(parser_13605018[parser_13605018_Idx].topLevelLast, "\n");
              add_11950700(parser_13605018[parser_13605018_Idx].topLevelLast, newElem_11776712(1, parseInline_13585861(parser_13605018, parser_13605018_Idx, true)));
              }
              else {
              if ((ConstSet98[firstCh_13605025] != undefined)) {
              add_11950814(HEX5BHEX5D_11950561(parser_13605018[parser_13605018_Idx].topLevelLast, 1), "\n ");
              add_11950726(HEX5BHEX5D_11950561(parser_13605018[parser_13605018_Idx].topLevelLast, 1), parseInline_13585861(parser_13605018, parser_13605018_Idx, true));
              }
              else {
                add_11950814(HEX5BHEX5D_11950561(parser_13605018[parser_13605018_Idx].topLevelLast, 1), "\n");
                add_11950726(HEX5BHEX5D_11950561(parser_13605018[parser_13605018_Idx].topLevelLast, 1), parseInline_13585861(parser_13605018, parser_13605018_Idx, true));
              }
              }}
              break;
            case 0:
            case 1:
            case 2:
            case 3:
            case 4:
            case 5:
            case 6:
            case 7:
            case 8:
            case 11:
            case 13:
            case 14:
            case 15:
            case 16:
            case 17:
            case 18:
            case 19:
            case 20:
            case 21:
            case 22:
            case 23:
            case 24:
            case 25:
              result_13605020.push(paragraphIfText_11776776(parser_13605018[parser_13605018_Idx].topLevelLast));;
              parser_13605018[parser_13605018_Idx].topLevelLast = null;
              parser_13605018[parser_13605018_Idx].pos -= 1;
              break;
            }
            }
            else {
              switch (firstCh_13605025) {
              case 9:
              case 11:
              case 12:
              case 32:
                  if (!!(((result_13605020).length == 0))) Tmp12 = false; else {                    Tmp12 = !((Tmp13 = HEX5BHEX5D_11950571(result_13605020, 1), Tmp13)[0][Tmp13[1]].isText);                  }                  if (!Tmp12) Tmp11 = false; else {                    var Tmp15 = (Tmp14 = HEX5BHEX5D_11950571(result_13605020, 1), Tmp14)[0][Tmp14[1]];
                    if (ConstSet100[Tmp15.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                    Tmp11 = (ConstSet99[Tmp15.tag] != undefined);                  }                  if (!Tmp11) Tmp10 = false; else {                    var Tmp17 = (Tmp16 = HEX5BHEX5D_11950571(result_13605020, 1), Tmp16)[0][Tmp16[1]];
                    if (ConstSet101[Tmp17.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                    Tmp10 = !(((Tmp17.content).length == 0));                  }                if (Tmp10) {
                add_11950814(HEX5BHEX5D_11950561((Tmp18 = HEX5BHEX5D_11950571(result_13605020, 1), Tmp18)[0][Tmp18[1]], 1), "\n ");
                add_11950726(HEX5BHEX5D_11950561((Tmp19 = HEX5BHEX5D_11950571(result_13605020, 1), Tmp19)[0][Tmp19[1]], 1), parseInline_13585861(parser_13605018, parser_13605018_Idx, false));
                }
                else {
                  parser_13605018[parser_13605018_Idx].topLevelLast = newElem_11776712(1, parseInline_13585861(parser_13605018, parser_13605018_Idx, true));
                }
                
                break;
              case 35:
                var level_13815002 = 1;
                L20: do {
                    L21: while (true) {
                      if (!(level_13815002 < 6)) Tmp22 = false; else {                        Tmp22 = peekMatch_11990024(parser_13605018[parser_13605018_Idx], 35, level_13815002);                      }                    if (!Tmp22) break L21;
                      level_13815002 += 1;
                    }
                } while(false);
                parser_13605018[parser_13605018_Idx].pos += level_13815002;
                parser_13605018[parser_13605018_Idx].topLevelLast = newElem_11776712((2 + level_13815002), []);
                if (nextMatch_12045086(parser_13605018, parser_13605018_Idx, 124, 0)) {
                style_11876454(parser_13605018[parser_13605018_Idx].topLevelLast, "text-align:center");
                }
                else {
                if (nextMatch_12045086(parser_13605018, parser_13605018_Idx, 60, 0)) {
                style_11876454(parser_13605018[parser_13605018_Idx].topLevelLast, "text-align:left");
                }
                else {
                if (nextMatch_12045086(parser_13605018, parser_13605018_Idx, 62, 0)) {
                style_11876454(parser_13605018[parser_13605018_Idx].topLevelLast, "text-align:right");
                }
                }}
                  var ch_13825001 = parser_13605018[parser_13605018_Idx].str.charCodeAt((parser_13605018[parser_13605018_Idx].pos + 0));
                if (nextMatch_12045111(parser_13605018, parser_13605018_Idx, ConstSet102, 0)) {
                attr_11795071(parser_13605018[parser_13605018_Idx].topLevelLast, "id", parseId_13600251(parser_13605018, parser_13605018_Idx, ch_13825001));
                }
                
                add_11950726(parser_13605018[parser_13605018_Idx].topLevelLast, parseInline_13585861(parser_13605018, parser_13605018_Idx, true));
                break;
              case 42:
              case 45:
              case 43:
                if (nextMatch_12045111(parser_13605018, parser_13605018_Idx, ConstSet103, 1)) {
                parser_13605018[parser_13605018_Idx].topLevelLast = newElem_11776712(9, []);
                var item_13830001 = newElem_11776712(11, []);
                add_11950726(item_13830001, parseInline_13585861(parser_13605018, parser_13605018_Idx, true));
                add_11950700(parser_13605018[parser_13605018_Idx].topLevelLast, item_13830001);
                }
                else {
                if (nextMatch_12045111(parser_13605018, parser_13605018_Idx, ConstSet104, 1)) {
                parser_13605018[parser_13605018_Idx].topLevelLast = newElem_11776712(9, []);
                var item_13835002 = newElem_11776712(11, []);
                attr_11795071(item_13835002, "id", parseId_13600251(parser_13605018, parser_13605018_Idx, parser_13605018[parser_13605018_Idx].str.charCodeAt((parser_13605018[parser_13605018_Idx].pos + -1))));
                var Tmp23 = item_13835002;
                if (ConstSet105[Tmp23.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp23.content = nimCopy(null, parseInline_13585861(parser_13605018, parser_13605018_Idx, true), NTI13585865);
                add_11950700(parser_13605018[parser_13605018_Idx].topLevelLast, item_13835002);
                }
                else {
                  parser_13605018[parser_13605018_Idx].topLevelLast = newElem_11776712(1, parseInline_13585861(parser_13605018, parser_13605018_Idx, false));
                }
                }
                break;
              case 48:
              case 49:
              case 50:
              case 51:
              case 52:
              case 53:
              case 54:
              case 55:
              case 56:
              case 57:
                var originalPos_13850001 = parser_13605018[parser_13605018_Idx].pos;
                parser_13605018[parser_13605018_Idx].pos += 1;
                L24: do {
                    L25: while (true) {
                    if (!nextMatch_12045111(parser_13605018, parser_13605018_Idx, ConstSet106, 0)) break L25;
                    }
                } while(false);
                if (nextMatch_12045086(parser_13605018, parser_13605018_Idx, 46, 0)) {
                parser_13605018[parser_13605018_Idx].topLevelLast = newElem_11776712(10, []);
                var item_13850008 = newElem_11776712(11, []);
                  var ch_13855001 = parser_13605018[parser_13605018_Idx].str.charCodeAt((parser_13605018[parser_13605018_Idx].pos + 0));
                if (nextMatch_12045111(parser_13605018, parser_13605018_Idx, ConstSet107, 0)) {
                attr_11795071(item_13850008, "id", parseId_13600251(parser_13605018, parser_13605018_Idx, ch_13855001));
                }
                
                add_11950726(item_13850008, parseInline_13585861(parser_13605018, parser_13605018_Idx, true));
                add_11950700(parser_13605018[parser_13605018_Idx].topLevelLast, item_13850008);
                }
                else {
                  parser_13605018[parser_13605018_Idx].pos = originalPos_13850001;
                  parser_13605018[parser_13605018_Idx].topLevelLast = newElem_11776712(1, parseInline_13585861(parser_13605018, parser_13605018_Idx, false));
                }
                
                break;
              case 62:
                parser_13605018[parser_13605018_Idx].topLevelLast = newElem_11776712(12, []);
                parser_13605018[parser_13605018_Idx].pos += 1;
                  var ch_13870001 = parser_13605018[parser_13605018_Idx].str.charCodeAt((parser_13605018[parser_13605018_Idx].pos + 0));
                if (nextMatch_12045111(parser_13605018, parser_13605018_Idx, ConstSet108, 0)) {
                attr_11795071(parser_13605018[parser_13605018_Idx].topLevelLast, "id", parseId_13600251(parser_13605018, parser_13605018_Idx, ch_13870001));
                }
                
                add_11950700(parser_13605018[parser_13605018_Idx].topLevelLast, newElem_11776712(1, parseInline_13585861(parser_13605018, parser_13605018_Idx, true)));
                break;
              case 91:
                var initialPos_13875001 = parser_13605018[parser_13605018_Idx].pos;
                parser_13605018[parser_13605018_Idx].pos += 1;
                var refNameFailed_13875008 = [false];
                var refName_13875010 = parseReferenceName_13480046(parser_13605018, parser_13605018_Idx, refNameFailed_13875008, 0);
                  if (!!(refNameFailed_13875008[0])) Tmp27 = false; else {                    parser_13605018[parser_13605018_Idx].pos += 1;
                    Tmp27 = nextMatch_12045086(parser_13605018, parser_13605018_Idx, 58, 0);                  }                  if (!Tmp27) Tmp26 = false; else {                    var colontmp__13970362 = parseLink_13475033(parser_13605018, parser_13605018_Idx, true);
                    var correct_13875017 = colontmp__13970362["Field0"];
                    var link_13875018 = nimCopy(null, colontmp__13970362["Field1"], NTI2421013);
                    var tip_13875019 = nimCopy(null, colontmp__13970362["Field2"], NTI2421013);
                    Tmp26 = correct_13875017;                  }                if (Tmp26) {
                L28: do {
                  var el_13885169 = null;
                  var el_13885169_Idx = 0;
                  var colontmp__13970110 = [];
                  colontmp__13970110 = getOrDefault_13875219(parser_13605018[parser_13605018_Idx].linkReferrers, refName_13875010, []);
                  var i_13970111 = 0;
                  var L_13970112 = (colontmp__13970110).length;
                  L29: do {
                      L30: while (true) {
                      if (!(i_13970111 < L_13970112)) break L30;
                        el_13885169 = colontmp__13970110; el_13885169_Idx = i_13970111;
                        if (!(((tip_13875019).length == 0))) {
                        attrEscaped_11865682(el_13885169[el_13885169_Idx], "title", toJSStr(tip_13875019));
                        }
                        
                        setLink_11950487(parser_13605018[parser_13605018_Idx], el_13885169[el_13885169_Idx], toJSStr(nsuStrip(link_13875018, true, true, ConstSet109)));
                        i_13970111 += 1;
                      }
                  } while(false);
                } while(false);
                }
                else {
                  parser_13605018[parser_13605018_Idx].pos = initialPos_13875001;
                  parser_13605018[parser_13605018_Idx].topLevelLast = newElem_11776712(1, parseInline_13585861(parser_13605018, parser_13605018_Idx, false));
                }
                
                break;
              default: 
                if (nextMatch_12045190(parser_13605018, parser_13605018_Idx, makeNimstrLit("```"), 0)) {
                result_13605020.push(parseCodeBlock_13195014(parser_13605018, parser_13605018_Idx, 96));;
                parser_13605018[parser_13605018_Idx].topLevelLast = null;
                }
                else {
                if (nextMatch_12045190(parser_13605018, parser_13605018_Idx, makeNimstrLit("~~~"), 0)) {
                result_13605020.push(parseCodeBlock_13195014(parser_13605018, parser_13605018_Idx, 126));;
                parser_13605018[parser_13605018_Idx].topLevelLast = null;
                }
                else {
                  parser_13605018[parser_13605018_Idx].topLevelLast = newElem_11776712(1, parseInline_13585861(parser_13605018, parser_13605018_Idx, false));
                }
                }
                break;
              }
            }
            }
            parser_13605018[parser_13605018_Idx].pos += 1;
          }
      } while(false);
    } while(false);
    if (!((parser_13605018[parser_13605018_Idx].topLevelLast == null))) {
    result_13605020.push(parser_13605018[parser_13605018_Idx].topLevelLast);;
    parser_13605018[parser_13605018_Idx].topLevelLast = null;
    }
    

  return result_13605020;

}
function parseMarggers_13916027(parser_13916029, parser_13916029_Idx) {
  var result_13916031 = [];

    result_13916031 = nimCopy(null, parseTopLevel_13605016(parser_13916029, parser_13916029_Idx), NTI13605019);

  return result_13916031;

}
function parseMarggers_13916045(text_13916047) {
  var result_13916049 = [];

    var parser_13916050 = [newMarggersParser_11776616(text_13916047)];
    result_13916049 = nimCopy(null, parseMarggers_13916027(parser_13916050, 0), NTI13916030);

  return result_13916049;

}
function len_11950985(t_11950990) {
  var result_11950991 = 0;

    result_11950991 = t_11950990.counter;

  return result_11950991;

}
function add_11975287(x_11975290, x_11975290_Idx) {
    x_11975290[x_11975290_Idx] += " ";;

  
}
function add_11980004(x_11980007, x_11980007_Idx) {
    x_11980007[x_11980007_Idx] += ">";;

  
}
function isEmpty_11950525(tag_11950527) {
    var Tmp1;

  var result_11950528 = false;

    switch (tag_11950527) {
    case 2:
    case 21:
    case 22:
      Tmp1 = true;
      break;
    default: 
      Tmp1 = false;
      break;
    }
    result_11950528 = Tmp1;

  return result_11950528;

}
function toCstring_11975266(elem_11975268) {
    var Tmp1;
      var Tmp2;
        var Tmp4;
        var Tmp8;
        var Tmp11;
      var Tmp12;

  var result_11975269 = [null];

    if (elem_11975268.isText) {
    var Tmp1 = elem_11975268;
    if (ConstSet110[Tmp1.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    result_11975269[0] = Tmp1.str;
    }
    else {
      result_11975269[0] = "<";
      var Tmp2 = elem_11975268;
      if (ConstSet111[Tmp2.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      result_11975269[0] += toJSStr(reprEnum(Tmp2.tag, NTI11776402));;
      L3: do {
        var attrName_11975284 = null;
        var attrValue_11975285 = null;
        var colontmp__13970366 = ({data: [], counter: 0, first: 0, last: 0});
        var Tmp4 = elem_11975268;
        if (ConstSet112[Tmp4.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'attrs\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
        nimCopy(colontmp__13970366, Tmp4.attrs, NTI11776446);
        var L_13970368 = len_11950985(colontmp__13970366);
        if ((0 < colontmp__13970366.counter)) {
        var h_13970369 = colontmp__13970366.first;
        L5: do {
            L6: while (true) {
            if (!(0 <= h_13970369)) break L6;
              var nxt_13970371 = colontmp__13970366.data[h_13970369].Field1;
              if (isFilled_11676218(colontmp__13970366.data[h_13970369].Field0)) {
              attrName_11975284 = colontmp__13970366.data[h_13970369].Field2;
              attrValue_11975285 = colontmp__13970366.data[h_13970369].Field3;
              add_11975287(result_11975269, 0);
              result_11975269[0] += attrName_11975284;;
              if (!(((attrValue_11975285).length == 0))) {
              result_11975269[0] += "=\"";;
              result_11975269[0] += attrValue_11975285;;
              result_11975269[0] += "\"";;
              }
              
              }
              
              h_13970369 = nxt_13970371;
            }
        } while(false);
        }
        
      } while(false);
      add_11980004(result_11975269, 0);
      L7: do {
        var cont_11980032 = null;
        var cont_11980032_Idx = 0;
        var colontmp__13970373 = [];
        var Tmp8 = elem_11975268;
        if (ConstSet113[Tmp8.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
        colontmp__13970373 = Tmp8.content;
        var i_13970374 = 0;
        var L_13970375 = (colontmp__13970373).length;
        L9: do {
            L10: while (true) {
            if (!(i_13970374 < L_13970375)) break L10;
              cont_11980032 = colontmp__13970373; cont_11980032_Idx = i_13970374;
              result_11975269[0] += toCstring_11975266(cont_11980032[cont_11980032_Idx]);;
              i_13970374 += 1;
            }
        } while(false);
      } while(false);
        var Tmp11 = elem_11975268;
        if (ConstSet114[Tmp11.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      if (!(isEmpty_11950525(Tmp11.tag))) {
      result_11975269[0] += "</";;
      var Tmp12 = elem_11975268;
      if (ConstSet115[Tmp12.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      result_11975269[0] += toJSStr(reprEnum(Tmp12.tag, NTI11776402));;
      add_11980004(result_11975269, 0);
      }
      
    }
    

  return result_11975269[0];

}
function convertMarggers_13966014(text_13966016) {
  var result_13966017 = null;

    result_13966017 = "";
    L1: do {
      var elem_13966025 = null;
      var elem_13966025_Idx = 0;
      var colontmp__13970079 = [];
      colontmp__13970079 = parseMarggers_13916045(text_13966016);
      var i_13970081 = 0;
      var L_13970082 = (colontmp__13970079).length;
      L2: do {
          L3: while (true) {
          if (!(i_13970081 < L_13970082)) break L3;
            elem_13966025 = colontmp__13970079; elem_13966025_Idx = i_13970081;
            result_13966017 += toCstring_11975266(elem_13966025[elem_13966025_Idx]);;
            result_13966017 += "\n";;
            i_13970081 += 1;
          }
      } while(false);
    } while(false);

  return result_13966017;

}
function convert() {
    var input_13970063 = input_13970015();
    var output_13970064 = convertMarggers_13966014(input_13970063);
    document.getElementById("output").innerHTML = output_13970064;

  
}
function convertToSource() {
    var input_13970379 = input_13970015();
    var output_13970380 = convertMarggers_13966014(input_13970379);
    var sourceBlock_13970381 = document.createElement("pre");
    sourceBlock_13970381.textContent = output_13970380;
    var outputElement_13970382 = document.getElementById("output");
    outputElement_13970382.innerHTML = "";
    outputElement_13970382.appendChild(sourceBlock_13970381);

  
}
function filename_13970396() {
  var result_13970398 = null;

    result_13970398 = document.getElementById("filename").value || "output.html";

  return result_13970398;

}
function download() {
    var input_13970418 = input_13970015();
    var output_13970419 = convertMarggers_13966014(input_13970418);
    var blob_13970429 = new Blob([output_13970419], {type: 'text/html'});
    var url_13970430 = window.URL.createObjectURL(blob_13970429);
    var a_13970431 = document.createElement("a");
    a_13970431.style.display = "none";
    a_13970431.setAttribute("href", url_13970430);
    a_13970431.setAttribute("download", filename_13970396());
    document.body.appendChild(a_13970431);
    a_13970431.click();
    window.URL.revokeObjectURL(url_13970430);
    document.body.removeChild(a_13970431);

  
}
