/* Generated by the Nim Compiler v1.4.2 */
var framePtr = null;
var excHandler = 0;
var lastJSError = null;
var NTI13235295 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI13220099 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI2427621 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI2427643 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI12272202 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12272204 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI12272206 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI12272208 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI12272210 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI12391031 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI12391017 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12391021 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI12391015 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI12391133 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI12101107 = {size: 0,kind: 19,base: null,node: null,finalizer: null};
var NTI12065250 = {size: 0,kind: 19,base: null,node: null,finalizer: null};
var NTI11850253 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI2421011 = {size: 0,kind: 2,base: null,node: null,finalizer: null};
var NTI11956026 = {size: 0,kind: 19,base: null,node: null,finalizer: null};
var NTI11686179 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI11686173 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI11686167 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI11686161 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI11686155 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI11686144 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI11686140 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI11686135 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI11686131 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI11686127 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI11686126 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI11686124 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI11956018 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI12101021 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12101065 = {size: 0,kind: 19,base: null,node: null,finalizer: null};
var NTI12101019 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12101017 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12101015 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12101023 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI12900044 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12900053 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI12900054 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI2421044 = {size: 0,kind: 31,base: null,node: null,finalizer: null};
var NTI3520020 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI11601258 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI11601256 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI11601255 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI11601222 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI2421064 = {size: 0,kind: 1,base: null,node: null,finalizer: null};
var NTI11601251 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI11601224 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI11601468 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI2427408 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI2427728 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI2421015 = {size: 0,kind: 29,base: null,node: null,finalizer: null};
var NTI2427723 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI2427617 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI2427619 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI2427651 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI2421013 = {size: 0,kind: 28,base: null,node: null,finalizer: null};
var NNI2427651 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI2427651.node = NNI2427651;
var NNI2427619 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI2427619.node = NNI2427619;
NTI2427723.base = NTI2427617;
NTI2427728.base = NTI2427617;
var NNI2427617 = {kind: 2, len: 5, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "parent", len: 0, typ: NTI2427723, name: "parent", sons: null}, 
{kind: 1, offset: "name", len: 0, typ: NTI2421015, name: "name", sons: null}, 
{kind: 1, offset: "message", len: 0, typ: NTI2421013, name: "msg", sons: null}, 
{kind: 1, offset: "trace", len: 0, typ: NTI2421013, name: "trace", sons: null}, 
{kind: 1, offset: "up", len: 0, typ: NTI2427728, name: "up", sons: null}]};
NTI2427617.node = NNI2427617;
var NNI2427408 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI2427408.node = NNI2427408;
NTI2427617.base = NTI2427408;
NTI2427619.base = NTI2427617;
NTI2427651.base = NTI2427619;
var NNI11601222 = {kind: 2, offset: 0, typ: null, name: null, len: 24, sons: {"0": {kind: 1, offset: 0, typ: NTI11601222, name: "noTag", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI11601222, name: "p", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI11601222, name: "br", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI11601222, name: "h1", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI11601222, name: "h2", len: 0, sons: null}, 
"5": {kind: 1, offset: 5, typ: NTI11601222, name: "h3", len: 0, sons: null}, 
"6": {kind: 1, offset: 6, typ: NTI11601222, name: "h4", len: 0, sons: null}, 
"7": {kind: 1, offset: 7, typ: NTI11601222, name: "h5", len: 0, sons: null}, 
"8": {kind: 1, offset: 8, typ: NTI11601222, name: "h6", len: 0, sons: null}, 
"9": {kind: 1, offset: 9, typ: NTI11601222, name: "ul", len: 0, sons: null}, 
"10": {kind: 1, offset: 10, typ: NTI11601222, name: "ol", len: 0, sons: null}, 
"11": {kind: 1, offset: 11, typ: NTI11601222, name: "li", len: 0, sons: null}, 
"12": {kind: 1, offset: 12, typ: NTI11601222, name: "blockquote", len: 0, sons: null}, 
"13": {kind: 1, offset: 13, typ: NTI11601222, name: "sup", len: 0, sons: null}, 
"14": {kind: 1, offset: 14, typ: NTI11601222, name: "sub", len: 0, sons: null}, 
"15": {kind: 1, offset: 15, typ: NTI11601222, name: "em", len: 0, sons: null}, 
"16": {kind: 1, offset: 16, typ: NTI11601222, name: "strong", len: 0, sons: null}, 
"17": {kind: 1, offset: 17, typ: NTI11601222, name: "pre", len: 0, sons: null}, 
"18": {kind: 1, offset: 18, typ: NTI11601222, name: "code", len: 0, sons: null}, 
"19": {kind: 1, offset: 19, typ: NTI11601222, name: "u", len: 0, sons: null}, 
"20": {kind: 1, offset: 20, typ: NTI11601222, name: "s", len: 0, sons: null}, 
"21": {kind: 1, offset: 21, typ: NTI11601222, name: "img", len: 0, sons: null}, 
"22": {kind: 1, offset: 22, typ: NTI11601222, name: "input", len: 0, sons: null}, 
"23": {kind: 1, offset: 23, typ: NTI11601222, name: "a", len: 0, sons: null}}};
NTI11601222.node = NNI11601222;
var NNI11601256 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI2421015, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI2421015, name: "Field1", sons: null}]};
NTI11601256.node = NNI11601256;
NTI11601255.base = NTI11601256;
NTI11601258.base = NTI11601224;
var NNI11601251 = {kind: 3, offset: "isText", len: 2, typ: NTI2421064, name: "isText", sons: [[setConstr(1), {kind: 1, offset: "str", len: 0, typ: NTI2421015, name: "str", sons: null}], 
[setConstr(2), {kind: 2, len: 3, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "tag", len: 0, typ: NTI11601222, name: "tag", sons: null}, 
{kind: 1, offset: "attrs", len: 0, typ: NTI11601255, name: "attrs", sons: null}, 
{kind: 1, offset: "content", len: 0, typ: NTI11601258, name: "content", sons: null}]}]]};
NTI11601251.node = NNI11601251;
NTI11601224.base = NTI11601251;
NTI11601468.base = NTI11601224;
var NNI3520020 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "a", len: 0, typ: NTI2421044, name: "a", sons: null}, 
{kind: 1, offset: "b", len: 0, typ: NTI2421044, name: "b", sons: null}]};
NTI3520020.node = NNI3520020;
NTI12900054.base = NTI11601224;
var NNI12900044 = {kind: 2, offset: 0, typ: null, name: null, len: 3, sons: {"0": {kind: 1, offset: 0, typ: NTI12900044, name: "frDone", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12900044, name: "frReachedEnd", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12900044, name: "frFailed", len: 0, sons: null}}};
NTI12900044.node = NNI12900044;
var NNI12900053 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI12900044, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI12900054, name: "Field1", sons: null}]};
NTI12900053.node = NNI12900053;
var NNI12101015 = {kind: 2, offset: 0, typ: null, name: null, len: 14, sons: {"0": {kind: 1, offset: 0, typ: NTI12101015, name: "xmlError", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12101015, name: "xmlEof", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12101015, name: "xmlCharData", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI12101015, name: "xmlWhitespace", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI12101015, name: "xmlComment", len: 0, sons: null}, 
"5": {kind: 1, offset: 5, typ: NTI12101015, name: "xmlPI", len: 0, sons: null}, 
"6": {kind: 1, offset: 6, typ: NTI12101015, name: "xmlElementStart", len: 0, sons: null}, 
"7": {kind: 1, offset: 7, typ: NTI12101015, name: "xmlElementEnd", len: 0, sons: null}, 
"8": {kind: 1, offset: 8, typ: NTI12101015, name: "xmlElementOpen", len: 0, sons: null}, 
"9": {kind: 1, offset: 9, typ: NTI12101015, name: "xmlAttribute", len: 0, sons: null}, 
"10": {kind: 1, offset: 10, typ: NTI12101015, name: "xmlElementClose", len: 0, sons: null}, 
"11": {kind: 1, offset: 11, typ: NTI12101015, name: "xmlCData", len: 0, sons: null}, 
"12": {kind: 1, offset: 12, typ: NTI12101015, name: "xmlEntity", len: 0, sons: null}, 
"13": {kind: 1, offset: 13, typ: NTI12101015, name: "xmlSpecial", len: 0, sons: null}}};
NTI12101015.node = NNI12101015;
var NNI12101017 = {kind: 2, offset: 0, typ: null, name: null, len: 10, sons: {"0": {kind: 1, offset: 0, typ: NTI12101017, name: "errNone", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12101017, name: "errEndOfCDataExpected", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12101017, name: "errNameExpected", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI12101017, name: "errSemicolonExpected", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI12101017, name: "errQmGtExpected", len: 0, sons: null}, 
"5": {kind: 1, offset: 5, typ: NTI12101017, name: "errGtExpected", len: 0, sons: null}, 
"6": {kind: 1, offset: 6, typ: NTI12101017, name: "errEqExpected", len: 0, sons: null}, 
"7": {kind: 1, offset: 7, typ: NTI12101017, name: "errQuoteExpected", len: 0, sons: null}, 
"8": {kind: 1, offset: 8, typ: NTI12101017, name: "errEndOfCommentExpected", len: 0, sons: null}, 
"9": {kind: 1, offset: 9, typ: NTI12101017, name: "errAttributeValueExpected", len: 0, sons: null}}};
NTI12101017.node = NNI12101017;
var NNI12101019 = {kind: 2, offset: 0, typ: null, name: null, len: 5, sons: {"0": {kind: 1, offset: 0, typ: NTI12101019, name: "stateStart", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12101019, name: "stateNormal", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12101019, name: "stateAttr", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI12101019, name: "stateEmptyElementTag", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI12101019, name: "stateError", len: 0, sons: null}}};
NTI12101019.node = NNI12101019;
var NNI12101021 = {kind: 2, offset: 0, typ: null, name: null, len: 4, sons: {"0": {kind: 1, offset: 0, typ: NTI12101021, name: "reportWhitespace", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12101021, name: "reportComments", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12101021, name: "allowUnquotedAttribs", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI12101021, name: "allowEmptyAttribs", len: 0, sons: null}}};
NTI12101021.node = NNI12101021;
NTI12101065.base = NTI12101021;
var NNI12101023 = {kind: 2, len: 9, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "a", len: 0, typ: NTI2421013, name: "a", sons: null}, 
{kind: 1, offset: "b", len: 0, typ: NTI2421013, name: "b", sons: null}, 
{kind: 1, offset: "c", len: 0, typ: NTI2421013, name: "c", sons: null}, 
{kind: 1, offset: "kind", len: 0, typ: NTI12101015, name: "kind", sons: null}, 
{kind: 1, offset: "err", len: 0, typ: NTI12101017, name: "err", sons: null}, 
{kind: 1, offset: "state", len: 0, typ: NTI12101019, name: "state", sons: null}, 
{kind: 1, offset: "cIsEmpty", len: 0, typ: NTI2421064, name: "cIsEmpty", sons: null}, 
{kind: 1, offset: "filename", len: 0, typ: NTI2421013, name: "filename", sons: null}, 
{kind: 1, offset: "options", len: 0, typ: NTI12101065, name: "options", sons: null}]};
NTI12101023.node = NNI12101023;
var NNI11686126 = {kind: 2, len: 10, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "closeImpl", len: 0, typ: NTI11686127, name: "closeImpl", sons: null}, 
{kind: 1, offset: "atEndImpl", len: 0, typ: NTI11686131, name: "atEndImpl", sons: null}, 
{kind: 1, offset: "setPositionImpl", len: 0, typ: NTI11686135, name: "setPositionImpl", sons: null}, 
{kind: 1, offset: "getPositionImpl", len: 0, typ: NTI11686140, name: "getPositionImpl", sons: null}, 
{kind: 1, offset: "readDataStrImpl", len: 0, typ: NTI11686144, name: "readDataStrImpl", sons: null}, 
{kind: 1, offset: "readLineImpl", len: 0, typ: NTI11686155, name: "readLineImpl", sons: null}, 
{kind: 1, offset: "readDataImpl", len: 0, typ: NTI11686161, name: "readDataImpl", sons: null}, 
{kind: 1, offset: "peekDataImpl", len: 0, typ: NTI11686167, name: "peekDataImpl", sons: null}, 
{kind: 1, offset: "writeDataImpl", len: 0, typ: NTI11686173, name: "writeDataImpl", sons: null}, 
{kind: 1, offset: "flushImpl", len: 0, typ: NTI11686179, name: "flushImpl", sons: null}]};
NTI11686126.node = NNI11686126;
NTI11686126.base = NTI2427408;
NTI11686124.base = NTI11686126;
NTI11956026.base = NTI2421011;
var NNI11956018 = {kind: 2, len: 8, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "bufpos", len: 0, typ: NTI2421044, name: "bufpos", sons: null}, 
{kind: 1, offset: "buf", len: 0, typ: NTI2421013, name: "buf", sons: null}, 
{kind: 1, offset: "input", len: 0, typ: NTI11686124, name: "input", sons: null}, 
{kind: 1, offset: "lineNumber", len: 0, typ: NTI2421044, name: "lineNumber", sons: null}, 
{kind: 1, offset: "sentinel", len: 0, typ: NTI2421044, name: "sentinel", sons: null}, 
{kind: 1, offset: "lineStart", len: 0, typ: NTI2421044, name: "lineStart", sons: null}, 
{kind: 1, offset: "offsetBase", len: 0, typ: NTI2421044, name: "offsetBase", sons: null}, 
{kind: 1, offset: "refillChars", len: 0, typ: NTI11956026, name: "refillChars", sons: null}]};
NTI11956018.node = NNI11956018;
NTI11956018.base = NTI2427408;
NTI12101023.base = NTI11956018;
var NNI11850253 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "data", len: 0, typ: NTI2421013, name: "data", sons: null}, 
{kind: 1, offset: "pos", len: 0, typ: NTI2421044, name: "pos", sons: null}]};
NTI11850253.node = NNI11850253;
NTI11850253.base = NTI11686126;
NTI12065250.base = NTI2421011;
NTI12101107.base = NTI12101021;
var NNI12391017 = {kind: 2, offset: 0, typ: null, name: null, len: 6, sons: {"0": {kind: 1, offset: 0, typ: NTI12391017, name: "xnText", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12391017, name: "xnVerbatimText", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12391017, name: "xnElement", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI12391017, name: "xnCData", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI12391017, name: "xnEntity", len: 0, sons: null}, 
"5": {kind: 1, offset: 5, typ: NTI12391017, name: "xnComment", len: 0, sons: null}}};
NTI12391017.node = NNI12391017;
NTI12391031.base = NTI12391015;
var NNI12272204 = {kind: 2, len: 3, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI2421013, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI2421013, name: "Field1", sons: null}, 
{kind: 1, offset: "Field2", len: 0, typ: NTI2421064, name: "Field2", sons: null}]};
NTI12272204.node = NNI12272204;
NTI12272206.base = NTI12272204;
var NNI12272202 = {kind: 2, offset: 0, typ: null, name: null, len: 3, sons: {"0": {kind: 1, offset: 0, typ: NTI12272202, name: "modeCaseSensitive", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12272202, name: "modeCaseInsensitive", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12272202, name: "modeStyleInsensitive", len: 0, sons: null}}};
NTI12272202.node = NNI12272202;
var NNI12272208 = {kind: 2, len: 3, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "counter", len: 0, typ: NTI2421044, name: "counter", sons: null}, 
{kind: 1, offset: "data", len: 0, typ: NTI12272206, name: "data", sons: null}, 
{kind: 1, offset: "mode", len: 0, typ: NTI12272202, name: "mode", sons: null}]};
NTI12272208.node = NNI12272208;
NTI12272208.base = NTI2427408;
NTI12272210.base = NTI12272208;
var NNI12391021 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 3, offset: "k", len: 6, typ: NTI12391017, name: "k", sons: [[setConstr(0, 1, 5, 3, 4), {kind: 1, offset: "fText", len: 0, typ: NTI2421013, name: "fText", sons: null}], 
[setConstr(2), {kind: 2, len: 3, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "fTag", len: 0, typ: NTI2421013, name: "fTag", sons: null}, 
{kind: 1, offset: "s", len: 0, typ: NTI12391031, name: "s", sons: null}, 
{kind: 1, offset: "fAttr", len: 0, typ: NTI12272210, name: "fAttr", sons: null}]}]]}, 
{kind: 1, offset: "fClientData", len: 0, typ: NTI2421044, name: "fClientData", sons: null}]};
NTI12391021.node = NNI12391021;
NTI12391015.base = NTI12391021;
NTI12391133.base = NTI12391015;
var NNI2427643 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI2427643.node = NNI2427643;
var NNI2427621 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI2427621.node = NNI2427621;
NTI2427621.base = NTI2427617;
NTI2427643.base = NTI2427621;
NTI13220099.base = NTI11601224;
NTI13235295.base = NTI11601224;
function setConstr() {
        var result = {};
    for (var i = 0; i < arguments.length; ++i) {
      var x = arguments[i];
      if (typeof(x) == "object") {
        for (var j = x[0]; j <= x[1]; ++j) {
          result[j] = true;
        }
      } else {
        result[x] = true;
      }
    }
    return result;
  

  
}
var ConstSet1 = setConstr(13, 10);
var ConstSet2 = setConstr(true);
var ConstSet3 = setConstr(17, 16, 4, 18, 27, 19, 23, 22, 21);
function nimCopy(dest_2705023, src_2705024, ti_2705025) {
  var result_2710219 = null;

    switch (ti_2705025.kind) {
    case 21:
    case 22:
    case 23:
    case 5:
      if (!(isFatPointer_2700401(ti_2705025))) {
      result_2710219 = src_2705024;
      }
      else {
        result_2710219 = [src_2705024[0], src_2705024[1]];
      }
      
      break;
    case 19:
            if (dest_2705023 === null || dest_2705023 === undefined) {
        dest_2705023 = {};
      }
      else {
        for (var key in dest_2705023) { delete dest_2705023[key]; }
      }
      for (var key in src_2705024) { dest_2705023[key] = src_2705024[key]; }
      result_2710219 = dest_2705023;
    
      break;
    case 18:
    case 17:
      if (!((ti_2705025.base == null))) {
      result_2710219 = nimCopy(dest_2705023, src_2705024, ti_2705025.base);
      }
      else {
      if ((ti_2705025.kind == 17)) {
      result_2710219 = (dest_2705023 === null || dest_2705023 === undefined) ? {m_type: ti_2705025} : dest_2705023;
      }
      else {
        result_2710219 = (dest_2705023 === null || dest_2705023 === undefined) ? {} : dest_2705023;
      }
      }
      nimCopyAux(result_2710219, src_2705024, ti_2705025.node);
      break;
    case 24:
    case 4:
    case 27:
    case 16:
            if (src_2705024 === null) {
        result_2710219 = null;
      }
      else {
        if (dest_2705023 === null || dest_2705023 === undefined) {
          dest_2705023 = new Array(src_2705024.length);
        }
        else {
          dest_2705023.length = src_2705024.length;
        }
        result_2710219 = dest_2705023;
        for (var i = 0; i < src_2705024.length; ++i) {
          result_2710219[i] = nimCopy(result_2710219[i], src_2705024[i], ti_2705025.base);
        }
      }
    
      break;
    case 28:
            if (src_2705024 !== null) {
        result_2710219 = src_2705024.slice(0);
      }
    
      break;
    default: 
      result_2710219 = src_2705024;
      break;
    }

  return result_2710219;

}
function makeNimstrLit(c_2690062) {
      var ln = c_2690062.length;
  var result = new Array(ln);
  for (var i = 0; i < ln; ++i) {
    result[i] = c_2690062.charCodeAt(i);
  }
  return result;
  

  
}
function toJSStr(s_2690096) {
                    var Tmp5;
            var Tmp7;

  var result_2690097 = null;

    var res_2690170 = newSeq_2690128((s_2690096).length);
    var i_2690172 = 0;
    var j_2690174 = 0;
    L1: do {
        L2: while (true) {
        if (!(i_2690172 < (s_2690096).length)) break L2;
          var c_2690175 = s_2690096[i_2690172];
          if ((c_2690175 < 128)) {
          res_2690170[j_2690174] = String.fromCharCode(c_2690175);
          i_2690172 += 1;
          }
          else {
            var helper_2690198 = newSeq_2690128(0);
            L3: do {
                L4: while (true) {
                if (!true) break L4;
                  var code_2690199 = c_2690175.toString(16);
                  if (((code_2690199).length == 1)) {
                  helper_2690198.push("%0");;
                  }
                  else {
                  helper_2690198.push("%");;
                  }
                  
                  helper_2690198.push(code_2690199);;
                  i_2690172 += 1;
                    if (((s_2690096).length <= i_2690172)) Tmp5 = true; else {                      Tmp5 = (s_2690096[i_2690172] < 128);                    }                  if (Tmp5) {
                  break L3;
                  }
                  
                  c_2690175 = s_2690096[i_2690172];
                }
            } while(false);
++excHandler;
            Tmp7 = framePtr;
            try {
            res_2690170[j_2690174] = decodeURIComponent(helper_2690198.join(""));
--excHandler;
} catch (EXC) {
 var prevJSError = lastJSError;
 lastJSError = EXC;
 --excHandler;
            framePtr = Tmp7;
            res_2690170[j_2690174] = helper_2690198.join("");
            lastJSError = prevJSError;
            } finally {
            framePtr = Tmp7;
            }
          }
          
          j_2690174 += 1;
        }
    } while(false);
    if (res_2690170.length < j_2690174) { for (var i=res_2690170.length;i<j_2690174;++i) res_2690170.push(null); }
               else { res_2690170.length = j_2690174; };
    result_2690097 = res_2690170.join("");

  return result_2690097;

}
function raiseException(e_2655218, ename_2655219) {
    e_2655218.name = ename_2655219;
    if ((excHandler == 0)) {
    unhandledException(e_2655218);
    }
    
    throw e_2655218;

  
}
function raiseFieldError(f_2685047) {
    raiseException({message: nimCopy(null, f_2685047, NTI2421013), parent: null, m_type: NTI2427651, name: null, trace: [], up: null}, "FieldDefect");

  
}
var ConstSet4 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet5 = setConstr(true);
var ConstSet6 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet7 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet8 = setConstr(true);
var ConstSet9 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet10 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet11 = setConstr(true);
var ConstSet12 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet13 = setConstr(true);
var ConstSet14 = setConstr(2, 1);
var ConstSet15 = setConstr(2, 1);
var ConstSet16 = setConstr(2, 1);
var ConstSet17 = setConstr(2, 1);
var ConstSet18 = setConstr(true);
var ConstSet19 = setConstr(true);
function addChar(x_2740031, c_2740032) {
    x_2740031.push(c_2740032);

  
}
var ConstSet20 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet21 = setConstr(34, 39, 60);
var ConstSet22 = setConstr(true);
var ConstSet23 = setConstr(true);
var ConstSet24 = setConstr(true);
var ConstSet25 = setConstr(true);
var ConstSet26 = setConstr(true);
var ConstSet27 = setConstr(true);
var ConstSet28 = setConstr(true);
function genericReset(x_2715044, ti_2715045) {
  var result_2715046 = null;

    result_2715046 = null;
    switch (ti_2715045.kind) {
    case 21:
    case 22:
    case 23:
    case 5:
      if (isFatPointer_2700401(ti_2715045)) {
              result_2715046 = [null, 0];
      
      }
      
      break;
    case 19:
            result_2715046 = {};
    
      break;
    case 18:
    case 17:
      if ((ti_2715045.kind == 17)) {
      result_2715046 = {m_type: ti_2715045};
      }
      else {
        result_2715046 = {};
      }
      
      break;
    case 24:
    case 27:
            result_2715046 = [];
    
      break;
    case 4:
    case 16:
            result_2715046 = new Array(x_2715044.length);
      for (var i = 0; i < x_2715044.length; ++i) {
        result_2715046[i] = genericReset(x_2715044[i], ti_2715045.base);
      }
    
      break;
    default: 
      break;
    }

  return result_2715046;

}
var ConstSet29 = setConstr(true);
var ConstSet30 = setConstr(true);
var ConstSet31 = setConstr(true);
var ConstSet32 = setConstr(true);
var ConstSet33 = setConstr(true);
var ConstSet34 = setConstr(true);
var ConstSet35 = setConstr(true);
var ConstSet36 = setConstr(true);
var ConstSet37 = setConstr(2, 1);
var ConstSet38 = setConstr(true);
var ConstSet39 = setConstr(2, 1);
var ConstSet40 = setConstr(2, 1);
var ConstSet41 = setConstr(2, 1);
var ConstSet42 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet43 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet44 = setConstr(2, 1);
function nimMin(a_2695803, b_2695804) {
    var Tmp1;

  var result_2695805 = 0;

  BeforeRet: do {
    if ((a_2695803 <= b_2695804)) {
    Tmp1 = a_2695803;
    }
    else {
    Tmp1 = b_2695804;
    }
    
    result_2695805 = Tmp1;
    break BeforeRet;
  } while (false);

  return result_2695805;

}
function nimMax(a_2695821, b_2695822) {
    var Tmp1;

  var result_2695823 = 0;

  BeforeRet: do {
    if ((b_2695822 <= a_2695821)) {
    Tmp1 = a_2695821;
    }
    else {
    Tmp1 = b_2695822;
    }
    
    result_2695823 = Tmp1;
    break BeforeRet;
  } while (false);

  return result_2695823;

}
function mnewString(len_2695044) {
        return new Array(len_2695044);
  

  
}
var ConstSet45 = setConstr(13, 10, 47);
var ConstSet46 = setConstr(2, 1);
var ConstSet47 = setConstr([65, 90], [97, 122], 95, 58, [128, 255]);
var ConstSet48 = setConstr([65, 90], [97, 122], [48, 57], 46, 45, 95, 58, [128, 255]);
var ConstSet49 = setConstr([65, 90], [97, 122], 95, 58, [128, 255]);
var ConstSet50 = setConstr([48, 57]);
var ConstSet51 = setConstr(2, 4, 12);
function eqStrings(a_2695222, b_2695223) {
        if (a_2695222 == b_2695223) return true;
    if (a_2695222 === null && b_2695223.length == 0) return true;
    if (b_2695223 === null && a_2695222.length == 0) return true;
    if ((!a_2695222) || (!b_2695223)) return false;
    var alen = a_2695222.length;
    if (alen != b_2695223.length) return false;
    for (var i = 0; i < alen; ++i)
      if (a_2695222[i] != b_2695223[i]) return false;
    return true;
  

  
}
var ConstSet52 = setConstr(39, 34);
var ConstSet53 = setConstr(34, 39, 96, 61, 60, 62, 32, 0, 9, 10, 12, 12);
var ConstSet54 = setConstr(2);
var ConstSet55 = setConstr(2);
var ConstSet56 = setConstr(2);
var ConstSet57 = setConstr([48, 57]);
var ConstSet58 = setConstr(0, 125);
var ConstSet59 = setConstr([48, 57]);
var ConstSet60 = setConstr([65, 90]);
var ConstSet61 = setConstr([97, 122], [65, 90], [48, 57], [128, 255], 95);
function cstrToNimstr(c_2690079) {
      var ln = c_2690079.length;
  var result = new Array(ln);
  var r = 0;
  for (var i = 0; i < ln; ++i) {
    var ch = c_2690079.charCodeAt(i);

    if (ch < 128) {
      result[r] = ch;
    }
    else {
      if (ch < 2048) {
        result[r] = (ch >> 6) | 192;
      }
      else {
        if (ch < 55296 || ch >= 57344) {
          result[r] = (ch >> 12) | 224;
        }
        else {
            ++i;
            ch = 65536 + (((ch & 1023) << 10) | (c_2690079.charCodeAt(i) & 1023));
            result[r] = (ch >> 18) | 240;
            ++r;
            result[r] = ((ch >> 12) & 63) | 128;
        }
        ++r;
        result[r] = ((ch >> 6) & 63) | 128;
      }
      ++r;
      result[r] = (ch & 63) | 128;
    }
    ++r;
  }
  return result;
  

  
}
var ConstSet62 = setConstr(2);
var ConstSet63 = setConstr(0, 1, 5, 3, 4);
var ConstSet64 = setConstr(0, 1, 5, 3, 4);
    var errorMessages_12101072 = [makeNimstrLit("no error"), makeNimstrLit("\']]>\' expected"), makeNimstrLit("name expected"), makeNimstrLit("\';\' expected"), makeNimstrLit("\'?>\' expected"), makeNimstrLit("\'>\' expected"), makeNimstrLit("\'=\' expected"), makeNimstrLit("\'\"\' or \"\'\" expected"), makeNimstrLit("\'-->\' expected"), makeNimstrLit("attribute value expected")];
var ConstSet65 = setConstr(2);
var ConstSet66 = setConstr([65, 90]);
var ConstSet67 = setConstr([65, 90]);
var ConstSet68 = setConstr(2);
var ConstSet69 = setConstr(0, 1, 5, 3, 4);
var ConstSet70 = setConstr(0, 1, 5, 3, 4);
var ConstSet71 = setConstr(true);
var ConstSet72 = setConstr(true);
var ConstSet73 = setConstr(true);
var ConstSet74 = setConstr(true);
var ConstSet75 = setConstr([65, 90], [97, 122]);
var ConstSet76 = setConstr([48, 57]);
var ConstSet77 = setConstr(true);
var ConstSet78 = setConstr(true);
var ConstSet79 = setConstr(true);
var ConstSet80 = setConstr(true);
var ConstSet81 = setConstr(true);
var ConstSet82 = setConstr(true);
var ConstSet83 = setConstr(true);
var ConstSet84 = setConstr([48, 57]);
var ConstSet85 = setConstr(true);
var ConstSet86 = setConstr(true);
var ConstSet87 = setConstr(true);
var ConstSet88 = setConstr(true);
var ConstSet89 = setConstr(true);
var ConstSet90 = setConstr(true);
var ConstSet91 = setConstr(true);
var ConstSet92 = setConstr(true);
var ConstSet93 = setConstr(true);
var ConstSet94 = setConstr(true);
var ConstSet95 = setConstr(true);
var ConstSet96 = setConstr(true);
var ConstSet97 = setConstr(true);
var ConstSet98 = setConstr(true);
var ConstSet99 = setConstr(true);
var ConstSet100 = setConstr(9, [11, 12], 32);
var ConstSet101 = setConstr(true);
var ConstSet102 = setConstr(true);
var ConstSet103 = setConstr(true);
var ConstSet104 = setConstr(true);
var ConstSet105 = setConstr(true);
var ConstSet106 = setConstr(true);
var ConstSet107 = setConstr(true);
var ConstSet108 = setConstr(true);
var ConstSet109 = setConstr(9, 10, 12);
var ConstSet110 = setConstr(true);
var ConstSet111 = setConstr(true);
var ConstSet112 = setConstr(true);
var ConstSet113 = setConstr(true);
var ConstSet114 = setConstr(true);
var ConstSet115 = setConstr(true);
var ConstSet116 = setConstr(40, 91, 123, 60, 58);
var ConstSet117 = setConstr([97, 122], [65, 90], [48, 57], 45, 95, 58, 46);
var ConstSet118 = setConstr(true);
var ConstSet119 = setConstr(true);
var ConstSet120 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet121 = setConstr(true);
var ConstSet122 = setConstr(true);
var ConstSet123 = setConstr([48, 57]);
var ConstSet124 = setConstr(true);
var ConstSet125 = setConstr(true);
var ConstSet126 = setConstr(true);
var ConstSet127 = setConstr(true);
function reprEnum(e_2780272, typ_2780273) {
  var result_2780274 = [];

    var tmp_2780275 = false;
    var item_2780276 = typ_2780273.node.sons[e_2780272];
    tmp_2780275 = item_2780276 !== undefined
    if (tmp_2780275) {
    result_2780274 = nimCopy(null, makeNimstrLit(item_2780276.name), NTI2421013);
    }
    else {
      result_2780274 = nimCopy(null, (cstrToNimstr((e_2780272)+"") || []).concat(makeNimstrLit(" (invalid data!)") || []), NTI2421013);
    }
    

  return result_2780274;

}
var ConstSet128 = setConstr(true);
var ConstSet129 = setConstr(true);
var ConstSet130 = setConstr(true);
var ConstSet131 = setConstr(true);
var ConstSet132 = setConstr(true);
if (!Math.trunc) {
  Math.trunc = function(v) {
    v = +v;
    if (!isFinite(v)) return v;
    return (v - v % 1) || (v < 0 ? -0 : v === 0 ? v : 0);
  };
}

var objectID_12200031 = [0];
function input_13720015() {
  var result_13720017 = null;

    result_13720017 = document.getElementById("input").value;

  return result_13720017;

}
function paragraphIfText_11601529(elem_11601531) {
    var Tmp1;

  var result_11601532 = null;

    if (elem_11601531.isText) {
    Tmp1 = {isText: false, tag: 1, content: [elem_11601531], str: null, attrs: []};
    }
    else {
    Tmp1 = elem_11601531;
    }
    
    result_11601532 = Tmp1;

  return result_11601532;

}
function isFatPointer_2700401(ti_2700403) {
  var result_2700404 = false;

  BeforeRet: do {
    result_2700404 = !((ConstSet3[ti_2700403.base.kind] != undefined));
    break BeforeRet;
  } while (false);

  return result_2700404;

}
function nimCopyAux(dest_2705028, src_2705029, n_2705031) {
    switch (n_2705031.kind) {
    case 0:
      break;
    case 1:
            dest_2705028[n_2705031.offset] = nimCopy(dest_2705028[n_2705031.offset], src_2705029[n_2705031.offset], n_2705031.typ);
    
      break;
    case 2:
          for (var i = 0; i < n_2705031.sons.length; i++) {
      nimCopyAux(dest_2705028, src_2705029, n_2705031.sons[i]);
    }
    
      break;
    case 3:
            dest_2705028[n_2705031.offset] = nimCopy(dest_2705028[n_2705031.offset], src_2705029[n_2705031.offset], n_2705031.typ);
      for (var i = 0; i < n_2705031.sons.length; ++i) {
        nimCopyAux(dest_2705028, src_2705029, n_2705031.sons[i][1]);
      }
    
      break;
    }

  
}
function add_2592211(x_2592214, x_2592214_Idx, y_2592215) {
          if (x_2592214[x_2592214_Idx] === null) { x_2592214[x_2592214_Idx] = []; }
      var off = x_2592214[x_2592214_Idx].length;
      x_2592214[x_2592214_Idx].length += y_2592215.length;
      for (var i = 0; i < y_2592215.length; ++i) {
        x_2592214[x_2592214_Idx][off+i] = y_2592215.charCodeAt(i);
      }
    

  
}
function newSeq_2690128(len_2690131) {
  var result_2690133 = [];

    result_2690133 = new Array(len_2690131); for (var i=0;i<len_2690131;++i) {result_2690133[i]=null;}
  return result_2690133;

}
function unhandledException(e_2650059) {
    var buf_2650060 = [[]];
    if (!(((e_2650059.message).length == 0))) {
    buf_2650060[0].push.apply(buf_2650060[0], makeNimstrLit("Error: unhandled exception: "));;
    buf_2650060[0].push.apply(buf_2650060[0], e_2650059.message);;
    }
    else {
    buf_2650060[0].push.apply(buf_2650060[0], makeNimstrLit("Error: unhandled exception"));;
    }
    
    buf_2650060[0].push.apply(buf_2650060[0], makeNimstrLit(" ["));;
    add_2592211(buf_2650060, 0, e_2650059.name);
    buf_2650060[0].push.apply(buf_2650060[0], makeNimstrLit("]\x0A"));;
    var cbuf_2655201 = toJSStr(buf_2650060[0]);
    framePtr = null;
      if (typeof(Error) !== "undefined") {
    throw new Error(cbuf_2655201);
  }
  else {
    throw cbuf_2655201;
  }
  

  
}
function anyNext_11635020(parser_11635022, offset_11635023) {
  var result_11635024 = false;

    result_11635024 = ((parser_11635022.pos + offset_11635023) < (parser_11635022.str).length);

  return result_11635024;

}
function peekMatch_11645014(parser_11645016, pat_11645018, offset_11645019) {
    var Tmp1;

  var result_11645020 = false;

    if (!anyNext_11635020(parser_11645016, offset_11645019)) Tmp1 = false; else {      Tmp1 = (pat_11645018[parser_11645016.str.charCodeAt((parser_11645016.pos + offset_11645019))] != undefined);    }    result_11645020 = Tmp1;

  return result_11645020;

}
function nextMatch_11685286(parser_11685288, parser_11685288_Idx, pat_11685290, offset_11685291) {
  var result_11685292 = false;

    result_11685292 = peekMatch_11645014(parser_11685288[parser_11685288_Idx], pat_11685290, offset_11685291);
    if (result_11685292) {
    parser_11685288[parser_11685288_Idx].pos += (offset_11685291 + 1);
    }
    

  return result_11685292;

}
function newElem_11601465(tag_11601467, content_11601484) {
  var result_11601485 = null;

    result_11601485 = {isText: false, tag: tag_11601467, content: nimCopy(null, content_11601484, NTI11601468), str: null, attrs: []};

  return result_11601485;

}
function newStr_11601416(s_11601418) {
  var result_11601419 = null;

    result_11601419 = {isText: true, str: s_11601418, tag: 0, attrs: [], content: []};

  return result_11601419;

}
function HEX5BHEX5D_11601075(c_11601077, ind_11601082) {
  var result_11601083 = null;

    result_11601083 = c_11601077.substring(ind_11601082.a, (ind_11601082.b + 1));

  return result_11601083;

}
function HEX2EHEX2E_4625220(a_4625225, b_4625227) {
  var result_4625229 = ({a: 0, b: 0});

    nimCopy(result_4625229, {a: a_4625225, b: b_4625227}, NTI3520020);

  return result_4625229;

}
function peekMatch_11675020(parser_11675022, pat_11675023, offset_11675024) {
    var Tmp1;

  var result_11675025 = false;

    if (!anyNext_11635020(parser_11675022, ((offset_11675024 + (pat_11675023).length) - 1))) Tmp1 = false; else {      Tmp1 = (HEX5BHEX5D_11601075(parser_11675022.str, HEX2EHEX2E_4625220((parser_11675022.pos + offset_11675024), (((parser_11675022.pos + offset_11675024) + (pat_11675023).length) - 1))) == toJSStr(pat_11675023));    }    result_11675025 = Tmp1;

  return result_11675025;

}
function nextMatch_11685365(parser_11685367, parser_11685367_Idx, pat_11685368, offset_11685369) {
  var result_11685370 = false;

    result_11685370 = peekMatch_11675020(parser_11685367[parser_11685367_Idx], pat_11685368, offset_11685369);
    if (result_11685370) {
    parser_11685367[parser_11685367_Idx].pos += (offset_11685369 + (pat_11685368).length);
    }
    

  return result_11685370;

}
function anyPrev_11635038(parser_11635040, offset_11635041) {
  var result_11635042 = false;

    result_11635042 = (0 <= ((parser_11635040.pos + offset_11635041) - 1));

  return result_11635042;

}
function peekPrevMatch_12975001(parser_12975004, pat_12975005, offset_12975006) {
  var result_12975007 = false;

    result_12975007 = (anyPrev_11635038(parser_12975004, offset_12975006) && peekMatch_11645014(parser_12975004, pat_12975005, (offset_12975006 - 1)));

  return result_12975007;

}
function add_13015003(x_13015006, x_13015006_Idx) {
    x_13015006[x_13015006_Idx] += "*";;

  
}
function add_13030003(x_13030006, x_13030006_Idx) {
    x_13030006[x_13030006_Idx] += "_";;

  
}
function peekMatch_11640024(parser_11640026, pat_11640027, offset_11640028) {
    var Tmp1;

  var result_11640029 = false;

    if (!anyNext_11635020(parser_11640026, offset_11640028)) Tmp1 = false; else {      Tmp1 = (parser_11640026.str.charCodeAt((parser_11640026.pos + offset_11640028)) == pat_11640027);    }    result_11640029 = Tmp1;

  return result_11640029;

}
function nextMatch_11685261(parser_11685263, parser_11685263_Idx, pat_11685264, offset_11685265) {
  var result_11685266 = false;

    result_11685266 = peekMatch_11640024(parser_11685263[parser_11685263_Idx], pat_11685264, offset_11685265);
    if (result_11685266) {
    parser_11685263[parser_11685263_Idx].pos += (offset_11685265 + 1);
    }
    

  return result_11685266;

}
function peekMatch_11655020(parser_11655022, pat_11655023, offset_11655024, len_11655025) {
    var Tmp1;

  var result_11655026 = false;

  BeforeRet: do {
    if (anyNext_11635020(parser_11655022, ((offset_11655024 + len_11655025) - 1))) {
    L2: do {
      var i_11655034 = 0;
      var colontmp__13720163 = 0;
      colontmp__13720163 = len_11655025;
      var i_13720164 = 0;
      L3: do {
          L4: while (true) {
          if (!(i_13720164 < colontmp__13720163)) break L4;
            i_11655034 = i_13720164;
            if (!((parser_11655022.str.charCodeAt((parser_11655022.pos + (offset_11655024 + i_11655034))) == pat_11655023))) {
            result_11655026 = false;
            break BeforeRet;
            }
            
            i_13720164 += 1;
          }
      } while(false);
    } while(false);
    Tmp1 = true;
    }
    else {
    Tmp1 = false;
    }
    
    result_11655026 = Tmp1;
  } while (false);

  return result_11655026;

}
function nextMatch_11685312(parser_11685314, parser_11685314_Idx, pat_11685315, offset_11685316, len_11685317) {
  var result_11685318 = false;

    result_11685318 = peekMatch_11655020(parser_11685314[parser_11685314_Idx], pat_11685315, offset_11685316, len_11685317);
    if (result_11685318) {
    parser_11685314[parser_11685314_Idx].pos += (offset_11685316 + len_11685317);
    }
    

  return result_11685318;

}
function parseCodeBlockStr_12895020(parser_12895022, parser_12895022_Idx, delimChar_12895023) {
              var Tmp8;

  var result_12895024 = null;

  BeforeRet: do {
    result_12895024 = "";
    var delimLen_12895026 = 3;
    L1: do {
        L2: while (true) {
        if (!nextMatch_11685261(parser_12895022, parser_12895022_Idx, delimChar_12895023, 0)) break L2;
          delimLen_12895026 += 1;
        }
    } while(false);
    L3: do {
        L4: while (true) {
        if (!nextMatch_11685286(parser_12895022, parser_12895022_Idx, ConstSet12, 0)) break L4;
        }
    } while(false);
    L5: do {
      var ch_12895033 = 0;
      L6: do {
          L7: while (true) {
          if (!(parser_12895022[parser_12895022_Idx].pos < (parser_12895022[parser_12895022_Idx].str).length)) break L7;
            ch_12895033 = parser_12895022[parser_12895022_Idx].str.charCodeAt((parser_12895022[parser_12895022_Idx].pos + 0));
            if (nextMatch_11685312(parser_12895022, parser_12895022_Idx, delimChar_12895023, 0, delimLen_12895026)) {
            parser_12895022[parser_12895022_Idx].pos -= 1;
            break BeforeRet;
            }
            else {
              switch (ch_12895033) {
              case 62:
                Tmp8 = "&gt;";
                break;
              case 60:
                Tmp8 = "&lt;";
                break;
              case 38:
                Tmp8 = "&amp;";
                break;
              default: 
                Tmp8 = String.fromCharCode(ch_12895033);
                break;
              }
            result_12895024 += Tmp8;;
            }
            
            parser_12895022[parser_12895022_Idx].pos += 1;
          }
      } while(false);
    } while(false);
  } while (false);

  return result_12895024;

}
function parseCodeBlock_12900014(parser_12900016, parser_12900016_Idx, delimChar_12900017) {
  var result_12900018 = null;

    result_12900018 = newElem_11601465(17, [newStr_11601416(parseCodeBlockStr_12895020(parser_12900016, parser_12900016_Idx, delimChar_12900017))]);

  return result_12900018;

}
function add_12940002(x_12940007, x_12940007_Idx, y_12940009) {
    var Tmp1;

    var xl_12940015 = (x_12940007[x_12940007_Idx]).length;
    if (x_12940007[x_12940007_Idx].length < (Tmp1 = (xl_12940015 + (y_12940009).length), Tmp1)) { for (var i=x_12940007[x_12940007_Idx].length;i<Tmp1;++i) x_12940007[x_12940007_Idx].push(null); }
               else { x_12940007[x_12940007_Idx].length = Tmp1; };
    L2: do {
      var i_12940040 = 0;
      var colontmp__13720168 = 0;
      colontmp__13720168 = ((y_12940009).length-1);
      var res_13720169 = 0;
      L3: do {
          L4: while (true) {
          if (!(res_13720169 <= colontmp__13720168)) break L4;
            i_12940040 = res_13720169;
            x_12940007[x_12940007_Idx][(xl_12940015 + i_12940040)] = y_12940009[i_12940040];
            res_13720169 += 1;
          }
      } while(false);
    } while(false);

  
}
function parseLink_13185032(parser_13185034, parser_13185034_Idx) {
              var Tmp4;

  var result_13185039 = {Field0: false, Field1: [], Field2: []};

  BeforeRet: do {
    var state_13185044 = 0;
    var delim_13185045 = 0;
    var escaped_13185046 = false;
    var openparens_13185048 = 1;
    L1: do {
      var ch_13185049 = 0;
      L2: do {
          L3: while (true) {
          if (!(parser_13185034[parser_13185034_Idx].pos < (parser_13185034[parser_13185034_Idx].str).length)) break L3;
            ch_13185049 = parser_13185034[parser_13185034_Idx].str.charCodeAt((parser_13185034[parser_13185034_Idx].pos + 0));
            switch (state_13185044) {
            case 0:
              switch (ch_13185049) {
              case 9:
              case 10:
              case 11:
              case 12:
              case 13:
              case 32:
                state_13185044 = 1;
                break;
              case 40:
                openparens_13185048 += 1;
                addChar(result_13185039.Field1, 40);;
                break;
              case 41:
                openparens_13185048 -= 1;
                if ((openparens_13185048 == 0)) {
                result_13185039.Field0 = true;
                break BeforeRet;
                }
                else {
                addChar(result_13185039.Field1, 41);;
                }
                
                break;
              default: 
                addChar(result_13185039.Field1, ch_13185049);;
                break;
              }
              break;
            case 1:
              if (!((ConstSet20[ch_13185049] != undefined))) {
              if ((ConstSet21[ch_13185049] != undefined)) {
              state_13185044 = 2;
              if ((ch_13185049 == 60)) {
              Tmp4 = 62;
              }
              else {
              Tmp4 = ch_13185049;
              }
              
              delim_13185045 = Tmp4;
              }
              else {
              if ((ch_13185049 == 41)) {
              result_13185039.Field0 = true;
              break BeforeRet;
              }
              }
              }
              
              break;
            case 2:
              if (!(escaped_13185046)) {
              if ((ch_13185049 == 92)) {
              escaped_13185046 = true;
              }
              else {
              if ((ch_13185049 == delim_13185045)) {
              state_13185044 = 3;
              }
              else {
              addChar(result_13185039.Field2, ch_13185049);;
              }
              }
              }
              else {
                if (!((setConstr(92, delim_13185045)[ch_13185049] != undefined))) {
                addChar(result_13185039.Field2, 92);;
                }
                
                addChar(result_13185039.Field2, ch_13185049);;
                escaped_13185046 = false;
              }
              
              break;
            case 3:
              if ((ch_13185049 == 41)) {
              result_13185039.Field0 = true;
              break BeforeRet;
              }
              
              break;
            }
            parser_13185034[parser_13185034_Idx].pos += 1;
          }
      } while(false);
    } while(false);
    result_13185039.Field0 = false;
  } while (false);

  return result_13185039;

}
function parseBracket_12876414(image_12876416, parser_12876417, parser_12876417_Idx, singleLine_12876418) {
    var Tmp1;
      var Tmp2;
      var Tmp3;
        var Tmp4;
    var Tmp5;
    var Tmp6;
    var Tmp7;
    var Tmp8;
    var Tmp9;
    var Tmp10;
      var Tmp11;
      var Tmp12;
      var Tmp13;
      var Tmp14;
        var Tmp15;
      var Tmp16;
      var Tmp17;
      var Tmp18;
    var Tmp19;
      var Tmp20;
      var Tmp21;
      var Tmp22;

  var result_13200042 = null;

  BeforeRet: do {
    var firstPos_13200043 = parser_12876417[parser_12876417_Idx].pos;
    var colontmp__13720175 = parseDelimed_12900048(parser_12876417, parser_12876417_Idx, makeNimstrLit("]"), singleLine_12876418);
    var titleWorked_13200044 = colontmp__13720175["Field0"];
    var titleElems_13200045 = nimCopy(null, colontmp__13720175["Field1"], NTI12900054);
    parser_12876417[parser_12876417_Idx].pos += 1;
    var secondPos_13200052 = (parser_12876417[parser_12876417_Idx].pos - 2);
    if (!((titleWorked_13200044 == 0))) {
    result_13200042 = newElem_11601465(0, titleElems_13200045);
    break BeforeRet;
    }
    
      if (!(!(image_12876416) && ((titleElems_13200045).length == 1))) Tmp3 = false; else {        Tmp3 = titleElems_13200045[0].isText;      }      if (!Tmp3) Tmp2 = false; else {        var Tmp4 = titleElems_13200045[0];
        if (ConstSet18[Tmp4.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
        Tmp2 = ((Tmp4.str).length == 1);      }    if (Tmp2) {
    var Tmp5 = titleElems_13200045[0];
    if (ConstSet19[Tmp5.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    switch ((Tmp6 = Tmp5.str, Tmp6).charCodeAt(0)) {
    case 32:
      Tmp7 = 1;
      break;
    case 120:
      Tmp7 = 2;
      break;
    default: 
      Tmp7 = 0;
      break;
    }
    Tmp1 = Tmp7;
    }
    else {
    Tmp1 = 0;
    }
    
    var checkMark_13205014 = Tmp1;
    if ((parser_12876417[parser_12876417_Idx].pos < (parser_12876417[parser_12876417_Idx].str).length)) {
    if ((parser_12876417[parser_12876417_Idx].str.charCodeAt((parser_12876417[parser_12876417_Idx].pos + 0)) == 40)) {
    var oldPos_13210001 = parser_12876417[parser_12876417_Idx].pos;
    parser_12876417[parser_12876417_Idx].pos += 1;
    var colontmp__13720176 = parseLink_13185032(parser_12876417, parser_12876417_Idx);
    var linkWorked_13210008 = colontmp__13720176["Field0"];
    var link_13210009 = nimCopy(null, colontmp__13720176["Field1"], NTI2421013);
    var tip_13210010 = nimCopy(null, colontmp__13720176["Field2"], NTI2421013);
    if (linkWorked_13210008) {
    var elem_13210011 = {isText: false, str: null, tag: 0, attrs: [], content: []};
    if (image_12876416) {
    var Tmp8 = elem_13210011;
    if (ConstSet22[Tmp8.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    Tmp8.tag = 21;
    var Tmp9 = elem_13210011;
    if (ConstSet23[Tmp9.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'attrs\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    Tmp9.attrs.push({Field0: "src", Field1: toJSStr(link_13210009)});;
    if ((0 < (secondPos_13200052 - firstPos_13200043))) {
    var Tmp10 = elem_13210011;
    if (ConstSet24[Tmp10.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'attrs\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    Tmp10.attrs.push({Field0: "alt", Field1: HEX5BHEX5D_11601075(parser_12876417[parser_12876417_Idx].str, HEX2EHEX2E_4625220(firstPos_13200043, secondPos_13200052))});;
    }
    
    }
    else {
      var Tmp11 = elem_13210011;
      if (ConstSet25[Tmp11.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp11.tag = 23;
      var Tmp12 = elem_13210011;
      if (ConstSet26[Tmp12.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp12.content = nimCopy(null, titleElems_13200045, NTI12900054);
      var Tmp13 = elem_13210011;
      if (ConstSet27[Tmp13.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'attrs\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
        if (!(((link_13210009).length == 0) && ((titleElems_13200045).length == 1))) Tmp15 = false; else {          Tmp15 = titleElems_13200045[0].isText;        }      if (Tmp15) {
      var Tmp17 = titleElems_13200045[0];
      if (ConstSet28[Tmp17.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp16 = Tmp17.str;
      var Tmp18 = titleElems_13200045[0];
      if (ConstSet29[Tmp18.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp18.str = genericReset(Tmp18.str, NTI2421015);
      Tmp14 = Tmp16;
      }
      else {
      Tmp14 = toJSStr(link_13210009);
      }
      
      Tmp13.attrs.push({Field0: "href", Field1: Tmp14});;
    }
    
    if (!(((tip_13210010).length == 0))) {
    var Tmp19 = elem_13210011;
    if (ConstSet30[Tmp19.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'attrs\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    Tmp19.attrs.push({Field0: "title", Field1: toJSStr(tip_13210010)});;
    }
    
    result_13200042 = elem_13210011;
    break BeforeRet;
    }
    else {
      parser_12876417[parser_12876417_Idx].pos = oldPos_13210001;
    }
    
    }
    else {
    parser_12876417[parser_12876417_Idx].pos -= 1;
    }
    
    }
    
    if (image_12876416) {
    result_13200042 = newElem_11601465(0, titleElems_13200045);
    }
    else {
    if ((checkMark_13205014 == 0)) {
    result_13200042 = newElem_11601465(14, titleElems_13200045);
    }
    else {
      var elem_13220018 = newElem_11601465(22, []);
      var Tmp20 = elem_13220018;
      if (ConstSet31[Tmp20.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'attrs\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp20.attrs.push({Field0: "type", Field1: "checkbox"});;
      var Tmp21 = elem_13220018;
      if (ConstSet32[Tmp21.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'attrs\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp21.attrs.push({Field0: "disabled", Field1: ""});;
      if ((checkMark_13205014 == 2)) {
      var Tmp22 = elem_13220018;
      if (ConstSet33[Tmp22.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'attrs\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp22.attrs.push({Field0: "checked", Field1: ""});;
      }
      
      result_13200042 = elem_13220018;
    }
    }
  } while (false);

  return result_13200042;

}
function add_12876434(x_12876437, x_12876437_Idx) {
    x_12876437[x_12876437_Idx] += "{";;

  
}
function add_12876461(x_12876464, x_12876464_Idx) {
    x_12876464[x_12876464_Idx] += "}";;

  
}
function add_11601037(x_11601040, x_11601040_Idx, y_11601041) {
    x_11601040[x_11601040_Idx] += String.fromCharCode(y_11601041);;

  
}
function parseCurly_12876419(parser_12876421, parser_12876421_Idx) {
              var Tmp4;

  var result_12876422 = [null];

  BeforeRet: do {
    result_12876422[0] = "";
    var opencurlys_12876424 = 1;
    var escaped_12876425 = false;
    L1: do {
      var ch_12876426 = 0;
      L2: do {
          L3: while (true) {
          if (!(parser_12876421[parser_12876421_Idx].pos < (parser_12876421[parser_12876421_Idx].str).length)) break L3;
            ch_12876426 = parser_12876421[parser_12876421_Idx].str.charCodeAt((parser_12876421[parser_12876421_Idx].pos + 0));
            if (!(escaped_12876425)) {
            switch (ch_12876426) {
            case 92:
              escaped_12876425 = true;
              break;
            case 123:
              opencurlys_12876424 += 1;
              add_12876434(result_12876422, 0);
              break;
            case 125:
              opencurlys_12876424 -= 1;
              if ((opencurlys_12876424 == 0)) {
              break BeforeRet;
              }
              else {
              add_12876461(result_12876422, 0);
              }
              
              break;
            default: 
              add_11601037(result_12876422, 0, ch_12876426);
              break;
            }
            }
            else {
              switch (ch_12876426) {
              case 62:
                Tmp4 = "&gt;";
                break;
              case 60:
                Tmp4 = "&lt;";
                break;
              case 38:
                Tmp4 = "&amp;";
                break;
              case 92:
              case 125:
              case 123:
                Tmp4 = String.fromCharCode(ch_12876426);
                break;
              default: 
                Tmp4 = ("\\\\" + String.fromCharCode(ch_12876426));
                break;
              }
              result_12876422[0] += Tmp4;;
              escaped_12876425 = false;
            }
            
            parser_12876421[parser_12876421_Idx].pos += 1;
          }
      } while(false);
    } while(false);
  } while (false);

  return result_12876422[0];

}
function ssClose_11945021(s_11945023) {
    var s_11945024 = s_11945023;
    s_11945024.data = nimCopy(null, [], NTI2421013);

  
}
function ssAtEnd_11850297(s_11850299) {
  var result_11850300 = false;

  BeforeRet: do {
    var s_11850301 = s_11850299;
    result_11850300 = ((s_11850301.data).length <= s_11850301.pos);
    break BeforeRet;
  } while (false);

  return result_11850300;

}
function clamp_11855049(x_11855052, a_11855053, b_11855054) {
  var result_11855055 = 0;

  BeforeRet: do {
    if ((x_11855052 < a_11855053)) {
    result_11855055 = a_11855053;
    break BeforeRet;
    }
    
    if ((b_11855054 < x_11855052)) {
    result_11855055 = b_11855054;
    break BeforeRet;
    }
    
    result_11855055 = x_11855052;
    break BeforeRet;
  } while (false);

  return result_11855055;

}
function ssSetPosition_11855044(s_11855046, pos_11855047) {
    var s_11855048 = s_11855046;
    s_11855048.pos = clamp_11855049(pos_11855047, 0, (s_11855048.data).length);

  
}
function ssGetPosition_11855082(s_11855084) {
  var result_11855085 = 0;

  BeforeRet: do {
    var s_11855086 = s_11855084;
    result_11855085 = s_11855086.pos;
    break BeforeRet;
  } while (false);

  return result_11855085;

}
function HEX5BHEX5DHEX3D_11130021(s_11130025, s_11130025_Idx, x_11130027, b_11130028) {
    var a_11130201 = x_11130027.a;
    var L_11130401 = ((x_11130027.b - a_11130201) + 1);
    if ((L_11130401 == (b_11130028).length)) {
    L1: do {
      var i_11130409 = 0;
      var i_13720188 = 0;
      L2: do {
          L3: while (true) {
          if (!(i_13720188 < L_11130401)) break L3;
            i_11130409 = i_13720188;
            s_11130025[s_11130025_Idx][(i_11130409 + a_11130201)] = b_11130028[i_11130409];
            i_13720188 += 1;
          }
      } while(false);
    } while(false);
    }
    else {
      var shiftHEX60gensym78_11140002 = ((b_11130028).length - nimMax(0, L_11130401));
      var newLenHEX60gensym78_11140003 = ((s_11130025[s_11130025_Idx]).length + shiftHEX60gensym78_11140002);
      if ((0 < shiftHEX60gensym78_11140002)) {
      (s_11130025[s_11130025_Idx].length = newLenHEX60gensym78_11140003);
      L4: do {
        var iHEX60gensym78_11140010 = 0;
        var colontmp__13720191 = 0;
        var colontmp__13720192 = 0;
        colontmp__13720191 = (newLenHEX60gensym78_11140003 - 1);
        colontmp__13720192 = (a_11130201 + (b_11130028).length);
        var res_13720197 = colontmp__13720191;
        L5: do {
            L6: while (true) {
            if (!(colontmp__13720192 <= res_13720197)) break L6;
              iHEX60gensym78_11140010 = res_13720197;
              s_11130025[s_11130025_Idx][iHEX60gensym78_11140010] = s_11130025[s_11130025_Idx][(iHEX60gensym78_11140010 - shiftHEX60gensym78_11140002)];
              res_13720197 -= 1;
            }
        } while(false);
      } while(false);
      }
      else {
        L7: do {
          var iHEX60gensym78_11140017 = 0;
          var colontmp__13720203 = 0;
          var colontmp__13720204 = 0;
          colontmp__13720203 = (a_11130201 + (b_11130028).length);
          colontmp__13720204 = (newLenHEX60gensym78_11140003 - 1);
          var res_13720209 = colontmp__13720203;
          L8: do {
              L9: while (true) {
              if (!(res_13720209 <= colontmp__13720204)) break L9;
                iHEX60gensym78_11140017 = res_13720209;
                s_11130025[s_11130025_Idx][iHEX60gensym78_11140017] = s_11130025[s_11130025_Idx][(iHEX60gensym78_11140017 - shiftHEX60gensym78_11140002)];
                res_13720209 += 1;
              }
          } while(false);
        } while(false);
        (s_11130025[s_11130025_Idx].length = newLenHEX60gensym78_11140003);
      }
      
      L10: do {
        var iHEX60gensym78_11140025 = 0;
        var colontmp__13720215 = 0;
        colontmp__13720215 = (b_11130028).length;
        var i_13720216 = 0;
        L11: do {
            L12: while (true) {
            if (!(i_13720216 < colontmp__13720215)) break L12;
              iHEX60gensym78_11140025 = i_13720216;
              s_11130025[s_11130025_Idx][(a_11130201 + iHEX60gensym78_11140025)] = b_11130028[iHEX60gensym78_11140025];
              i_13720216 += 1;
            }
        } while(false);
      } while(false);
    }
    

  
}
function HEX5BHEX5D_4625283(s_4625287, x_4625289) {
  var result_4625290 = [];

    var a_4625401 = x_4625289.a;
    var L_4625601 = ((x_4625289.b - a_4625401) + 1);
    result_4625290 = nimCopy(null, mnewString(L_4625601), NTI2421013);
    L1: do {
      var i_4625609 = 0;
      var i_13720221 = 0;
      L2: do {
          L3: while (true) {
          if (!(i_13720221 < L_4625601)) break L3;
            i_4625609 = i_13720221;
            result_4625290[i_4625609] = s_4625287[(i_4625609 + a_4625401)];
            i_13720221 += 1;
          }
      } while(false);
    } while(false);

  return result_4625290;

}
function ssReadDataStr_11855100(s_11855102, buffer_11855104, buffer_11855104_Idx, slice_11855109) {
  var result_11855110 = 0;

    var s_11855111 = s_11855102;
    result_11855110 = nimMin(((slice_11855109.b + 1) - slice_11855109.a), ((s_11855111.data).length - s_11855111.pos));
    if ((0 < result_11855110)) {
    L1: do {
    } while(false);
    HEX5BHEX5DHEX3D_11130021(buffer_11855104, buffer_11855104_Idx, HEX2EHEX2E_4625220(slice_11855109.a, ((slice_11855109.a + result_11855110) - 1)), HEX5BHEX5D_4625283(s_11855111.data, HEX2EHEX2E_4625220(s_11855111.pos, ((s_11855111.pos + result_11855110) - 1))));
    s_11855111.pos += result_11855110;
    }
    else {
      result_11855110 = 0;
    }
    

  return result_11855110;

}
function isNimException_2610704() {
    return lastJSError && lastJSError.m_type;

  
}
function getCurrentException() {
  var result_2610723 = null;

    if (isNimException_2610704()) {
    result_2610723 = lastJSError;
    }
    

  return result_2610723;

}
function ssReadData_11885420(s_11885422, buffer_11885423, buffer_11885423_Idx, bufLen_11885424) {
    var Tmp2;

  var result_11885425 = 0;

    var s_11885426 = s_11885422;
    result_11885425 = nimMin(bufLen_11885424, ((s_11885426.data).length - s_11885426.pos));
    if ((0 < result_11885425)) {
++excHandler;
    Tmp2 = framePtr;
    try {
    HEX5BHEX5DHEX3D_11130021(buffer_11885423, buffer_11885423_Idx, HEX2EHEX2E_4625220(0, (result_11885425 - 1)), HEX5BHEX5D_4625283(s_11885426.data, HEX2EHEX2E_4625220(s_11885426.pos, ((s_11885426.pos + result_11885425) - 1))));
--excHandler;
} catch (EXC) {
 var prevJSError = lastJSError;
 lastJSError = EXC;
 --excHandler;
    framePtr = Tmp2;
    raiseException({message: makeNimstrLit("could not read string stream, did you use a non-string buffer pointer?"), parent: getCurrentException(), m_type: NTI2427619, name: null, trace: [], up: null}, "Defect");
    lastJSError = prevJSError;
    } finally {
    framePtr = Tmp2;
    }
    s_11885426.pos += result_11885425;
    }
    else {
      result_11885425 = 0;
    }
    

  return result_11885425;

}
function ssPeekData_11905051(s_11905053, buffer_11905054, buffer_11905054_Idx, bufLen_11905055) {
    var Tmp2;

  var result_11905056 = 0;

    var s_11905057 = s_11905053;
    result_11905056 = nimMin(bufLen_11905055, ((s_11905057.data).length - s_11905057.pos));
    if ((0 < result_11905056)) {
++excHandler;
    Tmp2 = framePtr;
    try {
    HEX5BHEX5DHEX3D_11130021(buffer_11905054, buffer_11905054_Idx, HEX2EHEX2E_4625220(0, (result_11905056 - 1)), HEX5BHEX5D_4625283(s_11905057.data, HEX2EHEX2E_4625220(s_11905057.pos, ((s_11905057.pos + result_11905056) - 1))));
--excHandler;
} catch (EXC) {
 var prevJSError = lastJSError;
 lastJSError = EXC;
 --excHandler;
    framePtr = Tmp2;
    raiseException({message: makeNimstrLit("could not peek string stream, did you use a non-string buffer pointer?"), parent: getCurrentException(), m_type: NTI2427619, name: null, trace: [], up: null}, "Defect");
    lastJSError = prevJSError;
    } finally {
    framePtr = Tmp2;
    }
    }
    else {
      result_11905056 = 0;
    }
    

  return result_11905056;

}
function ssWriteData_11925015(s_11925017, buffer_11925018, buffer_11925018_Idx, bufLen_11925019) {
    var Tmp2;

  BeforeRet: do {
    var s_11925020 = s_11925017;
    if ((bufLen_11925019 <= 0)) {
    break BeforeRet;
    }
    
    if (((s_11925020.data).length < (s_11925020.pos + bufLen_11925019))) {
    (s_11925020.data.length = (s_11925020.pos + bufLen_11925019));
    }
    
++excHandler;
    Tmp2 = framePtr;
    try {
    HEX5BHEX5DHEX3D_11130021(s_11925020, "data", HEX2EHEX2E_4625220(s_11925020.pos, ((s_11925020.pos + bufLen_11925019) - 1)), HEX5BHEX5D_4625283(buffer_11925018[buffer_11925018_Idx], HEX2EHEX2E_4625220(0, (bufLen_11925019 - 1))));
--excHandler;
} catch (EXC) {
 var prevJSError = lastJSError;
 lastJSError = EXC;
 --excHandler;
    framePtr = Tmp2;
    raiseException({message: makeNimstrLit("could not write to string stream, did you use a non-string buffer pointer?"), parent: getCurrentException(), m_type: NTI2427619, name: null, trace: [], up: null}, "Defect");
    lastJSError = prevJSError;
    } finally {
    framePtr = Tmp2;
    }
    s_11925020.pos += bufLen_11925019;
  } while (false);

  
}
function newStringStream_11945214(s_11945216) {
  var result_11945218 = null;

    result_11945218 = ({m_type: NTI11850253, data: [], pos: 0, closeImpl: null, atEndImpl: null, setPositionImpl: null, getPositionImpl: null, readDataStrImpl: null, readLineImpl: null, readDataImpl: null, peekDataImpl: null, writeDataImpl: null, flushImpl: null});
    result_11945218.data = nimCopy(null, s_11945216, NTI2421013);
    result_11945218.pos = 0;
    result_11945218.closeImpl = ssClose_11945021;
    result_11945218.atEndImpl = ssAtEnd_11850297;
    result_11945218.setPositionImpl = ssSetPosition_11855044;
    result_11945218.getPositionImpl = ssGetPosition_11855082;
    result_11945218.readDataStrImpl = ssReadDataStr_11855100;
    result_11945218.readDataImpl = ssReadData_11885420;
    result_11945218.peekDataImpl = ssPeekData_11905051;
    result_11945218.writeDataImpl = ssWriteData_11925015;

  return result_11945218;

}
function setPosition_11686240(s_11686242, pos_11686243) {
    s_11686242.setPositionImpl(s_11686242, pos_11686243);

  
}
function readData_11686274(s_11686276, buffer_11686277, buffer_11686277_Idx, bufLen_11686278) {
  var result_11686279 = 0;

    result_11686279 = s_11686276.readDataImpl(s_11686276, buffer_11686277, buffer_11686277_Idx, bufLen_11686278);

  return result_11686279;

}
function readDataStr_11686293(s_11686295, buffer_11686297, buffer_11686297_Idx, slice_11686302) {
  var result_11686303 = 0;

    if (!((s_11686295.readDataStrImpl == null))) {
    result_11686303 = s_11686295.readDataStrImpl(s_11686295, buffer_11686297, buffer_11686297_Idx, slice_11686302);
    }
    else {
      result_11686303 = readData_11686274(s_11686295, buffer_11686297[buffer_11686297_Idx], slice_11686302.a, ((slice_11686302.b + 1) - slice_11686302.a));
    }
    

  return result_11686303;

}
function fillBuffer_11956058(L_11956061) {
                  var Tmp8;

    var charsRead_11956062 = 0;
    var toCopy_11956063 = 0;
    var s_11956064 = 0;
    var oldBufLen_11956065 = 0;
    toCopy_11956063 = ((L_11956061.buf).length - (L_11956061.sentinel + 1));
    if ((0 < toCopy_11956063)) {
    L1: do {
      var i_11985208 = 0;
      var i_13720231 = 0;
      L2: do {
          L3: while (true) {
          if (!(i_13720231 < toCopy_11956063)) break L3;
            i_11985208 = i_13720231;
            L_11956061.buf[i_11985208] = L_11956061.buf[((L_11956061.sentinel + 1) + i_11985208)];
            i_13720231 += 1;
          }
      } while(false);
    } while(false);
    }
    
    charsRead_11956062 = readDataStr_11686293(L_11956061.input, L_11956061, "buf", HEX2EHEX2E_4625220(toCopy_11956063, (((toCopy_11956063 + L_11956061.sentinel) + 1) - 1)));
    s_11956064 = (toCopy_11956063 + charsRead_11956062);
    if ((charsRead_11956062 < (L_11956061.sentinel + 1))) {
    L_11956061.buf[s_11956064] = 0;
    L_11956061.sentinel = s_11956064;
    }
    else {
      s_11956064 -= 1;
      L4: do {
          L5: while (true) {
          if (!true) break L5;
            L6: do {
                L7: while (true) {
                  if (!(0 <= s_11956064)) Tmp8 = false; else {                    Tmp8 = !((L_11956061.refillChars[L_11956061.buf[s_11956064]] != undefined));                  }                if (!Tmp8) break L7;
                  s_11956064 -= 1;
                }
            } while(false);
            if ((0 <= s_11956064)) {
            L_11956061.sentinel = s_11956064;
            break L4;
            }
            else {
              oldBufLen_11956065 = (L_11956061.buf).length;
              (L_11956061.buf.length = ((L_11956061.buf).length * 2));
              charsRead_11956062 = readDataStr_11686293(L_11956061.input, L_11956061, "buf", HEX2EHEX2E_4625220(oldBufLen_11956065, ((L_11956061.buf).length - 1)));
              if ((charsRead_11956062 < oldBufLen_11956065)) {
              L_11956061.buf[(oldBufLen_11956065 + charsRead_11956062)] = 0;
              L_11956061.sentinel = (oldBufLen_11956065 + charsRead_11956062);
              break L4;
              }
              
              s_11956064 = ((L_11956061.buf).length - 1);
            }
            
          }
      } while(false);
    }
    

  
}
function skipUtf8Bom_12065214(L_12065217) {
      var Tmp1;
      var Tmp2;

      if (!(L_12065217.buf[0] == 239)) Tmp2 = false; else {        Tmp2 = (L_12065217.buf[1] == 187);      }      if (!Tmp2) Tmp1 = false; else {        Tmp1 = (L_12065217.buf[2] == 191);      }    if (Tmp1) {
    L_12065217.bufpos += 3;
    L_12065217.lineStart += 3;
    }
    

  
}
function open_12065243(L_12065246, input_12065247, bufLen_12065249, refillChars_12065251) {
    L_12065246.input = input_12065247;
    L_12065246.bufpos = 0;
    L_12065246.offsetBase = 0;
    nimCopy(L_12065246.refillChars, refillChars_12065251, NTI12065250);
    L_12065246.buf = nimCopy(null, mnewString(bufLen_12065249), NTI2421013);
    L_12065246.sentinel = (bufLen_12065249 - 1);
    L_12065246.lineStart = 0;
    L_12065246.lineNumber = 1;
    fillBuffer_11956058(L_12065246);
    skipUtf8Bom_12065214(L_12065246);

  
}
function open_12101101(my_12101104, input_12101105, filename_12101106, options_12101110) {
    open_12065243(my_12101104, input_12101105, 8192, ConstSet45);
    my_12101104.filename = nimCopy(null, filename_12101106, NTI2421013);
    my_12101104.state = 0;
    my_12101104.kind = 0;
    my_12101104.a = nimCopy(null, [], NTI2421013);
    my_12101104.b = nimCopy(null, [], NTI2421013);
    my_12101104.c = nimCopy(null, [], NTI2421013);
    my_12101104.cIsEmpty = true;
    nimCopy(my_12101104.options, options_12101110, NTI12101107);

  
}
function fillBaseLexer_12020229(L_12020232, pos_12020233) {
  var result_12020234 = 0;

    if ((pos_12020233 < L_12020232.sentinel)) {
    result_12020234 = (pos_12020233 + 1);
    }
    else {
      fillBuffer_11956058(L_12020232);
      L_12020232.offsetBase += pos_12020233;
      L_12020232.bufpos = 0;
      result_12020234 = 0;
    }
    

  return result_12020234;

}
function handleRefillChar_12050220(L_12050223, pos_12050224) {
  var result_12050225 = 0;

    result_12050225 = fillBaseLexer_12020229(L_12050223, pos_12050224);

  return result_12050225;

}
function markError_12110286(my_12110289, kind_12110290) {
    my_12110289.err = kind_12110290;
    my_12110289.state = 4;

  
}
function parseName_12110463(my_12110466, dest_12110468, dest_12110468_Idx) {
    var pos_12110469 = my_12110466.bufpos;
    if ((ConstSet47[my_12110466.buf[pos_12110469]] != undefined)) {
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          addChar(dest_12110468[dest_12110468_Idx], my_12110466.buf[pos_12110469]);;
          pos_12110469 += 1;
          if (!((ConstSet48[my_12110466.buf[pos_12110469]] != undefined))) {
          break L1;
          }
          
        }
    } while(false);
    my_12110466.bufpos = pos_12110469;
    }
    else {
    markError_12110286(my_12110466, 2);
    }
    

  
}
function handleCR_12030220(L_12030223, pos_12030224) {
  var result_12030225 = 0;

    L_12030223.lineNumber += 1;
    result_12030225 = fillBaseLexer_12020229(L_12030223, pos_12030224);
    if ((L_12030223.buf[result_12030225] == 10)) {
    result_12030225 = fillBaseLexer_12020229(L_12030223, result_12030225);
    }
    
    L_12030223.lineStart = result_12030225;

  return result_12030225;

}
function handleLF_12040220(L_12040223, pos_12040224) {
  var result_12040225 = 0;

    L_12040223.lineNumber += 1;
    result_12040225 = fillBaseLexer_12020229(L_12040223, pos_12040224);
    L_12040223.lineStart = result_12040225;

  return result_12040225;

}
function parseWhitespace_12110421(my_12110424, skip_12110425) {
    var pos_12110426 = my_12110424.bufpos;
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12110424.buf[pos_12110426]) {
          case 32:
          case 9:
            if (!(skip_12110425)) {
            addChar(my_12110424.a, my_12110424.buf[pos_12110426]);;
            }
            
            pos_12110426 += 1;
            break;
          case 13:
            pos_12110426 = handleCR_12030220(my_12110424, pos_12110426);
            if (!(skip_12110425)) {
            addChar(my_12110424.a, 10);;
            }
            
            break;
          case 10:
            pos_12110426 = handleLF_12040220(my_12110424, pos_12110426);
            if (!(skip_12110425)) {
            addChar(my_12110424.a, 10);;
            }
            
            break;
          default: 
            break L1;
            break;
          }
        }
    } while(false);
    my_12110424.bufpos = pos_12110426;

  
}
function parseEndTag_12135033(my_12135036) {
    my_12135036.bufpos = handleRefillChar_12050220(my_12135036, (my_12135036.bufpos + 1));
    parseName_12110463(my_12135036, my_12135036, "a");
    parseWhitespace_12110421(my_12135036, true);
    if ((my_12135036.buf[my_12135036.bufpos] == 62)) {
    my_12135036.bufpos += 1;
    }
    else {
    markError_12110286(my_12135036, 5);
    }
    
    my_12135036.kind = 7;

  
}
function parseCDATA_12110319(my_12110322) {
              var Tmp3;

    var pos_12110323 = (my_12110322.bufpos + 9);
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12110322.buf[pos_12110323]) {
          case 93:
              if (!(my_12110322.buf[(pos_12110323 + 1)] == 93)) Tmp3 = false; else {                Tmp3 = (my_12110322.buf[(pos_12110323 + 2)] == 62);              }            if (Tmp3) {
            pos_12110323 += 3;
            break L1;
            }
            
            addChar(my_12110322.a, 93);;
            pos_12110323 += 1;
            break;
          case 0:
            markError_12110286(my_12110322, 1);
            break L1;
            break;
          case 13:
            pos_12110323 = handleCR_12030220(my_12110322, pos_12110323);
            addChar(my_12110322.a, 10);;
            break;
          case 10:
            pos_12110323 = handleLF_12040220(my_12110322, pos_12110323);
            addChar(my_12110322.a, 10);;
            break;
          case 47:
            pos_12110323 = handleRefillChar_12050220(my_12110322, pos_12110323);
            addChar(my_12110322.a, 47);;
            break;
          default: 
            addChar(my_12110322.a, my_12110322.buf[pos_12110323]);;
            pos_12110323 += 1;
            break;
          }
        }
    } while(false);
    my_12110322.bufpos = pos_12110323;
    my_12110322.kind = 11;

  
}
function parseComment_12110355(my_12110358) {
              var Tmp3;

    var pos_12110359 = (my_12110358.bufpos + 4);
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12110358.buf[pos_12110359]) {
          case 45:
              if (!(my_12110358.buf[(pos_12110359 + 1)] == 45)) Tmp3 = false; else {                Tmp3 = (my_12110358.buf[(pos_12110359 + 2)] == 62);              }            if (Tmp3) {
            pos_12110359 += 3;
            break L1;
            }
            
            if ((my_12110358.options[1] != undefined)) {
            addChar(my_12110358.a, 45);;
            }
            
            pos_12110359 += 1;
            break;
          case 0:
            markError_12110286(my_12110358, 8);
            break L1;
            break;
          case 13:
            pos_12110359 = handleCR_12030220(my_12110358, pos_12110359);
            if ((my_12110358.options[1] != undefined)) {
            addChar(my_12110358.a, 10);;
            }
            
            break;
          case 10:
            pos_12110359 = handleLF_12040220(my_12110358, pos_12110359);
            if ((my_12110358.options[1] != undefined)) {
            addChar(my_12110358.a, 10);;
            }
            
            break;
          case 47:
            pos_12110359 = handleRefillChar_12050220(my_12110358, pos_12110359);
            if ((my_12110358.options[1] != undefined)) {
            addChar(my_12110358.a, 47);;
            }
            
            break;
          default: 
            if ((my_12110358.options[1] != undefined)) {
            addChar(my_12110358.a, my_12110358.buf[pos_12110359]);;
            }
            
            pos_12110359 += 1;
            break;
          }
        }
    } while(false);
    my_12110358.bufpos = pos_12110359;
    my_12110358.kind = 4;

  
}
function parseSpecial_12130068(my_12130071) {
    var pos_12130072 = (my_12130071.bufpos + 2);
    var opentags_12130074 = 0;
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12130071.buf[pos_12130072]) {
          case 0:
            markError_12110286(my_12130071, 5);
            break L1;
            break;
          case 60:
            opentags_12130074 += 1;
            pos_12130072 += 1;
            addChar(my_12130071.a, 60);;
            break;
          case 62:
            if ((opentags_12130074 <= 0)) {
            pos_12130072 += 1;
            break L1;
            }
            
            opentags_12130074 -= 1;
            pos_12130072 += 1;
            addChar(my_12130071.a, 62);;
            break;
          case 13:
            pos_12130072 = handleCR_12030220(my_12130071, pos_12130072);
            addChar(my_12130071.a, 10);;
            break;
          case 10:
            pos_12130072 = handleLF_12040220(my_12130071, pos_12130072);
            addChar(my_12130071.a, 10);;
            break;
          case 47:
            pos_12130072 = handleRefillChar_12050220(my_12130071, pos_12130072);
            addChar(my_12130071.b, 47);;
            break;
          default: 
            addChar(my_12130071.a, my_12130071.buf[pos_12130072]);;
            pos_12130072 += 1;
            break;
          }
        }
    } while(false);
    my_12130071.bufpos = pos_12130072;
    my_12130071.kind = 13;

  
}
function parsePI_12130025(my_12130028) {
    my_12130028.bufpos += 2;
    parseName_12110463(my_12130028, my_12130028, "a");
    var pos_12130036 = my_12130028.bufpos;
    (my_12130028.b.length = 0);
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12130028.buf[pos_12130036]) {
          case 0:
            markError_12110286(my_12130028, 4);
            break L1;
            break;
          case 63:
            if ((my_12130028.buf[(pos_12130036 + 1)] == 62)) {
            pos_12130036 += 2;
            break L1;
            }
            
            addChar(my_12130028.b, 63);;
            pos_12130036 += 1;
            break;
          case 13:
            pos_12130036 = handleCR_12030220(my_12130028, pos_12130036);
            addChar(my_12130028.b, 10);;
            break;
          case 10:
            pos_12130036 = handleLF_12040220(my_12130028, pos_12130036);
            addChar(my_12130028.b, 10);;
            break;
          case 47:
            pos_12130036 = handleRefillChar_12050220(my_12130028, pos_12130036);
            addChar(my_12130028.b, 47);;
            break;
          default: 
            addChar(my_12130028.b, my_12130028.buf[pos_12130036]);;
            pos_12130036 += 1;
            break;
          }
        }
    } while(false);
    my_12130028.bufpos = pos_12130036;
    my_12130028.kind = 5;

  
}
function parseTag_12130124(my_12130127) {
        var Tmp1;

  BeforeRet: do {
    my_12130127.bufpos += 1;
    parseName_12110463(my_12130127, my_12130127, "a");
    if (((my_12130127.a).length == 0)) {
    my_12130127.kind = 2;
    addChar(my_12130127.a, 60);;
    break BeforeRet;
    }
    
    parseWhitespace_12110421(my_12130127, true);
    if ((ConstSet49[my_12130127.buf[my_12130127.bufpos]] != undefined)) {
    my_12130127.kind = 8;
    my_12130127.state = 2;
    my_12130127.c = nimCopy(null, my_12130127.a, NTI2421013);
    my_12130127.cIsEmpty = false;
    }
    else {
      my_12130127.kind = 6;
      var slash_12135007 = (my_12130127.buf[my_12130127.bufpos] == 47);
      if (slash_12135007) {
      my_12130127.bufpos = handleRefillChar_12050220(my_12130127, my_12130127.bufpos);
      }
      
        if (!slash_12135007) Tmp1 = false; else {          Tmp1 = (my_12130127.buf[my_12130127.bufpos] == 62);        }      if (Tmp1) {
      my_12130127.bufpos += 1;
      my_12130127.state = 3;
      my_12130127.c = nimCopy(null, [], NTI2421013);
      my_12130127.cIsEmpty = true;
      }
      else {
      if ((my_12130127.buf[my_12130127.bufpos] == 62)) {
      my_12130127.bufpos += 1;
      }
      else {
      markError_12110286(my_12130127, 5);
      }
      }
    }
    
  } while (false);

  
}
function HEX3CHEX3DHEX25_2425474(x_2425476, y_2425477) {
  var result_2425478 = false;

    result_2425478 = ((x_2425476 >>> 0) <= (y_2425477 >>> 0));

  return result_2425478;

}
function nuctoUTF8(c_3990474) {
  var result_3990475 = [];

    result_3990475 = nimCopy(null, [], NTI2421013);
    var iHEX60gensym49_3995001 = c_3990474;
    if (HEX3CHEX3DHEX25_2425474(iHEX60gensym49_3995001, 127)) {
    (result_3990475.length = 1);
    result_3990475[0] = iHEX60gensym49_3995001;
    }
    else {
    if (HEX3CHEX3DHEX25_2425474(iHEX60gensym49_3995001, 2047)) {
    (result_3990475.length = 2);
    result_3990475[0] = ((iHEX60gensym49_3995001 >> 6) | 192);
    result_3990475[1] = ((iHEX60gensym49_3995001 & 63) | 128);
    }
    else {
    if (HEX3CHEX3DHEX25_2425474(iHEX60gensym49_3995001, 65535)) {
    (result_3990475.length = 3);
    result_3990475[0] = ((iHEX60gensym49_3995001 >> 12) | 224);
    result_3990475[1] = (((iHEX60gensym49_3995001 >> 6) & 63) | 128);
    result_3990475[2] = ((iHEX60gensym49_3995001 & 63) | 128);
    }
    else {
    if (HEX3CHEX3DHEX25_2425474(iHEX60gensym49_3995001, 2097151)) {
    (result_3990475.length = 4);
    result_3990475[0] = ((iHEX60gensym49_3995001 >> 18) | 240);
    result_3990475[1] = (((iHEX60gensym49_3995001 >> 12) & 63) | 128);
    result_3990475[2] = (((iHEX60gensym49_3995001 >> 6) & 63) | 128);
    result_3990475[3] = ((iHEX60gensym49_3995001 & 63) | 128);
    }
    else {
    if (HEX3CHEX3DHEX25_2425474(iHEX60gensym49_3995001, 67108863)) {
    (result_3990475.length = 5);
    result_3990475[0] = ((iHEX60gensym49_3995001 >> 24) | 248);
    result_3990475[1] = (((iHEX60gensym49_3995001 >> 18) & 63) | 128);
    result_3990475[2] = (((iHEX60gensym49_3995001 >> 12) & 63) | 128);
    result_3990475[3] = (((iHEX60gensym49_3995001 >> 6) & 63) | 128);
    result_3990475[4] = ((iHEX60gensym49_3995001 & 63) | 128);
    }
    else {
    if (HEX3CHEX3DHEX25_2425474(iHEX60gensym49_3995001, 2147483647)) {
    (result_3990475.length = 6);
    result_3990475[0] = ((iHEX60gensym49_3995001 >> 30) | 252);
    result_3990475[1] = (((iHEX60gensym49_3995001 >> 24) & 63) | 128);
    result_3990475[2] = (((iHEX60gensym49_3995001 >> 18) & 63) | 128);
    result_3990475[3] = (((iHEX60gensym49_3995001 >> 12) & 63) | 128);
    result_3990475[4] = (((iHEX60gensym49_3995001 >> 6) & 63) | 128);
    result_3990475[5] = ((iHEX60gensym49_3995001 & 63) | 128);
    }
    else {
    }
    }}}}}

  return result_3990475;

}
function parseEntity_12120020(my_12120023, dest_12120025, dest_12120025_Idx) {
      var Tmp5;
      var Tmp6;
      var Tmp7;
      var Tmp8;
      var Tmp9;
      var Tmp10;
      var Tmp11;
      var Tmp12;
      var Tmp13;
      var Tmp14;
      var Tmp15;
      var Tmp16;
      var Tmp17;
      var Tmp18;
      var Tmp19;
        var Tmp20;

    var pos_12120026 = (my_12120023.bufpos + 1);
    my_12120023.kind = 2;
    if ((my_12120023.buf[pos_12120026] == 35)) {
    var r_12120027 = 0;
    pos_12120026 += 1;
    if ((my_12120023.buf[pos_12120026] == 120)) {
    pos_12120026 += 1;
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12120023.buf[pos_12120026]) {
          case 48:
          case 49:
          case 50:
          case 51:
          case 52:
          case 53:
          case 54:
          case 55:
          case 56:
          case 57:
            r_12120027 = ((r_12120027 << 4) | (my_12120023.buf[pos_12120026] - 48));
            break;
          case 97:
          case 98:
          case 99:
          case 100:
          case 101:
          case 102:
            r_12120027 = ((r_12120027 << 4) | ((my_12120023.buf[pos_12120026] - 97) + 10));
            break;
          case 65:
          case 66:
          case 67:
          case 68:
          case 69:
          case 70:
            r_12120027 = ((r_12120027 << 4) | ((my_12120023.buf[pos_12120026] - 65) + 10));
            break;
          default: 
            break L1;
            break;
          }
          pos_12120026 += 1;
        }
    } while(false);
    }
    else {
      L3: do {
          L4: while (true) {
          if (!(ConstSet50[my_12120023.buf[pos_12120026]] != undefined)) break L4;
            r_12120027 = ((r_12120027 * 10) + (my_12120023.buf[pos_12120026] - 48));
            pos_12120026 += 1;
          }
      } while(false);
    }
    
    dest_12120025[dest_12120025_Idx].push.apply(dest_12120025[dest_12120025_Idx], nuctoUTF8(((r_12120027)|0)));;
    }
    else {
      if (!(my_12120023.buf[pos_12120026] == 108)) Tmp6 = false; else {        Tmp6 = (my_12120023.buf[(pos_12120026 + 1)] == 116);      }      if (!Tmp6) Tmp5 = false; else {        Tmp5 = (my_12120023.buf[(pos_12120026 + 2)] == 59);      }    if (Tmp5) {
    addChar(dest_12120025[dest_12120025_Idx], 60);;
    pos_12120026 += 2;
    }
    else {
      if (!(my_12120023.buf[pos_12120026] == 103)) Tmp8 = false; else {        Tmp8 = (my_12120023.buf[(pos_12120026 + 1)] == 116);      }      if (!Tmp8) Tmp7 = false; else {        Tmp7 = (my_12120023.buf[(pos_12120026 + 2)] == 59);      }    if (Tmp7) {
    addChar(dest_12120025[dest_12120025_Idx], 62);;
    pos_12120026 += 2;
    }
    else {
      if (!(my_12120023.buf[pos_12120026] == 97)) Tmp11 = false; else {        Tmp11 = (my_12120023.buf[(pos_12120026 + 1)] == 109);      }      if (!Tmp11) Tmp10 = false; else {        Tmp10 = (my_12120023.buf[(pos_12120026 + 2)] == 112);      }      if (!Tmp10) Tmp9 = false; else {        Tmp9 = (my_12120023.buf[(pos_12120026 + 3)] == 59);      }    if (Tmp9) {
    addChar(dest_12120025[dest_12120025_Idx], 38);;
    pos_12120026 += 3;
    }
    else {
      if (!(my_12120023.buf[pos_12120026] == 97)) Tmp15 = false; else {        Tmp15 = (my_12120023.buf[(pos_12120026 + 1)] == 112);      }      if (!Tmp15) Tmp14 = false; else {        Tmp14 = (my_12120023.buf[(pos_12120026 + 2)] == 111);      }      if (!Tmp14) Tmp13 = false; else {        Tmp13 = (my_12120023.buf[(pos_12120026 + 3)] == 115);      }      if (!Tmp13) Tmp12 = false; else {        Tmp12 = (my_12120023.buf[(pos_12120026 + 4)] == 59);      }    if (Tmp12) {
    addChar(dest_12120025[dest_12120025_Idx], 39);;
    pos_12120026 += 4;
    }
    else {
      if (!(my_12120023.buf[pos_12120026] == 113)) Tmp19 = false; else {        Tmp19 = (my_12120023.buf[(pos_12120026 + 1)] == 117);      }      if (!Tmp19) Tmp18 = false; else {        Tmp18 = (my_12120023.buf[(pos_12120026 + 2)] == 111);      }      if (!Tmp18) Tmp17 = false; else {        Tmp17 = (my_12120023.buf[(pos_12120026 + 3)] == 116);      }      if (!Tmp17) Tmp16 = false; else {        Tmp16 = (my_12120023.buf[(pos_12120026 + 4)] == 59);      }    if (Tmp16) {
    addChar(dest_12120025[dest_12120025_Idx], 34);;
    pos_12120026 += 4;
    }
    else {
      my_12120023.bufpos = pos_12120026;
      var name_12125052 = [[]];
      parseName_12110463(my_12120023, name_12125052, 0);
      pos_12120026 = my_12120023.bufpos;
        if (!!((my_12120023.err == 2))) Tmp20 = false; else {          Tmp20 = (my_12120023.buf[pos_12120026] == 59);        }      if (Tmp20) {
      my_12120023.kind = 12;
      }
      else {
      addChar(dest_12120025[dest_12120025_Idx], 38);;
      }
      
      dest_12120025[dest_12120025_Idx].push.apply(dest_12120025[dest_12120025_Idx], name_12125052[0]);;
    }
    }}}}}
    if ((my_12120023.buf[pos_12120026] == 59)) {
    pos_12120026 += 1;
    }
    else {
      my_12120023.err = 3;
    }
    
    my_12120023.bufpos = pos_12120026;

  
}
function parseCharData_12175020(my_12175023) {
    var pos_12175024 = my_12175023.bufpos;
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12175023.buf[pos_12175024]) {
          case 0:
          case 60:
          case 38:
            break L1;
            break;
          case 13:
            pos_12175024 = handleCR_12030220(my_12175023, pos_12175024);
            addChar(my_12175023.a, 10);;
            break;
          case 10:
            pos_12175024 = handleLF_12040220(my_12175023, pos_12175024);
            addChar(my_12175023.a, 10);;
            break;
          case 47:
            pos_12175024 = handleRefillChar_12050220(my_12175023, pos_12175024);
            addChar(my_12175023.a, 47);;
            break;
          default: 
            addChar(my_12175023.a, my_12175023.buf[pos_12175024]);;
            pos_12175024 += 1;
            break;
          }
        }
    } while(false);
    my_12175023.bufpos = pos_12175024;
    my_12175023.kind = 2;

  
}
function rawGetTok_12175044(my_12175047) {
          var Tmp1;
          var Tmp2;
          var Tmp3;
          var Tmp4;
          var Tmp5;
          var Tmp6;
          var Tmp7;

    my_12175047.kind = 0;
    (my_12175047.a.length = 0);
    var pos_12175048 = my_12175047.bufpos;
    switch (my_12175047.buf[pos_12175048]) {
    case 60:
      switch (my_12175047.buf[(pos_12175048 + 1)]) {
      case 47:
        parseEndTag_12135033(my_12175047);
        break;
      case 33:
          if (!(my_12175047.buf[(pos_12175048 + 2)] == 91)) Tmp6 = false; else {            Tmp6 = (my_12175047.buf[(pos_12175048 + 3)] == 67);          }          if (!Tmp6) Tmp5 = false; else {            Tmp5 = (my_12175047.buf[(pos_12175048 + 4)] == 68);          }          if (!Tmp5) Tmp4 = false; else {            Tmp4 = (my_12175047.buf[(pos_12175048 + 5)] == 65);          }          if (!Tmp4) Tmp3 = false; else {            Tmp3 = (my_12175047.buf[(pos_12175048 + 6)] == 84);          }          if (!Tmp3) Tmp2 = false; else {            Tmp2 = (my_12175047.buf[(pos_12175048 + 7)] == 65);          }          if (!Tmp2) Tmp1 = false; else {            Tmp1 = (my_12175047.buf[(pos_12175048 + 8)] == 91);          }        if (Tmp1) {
        parseCDATA_12110319(my_12175047);
        }
        else {
          if (!(my_12175047.buf[(pos_12175048 + 2)] == 45)) Tmp7 = false; else {            Tmp7 = (my_12175047.buf[(pos_12175048 + 3)] == 45);          }        if (Tmp7) {
        parseComment_12110355(my_12175047);
        }
        else {
        parseSpecial_12130068(my_12175047);
        }
        }
        break;
      case 63:
        parsePI_12130025(my_12175047);
        break;
      default: 
        parseTag_12130124(my_12175047);
        break;
      }
      break;
    case 32:
    case 9:
    case 13:
    case 10:
      parseWhitespace_12110421(my_12175047, false);
      my_12175047.kind = 3;
      break;
    case 0:
      my_12175047.kind = 1;
      break;
    case 38:
      parseEntity_12120020(my_12175047, my_12175047, "a");
      break;
    default: 
      parseCharData_12175020(my_12175047);
      break;
    }

  
}
function getTok_12190214(my_12190217) {
              var Tmp3;

    L1: do {
        L2: while (true) {
        if (!true) break L2;
          var lastKind_12190218 = my_12190217.kind;
          rawGetTok_12175044(my_12190217);
          switch (my_12190217.kind) {
          case 4:
            if ((my_12190217.options[1] != undefined)) {
            break L1;
            }
            
            break;
          case 3:
              if ((my_12190217.options[0] != undefined)) Tmp3 = true; else {                Tmp3 = (ConstSet51[lastKind_12190218] != undefined);              }            if (Tmp3) {
            break L1;
            }
            
            break;
          default: 
            break L1;
            break;
          }
        }
    } while(false);

  
}
function parseAttribute_12135057(my_12135060) {
      var Tmp1;
        var Tmp2;
            var Tmp9;

  BeforeRet: do {
    my_12135060.kind = 9;
    (my_12135060.a.length = 0);
    (my_12135060.b.length = 0);
    parseName_12110463(my_12135060, my_12135060, "a");
    if (((my_12135060.a).length == 0)) {
    markError_12110286(my_12135060, 5);
    break BeforeRet;
    }
    
    var startPos_12135062 = my_12135060.bufpos;
    parseWhitespace_12110421(my_12135060, true);
    if (!((my_12135060.buf[my_12135060.bufpos] == 61))) {
      if (!((my_12135060.options[3] != undefined))) Tmp1 = true; else {        if (!!((my_12135060.buf[my_12135060.bufpos] == 62))) Tmp2 = false; else {          Tmp2 = (my_12135060.bufpos == startPos_12135062);        }        Tmp1 = Tmp2;      }    if (Tmp1) {
    markError_12110286(my_12135060, 6);
    }
    
    break BeforeRet;
    }
    
    my_12135060.bufpos += 1;
    parseWhitespace_12110421(my_12135060, true);
    var pos_12150007 = my_12135060.bufpos;
    if ((ConstSet52[my_12135060.buf[pos_12150007]] != undefined)) {
    var quote_12155008 = my_12135060.buf[pos_12150007];
    var pendingSpace_12155009 = false;
    pos_12150007 += 1;
    L3: do {
        L4: while (true) {
        if (!true) break L4;
          switch (my_12135060.buf[pos_12150007]) {
          case 0:
            markError_12110286(my_12135060, 7);
            break L3;
            break;
          case 38:
            if (pendingSpace_12155009) {
            addChar(my_12135060.b, 32);;
            pendingSpace_12155009 = false;
            }
            
            my_12135060.bufpos = pos_12150007;
            parseEntity_12120020(my_12135060, my_12135060, "b");
            my_12135060.kind = 9;
            pos_12150007 = my_12135060.bufpos;
            break;
          case 32:
          case 9:
            pendingSpace_12155009 = true;
            pos_12150007 += 1;
            break;
          case 13:
            pos_12150007 = handleCR_12030220(my_12135060, pos_12150007);
            pendingSpace_12155009 = true;
            break;
          case 10:
            pos_12150007 = handleLF_12040220(my_12135060, pos_12150007);
            pendingSpace_12155009 = true;
            break;
          case 47:
            pos_12150007 = handleRefillChar_12050220(my_12135060, pos_12150007);
            addChar(my_12135060.b, 47);;
            break;
          default: 
            if ((my_12135060.buf[pos_12150007] == quote_12155008)) {
            pos_12150007 += 1;
            break L3;
            }
            else {
              if (pendingSpace_12155009) {
              addChar(my_12135060.b, 32);;
              pendingSpace_12155009 = false;
              }
              
              addChar(my_12135060.b, my_12135060.buf[pos_12150007]);;
              pos_12150007 += 1;
            }
            
            break;
          }
        }
    } while(false);
    }
    else {
    if ((my_12135060.options[2] != undefined)) {
    var startPos_12160009 = pos_12150007;
    L5: do {
        L6: while (true) {
          var c_12160010 = my_12135060.buf[pos_12150007];
        if (!!((ConstSet53[c_12160010] != undefined))) break L6;
          if ((c_12160010 == 38)) {
          my_12135060.bufpos = pos_12150007;
          parseEntity_12120020(my_12135060, my_12135060, "b");
          my_12135060.kind = 9;
          pos_12150007 = my_12135060.bufpos;
          }
          else {
          if ((c_12160010 == 47)) {
          pos_12150007 = handleRefillChar_12050220(my_12135060, pos_12150007);
          addChar(my_12135060.b, 47);;
          }
          else {
            addChar(my_12135060.b, c_12160010);;
            pos_12150007 += 1;
          }
          }
        }
    } while(false);
    if ((pos_12150007 == startPos_12160009)) {
    markError_12110286(my_12135060, 9);
    }
    
    }
    else {
      markError_12110286(my_12135060, 7);
      L7: do {
          L8: while (true) {
            if (!!((my_12135060.buf[pos_12150007] == 62))) Tmp9 = false; else {              Tmp9 = (32 < my_12135060.buf[pos_12150007]);            }          if (!Tmp9) break L8;
            addChar(my_12135060.b, my_12135060.buf[pos_12150007]);;
            pos_12150007 += 1;
          }
      } while(false);
    }
    }
    my_12135060.bufpos = pos_12150007;
    parseWhitespace_12110421(my_12135060, true);
  } while (false);

  
}
function next_12195021(my_12195024) {
        var Tmp1;

    switch (my_12195024.state) {
    case 1:
      getTok_12190214(my_12195024);
      break;
    case 0:
      my_12195024.state = 1;
      getTok_12190214(my_12195024);
        if (!(my_12195024.kind == 5)) Tmp1 = false; else {          Tmp1 = eqStrings(my_12195024.a, makeNimstrLit("xml"));        }      if (Tmp1) {
      getTok_12190214(my_12195024);
      }
      
      break;
    case 2:
      if ((my_12195024.buf[my_12195024.bufpos] == 62)) {
      my_12195024.kind = 10;
      my_12195024.bufpos += 1;
      my_12195024.state = 1;
      }
      else {
      if ((my_12195024.buf[my_12195024.bufpos] == 47)) {
      my_12195024.bufpos = handleRefillChar_12050220(my_12195024, my_12195024.bufpos);
      if ((my_12195024.buf[my_12195024.bufpos] == 62)) {
      my_12195024.kind = 10;
      my_12195024.bufpos += 1;
      my_12195024.state = 3;
      }
      else {
      markError_12110286(my_12195024, 5);
      }
      
      }
      else {
      parseAttribute_12135057(my_12195024);
      }
      }
      break;
    case 3:
      my_12195024.state = 1;
      my_12195024.kind = 7;
      if (!(my_12195024.cIsEmpty)) {
      my_12195024.a = nimCopy(null, my_12195024.c, NTI2421013);
      }
      
      break;
    case 4:
      my_12195024.kind = 0;
      my_12195024.state = 1;
      break;
    }

  
}
function kind_12101215(my_12101217) {
  var result_12101218 = 0;

  BeforeRet: do {
    result_12101218 = my_12101217.kind;
    break BeforeRet;
  } while (false);

  return result_12101218;

}
function newXmlNode_12391049(kind_12391051) {
  var result_12391052 = null;

    result_12391052 = {k: kind_12391051, fText: [], fTag: [], s: [], fAttr: null, fClientData: 0};

  return result_12391052;

}
function newElement_12391113(tag_12391115) {
    var Tmp1;
    var Tmp2;

  var result_12391116 = null;

    result_12391116 = newXmlNode_12391049(2);
    var Tmp1 = result_12391116;
    if (ConstSet54[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fTag\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.fTag = nimCopy(null, tag_12391115, NTI2421013);
    var Tmp2 = result_12391116;
    if (ConstSet55[Tmp2.k]===undefined) { raiseFieldError(makeNimstrLit("\'s\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp2.s = nimCopy(null, [], NTI12391133);

  return result_12391116;

}
function tag_12430215(n_12430217) {
    var Tmp1;

  var result_12430218 = [];

    var Tmp1 = n_12430217;
    if (ConstSet56[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fTag\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    result_12430218 = nimCopy(null, Tmp1.fTag, NTI2421013);

  return result_12430218;

}
function invalidFormatString_11500046() {
    raiseException({message: makeNimstrLit("invalid format string"), parent: null, m_type: NTI2427643, name: null, trace: [], up: null}, "ValueError");

  
}
function nsuToLowerAsciiChar(c_10595023) {
  var result_10595024 = 0;

    if ((ConstSet60[c_10595023] != undefined)) {
    result_10595024 = (c_10595023 + 32);
    }
    else {
      result_10595024 = c_10595023;
    }
    

  return result_10595024;

}
function nsuCmpIgnoreStyle(a_10675022, b_10675023) {
          var Tmp7;
          var Tmp8;

  var result_10675024 = 0;

  BeforeRet: do {
    var i_10675026 = 0;
    var j_10675028 = 0;
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          L3: do {
              L4: while (true) {
              if (!((i_10675026 < (a_10675022).length) && (a_10675022[i_10675026] == 95))) break L4;
                i_10675026 += 1;
              }
          } while(false);
          L5: do {
              L6: while (true) {
              if (!((j_10675028 < (b_10675023).length) && (b_10675023[j_10675028] == 95))) break L6;
                j_10675028 += 1;
              }
          } while(false);
          if ((i_10675026 < (a_10675022).length)) {
          Tmp7 = nsuToLowerAsciiChar(a_10675022[i_10675026]);
          }
          else {
          Tmp7 = 0;
          }
          
          var aa_10675041 = Tmp7;
          if ((j_10675028 < (b_10675023).length)) {
          Tmp8 = nsuToLowerAsciiChar(b_10675023[j_10675028]);
          }
          else {
          Tmp8 = 0;
          }
          
          var bb_10675042 = Tmp8;
          result_10675024 = (aa_10675041 - bb_10675042);
          if (!((result_10675024 == 0))) {
          break BeforeRet;
          }
          
          if (((a_10675022).length <= i_10675026)) {
          if (((b_10675023).length <= j_10675028)) {
          result_10675024 = 0;
          break BeforeRet;
          }
          
          result_10675024 = -1;
          break BeforeRet;
          }
          else {
          if (((b_10675023).length <= j_10675028)) {
          result_10675024 = 1;
          break BeforeRet;
          }
          }
          i_10675026 += 1;
          j_10675028 += 1;
        }
    } while(false);
  } while (false);

  return result_10675024;

}
function findNormalized_11500014(x_11500016, inArray_11500018) {
  var result_11500019 = 0;

  BeforeRet: do {
    var i_11500021 = 0;
    L1: do {
        L2: while (true) {
        if (!(i_11500021 < ((inArray_11500018).length-1))) break L2;
          if ((nsuCmpIgnoreStyle(x_11500016, inArray_11500018[i_11500021]) == 0)) {
          result_11500019 = i_11500021;
          break BeforeRet;
          }
          
          i_11500021 += 2;
        }
    } while(false);
    result_11500019 = -1;
    break BeforeRet;
  } while (false);

  return result_11500019;

}
function substr_2806022(s_2806024, first_2806025, last_2806026) {
  var result_2806027 = [];

    var first_2806028 = nimMax(first_2806025, 0);
    var L_2806030 = nimMax(((nimMin(last_2806026, ((s_2806024).length-1)) - first_2806028) + 1), 0);
    result_2806027 = nimCopy(null, mnewString(L_2806030), NTI2421013);
    L1: do {
      var i_2806039 = 0;
      var colontmp__13720264 = 0;
      colontmp__13720264 = (L_2806030 - 1);
      var res_13720265 = 0;
      L2: do {
          L3: while (true) {
          if (!(res_13720265 <= colontmp__13720264)) break L3;
            i_2806039 = res_13720265;
            result_2806027[i_2806039] = s_2806024[(i_2806039 + first_2806028)];
            res_13720265 += 1;
          }
      } while(false);
    } while(false);

  return result_2806027;

}
function nsuAddf(s_11505018, s_11505018_Idx, formatstr_11505019, a_11505021) {
                  var Tmp5;
            var Tmp6;
              var Tmp7;
            var Tmp10;
              var Tmp11;
                var Tmp12;
                  var Tmp15;
              var Tmp16;

    var i_11505025 = 0;
    var num_11505027 = 0;
    L1: do {
        L2: while (true) {
        if (!(i_11505025 < (formatstr_11505019).length)) break L2;
          if (((formatstr_11505019[i_11505025] == 36) && ((i_11505025 + 1) < (formatstr_11505019).length))) {
          switch (formatstr_11505019[(i_11505025 + 1)]) {
          case 35:
            if ((((a_11505021).length-1) < num_11505027)) {
            invalidFormatString_11500046();
            }
            
            s_11505018[s_11505018_Idx].push.apply(s_11505018[s_11505018_Idx], a_11505021[num_11505027]);;
            i_11505025 += 2;
            num_11505027 += 1;
            break;
          case 36:
            addChar(s_11505018[s_11505018_Idx], 36);;
            i_11505025 += 2;
            break;
          case 49:
          case 50:
          case 51:
          case 52:
          case 53:
          case 54:
          case 55:
          case 56:
          case 57:
          case 45:
            var j_11510025 = 0;
            i_11505025 += 1;
            var negative_11510032 = (formatstr_11505019[i_11505025] == 45);
            if (negative_11510032) {
            i_11505025 += 1;
            }
            
            L3: do {
                L4: while (true) {
                  if (!(i_11505025 < (formatstr_11505019).length)) Tmp5 = false; else {                    Tmp5 = (ConstSet57[formatstr_11505019[i_11505025]] != undefined);                  }                if (!Tmp5) break L4;
                  j_11510025 = (((j_11510025 * 10) + formatstr_11505019[i_11505025]) - 48);
                  i_11505025 += 1;
                }
            } while(false);
            if (!(negative_11510032)) {
            Tmp6 = (j_11510025 - 1);
            }
            else {
            Tmp6 = ((a_11505021).length - j_11510025);
            }
            
            var idx_11515025 = Tmp6;
              if ((idx_11515025 < 0)) Tmp7 = true; else {                Tmp7 = (((a_11505021).length-1) < idx_11515025);              }            if (Tmp7) {
            invalidFormatString_11500046();
            }
            
            s_11505018[s_11505018_Idx].push.apply(s_11505018[s_11505018_Idx], a_11505021[idx_11515025]);;
            break;
          case 123:
            var j_11520006 = (i_11505025 + 2);
            var k_11520008 = 0;
            var negative_11520009 = (formatstr_11505019[j_11520006] == 45);
            if (negative_11520009) {
            j_11520006 += 1;
            }
            
            var isNumber_11520017 = 0;
            L8: do {
                L9: while (true) {
                if (!((j_11520006 < (formatstr_11505019).length) && !((ConstSet58[formatstr_11505019[j_11520006]] != undefined)))) break L9;
                  if ((ConstSet59[formatstr_11505019[j_11520006]] != undefined)) {
                  k_11520008 = (((k_11520008 * 10) + formatstr_11505019[j_11520006]) - 48);
                  if ((isNumber_11520017 == 0)) {
                  isNumber_11520017 = 1;
                  }
                  
                  }
                  else {
                    isNumber_11520017 = -1;
                  }
                  
                  j_11520006 += 1;
                }
            } while(false);
            if ((isNumber_11520017 == 1)) {
            if (!(negative_11520009)) {
            Tmp10 = (k_11520008 - 1);
            }
            else {
            Tmp10 = ((a_11505021).length - k_11520008);
            }
            
            var idx_11530025 = Tmp10;
              if ((idx_11530025 < 0)) Tmp11 = true; else {                Tmp11 = (((a_11505021).length-1) < idx_11530025);              }            if (Tmp11) {
            invalidFormatString_11500046();
            }
            
            s_11505018[s_11505018_Idx].push.apply(s_11505018[s_11505018_Idx], a_11505021[idx_11530025]);;
            }
            else {
              var x_11535006 = findNormalized_11500014(substr_2806022(formatstr_11505019, (i_11505025 + 2), (j_11520006 - 1)), a_11505021);
                if (!(0 <= x_11535006)) Tmp12 = false; else {                  Tmp12 = (x_11535006 < ((a_11505021).length-1));                }              if (Tmp12) {
              s_11505018[s_11505018_Idx].push.apply(s_11505018[s_11505018_Idx], a_11505021[(x_11535006 + 1)]);;
              }
              else {
              invalidFormatString_11500046();
              }
              
            }
            
            i_11505025 = (j_11520006 + 1);
            break;
          case 97:
          case 98:
          case 99:
          case 100:
          case 101:
          case 102:
          case 103:
          case 104:
          case 105:
          case 106:
          case 107:
          case 108:
          case 109:
          case 110:
          case 111:
          case 112:
          case 113:
          case 114:
          case 115:
          case 116:
          case 117:
          case 118:
          case 119:
          case 120:
          case 121:
          case 122:
          case 65:
          case 66:
          case 67:
          case 68:
          case 69:
          case 70:
          case 71:
          case 72:
          case 73:
          case 74:
          case 75:
          case 76:
          case 77:
          case 78:
          case 79:
          case 80:
          case 81:
          case 82:
          case 83:
          case 84:
          case 85:
          case 86:
          case 87:
          case 88:
          case 89:
          case 90:
          case 128:
          case 129:
          case 130:
          case 131:
          case 132:
          case 133:
          case 134:
          case 135:
          case 136:
          case 137:
          case 138:
          case 139:
          case 140:
          case 141:
          case 142:
          case 143:
          case 144:
          case 145:
          case 146:
          case 147:
          case 148:
          case 149:
          case 150:
          case 151:
          case 152:
          case 153:
          case 154:
          case 155:
          case 156:
          case 157:
          case 158:
          case 159:
          case 160:
          case 161:
          case 162:
          case 163:
          case 164:
          case 165:
          case 166:
          case 167:
          case 168:
          case 169:
          case 170:
          case 171:
          case 172:
          case 173:
          case 174:
          case 175:
          case 176:
          case 177:
          case 178:
          case 179:
          case 180:
          case 181:
          case 182:
          case 183:
          case 184:
          case 185:
          case 186:
          case 187:
          case 188:
          case 189:
          case 190:
          case 191:
          case 192:
          case 193:
          case 194:
          case 195:
          case 196:
          case 197:
          case 198:
          case 199:
          case 200:
          case 201:
          case 202:
          case 203:
          case 204:
          case 205:
          case 206:
          case 207:
          case 208:
          case 209:
          case 210:
          case 211:
          case 212:
          case 213:
          case 214:
          case 215:
          case 216:
          case 217:
          case 218:
          case 219:
          case 220:
          case 221:
          case 222:
          case 223:
          case 224:
          case 225:
          case 226:
          case 227:
          case 228:
          case 229:
          case 230:
          case 231:
          case 232:
          case 233:
          case 234:
          case 235:
          case 236:
          case 237:
          case 238:
          case 239:
          case 240:
          case 241:
          case 242:
          case 243:
          case 244:
          case 245:
          case 246:
          case 247:
          case 248:
          case 249:
          case 250:
          case 251:
          case 252:
          case 253:
          case 254:
          case 255:
          case 95:
            var j_11540006 = (i_11505025 + 1);
            L13: do {
                L14: while (true) {
                  if (!(j_11540006 < (formatstr_11505019).length)) Tmp15 = false; else {                    Tmp15 = (ConstSet61[formatstr_11505019[j_11540006]] != undefined);                  }                if (!Tmp15) break L14;
                  j_11540006 += 1;
                }
            } while(false);
            var x_11545013 = findNormalized_11500014(substr_2806022(formatstr_11505019, (i_11505025 + 1), (j_11540006 - 1)), a_11505021);
              if (!(0 <= x_11545013)) Tmp16 = false; else {                Tmp16 = (x_11545013 < ((a_11505021).length-1));              }            if (Tmp16) {
            s_11505018[s_11505018_Idx].push.apply(s_11505018[s_11505018_Idx], a_11505021[(x_11545013 + 1)]);;
            }
            else {
            invalidFormatString_11500046();
            }
            
            i_11505025 = j_11540006;
            break;
          default: 
            invalidFormatString_11500046();
            break;
          }
          }
          else {
            addChar(s_11505018[s_11505018_Idx], formatstr_11505019[i_11505025]);;
            i_11505025 += 1;
          }
          
        }
    } while(false);

  
}
function nsuFormatOpenArray(formatstr_11550027, a_11550029) {
  var result_11550030 = [[]];

    result_11550030[0] = nimCopy(null, mnewString(0), NTI2421013);
    nsuAddf(result_11550030, 0, formatstr_11550027, a_11550029);

  return result_11550030[0];

}
function getLine_12101332(my_12101334) {
  var result_12101335 = 0;

    result_12101335 = my_12101334.lineNumber;

  return result_12101335;

}
function getColNumber_12095214(L_12095216, pos_12095217) {
  var result_12095218 = 0;

    result_12095218 = Math.abs((pos_12095217 - L_12095216.lineStart));

  return result_12095218;

}
function getColumn_12101300(my_12101302) {
  var result_12101303 = 0;

    result_12101303 = getColNumber_12095214(my_12101302, my_12101302.bufpos);

  return result_12101303;

}
function errorMsg_12110266(my_12110268, msg_12110269) {
  var result_12110270 = [];

    result_12110270 = nimCopy(null, nsuFormatOpenArray(makeNimstrLit("$1($2, $3) Error: $4"), [nimCopy(null, my_12110268.filename, NTI2421013), cstrToNimstr((getLine_12101332(my_12110268))+""), cstrToNimstr((getColumn_12101300(my_12110268))+""), nimCopy(null, msg_12110269, NTI2421013)]), NTI2421013);

  return result_12110270;

}
function add_12460257(father_12460259, son_12460260) {
    var Tmp1;

    var Tmp1 = father_12460259;
    if (ConstSet62[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'s\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.s.push(son_12460260);;

  
}
function addNode_12616014(father_12616016, son_12616017) {
    if (!((son_12616017 == null))) {
    add_12460257(father_12616016, son_12616017);
    }
    

  
}
function newComment_12400214(comment_12400216) {
    var Tmp1;

  var result_12400217 = null;

    result_12400217 = newXmlNode_12391049(5);
    var Tmp1 = result_12400217;
    if (ConstSet63[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fText\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.fText = nimCopy(null, comment_12400216, NTI2421013);

  return result_12400217;

}
function newText_12391162(text_12391164) {
    var Tmp1;

  var result_12391165 = null;

    result_12391165 = newXmlNode_12391049(0);
    var Tmp1 = result_12391165;
    if (ConstSet64[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fText\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.fText = nimCopy(null, text_12391164, NTI2421013);

  return result_12391165;

}
function errorMsg_12101366(my_12101368) {
  var result_12101369 = [];

    result_12101369 = nimCopy(null, nsuFormatOpenArray(makeNimstrLit("$1($2, $3) Error: $4"), [nimCopy(null, my_12101368.filename, NTI2421013), cstrToNimstr((getLine_12101332(my_12101368))+""), cstrToNimstr((getColumn_12101300(my_12101368))+""), nimCopy(null, errorMessages_12101072[my_12101368.err], NTI2421013)]), NTI2421013);

  return result_12101369;

}
function attrsHEX3D_12545215(n_12545217, attr_12545218) {
    var Tmp1;

    var Tmp1 = n_12545217;
    if (ConstSet65[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fAttr\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.fAttr = attr_12545218;

  
}
function nstnewStringTable(mode_12315028) {
  var result_12315030 = null;

    result_12315030 = ({m_type: NTI12272208, counter: 0, data: [], mode: 0});
    result_12315030.mode = mode_12315028;
    result_12315030.counter = 0;
    result_12315030.data = new Array(64); for (var i=0;i<64;++i) {result_12315030.data[i]={Field0: [], Field1: [], Field2: false};}
  return result_12315030;

}
function imul_12211067(a_12211069, b_12211070) {
  var result_12211071 = 0;

    var mask_12211072 = 65535;
    var aHi_12211081 = (((a_12211069 >>> 0) >>> 16) & mask_12211072);
    var aLo_12211082 = (a_12211069 & mask_12211072);
    var bHi_12211091 = (((b_12211070 >>> 0) >>> 16) & mask_12211072);
    var bLo_12211092 = (b_12211070 & mask_12211072);
    result_12211071 = ((((aLo_12211082 * bLo_12211092) >>> 0) + (((((aHi_12211081 * bLo_12211092) >>> 0) + ((aLo_12211082 * bHi_12211091) >>> 0)) >>> 0) << 16)) >>> 0);

  return result_12211071;

}
function rotl32_12211201(x_12211203, r_12211204) {
  var result_12211205 = 0;

    result_12211205 = ((x_12211203 << r_12211204) | ((x_12211203 >>> 0) >>> (32 - r_12211204)));

  return result_12211205;

}
function murmurHash_12211229(x_12211232) {
  var result_12211233 = 0;

  BeforeRet: do {
    var size_12211243 = (x_12211232).length;
    var stepSize_12211245 = 4;
    var n_12211246 = Math.trunc(size_12211243 / stepSize_12211245);
    var h1_12211247 = 0;
    var i_12211249 = 0;
    L1: do {
        L2: while (true) {
        if (!(i_12211249 < (n_12211246 * stepSize_12211245))) break L2;
          var k1_12211250 = 0;
          var j_12211251 = stepSize_12211245;
          L3: do {
              L4: while (true) {
              if (!(0 < j_12211251)) break L4;
                j_12211251 -= 1;
                k1_12211250 = ((k1_12211250 << 8) | x_12211232[(i_12211249 + j_12211251)]);
              }
          } while(false);
          i_12211249 += stepSize_12211245;
          k1_12211250 = imul_12211067(k1_12211250, 3432918353);
          k1_12211250 = rotl32_12211201(k1_12211250, 15);
          k1_12211250 = imul_12211067(k1_12211250, 461845907);
          h1_12211247 = (h1_12211247 ^ k1_12211250);
          h1_12211247 = rotl32_12211201(h1_12211247, 13);
          h1_12211247 = ((((h1_12211247 * 5) >>> 0) + 3864292196) >>> 0);
        }
    } while(false);
    var k1_12215207 = 0;
    var rem_12215208 = Math.trunc(size_12211243 % stepSize_12211245);
    L5: do {
        L6: while (true) {
        if (!(0 < rem_12215208)) break L6;
          rem_12215208 -= 1;
          k1_12215207 = ((k1_12215207 << 8) | x_12211232[(i_12211249 + rem_12215208)]);
        }
    } while(false);
    k1_12215207 = imul_12211067(k1_12215207, 3432918353);
    k1_12215207 = rotl32_12211201(k1_12215207, 15);
    k1_12215207 = imul_12211067(k1_12215207, 461845907);
    h1_12211247 = (h1_12211247 ^ k1_12215207);
    h1_12211247 = (h1_12211247 ^ size_12211243);
    h1_12211247 = (h1_12211247 ^ ((h1_12211247 >>> 0) >>> 16));
    h1_12211247 = imul_12211067(h1_12211247, 2246822507);
    h1_12211247 = (h1_12211247 ^ ((h1_12211247 >>> 0) >>> 13));
    h1_12211247 = imul_12211067(h1_12211247, 3266489909);
    h1_12211247 = (h1_12211247 ^ ((h1_12211247 >>> 0) >>> 16));
    result_12211233 = (h1_12211247|0);
    break BeforeRet;
  } while (false);

  return result_12211233;

}
function hash_12250214(x_12250216) {
  var result_12250217 = 0;

    result_12250217 = murmurHash_12211229((x_12250216.slice(0, ((x_12250216).length-1)+1)));

  return result_12250217;

}
function HEX21HEX26_12196084(h_12196086, val_12196087) {
  var result_12196088 = 0;

    var h_12196089 = (h_12196086 >>> 0);
    var val_12196090 = (val_12196087 >>> 0);
    var res_12196091 = ((h_12196089 + val_12196090) >>> 0);
    res_12196091 = ((res_12196091 + (res_12196091 << 10)) >>> 0);
    res_12196091 = (res_12196091 ^ ((res_12196091 >>> 0) >>> 6));
    result_12196088 = (res_12196091|0);

  return result_12196088;

}
function HEX21HEX24_12196119(h_12196121) {
  var result_12196122 = 0;

    var h_12196123 = (h_12196121 >>> 0);
    var res_12196131 = ((h_12196123 + (h_12196123 << 3)) >>> 0);
    res_12196131 = (res_12196131 ^ ((res_12196131 >>> 0) >>> 11));
    res_12196131 = ((res_12196131 + (res_12196131 << 15)) >>> 0);
    result_12196122 = (res_12196131|0);

  return result_12196122;

}
function hashIgnoreCase_12260045(x_12260047) {
  var result_12260048 = 0;

    var h_12260049 = 0;
    L1: do {
      var i_12260058 = 0;
      var colontmp__13720282 = 0;
      colontmp__13720282 = ((x_12260047).length - 1);
      var res_13720283 = 0;
      L2: do {
          L3: while (true) {
          if (!(res_13720283 <= colontmp__13720282)) break L3;
            i_12260058 = res_13720283;
            var c_12260059 = x_12260047[i_12260058];
            if ((ConstSet66[c_12260059] != undefined)) {
            c_12260059 = (c_12260059 + 32);
            }
            
            h_12260049 = HEX21HEX26_12196084(h_12260049, c_12260059);
            res_13720283 += 1;
          }
      } while(false);
    } while(false);
    result_12260048 = HEX21HEX24_12196119(h_12260049);

  return result_12260048;

}
function hashIgnoreStyle_12251414(x_12251416) {
  var result_12251417 = 0;

    var h_12251418 = 0;
    var i_12251420 = 0;
    var xLen_12251421 = (x_12251416).length;
    L1: do {
        L2: while (true) {
        if (!(i_12251420 < xLen_12251421)) break L2;
          var c_12251422 = x_12251416[i_12251420];
          if ((c_12251422 == 95)) {
          i_12251420 += 1;
          }
          else {
            if ((ConstSet67[c_12251422] != undefined)) {
            c_12251422 = (c_12251422 + 32);
            }
            
            h_12251418 = HEX21HEX26_12196084(h_12251418, c_12251422);
            i_12251420 += 1;
          }
          
        }
    } while(false);
    result_12251417 = HEX21HEX24_12196119(h_12251418);

  return result_12251417;

}
function myhash_12272419(t_12272421, key_12272422) {
  var result_12272423 = 0;

    switch (t_12272421.mode) {
    case 0:
      result_12272423 = hash_12250214(key_12272422);
      break;
    case 1:
      result_12272423 = hashIgnoreCase_12260045(key_12272422);
      break;
    case 2:
      result_12272423 = hashIgnoreStyle_12251414(key_12272422);
      break;
    }

  return result_12272423;

}
function cmpStrings(a_2695186, b_2695187) {
        if (a_2695186 == b_2695187) return 0;
    if (!a_2695186) return -1;
    if (!b_2695187) return 1;
    for (var i = 0; i < a_2695186.length && i < b_2695187.length; i++) {
      var result = a_2695186[i] - b_2695187[i];
      if (result != 0) return result;
    }
    return a_2695186.length - b_2695187.length;
  

  
}
function cmp_2429060(x_2429062, y_2429063) {
  var result_2695206 = 0;

  BeforeRet: do {
    result_2695206 = cmpStrings(x_2429062, y_2429063);
    break BeforeRet;
  } while (false);

  return result_2695206;

}
function nsuCmpIgnoreCase(a_10670016, b_10670017) {
  var result_10670018 = 0;

  BeforeRet: do {
    var i_10670020 = 0;
    var m_10670021 = nimMin((a_10670016).length, (b_10670017).length);
    L1: do {
        L2: while (true) {
        if (!(i_10670020 < m_10670021)) break L2;
          result_10670018 = (nsuToLowerAsciiChar(a_10670016[i_10670020]) - nsuToLowerAsciiChar(b_10670017[i_10670020]));
          if (!((result_10670018 == 0))) {
          break BeforeRet;
          }
          
          i_10670020 += 1;
        }
    } while(false);
    result_10670018 = ((a_10670016).length - (b_10670017).length);
  } while (false);

  return result_10670018;

}
function myCmp_12272439(t_12272441, a_12272442, b_12272443) {
  var result_12272444 = false;

    switch (t_12272441.mode) {
    case 0:
      result_12272444 = (cmp_2429060(a_12272442, b_12272443) == 0);
      break;
    case 1:
      result_12272444 = (nsuCmpIgnoreCase(a_12272442, b_12272443) == 0);
      break;
    case 2:
      result_12272444 = (nsuCmpIgnoreStyle(a_12272442, b_12272443) == 0);
      break;
    }

  return result_12272444;

}
function nextTry_12285214(h_12285216, maxHash_12285217) {
  var result_12285218 = 0;

    result_12285218 = ((h_12285216 + 1) & maxHash_12285217);

  return result_12285218;

}
function rawGet_12285232(t_12285234, key_12285235) {
  var result_12285236 = 0;

  BeforeRet: do {
    var h_12285243 = (myhash_12272419(t_12285234, key_12285235) & ((t_12285234.data).length-1));
    L1: do {
        L2: while (true) {
        if (!t_12285234.data[h_12285243].Field2) break L2;
          if (myCmp_12272439(t_12285234, t_12285234.data[h_12285243].Field0, key_12285235)) {
          result_12285236 = h_12285243;
          break BeforeRet;
          }
          
          h_12285243 = nextTry_12285214(h_12285243, ((t_12285234.data).length-1));
        }
    } while(false);
    result_12285236 = -1;
  } while (false);

  return result_12285236;

}
function mustRehash_12272458(length_12272460, counter_12272461) {
  var result_12272462 = false;

    result_12272462 = (((length_12272460 * 2) < (counter_12272461 * 3)) || ((length_12272460 - counter_12272461) < 4));

  return result_12272462;

}
function rawInsert_12310032(t_12310034, data_12310036, data_12310036_Idx, key_12310037, val_12310038) {
    var h_12310045 = (myhash_12272419(t_12310034, key_12310037) & ((data_12310036[data_12310036_Idx]).length-1));
    L1: do {
        L2: while (true) {
        if (!data_12310036[data_12310036_Idx][h_12310045].Field2) break L2;
          h_12310045 = nextTry_12285214(h_12310045, ((data_12310036[data_12310036_Idx]).length-1));
        }
    } while(false);
    data_12310036[data_12310036_Idx][h_12310045].Field0 = nimCopy(null, key_12310037, NTI2421013);
    data_12310036[data_12310036_Idx][h_12310045].Field1 = nimCopy(null, val_12310038, NTI2421013);
    data_12310036[data_12310036_Idx][h_12310045].Field2 = true;

  
}
function enlarge_12310065(t_12310067) {
            var Tmp4;
            var Tmp5;

    var n_12310068 = [[]];
    n_12310068[0] = new Array(((t_12310067.data).length * 2)); for (var i=0;i<((t_12310067.data).length * 2);++i) {n_12310068[0][i]={Field0: [], Field1: [], Field2: false};}    L1: do {
      var i_12310094 = 0;
      var colontmp__13720296 = 0;
      colontmp__13720296 = ((t_12310067.data).length-1);
      var res_13720297 = 0;
      L2: do {
          L3: while (true) {
          if (!(res_13720297 <= colontmp__13720296)) break L3;
            i_12310094 = res_13720297;
            if (t_12310067.data[i_12310094].Field2) {
            Tmp4 = t_12310067.data[i_12310094].Field0;
            t_12310067.data[i_12310094].Field0 = genericReset(t_12310067.data[i_12310094].Field0, NTI2421013);
            Tmp5 = t_12310067.data[i_12310094].Field1;
            t_12310067.data[i_12310094].Field1 = genericReset(t_12310067.data[i_12310094].Field1, NTI2421013);
            rawInsert_12310032(t_12310067, n_12310068, 0, Tmp4, Tmp5);
            }
            
            res_13720297 += 1;
          }
      } while(false);
    } while(false);
    var Tmp6 = t_12310067.data; t_12310067.data = n_12310068[0]; n_12310068[0] = Tmp6;
  
}
function nstPut(t_12310175, key_12310176, val_12310177) {
    var index_12310178 = rawGet_12285232(t_12310175, key_12310176);
    if ((0 <= index_12310178)) {
    t_12310175.data[index_12310178].Field1 = nimCopy(null, val_12310177, NTI2421013);
    }
    else {
      if (mustRehash_12272458((t_12310175.data).length, t_12310175.counter)) {
      enlarge_12310065(t_12310175);
      }
      
      rawInsert_12310032(t_12310175, t_12310175, "data", key_12310176, val_12310177);
      t_12310175.counter += 1;
    }
    

  
}
function nstnewStringTableWithTableConstr(keyValuePairs_12315126, mode_12315127) {
  var result_12315129 = null;

    result_12315129 = nstnewStringTable(mode_12315127);
    L1: do {
      var key_12315162 = null;
      var key_12315162_Idx = 0;
      var val_12315164 = null;
      var val_12315164_Idx = 0;
      var i_13720274 = 0;
      L2: do {
          L3: while (true) {
          if (!(i_13720274 < (keyValuePairs_12315126).length)) break L3;
            key_12315162 = keyValuePairs_12315126[i_13720274]; key_12315162_Idx = "Field0";
            val_12315164 = keyValuePairs_12315126[i_13720274]; val_12315164_Idx = "Field1";
            nstPut(result_12315129, key_12315162[key_12315162_Idx], val_12315164[val_12315164_Idx]);
            i_13720274 += 1;
          }
      } while(false);
    } while(false);

  return result_12315129;

}
function attrs_12535246(n_12535248) {
    var Tmp1;

  var result_12535249 = null;

    var Tmp1 = n_12535248;
    if (ConstSet68[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fAttr\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    result_12535249 = Tmp1.fAttr;

  return result_12535249;

}
function newCData_12400232(cdata_12400234) {
    var Tmp1;

  var result_12400235 = null;

    result_12400235 = newXmlNode_12391049(3);
    var Tmp1 = result_12400235;
    if (ConstSet69[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fText\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.fText = nimCopy(null, cdata_12400234, NTI2421013);

  return result_12400235;

}
function newEntity_12400250(entity_12400252) {
    var Tmp1;

  var result_12400253 = null;

    result_12400253 = newXmlNode_12391049(4);
    var Tmp1 = result_12400253;
    if (ConstSet70[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fText\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.fText = nimCopy(null, entity_12400252, NTI2421013);

  return result_12400253;

}
function parse_12620022(x_12620025, errors_12620028, errors_12620028_Idx) {
  var result_12640248 = null;

    switch (kind_12101215(x_12620025)) {
    case 4:
      result_12640248 = newComment_12400214(x_12620025.a);
      next_12195021(x_12620025);
      break;
    case 2:
    case 3:
      result_12640248 = newText_12391162(x_12620025.a);
      next_12195021(x_12620025);
      break;
    case 5:
    case 13:
      next_12195021(x_12620025);
      break;
    case 0:
      errors_12620028[errors_12620028_Idx].push(errorMsg_12101366(x_12620025));;
      next_12195021(x_12620025);
      break;
    case 6:
      result_12640248 = newElement_12391113(x_12620025.a);
      next_12195021(x_12620025);
      untilElementEnd_12620029(x_12620025, result_12640248, errors_12620028, errors_12620028_Idx);
      break;
    case 7:
      errors_12620028[errors_12620028_Idx].push(errorMsg_12110266(x_12620025, (makeNimstrLit("unexpected ending tag: ") || []).concat(x_12620025.a || [])));;
      break;
    case 8:
      result_12640248 = newElement_12391113(x_12620025.a);
      next_12195021(x_12620025);
      attrsHEX3D_12545215(result_12640248, nstnewStringTableWithTableConstr([], 0));
      L1: do {
          L2: while (true) {
          if (!true) break L2;
            switch (kind_12101215(x_12620025)) {
            case 9:
              nstPut(attrs_12535246(result_12640248), x_12620025.a, x_12620025.b);
              next_12195021(x_12620025);
              break;
            case 10:
              next_12195021(x_12620025);
              break L1;
              break;
            case 0:
              errors_12620028[errors_12620028_Idx].push(errorMsg_12101366(x_12620025));;
              next_12195021(x_12620025);
              break L1;
              break;
            default: 
              errors_12620028[errors_12620028_Idx].push(errorMsg_12110266(x_12620025, makeNimstrLit("\'>\' expected")));;
              next_12195021(x_12620025);
              break L1;
              break;
            }
          }
      } while(false);
      untilElementEnd_12620029(x_12620025, result_12640248, errors_12620028, errors_12620028_Idx);
      break;
    case 9:
    case 10:
      errors_12620028[errors_12620028_Idx].push(errorMsg_12110266(x_12620025, makeNimstrLit("<some_tag> expected")));;
      next_12195021(x_12620025);
      break;
    case 11:
      result_12640248 = newCData_12400232(x_12620025.a);
      next_12195021(x_12620025);
      break;
    case 12:
      result_12640248 = newEntity_12400250(x_12620025.a);
      next_12195021(x_12620025);
      break;
    case 1:
      break;
    }

  return result_12640248;

}
function untilElementEnd_12620029(x_12620032, result_12620033, errors_12620036, errors_12620036_Idx) {
  BeforeRet: do {
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (kind_12101215(x_12620032)) {
          case 7:
            if (eqStrings(x_12620032.a, tag_12430215(result_12620033))) {
            break BeforeRet;
            }
            else {
            errors_12620036[errors_12620036_Idx].push(errorMsg_12110266(x_12620032, (makeNimstrLit("</") || []).concat(tag_12430215(result_12620033) || [],makeNimstrLit("> expected") || [])));;
            }
            
            break L1;
            break;
          case 1:
            errors_12620036[errors_12620036_Idx].push(errorMsg_12110266(x_12620032, (makeNimstrLit("</") || []).concat(tag_12430215(result_12620033) || [],makeNimstrLit("> expected") || [])));;
            break L1;
            break;
          default: 
            addNode_12616014(result_12620033, parse_12620022(x_12620032, errors_12620036, errors_12620036_Idx));
            break;
          }
        }
    } while(false);
  } while (false);

  
}
function parseXml_12850229(text_12850231, i_12850232) {
  var result_12850234 = {Field0: false, Field1: 0};

    var errors_12850236 = [[]];
    var x_12850237 = [({m_type: NTI12101023, a: [], b: [], c: [], kind: 0, err: 0, state: 0, cIsEmpty: false, filename: [], options: {}, bufpos: 0, buf: [], input: null, lineNumber: 0, sentinel: 0, lineStart: 0, offsetBase: 0, refillChars: {}})];
    var stream_12850238 = newStringStream_11945214(text_12850231);
    setPosition_11686240(stream_12850238, i_12850232);
    open_12101101(x_12850237[0], stream_12850238, [], ConstSet46);
    next_12195021(x_12850237[0]);
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (kind_12101215(x_12850237[0])) {
          case 8:
          case 6:
            var node_12875201 = newElement_12391113(x_12850237[0].a);
            untilElementEnd_12620029(x_12850237[0], node_12875201, errors_12850236, 0);
            result_12850234["Field0"] = true;
            break;
          case 4:
          case 13:
          case 5:
          case 11:
            next_12195021(x_12850237[0]);
            result_12850234["Field0"] = true;
            break;
          case 7:
          case 2:
          case 3:
          case 1:
            result_12850234["Field0"] = true;
            break L1;
            break;
          default: 
            result_12850234["Field0"] = false;
            break L1;
            break;
          }
        }
    } while(false);
    result_12850234["Field1"] = x_12850237[0].bufpos;

  return result_12850234;

}
function parseAmpStr_12885026(parser_12885028, parser_12885028_Idx) {
    var Tmp1;

  var result_12885029 = [null];

  BeforeRet: do {
    var initialPos_12885030 = parser_12885028[parser_12885028_Idx].pos;
    if ((initialPos_12885030 < (parser_12885028[parser_12885028_Idx].str).length)) {
    Tmp1 = parser_12885028[parser_12885028_Idx].str.charCodeAt(initialPos_12885030);
    }
    else {
    Tmp1 = 32;
    }
    
    var firstChar_12885031 = Tmp1;
    switch (firstChar_12885031) {
    case 65:
    case 66:
    case 67:
    case 68:
    case 69:
    case 70:
    case 71:
    case 72:
    case 73:
    case 74:
    case 75:
    case 76:
    case 77:
    case 78:
    case 79:
    case 80:
    case 81:
    case 82:
    case 83:
    case 84:
    case 85:
    case 86:
    case 87:
    case 88:
    case 89:
    case 90:
    case 97:
    case 98:
    case 99:
    case 100:
    case 101:
    case 102:
    case 103:
    case 104:
    case 105:
    case 106:
    case 107:
    case 108:
    case 109:
    case 110:
    case 111:
    case 112:
    case 113:
    case 114:
    case 115:
    case 116:
    case 117:
    case 118:
    case 119:
    case 120:
    case 121:
    case 122:
      parser_12885028[parser_12885028_Idx].pos += 2;
      result_12885029[0] = "&";
      L2: do {
        var ch_12885038 = 0;
        L3: do {
            L4: while (true) {
            if (!(parser_12885028[parser_12885028_Idx].pos < (parser_12885028[parser_12885028_Idx].str).length)) break L4;
              ch_12885038 = parser_12885028[parser_12885028_Idx].str.charCodeAt((parser_12885028[parser_12885028_Idx].pos + 0));
              add_11601037(result_12885029, 0, ch_12885038);
              if ((ch_12885038 == 59)) {
              break L2;
              }
              else {
              if (!((ConstSet75[ch_12885038] != undefined))) {
              parser_12885028[parser_12885028_Idx].pos = initialPos_12885030;
              result_12885029[0] = "&amp;";
              break BeforeRet;
              }
              }
              parser_12885028[parser_12885028_Idx].pos += 1;
            }
        } while(false);
      } while(false);
      break;
    case 35:
      parser_12885028[parser_12885028_Idx].pos += 2;
      result_12885029[0] = "&";
      L5: do {
        var ch_12890013 = 0;
        L6: do {
            L7: while (true) {
            if (!(parser_12885028[parser_12885028_Idx].pos < (parser_12885028[parser_12885028_Idx].str).length)) break L7;
              ch_12890013 = parser_12885028[parser_12885028_Idx].str.charCodeAt((parser_12885028[parser_12885028_Idx].pos + 0));
              add_11601037(result_12885029, 0, ch_12890013);
              if ((ch_12890013 == 59)) {
              break L5;
              }
              else {
              if (!((ConstSet76[ch_12890013] != undefined))) {
              parser_12885028[parser_12885028_Idx].pos = initialPos_12885030;
              result_12885029[0] = "&amp;";
              break BeforeRet;
              }
              }
              parser_12885028[parser_12885028_Idx].pos += 1;
            }
        } while(false);
      } while(false);
      break;
    default: 
      result_12885029[0] = "&amp;";
      break;
    }
  } while (false);

  return result_12885029[0];

}
function parseDelimed_12900048(parser_12900050, parser_12900050_Idx, delim_12900051, singleLine_12900052) {
                    function canAsterisk_12970022(parser_12970024) {
                      var result_12970025 = false;

                        result_12970025 = !(((!(anyPrev_11635038(parser_12970024, 0)) || peekPrevMatch_12975001(parser_12970024, ConstSet6, 0)) && (!(anyNext_11635020(parser_12970024, 0)) || peekMatch_11645014(parser_12970024, ConstSet7, 1))));

                      return result_12970025;

                    }
                    var Tmp5;
                  var Tmp6;
                    function canEndUnderscore_12990014(parser_12990016) {
                      var result_12990017 = false;

                        result_12990017 = ((!(anyNext_11635020(parser_12990016, 1)) || peekMatch_11645014(parser_12990016, ConstSet9, 1)) && !((!(anyPrev_11635038(parser_12990016, 0)) || peekPrevMatch_12975001(parser_12990016, ConstSet10, 0))));

                      return result_12990017;

                    }
                    var Tmp7;
                  var Tmp8;
              var Tmp9;
              function parseAux_12915401(tag_12915403, del_12915404, parser_12915405, parser_12915405_Idx) {
                    var Tmp1;

                var result_12915406 = 0;

                  var currentPos_12915407 = parser_12915405[parser_12915405_Idx].pos;
                  var colontmp__13720166 = parseDelimed_12900048(parser_12915405, parser_12915405_Idx, del_12915404, singleLine_12900052);
                  var finishReason_12915408 = colontmp__13720166["Field0"];
                  var parsedElems_12915409 = nimCopy(null, colontmp__13720166["Field1"], NTI12900054);
                  if ((finishReason_12915408 == 0)) {
                  elems_12900069[0].push(newElem_11601465(tag_12915403, parsedElems_12915409));;
                  lastStr_12900057 = newStr_11601416("");
                  elems_12900069[0].push(lastStr_12900057);;
                  result_12915406 = 0;
                  }
                  else {
                    var Tmp1 = lastStr_12900057;
                    if (ConstSet13[Tmp1.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                    Tmp1.str += HEX5BHEX5D_11601075(parser_12915405[parser_12915405_Idx].str, HEX2EHEX2E_4625220(initialPos_12915202, (currentPos_12915407 - 1)));;
                    add_12940002(elems_12900069, 0, parsedElems_12915409);
                    lastStr_12900057 = newStr_11601416("");
                    elems_12900069[0].push(lastStr_12900057);;
                    result_12915406 = finishReason_12915408;
                  }
                  

                return result_12915406;

              }
              function bracket_12945072(image_12945074, parser_12945075, parser_12945075_Idx) {
                    var Tmp1;
                  var Tmp2;
                  var Tmp3;
                  var Tmp4;

                var result_12945076 = 0;

                  var elem_12945077 = parseBracket_12876414(image_12945074, parser_12945075, parser_12945075_Idx, singleLine_12900052);
                    var Tmp1 = elem_12945077;
                    if (ConstSet34[Tmp1.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                  if ((Tmp1.tag == 0)) {
                  var Tmp2 = lastStr_12900057;
                  if (ConstSet35[Tmp2.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                  if (image_12945074) {
                  Tmp3 = "![";
                  }
                  else {
                  Tmp3 = "[";
                  }
                  
                  Tmp2.str += Tmp3;;
                  var Tmp4 = elem_12945077;
                  if (ConstSet36[Tmp4.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                  add_12940002(elems_12900069, 0, Tmp4.content);
                  lastStr_12900057 = newStr_11601416("");
                  elems_12900069[0].push(lastStr_12900057);;
                  result_12945076 = 2;
                  }
                  else {
                    elems_12900069[0].push(elem_12945077);;
                    lastStr_12900057 = newStr_11601416("");
                    elems_12900069[0].push(lastStr_12900057);;
                    result_12945076 = 0;
                  }
                  

                return result_12945076;

              }
              var Tmp10;
                var Tmp11;
                var Tmp12;
                function canStartUnderscore_12980014(parser_12980016) {
                  var result_12980017 = false;

                    result_12980017 = ((!(anyPrev_11635038(parser_12980016, 0)) || peekPrevMatch_12975001(parser_12980016, ConstSet42, 0)) && !((!(anyNext_11635020(parser_12980016, 1)) || peekMatch_11645014(parser_12980016, ConstSet43, 1))));

                  return result_12980017;

                }
              var Tmp13;
                var Tmp14;
              var Tmp15;
              var Tmp16;
                var Tmp17;
                var Tmp18;

  var result_12900055 = {Field0: 0, Field1: []};

  BeforeRet: do {
    var escaped_12900056 = false;
    var lastStr_12900057 = newStr_11601416("");
    var elems_12900069 = [[lastStr_12900057]];
    L1: do {
      var ch_12900090 = 0;
      L2: do {
          L3: while (true) {
          if (!(parser_12900050[parser_12900050_Idx].pos < (parser_12900050[parser_12900050_Idx].str).length)) break L3;
            ch_12900090 = parser_12900050[parser_12900050_Idx].str.charCodeAt((parser_12900050[parser_12900050_Idx].pos + 0));
            L4: do {
              if (!(escaped_12900056)) {
              var initialPos_12915202 = parser_12900050[parser_12900050_Idx].pos;
              switch (toJSStr(delim_12900051)) {
              case "":
                break;
              case "*":
                if (nextMatch_11685365(parser_12900050, parser_12900050_Idx, makeNimstrLit("**"), 0)) {
                var colontmp__13720156 = parseDelimed_12900048(parser_12900050, parser_12900050_Idx, makeNimstrLit("**"), singleLine_12900052);
                var finishReason_13000020 = colontmp__13720156["Field0"];
                var parsedElems_13000021 = nimCopy(null, colontmp__13720156["Field1"], NTI12900054);
                if ((finishReason_13000020 == 0)) {
                elems_12900069[0].push(newElem_11601465(16, parsedElems_13000021));;
                lastStr_12900057 = newStr_11601416("");
                elems_12900069[0].push(lastStr_12900057);;
                break L4;
                }
                else {
                  parser_12900050[parser_12900050_Idx].pos = initialPos_12915202;
                  if (canAsterisk_12970022(parser_12900050[parser_12900050_Idx])) {
                  var colontmp__13720120 = 0;
                  var colontmp__13720121 = nimCopy(null, elems_12900069[0], NTI12900054);
                  nimCopy(result_12900055, {Field0: colontmp__13720120, Field1: nimCopy(null, colontmp__13720121, NTI12900054)}, NTI12900053);
                  break BeforeRet;
                  }
                  else {
                    var Tmp5 = lastStr_12900057;
                    if (ConstSet8[Tmp5.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                    add_13015003(Tmp5, "str");
                    break L4;
                  }
                  
                }
                
                }
                else {
                  if (!canAsterisk_12970022(parser_12900050[parser_12900050_Idx])) Tmp6 = false; else {                    Tmp6 = nextMatch_11685365(parser_12900050, parser_12900050_Idx, makeNimstrLit("*"), 0);                  }                if (Tmp6) {
                parser_12900050[parser_12900050_Idx].pos -= 1;
                var colontmp__13720122 = 0;
                var colontmp__13720123 = nimCopy(null, elems_12900069[0], NTI12900054);
                nimCopy(result_12900055, {Field0: colontmp__13720122, Field1: nimCopy(null, colontmp__13720123, NTI12900054)}, NTI12900053);
                break BeforeRet;
                }
                }
                break;
              case "_":
                if (nextMatch_11685365(parser_12900050, parser_12900050_Idx, makeNimstrLit("__"), 0)) {
                var colontmp__13720157 = parseDelimed_12900048(parser_12900050, parser_12900050_Idx, makeNimstrLit("__"), singleLine_12900052);
                var finishReason_13015030 = colontmp__13720157["Field0"];
                var parsedElems_13015031 = nimCopy(null, colontmp__13720157["Field1"], NTI12900054);
                if ((finishReason_13015030 == 0)) {
                elems_12900069[0].push(newElem_11601465(19, parsedElems_13015031));;
                lastStr_12900057 = newStr_11601416("");
                elems_12900069[0].push(lastStr_12900057);;
                break L4;
                }
                else {
                  parser_12900050[parser_12900050_Idx].pos = initialPos_12915202;
                  if (canEndUnderscore_12990014(parser_12900050[parser_12900050_Idx])) {
                  var colontmp__13720124 = 0;
                  var colontmp__13720125 = nimCopy(null, elems_12900069[0], NTI12900054);
                  nimCopy(result_12900055, {Field0: colontmp__13720124, Field1: nimCopy(null, colontmp__13720125, NTI12900054)}, NTI12900053);
                  break BeforeRet;
                  }
                  else {
                    var Tmp7 = lastStr_12900057;
                    if (ConstSet11[Tmp7.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                    add_13030003(Tmp7, "str");
                    break L4;
                  }
                  
                }
                
                }
                else {
                  if (!canEndUnderscore_12990014(parser_12900050[parser_12900050_Idx])) Tmp8 = false; else {                    Tmp8 = nextMatch_11685365(parser_12900050, parser_12900050_Idx, makeNimstrLit("_"), 0);                  }                if (Tmp8) {
                parser_12900050[parser_12900050_Idx].pos -= 1;
                var colontmp__13720126 = 0;
                var colontmp__13720127 = nimCopy(null, elems_12900069[0], NTI12900054);
                nimCopy(result_12900055, {Field0: colontmp__13720126, Field1: nimCopy(null, colontmp__13720127, NTI12900054)}, NTI12900053);
                break BeforeRet;
                }
                }
                break;
              default: 
                if (nextMatch_11685365(parser_12900050, parser_12900050_Idx, delim_12900051, 0)) {
                parser_12900050[parser_12900050_Idx].pos -= 1;
                var colontmp__13720128 = 0;
                var colontmp__13720129 = nimCopy(null, elems_12900069[0], NTI12900054);
                nimCopy(result_12900055, {Field0: colontmp__13720128, Field1: nimCopy(null, colontmp__13720129, NTI12900054)}, NTI12900053);
                break BeforeRet;
                }
                
                break;
              }
              if (((singleLine_12900052 && (nextMatch_11685365(parser_12900050, parser_12900050_Idx, makeNimstrLit("\x0D\x0A"), 0) || nextMatch_11685365(parser_12900050, parser_12900050_Idx, makeNimstrLit("\x0A"), 0))) || (!(singleLine_12900052) && (nextMatch_11685365(parser_12900050, parser_12900050_Idx, makeNimstrLit("\x0D\x0A\x0D\x0A"), 0) || nextMatch_11685365(parser_12900050, parser_12900050_Idx, makeNimstrLit("\x0A\x0A"), 0))))) {
              if ((singleLine_12900052 && ((delim_12900051).length == 0))) {
              parser_12900050[parser_12900050_Idx].pos -= 1;
              }
              else {
                parser_12900050[parser_12900050_Idx].pos = initialPos_12915202;
              }
              
              if (((delim_12900051).length == 0)) {
              Tmp9 = 1;
              }
              else {
              Tmp9 = 0;
              }
              
              var colontmp__13720130 = Tmp9;
              var colontmp__13720131 = nimCopy(null, elems_12900069[0], NTI12900054);
              nimCopy(result_12900055, {Field0: colontmp__13720130, Field1: nimCopy(null, colontmp__13720131, NTI12900054)}, NTI12900053);
              break BeforeRet;
              }
              else {
              if ((nextMatch_11685365(parser_12900050, parser_12900050_Idx, makeNimstrLit("  \x0D\x0A"), 0) || nextMatch_11685365(parser_12900050, parser_12900050_Idx, makeNimstrLit("  \x0A"), 0))) {
              elems_12900069[0].push(newElem_11601465(2, []));;
              lastStr_12900057 = newStr_11601416("");
              elems_12900069[0].push(lastStr_12900057);;
              }
              else {
              if (nextMatch_11685365(parser_12900050, parser_12900050_Idx, makeNimstrLit("```"), 0)) {
              elems_12900069[0].push(parseCodeBlock_12900014(parser_12900050, parser_12900050_Idx, 96));;
              lastStr_12900057 = newStr_11601416("");
              elems_12900069[0].push(lastStr_12900057);;
              }
              else {
              if (nextMatch_11685365(parser_12900050, parser_12900050_Idx, makeNimstrLit("~~~"), 0)) {
              elems_12900069[0].push(parseCodeBlock_12900014(parser_12900050, parser_12900050_Idx, 126));;
              lastStr_12900057 = newStr_11601416("");
              elems_12900069[0].push(lastStr_12900057);;
              }
              else {
              if (nextMatch_11685365(parser_12900050, parser_12900050_Idx, makeNimstrLit("^("), 0)) {
              var reasonHEX60gensym37_13070001 = parseAux_12915401(13, makeNimstrLit(")"), parser_12900050, parser_12900050_Idx);
              if ((ConstSet14[reasonHEX60gensym37_13070001] != undefined)) {
              var colontmp__13720132 = reasonHEX60gensym37_13070001;
              var colontmp__13720133 = nimCopy(null, elems_12900069[0], NTI12900054);
              nimCopy(result_12900055, {Field0: colontmp__13720132, Field1: nimCopy(null, colontmp__13720133, NTI12900054)}, NTI12900053);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch_11685365(parser_12900050, parser_12900050_Idx, makeNimstrLit("**"), 0)) {
              var reasonHEX60gensym39_13080001 = parseAux_12915401(16, makeNimstrLit("**"), parser_12900050, parser_12900050_Idx);
              if ((ConstSet15[reasonHEX60gensym39_13080001] != undefined)) {
              var colontmp__13720134 = reasonHEX60gensym39_13080001;
              var colontmp__13720135 = nimCopy(null, elems_12900069[0], NTI12900054);
              nimCopy(result_12900055, {Field0: colontmp__13720134, Field1: nimCopy(null, colontmp__13720135, NTI12900054)}, NTI12900053);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch_11685365(parser_12900050, parser_12900050_Idx, makeNimstrLit("__"), 0)) {
              var reasonHEX60gensym41_13090001 = parseAux_12915401(19, makeNimstrLit("__"), parser_12900050, parser_12900050_Idx);
              if ((ConstSet16[reasonHEX60gensym41_13090001] != undefined)) {
              var colontmp__13720136 = reasonHEX60gensym41_13090001;
              var colontmp__13720137 = nimCopy(null, elems_12900069[0], NTI12900054);
              nimCopy(result_12900055, {Field0: colontmp__13720136, Field1: nimCopy(null, colontmp__13720137, NTI12900054)}, NTI12900053);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch_11685365(parser_12900050, parser_12900050_Idx, makeNimstrLit("~~"), 0)) {
              var reasonHEX60gensym43_13100001 = parseAux_12915401(20, makeNimstrLit("~~"), parser_12900050, parser_12900050_Idx);
              if ((ConstSet17[reasonHEX60gensym43_13100001] != undefined)) {
              var colontmp__13720138 = reasonHEX60gensym43_13100001;
              var colontmp__13720139 = nimCopy(null, elems_12900069[0], NTI12900054);
              nimCopy(result_12900055, {Field0: colontmp__13720138, Field1: nimCopy(null, colontmp__13720139, NTI12900054)}, NTI12900053);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch_11685365(parser_12900050, parser_12900050_Idx, makeNimstrLit("!["), 0)) {
              var reason_13105009 = bracket_12945072(true, parser_12900050, parser_12900050_Idx);
              if ((ConstSet37[reason_13105009] != undefined)) {
              var colontmp__13720140 = reason_13105009;
              var colontmp__13720141 = nimCopy(null, elems_12900069[0], NTI12900054);
              nimCopy(result_12900055, {Field0: colontmp__13720140, Field1: nimCopy(null, colontmp__13720141, NTI12900054)}, NTI12900053);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch_11685261(parser_12900050, parser_12900050_Idx, 123, 0)) {
              var Tmp10 = lastStr_12900057;
              if (ConstSet38[Tmp10.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp10.str += parseCurly_12876419(parser_12900050, parser_12900050_Idx);;
              }
              else {
              if (nextMatch_11685261(parser_12900050, parser_12900050_Idx, 91, 0)) {
              var reason_13115002 = bracket_12945072(false, parser_12900050, parser_12900050_Idx);
              if ((ConstSet39[reason_13115002] != undefined)) {
              var colontmp__13720142 = reason_13115002;
              var colontmp__13720143 = nimCopy(null, elems_12900069[0], NTI12900054);
              nimCopy(result_12900055, {Field0: colontmp__13720142, Field1: nimCopy(null, colontmp__13720143, NTI12900054)}, NTI12900053);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch_11685261(parser_12900050, parser_12900050_Idx, 96, 0)) {
              var reasonHEX60gensym48_13125001 = parseAux_12915401(18, makeNimstrLit("`"), parser_12900050, parser_12900050_Idx);
              if ((ConstSet40[reasonHEX60gensym48_13125001] != undefined)) {
              var colontmp__13720144 = reasonHEX60gensym48_13125001;
              var colontmp__13720145 = nimCopy(null, elems_12900069[0], NTI12900054);
              nimCopy(result_12900055, {Field0: colontmp__13720144, Field1: nimCopy(null, colontmp__13720145, NTI12900054)}, NTI12900053);
              break BeforeRet;
              }
              
              }
              else {
                if (!canAsterisk_12970022(parser_12900050[parser_12900050_Idx])) Tmp11 = false; else {                  Tmp11 = nextMatch_11685261(parser_12900050, parser_12900050_Idx, 42, 0);                }              if (Tmp11) {
              var reasonHEX60gensym50_13135001 = parseAux_12915401(15, makeNimstrLit("*"), parser_12900050, parser_12900050_Idx);
              if ((ConstSet41[reasonHEX60gensym50_13135001] != undefined)) {
              var colontmp__13720146 = reasonHEX60gensym50_13135001;
              var colontmp__13720147 = nimCopy(null, elems_12900069[0], NTI12900054);
              nimCopy(result_12900055, {Field0: colontmp__13720146, Field1: nimCopy(null, colontmp__13720147, NTI12900054)}, NTI12900053);
              break BeforeRet;
              }
              
              }
              else {
                if (!canStartUnderscore_12980014(parser_12900050[parser_12900050_Idx])) Tmp12 = false; else {                  Tmp12 = nextMatch_11685261(parser_12900050, parser_12900050_Idx, 95, 0);                }              if (Tmp12) {
              var reasonHEX60gensym52_13145001 = parseAux_12915401(15, makeNimstrLit("_"), parser_12900050, parser_12900050_Idx);
              if ((ConstSet44[reasonHEX60gensym52_13145001] != undefined)) {
              var colontmp__13720148 = reasonHEX60gensym52_13145001;
              var colontmp__13720149 = nimCopy(null, elems_12900069[0], NTI12900054);
              nimCopy(result_12900055, {Field0: colontmp__13720148, Field1: nimCopy(null, colontmp__13720149, NTI12900054)}, NTI12900053);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch_11685261(parser_12900050, parser_12900050_Idx, 60, 0)) {
              parser_12900050[parser_12900050_Idx].pos -= 1;
              var colontmp__13720181 = parseXml_12850229(cstrToNimstr(parser_12900050[parser_12900050_Idx].str), parser_12900050[parser_12900050_Idx].pos);
              var change_13150201 = colontmp__13720181["Field0"];
              var pos_13150202 = colontmp__13720181["Field1"];
              if (change_13150201) {
              var Tmp13 = lastStr_12900057;
              if (ConstSet71[Tmp13.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp13.str += HEX5BHEX5D_11601075(parser_12900050[parser_12900050_Idx].str, HEX2EHEX2E_4625220(parser_12900050[parser_12900050_Idx].pos, ((parser_12900050[parser_12900050_Idx].pos + pos_13150202) - 1)));;
              parser_12900050[parser_12900050_Idx].pos += (pos_13150202 - 1);
              }
              else {
                var Tmp14 = lastStr_12900057;
                if (ConstSet72[Tmp14.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp14.str += "&lt;";;
              }
              
              }
              else {
              if (nextMatch_11685261(parser_12900050, parser_12900050_Idx, 62, 0)) {
              var Tmp15 = lastStr_12900057;
              if (ConstSet73[Tmp15.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp15.str += "&gt;";;
              break L4;
              }
              else {
              if (nextMatch_11685261(parser_12900050, parser_12900050_Idx, 38, 0)) {
              var Tmp16 = lastStr_12900057;
              if (ConstSet74[Tmp16.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp16.str += parseAmpStr_12885026(parser_12900050, parser_12900050_Idx);;
              }
              else {
              if (nextMatch_11685261(parser_12900050, parser_12900050_Idx, 92, 0)) {
              parser_12900050[parser_12900050_Idx].pos -= 1;
              escaped_12900056 = true;
              }
              else {
                var Tmp17 = lastStr_12900057;
                if (ConstSet77[Tmp17.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              add_11601037(Tmp17, "str", ch_12900090);
              }
              }}}}}}}}}}}}}}}}}
              }
              else {
                var Tmp18 = lastStr_12900057;
                if (ConstSet78[Tmp18.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_11601037(Tmp18, "str", ch_12900090);
                escaped_12900056 = false;
              }
              
            } while(false);
            parser_12900050[parser_12900050_Idx].pos += 1;
          }
      } while(false);
    } while(false);
    var colontmp__13720151 = 1;
    var colontmp__13720152 = nimCopy(null, elems_12900069[0], NTI12900054);
    nimCopy(result_12900055, {Field0: colontmp__13720151, Field1: nimCopy(null, colontmp__13720152, NTI12900054)}, NTI12900053);
  } while (false);

  return result_12900055;

}
function parseInline_13220095(parser_13220097, parser_13220097_Idx, singleLine_13220098) {
  var result_13220100 = [];

    var colontmp__13720117 = parseDelimed_12900048(parser_13220097, parser_13220097_Idx, [], singleLine_13220098);
    var finishReason_13220101 = colontmp__13720117["Field0"];
    var elems_13220102 = nimCopy(null, colontmp__13720117["Field1"], NTI12900054);
    result_13220100 = nimCopy(null, elems_13220102, NTI12900054);

  return result_13220100;

}
function HEX5BHEX5D_12910005(s_12910010, i_12910011) {
  var result_12910013 = null;
  var result_12910013_Idx = 0;

    result_12910013 = s_12910010; result_12910013_Idx = ((s_12910010).length - i_12910011);

  return [result_12910013, result_12910013_Idx];

}
function HEX5BHEX5DHEX3D_13370004(s_13370009, i_13370010, x_13370011) {
    s_13370009[((s_13370009).length - i_13370010)] = x_13370011;

  
}
function peekPrevMatch_11685242(parser_11685244, pat_11685245, offset_11685246) {
  var result_11685247 = false;

    result_11685247 = (anyPrev_11635038(parser_11685244, (offset_11685246 - (pat_11685245).length)) && peekMatch_11675020(parser_11685244, pat_11685245, (offset_11685246 - (pat_11685245).length)));

  return result_11685247;

}
function parseTopLevel_13235292(parser_13235294, parser_13235294_Idx) {
            var Tmp4;
              var Tmp5;
              var Tmp6;
                var Tmp7;
                var Tmp8;
                var Tmp9;
                var Tmp10;
                var Tmp11;
                var Tmp12;
                var Tmp15;
              var Tmp16;
              var Tmp17;
                var Tmp18;
                var Tmp19;
                var Tmp20;
                var Tmp21;
                var Tmp22;
                var Tmp23;
              function skipWhitespaceUntilNewline_13345018(parser_13345020, parser_13345020_Idx) {
                var result_13345021 = false;

                BeforeRet: do {
                  var i_13345023 = 0;
                  L1: do {
                      L2: while (true) {
                      if (!((parser_13345020[parser_13345020_Idx].pos + i_13345023) < (parser_13345020[parser_13345020_Idx].str).length)) break L2;
                        var ch_13350001 = parser_13345020[parser_13345020_Idx].str.charCodeAt((parser_13345020[parser_13345020_Idx].pos + i_13345023));
                        switch (ch_13350001) {
                        case 10:
                          parser_13345020[parser_13345020_Idx].pos += i_13345023;
                          result_13345021 = true;
                          break BeforeRet;
                          break;
                        case 13:
                        case 9:
                        case 11:
                        case 12:
                        case 32:
                          break;
                        default: 
                          result_13345021 = false;
                          break BeforeRet;
                          break;
                        }
                        i_13345023 += 1;
                      }
                  } while(false);
                } while (false);

                return result_13345021;

              }
              var Tmp24;
              var Tmp25;
              var Tmp26;
              var Tmp27;
              var Tmp28;
                var Tmp29;
                var Tmp30;
                var Tmp31;
                var Tmp32;
                var Tmp33;
              var Tmp34;
              var Tmp35;
              var Tmp36;
              var Tmp37;
              var Tmp38;
              var Tmp39;
              var Tmp40;
              var Tmp41;
                var Tmp42;
                var Tmp43;
                var Tmp44;
                var Tmp45;
                var Tmp46;
                var Tmp47;
                  var Tmp48;
                  var Tmp49;
                  var Tmp50;
                    var Tmp51;
                    var Tmp52;
                    var Tmp53;
                    var Tmp54;
                    var Tmp55;
                var Tmp56;
                var Tmp57;
                var Tmp58;
                var Tmp59;
                var Tmp60;
                var Tmp61;
                var Tmp62;
                var Tmp63;
                      var Tmp66;
                var Tmp69;
                var Tmp70;
                var Tmp71;
                var Tmp72;
                var Tmp75;
                var Tmp76;
                var Tmp77;

  var result_13235296 = [];

    var lastElement_13235297 = null;
    L1: do {
      var firstCh_13235302 = 0;
      L2: do {
          L3: while (true) {
          if (!(parser_13235294[parser_13235294_Idx].pos < (parser_13235294[parser_13235294_Idx].str).length)) break L3;
            firstCh_13235302 = parser_13235294[parser_13235294_Idx].str.charCodeAt((parser_13235294[parser_13235294_Idx].pos + 0));
            if ((ConstSet1[firstCh_13235302] != undefined)) {
            if (!((lastElement_13235297 == null))) {
            result_13235296.push(paragraphIfText_11601529(lastElement_13235297));;
            lastElement_13235297 = null;
            }
            
            }
            else {
            if (!((lastElement_13235297 == null))) {
            var Tmp4 = lastElement_13235297;
            if (ConstSet2[Tmp4.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
            switch (Tmp4.tag) {
            case 9:
              if (nextMatch_11685286(parser_13235294, parser_13235294_Idx, ConstSet4, 1)) {
              var item_13255202 = newElem_11601465(11, []);
              var Tmp5 = item_13255202;
              if (ConstSet5[Tmp5.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp5.content = nimCopy(null, parseInline_13220095(parser_13235294, parser_13235294_Idx, true), NTI13220099);
              var Tmp6 = lastElement_13235297;
              if (ConstSet79[Tmp6.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp6.content.push(item_13255202);;
              }
              else {
                var Tmp7 = lastElement_13235297;
                if (ConstSet81[Tmp7.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp9 = (Tmp8 = HEX5BHEX5D_12910005(Tmp7.content, 1), Tmp8)[0][Tmp8[1]];
                if (ConstSet80[Tmp9.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp9.content.push(newStr_11601416("\n"));;
                var Tmp10 = lastElement_13235297;
                if (ConstSet83[Tmp10.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp12 = (Tmp11 = HEX5BHEX5D_12910005(Tmp10.content, 1), Tmp11)[0][Tmp11[1]];
                if (ConstSet82[Tmp12.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_12940002(Tmp12, "content", parseInline_13220095(parser_13235294, parser_13235294_Idx, true));
              }
              
              break;
            case 10:
              var i_13300013 = 0;
              L13: do {
                  L14: while (true) {
                  if (!peekMatch_11645014(parser_13235294[parser_13235294_Idx], ConstSet84, i_13300013)) break L14;
                    i_13300013 += 1;
                  }
              } while(false);
                if (!(((parser_13235294[parser_13235294_Idx].pos + i_13300013) + 1) < (parser_13235294[parser_13235294_Idx].str).length)) Tmp15 = false; else {                  Tmp15 = peekMatch_11640024(parser_13235294[parser_13235294_Idx], 46, i_13300013);                }              if (Tmp15) {
              parser_13235294[parser_13235294_Idx].pos += (i_13300013 + 1);
              var item_13300026 = newElem_11601465(11, []);
              var Tmp16 = item_13300026;
              if (ConstSet85[Tmp16.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp16.content = nimCopy(null, parseInline_13220095(parser_13235294, parser_13235294_Idx, true), NTI13220099);
              var Tmp17 = lastElement_13235297;
              if (ConstSet86[Tmp17.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp17.content.push(item_13300026);;
              }
              else {
                var Tmp18 = lastElement_13235297;
                if (ConstSet88[Tmp18.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp20 = (Tmp19 = HEX5BHEX5D_12910005(Tmp18.content, 1), Tmp19)[0][Tmp19[1]];
                if (ConstSet87[Tmp20.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp20.content.push(newStr_11601416("\n "));;
                var Tmp21 = lastElement_13235297;
                if (ConstSet90[Tmp21.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp23 = (Tmp22 = HEX5BHEX5D_12910005(Tmp21.content, 1), Tmp22)[0][Tmp22[1]];
                if (ConstSet89[Tmp23.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_12940002(Tmp23, "content", parseInline_13220095(parser_13235294, parser_13235294_Idx, true));
              }
              
              break;
            case 12:
              if ((firstCh_13235302 == 62)) {
              parser_13235294[parser_13235294_Idx].pos += 1;
              }
              
              var rem_13350027 = skipWhitespaceUntilNewline_13345018(parser_13235294, parser_13235294_Idx);
              if (rem_13350027) {
              if ((firstCh_13235302 == 62)) {
              var Tmp24 = lastElement_13235297;
              if (ConstSet91[Tmp24.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              var Tmp25 = lastElement_13235297;
              if (ConstSet92[Tmp25.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              HEX5BHEX5DHEX3D_13370004(Tmp24.content, 1, paragraphIfText_11601529((Tmp26 = HEX5BHEX5D_12910005(Tmp25.content, 1), Tmp26)[0][Tmp26[1]]));
              var Tmp27 = lastElement_13235297;
              if (ConstSet93[Tmp27.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp27.content.push(newStr_11601416("\n"));;
              if (peekPrevMatch_11685242(parser_13235294[parser_13235294_Idx], makeNimstrLit("  "), 0)) {
              var Tmp28 = lastElement_13235297;
              if (ConstSet94[Tmp28.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp28.content.push(newElem_11601465(2, []));;
              }
              
              }
              else {
                var Tmp29 = lastElement_13235297;
                if (ConstSet95[Tmp29.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp30 = lastElement_13235297;
                if (ConstSet96[Tmp30.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                HEX5BHEX5DHEX3D_13370004(Tmp29.content, 1, paragraphIfText_11601529((Tmp31 = HEX5BHEX5D_12910005(Tmp30.content, 1), Tmp31)[0][Tmp31[1]]));
                result_13235296.push(lastElement_13235297);;
                if (peekPrevMatch_11685242(parser_13235294[parser_13235294_Idx], makeNimstrLit("  "), 0)) {
                result_13235296.push(newElem_11601465(2, []));;
                }
                
              }
              
              }
              else {
                var Tmp32 = lastElement_13235297;
                if (ConstSet97[Tmp32.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              if ((Tmp33 = HEX5BHEX5D_12910005(Tmp32.content, 1), Tmp33)[0][Tmp33[1]].isText) {
              var Tmp34 = lastElement_13235297;
              if (ConstSet98[Tmp34.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp34.content.push(newStr_11601416("\n"));;
              var Tmp35 = lastElement_13235297;
              if (ConstSet99[Tmp35.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp35.content.push(newElem_11601465(1, parseInline_13220095(parser_13235294, parser_13235294_Idx, true)));;
              }
              else {
              if ((ConstSet100[firstCh_13235302] != undefined)) {
              var Tmp36 = lastElement_13235297;
              if (ConstSet102[Tmp36.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              var Tmp38 = (Tmp37 = HEX5BHEX5D_12910005(Tmp36.content, 1), Tmp37)[0][Tmp37[1]];
              if (ConstSet101[Tmp38.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp38.content.push(newStr_11601416("\n "));;
              var Tmp39 = lastElement_13235297;
              if (ConstSet104[Tmp39.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              var Tmp41 = (Tmp40 = HEX5BHEX5D_12910005(Tmp39.content, 1), Tmp40)[0][Tmp40[1]];
              if (ConstSet103[Tmp41.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              add_12940002(Tmp41, "content", parseInline_13220095(parser_13235294, parser_13235294_Idx, true));
              }
              else {
                var Tmp42 = lastElement_13235297;
                if (ConstSet106[Tmp42.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp44 = (Tmp43 = HEX5BHEX5D_12910005(Tmp42.content, 1), Tmp43)[0][Tmp43[1]];
                if (ConstSet105[Tmp44.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp44.content.push(newStr_11601416("\n"));;
                var Tmp45 = lastElement_13235297;
                if (ConstSet108[Tmp45.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp47 = (Tmp46 = HEX5BHEX5D_12910005(Tmp45.content, 1), Tmp46)[0][Tmp46[1]];
                if (ConstSet107[Tmp47.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_12940002(Tmp47, "content", parseInline_13220095(parser_13235294, parser_13235294_Idx, true));
              }
              }}
              break;
            case 0:
            case 1:
            case 2:
            case 3:
            case 4:
            case 5:
            case 6:
            case 7:
            case 8:
            case 11:
            case 13:
            case 14:
            case 15:
            case 16:
            case 17:
            case 18:
            case 19:
            case 20:
            case 21:
            case 22:
            case 23:
              result_13235296.push(paragraphIfText_11601529(lastElement_13235297));;
              lastElement_13235297 = null;
              parser_13235294[parser_13235294_Idx].pos -= 1;
              break;
            }
            }
            else {
              switch (firstCh_13235302) {
              case 9:
              case 11:
              case 12:
              case 32:
                  if (!!(((result_13235296).length == 0))) Tmp50 = false; else {                    Tmp50 = !((Tmp51 = HEX5BHEX5D_12910005(result_13235296, 1), Tmp51)[0][Tmp51[1]].isText);                  }                  if (!Tmp50) Tmp49 = false; else {                    var Tmp53 = (Tmp52 = HEX5BHEX5D_12910005(result_13235296, 1), Tmp52)[0][Tmp52[1]];
                    if (ConstSet110[Tmp53.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                    Tmp49 = (ConstSet109[Tmp53.tag] != undefined);                  }                  if (!Tmp49) Tmp48 = false; else {                    var Tmp55 = (Tmp54 = HEX5BHEX5D_12910005(result_13235296, 1), Tmp54)[0][Tmp54[1]];
                    if (ConstSet111[Tmp55.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                    Tmp48 = !(((Tmp55.content).length == 0));                  }                if (Tmp48) {
                var Tmp57 = (Tmp56 = HEX5BHEX5D_12910005(result_13235296, 1), Tmp56)[0][Tmp56[1]];
                if (ConstSet113[Tmp57.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp59 = (Tmp58 = HEX5BHEX5D_12910005(Tmp57.content, 1), Tmp58)[0][Tmp58[1]];
                if (ConstSet112[Tmp59.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp59.content.push(newStr_11601416("\n "));;
                var Tmp61 = (Tmp60 = HEX5BHEX5D_12910005(result_13235296, 1), Tmp60)[0][Tmp60[1]];
                if (ConstSet115[Tmp61.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp63 = (Tmp62 = HEX5BHEX5D_12910005(Tmp61.content, 1), Tmp62)[0][Tmp62[1]];
                if (ConstSet114[Tmp63.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_12940002(Tmp63, "content", parseInline_13220095(parser_13235294, parser_13235294_Idx, false));
                }
                else {
                  lastElement_13235297 = newElem_11601465(1, parseInline_13220095(parser_13235294, parser_13235294_Idx, true));
                }
                
                break;
              case 35:
                var level_13585002 = 1;
                L64: do {
                    L65: while (true) {
                      if (!(level_13585002 < 6)) Tmp66 = false; else {                        Tmp66 = peekMatch_11640024(parser_13235294[parser_13235294_Idx], 35, level_13585002);                      }                    if (!Tmp66) break L65;
                      level_13585002 += 1;
                    }
                } while(false);
                parser_13235294[parser_13235294_Idx].pos += level_13585002;
                lastElement_13235297 = newElem_11601465((2 + level_13585002), []);
                if (nextMatch_11685286(parser_13235294, parser_13235294_Idx, ConstSet116, 0)) {
                var id_13585019 = [""];
                L67: do {
                    L68: while (true) {
                      var ch_13590001 = parser_13235294[parser_13235294_Idx].str.charCodeAt((parser_13235294[parser_13235294_Idx].pos + 0));
                    if (!nextMatch_11685286(parser_13235294, parser_13235294_Idx, ConstSet117, 0)) break L68;
                      add_11601037(id_13585019, 0, ch_13590001);
                    }
                } while(false);
                parser_13235294[parser_13235294_Idx].pos += 1;
                var Tmp69 = lastElement_13235297;
                if (ConstSet118[Tmp69.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'attrs\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp69.attrs.push({Field0: "id", Field1: id_13585019[0]});;
                }
                
                var Tmp70 = lastElement_13235297;
                if (ConstSet119[Tmp70.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_12940002(Tmp70, "content", parseInline_13220095(parser_13235294, parser_13235294_Idx, true));
                break;
              case 42:
              case 45:
              case 43:
                if (nextMatch_11685286(parser_13235294, parser_13235294_Idx, ConstSet120, 1)) {
                lastElement_13235297 = newElem_11601465(9, []);
                var item_13600012 = newElem_11601465(11, []);
                var Tmp71 = item_13600012;
                if (ConstSet121[Tmp71.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_12940002(Tmp71, "content", parseInline_13220095(parser_13235294, parser_13235294_Idx, true));
                var Tmp72 = lastElement_13235297;
                if (ConstSet122[Tmp72.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp72.content.push(item_13600012);;
                }
                else {
                  lastElement_13235297 = newElem_11601465(1, parseInline_13220095(parser_13235294, parser_13235294_Idx, false));
                }
                
                break;
              case 48:
              case 49:
              case 50:
              case 51:
              case 52:
              case 53:
              case 54:
              case 55:
              case 56:
              case 57:
                var originalPos_13620001 = parser_13235294[parser_13235294_Idx].pos;
                parser_13235294[parser_13235294_Idx].pos += 1;
                L73: do {
                    L74: while (true) {
                    if (!nextMatch_11685286(parser_13235294, parser_13235294_Idx, ConstSet123, 0)) break L74;
                    }
                } while(false);
                if (nextMatch_11685261(parser_13235294, parser_13235294_Idx, 46, 0)) {
                lastElement_13235297 = newElem_11601465(10, []);
                var item_13620008 = newElem_11601465(11, []);
                var Tmp75 = item_13620008;
                if (ConstSet124[Tmp75.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_12940002(Tmp75, "content", parseInline_13220095(parser_13235294, parser_13235294_Idx, true));
                var Tmp76 = lastElement_13235297;
                if (ConstSet125[Tmp76.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp76.content.push(item_13620008);;
                }
                else {
                  parser_13235294[parser_13235294_Idx].pos = originalPos_13620001;
                  lastElement_13235297 = newElem_11601465(1, parseInline_13220095(parser_13235294, parser_13235294_Idx, false));
                }
                
                break;
              case 62:
                lastElement_13235297 = newElem_11601465(12, []);
                parser_13235294[parser_13235294_Idx].pos += 1;
                var Tmp77 = lastElement_13235297;
                if (ConstSet126[Tmp77.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp77.content.push(newElem_11601465(1, parseInline_13220095(parser_13235294, parser_13235294_Idx, true)));;
                break;
              default: 
                if (nextMatch_11685365(parser_13235294, parser_13235294_Idx, makeNimstrLit("```"), 0)) {
                result_13235296.push(parseCodeBlock_12900014(parser_13235294, parser_13235294_Idx, 96));;
                lastElement_13235297 = null;
                }
                else {
                if (nextMatch_11685365(parser_13235294, parser_13235294_Idx, makeNimstrLit("~~~"), 0)) {
                result_13235296.push(parseCodeBlock_12900014(parser_13235294, parser_13235294_Idx, 126));;
                lastElement_13235297 = null;
                }
                else {
                  lastElement_13235297 = newElem_11601465(1, parseInline_13220095(parser_13235294, parser_13235294_Idx, false));
                }
                }
                break;
              }
            }
            }
            parser_13235294[parser_13235294_Idx].pos += 1;
          }
      } while(false);
    } while(false);
    if (!((lastElement_13235297 == null))) {
    result_13235296.push(lastElement_13235297);;
    }
    

  return result_13235296;

}
function parseMarggers_13666027(text_13666029) {
  var result_13666031 = [];

    var parser_13666032 = [{str: text_13666029, pos: 0}];
    result_13666031 = nimCopy(null, parseTopLevel_13235292(parser_13666032, 0), NTI13235295);

  return result_13666031;

}
function add_11625319(x_11625322, x_11625322_Idx) {
    x_11625322[x_11625322_Idx] += " ";;

  
}
function add_11630004(x_11630007, x_11630007_Idx) {
    x_11630007[x_11630007_Idx] += ">";;

  
}
function isEmpty_11601587(tag_11601589) {
    var Tmp1;

  var result_11601590 = false;

    switch (tag_11601589) {
    case 2:
    case 21:
    case 22:
      Tmp1 = true;
      break;
    default: 
      Tmp1 = false;
      break;
    }
    result_11601590 = Tmp1;

  return result_11601590;

}
function toCstring_11625296(elem_11625298) {
    var Tmp1;
      var Tmp2;
        var Tmp4;
        var Tmp8;
        var Tmp11;
      var Tmp12;

  var result_11625299 = [null];

    if (elem_11625298.isText) {
    var Tmp1 = elem_11625298;
    if (ConstSet127[Tmp1.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    result_11625299[0] = Tmp1.str;
    }
    else {
      result_11625299[0] = "<";
      var Tmp2 = elem_11625298;
      if (ConstSet128[Tmp2.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      result_11625299[0] += toJSStr(reprEnum(Tmp2.tag, NTI11601222));;
      L3: do {
        var attrName_11625314 = null;
        var attrName_11625314_Idx = 0;
        var attrValue_11625316 = null;
        var attrValue_11625316_Idx = 0;
        var colontmp__13720311 = [];
        var Tmp4 = elem_11625298;
        if (ConstSet129[Tmp4.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'attrs\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
        colontmp__13720311 = Tmp4.attrs;
        var i_13720313 = 0;
        var L_13720314 = (colontmp__13720311).length;
        L5: do {
            L6: while (true) {
            if (!(i_13720313 < L_13720314)) break L6;
              attrName_11625314 = colontmp__13720311[i_13720313]; attrName_11625314_Idx = "Field0";
              attrValue_11625316 = colontmp__13720311[i_13720313]; attrValue_11625316_Idx = "Field1";
              add_11625319(result_11625299, 0);
              result_11625299[0] += attrName_11625314[attrName_11625314_Idx];;
              if (!(((attrValue_11625316[attrValue_11625316_Idx]).length == 0))) {
              result_11625299[0] += "=\"";;
              result_11625299[0] += attrValue_11625316[attrValue_11625316_Idx];;
              result_11625299[0] += "\"";;
              }
              
              i_13720313 += 1;
            }
        } while(false);
      } while(false);
      add_11630004(result_11625299, 0);
      L7: do {
        var cont_11630032 = null;
        var cont_11630032_Idx = 0;
        var colontmp__13720317 = [];
        var Tmp8 = elem_11625298;
        if (ConstSet130[Tmp8.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
        colontmp__13720317 = Tmp8.content;
        var i_13720318 = 0;
        var L_13720319 = (colontmp__13720317).length;
        L9: do {
            L10: while (true) {
            if (!(i_13720318 < L_13720319)) break L10;
              cont_11630032 = colontmp__13720317; cont_11630032_Idx = i_13720318;
              result_11625299[0] += toCstring_11625296(cont_11630032[cont_11630032_Idx]);;
              i_13720318 += 1;
            }
        } while(false);
      } while(false);
        var Tmp11 = elem_11625298;
        if (ConstSet131[Tmp11.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      if (!(isEmpty_11601587(Tmp11.tag))) {
      result_11625299[0] += "</";;
      var Tmp12 = elem_11625298;
      if (ConstSet132[Tmp12.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      result_11625299[0] += toJSStr(reprEnum(Tmp12.tag, NTI11601222));;
      add_11630004(result_11625299, 0);
      }
      
    }
    

  return result_11625299[0];

}
function convertMarggers_13716014(text_13716016) {
  var result_13716017 = null;

    result_13716017 = "";
    L1: do {
      var elem_13716025 = null;
      var elem_13716025_Idx = 0;
      var colontmp__13720079 = [];
      colontmp__13720079 = parseMarggers_13666027(text_13716016);
      var i_13720081 = 0;
      var L_13720082 = (colontmp__13720079).length;
      L2: do {
          L3: while (true) {
          if (!(i_13720081 < L_13720082)) break L3;
            elem_13716025 = colontmp__13720079; elem_13716025_Idx = i_13720081;
            result_13716017 += toCstring_11625296(elem_13716025[elem_13716025_Idx]);;
            result_13716017 += "\n";;
            i_13720081 += 1;
          }
      } while(false);
    } while(false);

  return result_13716017;

}
function convert() {
    var input_13720063 = input_13720015();
    var output_13720064 = convertMarggers_13716014(input_13720063);
    document.getElementById("output").innerHTML = output_13720064;

  
}
function convertToSource() {
    var input_13720323 = input_13720015();
    var output_13720324 = convertMarggers_13716014(input_13720323);
    var sourceBlock_13720325 = document.createElement("pre");
    sourceBlock_13720325.textContent = output_13720324;
    var outputElement_13720326 = document.getElementById("output");
    outputElement_13720326.innerHTML = "";
    outputElement_13720326.appendChild(sourceBlock_13720325);

  
}
function filename_13720340() {
  var result_13720342 = null;

    result_13720342 = document.getElementById("filename").value || "output.html";

  return result_13720342;

}
function download() {
    var input_13720362 = input_13720015();
    var output_13720363 = convertMarggers_13716014(input_13720362);
    var blob_13720373 = new Blob([output_13720363], {type: 'text/html'});
    var url_13720374 = window.URL.createObjectURL(blob_13720373);
    var a_13720375 = document.createElement("a");
    a_13720375.style.display = "none";
    a_13720375.setAttribute("href", url_13720374);
    a_13720375.setAttribute("download", filename_13720340());
    document.body.appendChild(a_13720375);
    a_13720375.click();
    window.URL.revokeObjectURL(url_13720374);
    document.body.removeChild(a_13720375);

  
}
