/* Generated by the Nim Compiler v1.4.2 */
var framePtr = null;
var excHandler = 0;
var lastJSError = null;
var NTI13590295 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI13575859 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI2427621 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI2427643 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI12547202 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12547204 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI12547206 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI12547208 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI12547210 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI12666031 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI12666017 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12666021 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI12666015 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI12666133 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI12451107 = {size: 0,kind: 19,base: null,node: null,finalizer: null};
var NTI12415250 = {size: 0,kind: 19,base: null,node: null,finalizer: null};
var NTI12200253 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI2421011 = {size: 0,kind: 2,base: null,node: null,finalizer: null};
var NTI12306026 = {size: 0,kind: 19,base: null,node: null,finalizer: null};
var NTI12036179 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI12036173 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI12036167 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI12036161 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI12036155 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI12036144 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI12036140 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI12036135 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI12036131 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI12036127 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI12036126 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI12036124 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI12306018 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI12451021 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12451065 = {size: 0,kind: 19,base: null,node: null,finalizer: null};
var NTI12451019 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12451017 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12451015 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12451023 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI11776471 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI11776743 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI11776134 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI13180044 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI13180053 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI13180054 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI3520020 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI11776463 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI2421044 = {size: 0,kind: 31,base: null,node: null,finalizer: null};
var NTI11601056 = {size: 0,kind: 31,base: null,node: null,finalizer: null};
var NTI11776452 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI11776449 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI11776446 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI11776402 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI2421064 = {size: 0,kind: 1,base: null,node: null,finalizer: null};
var NTI11776433 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI11776404 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI11776668 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI2427408 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI2427728 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI2421015 = {size: 0,kind: 29,base: null,node: null,finalizer: null};
var NTI2427723 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI2427617 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI2427619 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI2427651 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI2421013 = {size: 0,kind: 28,base: null,node: null,finalizer: null};
var NNI2427651 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI2427651.node = NNI2427651;
var NNI2427619 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI2427619.node = NNI2427619;
NTI2427723.base = NTI2427617;
NTI2427728.base = NTI2427617;
var NNI2427617 = {kind: 2, len: 5, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "parent", len: 0, typ: NTI2427723, name: "parent", sons: null}, 
{kind: 1, offset: "name", len: 0, typ: NTI2421015, name: "name", sons: null}, 
{kind: 1, offset: "message", len: 0, typ: NTI2421013, name: "msg", sons: null}, 
{kind: 1, offset: "trace", len: 0, typ: NTI2421013, name: "trace", sons: null}, 
{kind: 1, offset: "up", len: 0, typ: NTI2427728, name: "up", sons: null}]};
NTI2427617.node = NNI2427617;
var NNI2427408 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI2427408.node = NNI2427408;
NTI2427617.base = NTI2427408;
NTI2427619.base = NTI2427617;
NTI2427651.base = NTI2427619;
var NNI11776402 = {kind: 2, offset: 0, typ: null, name: null, len: 26, sons: {"0": {kind: 1, offset: 0, typ: NTI11776402, name: "noTag", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI11776402, name: "p", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI11776402, name: "br", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI11776402, name: "h1", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI11776402, name: "h2", len: 0, sons: null}, 
"5": {kind: 1, offset: 5, typ: NTI11776402, name: "h3", len: 0, sons: null}, 
"6": {kind: 1, offset: 6, typ: NTI11776402, name: "h4", len: 0, sons: null}, 
"7": {kind: 1, offset: 7, typ: NTI11776402, name: "h5", len: 0, sons: null}, 
"8": {kind: 1, offset: 8, typ: NTI11776402, name: "h6", len: 0, sons: null}, 
"9": {kind: 1, offset: 9, typ: NTI11776402, name: "ul", len: 0, sons: null}, 
"10": {kind: 1, offset: 10, typ: NTI11776402, name: "ol", len: 0, sons: null}, 
"11": {kind: 1, offset: 11, typ: NTI11776402, name: "li", len: 0, sons: null}, 
"12": {kind: 1, offset: 12, typ: NTI11776402, name: "blockquote", len: 0, sons: null}, 
"13": {kind: 1, offset: 13, typ: NTI11776402, name: "sup", len: 0, sons: null}, 
"14": {kind: 1, offset: 14, typ: NTI11776402, name: "sub", len: 0, sons: null}, 
"15": {kind: 1, offset: 15, typ: NTI11776402, name: "em", len: 0, sons: null}, 
"16": {kind: 1, offset: 16, typ: NTI11776402, name: "strong", len: 0, sons: null}, 
"17": {kind: 1, offset: 17, typ: NTI11776402, name: "pre", len: 0, sons: null}, 
"18": {kind: 1, offset: 18, typ: NTI11776402, name: "code", len: 0, sons: null}, 
"19": {kind: 1, offset: 19, typ: NTI11776402, name: "u", len: 0, sons: null}, 
"20": {kind: 1, offset: 20, typ: NTI11776402, name: "s", len: 0, sons: null}, 
"21": {kind: 1, offset: 21, typ: NTI11776402, name: "img", len: 0, sons: null}, 
"22": {kind: 1, offset: 22, typ: NTI11776402, name: "input", len: 0, sons: null}, 
"23": {kind: 1, offset: 23, typ: NTI11776402, name: "a", len: 0, sons: null}, 
"24": {kind: 1, offset: 24, typ: NTI11776402, name: "video", len: 0, sons: null}, 
"25": {kind: 1, offset: 25, typ: NTI11776402, name: "audio", len: 0, sons: null}}};
NTI11776402.node = NNI11776402;
var NNI11776452 = {kind: 2, len: 4, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI11601056, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI2421044, name: "Field1", sons: null}, 
{kind: 1, offset: "Field2", len: 0, typ: NTI2421015, name: "Field2", sons: null}, 
{kind: 1, offset: "Field3", len: 0, typ: NTI2421015, name: "Field3", sons: null}]};
NTI11776452.node = NNI11776452;
NTI11776449.base = NTI11776452;
var NNI11776446 = {kind: 2, len: 4, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "data", len: 0, typ: NTI11776449, name: "data", sons: null}, 
{kind: 1, offset: "counter", len: 0, typ: NTI2421044, name: "counter", sons: null}, 
{kind: 1, offset: "first", len: 0, typ: NTI2421044, name: "first", sons: null}, 
{kind: 1, offset: "last", len: 0, typ: NTI2421044, name: "last", sons: null}]};
NTI11776446.node = NNI11776446;
NTI11776463.base = NTI11776404;
var NNI11776433 = {kind: 3, offset: "isText", len: 2, typ: NTI2421064, name: "isText", sons: [[setConstr(1), {kind: 1, offset: "str", len: 0, typ: NTI2421015, name: "str", sons: null}], 
[setConstr(2), {kind: 2, len: 3, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "tag", len: 0, typ: NTI11776402, name: "tag", sons: null}, 
{kind: 1, offset: "attrs", len: 0, typ: NTI11776446, name: "attrs", sons: null}, 
{kind: 1, offset: "content", len: 0, typ: NTI11776463, name: "content", sons: null}]}]]};
NTI11776433.node = NNI11776433;
NTI11776404.base = NTI11776433;
NTI11776668.base = NTI11776404;
var NNI3520020 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "a", len: 0, typ: NTI2421044, name: "a", sons: null}, 
{kind: 1, offset: "b", len: 0, typ: NTI2421044, name: "b", sons: null}]};
NTI3520020.node = NNI3520020;
NTI13180054.base = NTI11776404;
var NNI13180044 = {kind: 2, offset: 0, typ: null, name: null, len: 3, sons: {"0": {kind: 1, offset: 0, typ: NTI13180044, name: "frDone", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI13180044, name: "frReachedEnd", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI13180044, name: "frFailed", len: 0, sons: null}}};
NTI13180044.node = NNI13180044;
var NNI13180053 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI13180044, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI13180054, name: "Field1", sons: null}]};
NTI13180053.node = NNI13180053;
var NNI11776134 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "a", len: 0, typ: NTI2421044, name: "a", sons: null}, 
{kind: 1, offset: "b", len: 0, typ: NTI2421044, name: "b", sons: null}]};
NTI11776134.node = NNI11776134;
NTI11776743.base = NTI11776404;
NTI11776471.base = NTI11776404;
var NNI12451015 = {kind: 2, offset: 0, typ: null, name: null, len: 14, sons: {"0": {kind: 1, offset: 0, typ: NTI12451015, name: "xmlError", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12451015, name: "xmlEof", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12451015, name: "xmlCharData", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI12451015, name: "xmlWhitespace", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI12451015, name: "xmlComment", len: 0, sons: null}, 
"5": {kind: 1, offset: 5, typ: NTI12451015, name: "xmlPI", len: 0, sons: null}, 
"6": {kind: 1, offset: 6, typ: NTI12451015, name: "xmlElementStart", len: 0, sons: null}, 
"7": {kind: 1, offset: 7, typ: NTI12451015, name: "xmlElementEnd", len: 0, sons: null}, 
"8": {kind: 1, offset: 8, typ: NTI12451015, name: "xmlElementOpen", len: 0, sons: null}, 
"9": {kind: 1, offset: 9, typ: NTI12451015, name: "xmlAttribute", len: 0, sons: null}, 
"10": {kind: 1, offset: 10, typ: NTI12451015, name: "xmlElementClose", len: 0, sons: null}, 
"11": {kind: 1, offset: 11, typ: NTI12451015, name: "xmlCData", len: 0, sons: null}, 
"12": {kind: 1, offset: 12, typ: NTI12451015, name: "xmlEntity", len: 0, sons: null}, 
"13": {kind: 1, offset: 13, typ: NTI12451015, name: "xmlSpecial", len: 0, sons: null}}};
NTI12451015.node = NNI12451015;
var NNI12451017 = {kind: 2, offset: 0, typ: null, name: null, len: 10, sons: {"0": {kind: 1, offset: 0, typ: NTI12451017, name: "errNone", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12451017, name: "errEndOfCDataExpected", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12451017, name: "errNameExpected", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI12451017, name: "errSemicolonExpected", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI12451017, name: "errQmGtExpected", len: 0, sons: null}, 
"5": {kind: 1, offset: 5, typ: NTI12451017, name: "errGtExpected", len: 0, sons: null}, 
"6": {kind: 1, offset: 6, typ: NTI12451017, name: "errEqExpected", len: 0, sons: null}, 
"7": {kind: 1, offset: 7, typ: NTI12451017, name: "errQuoteExpected", len: 0, sons: null}, 
"8": {kind: 1, offset: 8, typ: NTI12451017, name: "errEndOfCommentExpected", len: 0, sons: null}, 
"9": {kind: 1, offset: 9, typ: NTI12451017, name: "errAttributeValueExpected", len: 0, sons: null}}};
NTI12451017.node = NNI12451017;
var NNI12451019 = {kind: 2, offset: 0, typ: null, name: null, len: 5, sons: {"0": {kind: 1, offset: 0, typ: NTI12451019, name: "stateStart", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12451019, name: "stateNormal", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12451019, name: "stateAttr", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI12451019, name: "stateEmptyElementTag", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI12451019, name: "stateError", len: 0, sons: null}}};
NTI12451019.node = NNI12451019;
var NNI12451021 = {kind: 2, offset: 0, typ: null, name: null, len: 4, sons: {"0": {kind: 1, offset: 0, typ: NTI12451021, name: "reportWhitespace", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12451021, name: "reportComments", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12451021, name: "allowUnquotedAttribs", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI12451021, name: "allowEmptyAttribs", len: 0, sons: null}}};
NTI12451021.node = NNI12451021;
NTI12451065.base = NTI12451021;
var NNI12451023 = {kind: 2, len: 9, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "a", len: 0, typ: NTI2421013, name: "a", sons: null}, 
{kind: 1, offset: "b", len: 0, typ: NTI2421013, name: "b", sons: null}, 
{kind: 1, offset: "c", len: 0, typ: NTI2421013, name: "c", sons: null}, 
{kind: 1, offset: "kind", len: 0, typ: NTI12451015, name: "kind", sons: null}, 
{kind: 1, offset: "err", len: 0, typ: NTI12451017, name: "err", sons: null}, 
{kind: 1, offset: "state", len: 0, typ: NTI12451019, name: "state", sons: null}, 
{kind: 1, offset: "cIsEmpty", len: 0, typ: NTI2421064, name: "cIsEmpty", sons: null}, 
{kind: 1, offset: "filename", len: 0, typ: NTI2421013, name: "filename", sons: null}, 
{kind: 1, offset: "options", len: 0, typ: NTI12451065, name: "options", sons: null}]};
NTI12451023.node = NNI12451023;
var NNI12036126 = {kind: 2, len: 10, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "closeImpl", len: 0, typ: NTI12036127, name: "closeImpl", sons: null}, 
{kind: 1, offset: "atEndImpl", len: 0, typ: NTI12036131, name: "atEndImpl", sons: null}, 
{kind: 1, offset: "setPositionImpl", len: 0, typ: NTI12036135, name: "setPositionImpl", sons: null}, 
{kind: 1, offset: "getPositionImpl", len: 0, typ: NTI12036140, name: "getPositionImpl", sons: null}, 
{kind: 1, offset: "readDataStrImpl", len: 0, typ: NTI12036144, name: "readDataStrImpl", sons: null}, 
{kind: 1, offset: "readLineImpl", len: 0, typ: NTI12036155, name: "readLineImpl", sons: null}, 
{kind: 1, offset: "readDataImpl", len: 0, typ: NTI12036161, name: "readDataImpl", sons: null}, 
{kind: 1, offset: "peekDataImpl", len: 0, typ: NTI12036167, name: "peekDataImpl", sons: null}, 
{kind: 1, offset: "writeDataImpl", len: 0, typ: NTI12036173, name: "writeDataImpl", sons: null}, 
{kind: 1, offset: "flushImpl", len: 0, typ: NTI12036179, name: "flushImpl", sons: null}]};
NTI12036126.node = NNI12036126;
NTI12036126.base = NTI2427408;
NTI12036124.base = NTI12036126;
NTI12306026.base = NTI2421011;
var NNI12306018 = {kind: 2, len: 8, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "bufpos", len: 0, typ: NTI2421044, name: "bufpos", sons: null}, 
{kind: 1, offset: "buf", len: 0, typ: NTI2421013, name: "buf", sons: null}, 
{kind: 1, offset: "input", len: 0, typ: NTI12036124, name: "input", sons: null}, 
{kind: 1, offset: "lineNumber", len: 0, typ: NTI2421044, name: "lineNumber", sons: null}, 
{kind: 1, offset: "sentinel", len: 0, typ: NTI2421044, name: "sentinel", sons: null}, 
{kind: 1, offset: "lineStart", len: 0, typ: NTI2421044, name: "lineStart", sons: null}, 
{kind: 1, offset: "offsetBase", len: 0, typ: NTI2421044, name: "offsetBase", sons: null}, 
{kind: 1, offset: "refillChars", len: 0, typ: NTI12306026, name: "refillChars", sons: null}]};
NTI12306018.node = NNI12306018;
NTI12306018.base = NTI2427408;
NTI12451023.base = NTI12306018;
var NNI12200253 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "data", len: 0, typ: NTI2421013, name: "data", sons: null}, 
{kind: 1, offset: "pos", len: 0, typ: NTI2421044, name: "pos", sons: null}]};
NTI12200253.node = NNI12200253;
NTI12200253.base = NTI12036126;
NTI12415250.base = NTI2421011;
NTI12451107.base = NTI12451021;
var NNI12666017 = {kind: 2, offset: 0, typ: null, name: null, len: 6, sons: {"0": {kind: 1, offset: 0, typ: NTI12666017, name: "xnText", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12666017, name: "xnVerbatimText", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12666017, name: "xnElement", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI12666017, name: "xnCData", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI12666017, name: "xnEntity", len: 0, sons: null}, 
"5": {kind: 1, offset: 5, typ: NTI12666017, name: "xnComment", len: 0, sons: null}}};
NTI12666017.node = NNI12666017;
NTI12666031.base = NTI12666015;
var NNI12547204 = {kind: 2, len: 3, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI2421013, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI2421013, name: "Field1", sons: null}, 
{kind: 1, offset: "Field2", len: 0, typ: NTI2421064, name: "Field2", sons: null}]};
NTI12547204.node = NNI12547204;
NTI12547206.base = NTI12547204;
var NNI12547202 = {kind: 2, offset: 0, typ: null, name: null, len: 3, sons: {"0": {kind: 1, offset: 0, typ: NTI12547202, name: "modeCaseSensitive", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12547202, name: "modeCaseInsensitive", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12547202, name: "modeStyleInsensitive", len: 0, sons: null}}};
NTI12547202.node = NNI12547202;
var NNI12547208 = {kind: 2, len: 3, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "counter", len: 0, typ: NTI2421044, name: "counter", sons: null}, 
{kind: 1, offset: "data", len: 0, typ: NTI12547206, name: "data", sons: null}, 
{kind: 1, offset: "mode", len: 0, typ: NTI12547202, name: "mode", sons: null}]};
NTI12547208.node = NNI12547208;
NTI12547208.base = NTI2427408;
NTI12547210.base = NTI12547208;
var NNI12666021 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 3, offset: "k", len: 6, typ: NTI12666017, name: "k", sons: [[setConstr(0, 1, 5, 3, 4), {kind: 1, offset: "fText", len: 0, typ: NTI2421013, name: "fText", sons: null}], 
[setConstr(2), {kind: 2, len: 3, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "fTag", len: 0, typ: NTI2421013, name: "fTag", sons: null}, 
{kind: 1, offset: "s", len: 0, typ: NTI12666031, name: "s", sons: null}, 
{kind: 1, offset: "fAttr", len: 0, typ: NTI12547210, name: "fAttr", sons: null}]}]]}, 
{kind: 1, offset: "fClientData", len: 0, typ: NTI2421044, name: "fClientData", sons: null}]};
NTI12666021.node = NNI12666021;
NTI12666015.base = NTI12666021;
NTI12666133.base = NTI12666015;
var NNI2427643 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI2427643.node = NNI2427643;
var NNI2427621 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI2427621.node = NNI2427621;
NTI2427621.base = NTI2427617;
NTI2427643.base = NTI2427621;
NTI13575859.base = NTI11776404;
NTI13590295.base = NTI11776404;
function setConstr() {
        var result = {};
    for (var i = 0; i < arguments.length; ++i) {
      var x = arguments[i];
      if (typeof(x) == "object") {
        for (var j = x[0]; j <= x[1]; ++j) {
          result[j] = true;
        }
      } else {
        result[x] = true;
      }
    }
    return result;
  

  
}
var ConstSet1 = setConstr(13, 10);
var ConstSet2 = setConstr(true);
var ConstSet3 = setConstr(17, 16, 4, 18, 27, 19, 23, 22, 21);
function nimCopy(dest_2705023, src_2705024, ti_2705025) {
  var result_2710219 = null;

    switch (ti_2705025.kind) {
    case 21:
    case 22:
    case 23:
    case 5:
      if (!(isFatPointer_2700401(ti_2705025))) {
      result_2710219 = src_2705024;
      }
      else {
        result_2710219 = [src_2705024[0], src_2705024[1]];
      }
      
      break;
    case 19:
            if (dest_2705023 === null || dest_2705023 === undefined) {
        dest_2705023 = {};
      }
      else {
        for (var key in dest_2705023) { delete dest_2705023[key]; }
      }
      for (var key in src_2705024) { dest_2705023[key] = src_2705024[key]; }
      result_2710219 = dest_2705023;
    
      break;
    case 18:
    case 17:
      if (!((ti_2705025.base == null))) {
      result_2710219 = nimCopy(dest_2705023, src_2705024, ti_2705025.base);
      }
      else {
      if ((ti_2705025.kind == 17)) {
      result_2710219 = (dest_2705023 === null || dest_2705023 === undefined) ? {m_type: ti_2705025} : dest_2705023;
      }
      else {
        result_2710219 = (dest_2705023 === null || dest_2705023 === undefined) ? {} : dest_2705023;
      }
      }
      nimCopyAux(result_2710219, src_2705024, ti_2705025.node);
      break;
    case 24:
    case 4:
    case 27:
    case 16:
            if (src_2705024 === null) {
        result_2710219 = null;
      }
      else {
        if (dest_2705023 === null || dest_2705023 === undefined) {
          dest_2705023 = new Array(src_2705024.length);
        }
        else {
          dest_2705023.length = src_2705024.length;
        }
        result_2710219 = dest_2705023;
        for (var i = 0; i < src_2705024.length; ++i) {
          result_2710219[i] = nimCopy(result_2710219[i], src_2705024[i], ti_2705025.base);
        }
      }
    
      break;
    case 28:
            if (src_2705024 !== null) {
        result_2710219 = src_2705024.slice(0);
      }
    
      break;
    default: 
      result_2710219 = src_2705024;
      break;
    }

  return result_2710219;

}
function makeNimstrLit(c_2690062) {
      var ln = c_2690062.length;
  var result = new Array(ln);
  for (var i = 0; i < ln; ++i) {
    result[i] = c_2690062.charCodeAt(i);
  }
  return result;
  

  
}
function toJSStr(s_2690096) {
                    var Tmp5;
            var Tmp7;

  var result_2690097 = null;

    var res_2690170 = newSeq_2690128((s_2690096).length);
    var i_2690172 = 0;
    var j_2690174 = 0;
    L1: do {
        L2: while (true) {
        if (!(i_2690172 < (s_2690096).length)) break L2;
          var c_2690175 = s_2690096[i_2690172];
          if ((c_2690175 < 128)) {
          res_2690170[j_2690174] = String.fromCharCode(c_2690175);
          i_2690172 += 1;
          }
          else {
            var helper_2690198 = newSeq_2690128(0);
            L3: do {
                L4: while (true) {
                if (!true) break L4;
                  var code_2690199 = c_2690175.toString(16);
                  if (((code_2690199).length == 1)) {
                  helper_2690198.push("%0");;
                  }
                  else {
                  helper_2690198.push("%");;
                  }
                  
                  helper_2690198.push(code_2690199);;
                  i_2690172 += 1;
                    if (((s_2690096).length <= i_2690172)) Tmp5 = true; else {                      Tmp5 = (s_2690096[i_2690172] < 128);                    }                  if (Tmp5) {
                  break L3;
                  }
                  
                  c_2690175 = s_2690096[i_2690172];
                }
            } while(false);
++excHandler;
            Tmp7 = framePtr;
            try {
            res_2690170[j_2690174] = decodeURIComponent(helper_2690198.join(""));
--excHandler;
} catch (EXC) {
 var prevJSError = lastJSError;
 lastJSError = EXC;
 --excHandler;
            framePtr = Tmp7;
            res_2690170[j_2690174] = helper_2690198.join("");
            lastJSError = prevJSError;
            } finally {
            framePtr = Tmp7;
            }
          }
          
          j_2690174 += 1;
        }
    } while(false);
    if (res_2690170.length < j_2690174) { for (var i=res_2690170.length;i<j_2690174;++i) res_2690170.push(null); }
               else { res_2690170.length = j_2690174; };
    result_2690097 = res_2690170.join("");

  return result_2690097;

}
function raiseException(e_2655218, ename_2655219) {
    e_2655218.name = ename_2655219;
    if ((excHandler == 0)) {
    unhandledException(e_2655218);
    }
    
    throw e_2655218;

  
}
function raiseFieldError(f_2685047) {
    raiseException({message: nimCopy(null, f_2685047, NTI2421013), parent: null, m_type: NTI2427651, name: null, trace: [], up: null}, "FieldDefect");

  
}
var ConstSet4 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet5 = setConstr(true);
var ConstSet6 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet7 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet8 = setConstr(true);
var ConstSet9 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet10 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet11 = setConstr(true);
var ConstSet12 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet13 = setConstr(true);
var ConstSet14 = setConstr(2, 1);
var ConstSet15 = setConstr(2, 1);
var ConstSet16 = setConstr(2, 1);
var ConstSet17 = setConstr(2, 1);
var ConstSet18 = setConstr(true);
var ConstSet19 = setConstr(true);
var ConstSet20 = setConstr(9, [11, 13], 32);
function addChar(x_2740031, c_2740032) {
    x_2740031.push(c_2740032);

  
}
var ConstSet21 = setConstr(true);
var ConstSet22 = setConstr(true);
function cstrToNimstr(c_2690079) {
      var ln = c_2690079.length;
  var result = new Array(ln);
  var r = 0;
  for (var i = 0; i < ln; ++i) {
    var ch = c_2690079.charCodeAt(i);

    if (ch < 128) {
      result[r] = ch;
    }
    else {
      if (ch < 2048) {
        result[r] = (ch >> 6) | 192;
      }
      else {
        if (ch < 55296 || ch >= 57344) {
          result[r] = (ch >> 12) | 224;
        }
        else {
            ++i;
            ch = 65536 + (((ch & 1023) << 10) | (c_2690079.charCodeAt(i) & 1023));
            result[r] = (ch >> 18) | 240;
            ++r;
            result[r] = ((ch >> 12) & 63) | 128;
        }
        ++r;
        result[r] = ((ch >> 6) & 63) | 128;
      }
      ++r;
      result[r] = (ch & 63) | 128;
    }
    ++r;
  }
  return result;
  

  
}
function genericReset(x_2715044, ti_2715045) {
  var result_2715046 = null;

    result_2715046 = null;
    switch (ti_2715045.kind) {
    case 21:
    case 22:
    case 23:
    case 5:
      if (isFatPointer_2700401(ti_2715045)) {
              result_2715046 = [null, 0];
      
      }
      
      break;
    case 19:
            result_2715046 = {};
    
      break;
    case 18:
    case 17:
      if ((ti_2715045.kind == 17)) {
      result_2715046 = {m_type: ti_2715045};
      }
      else {
        result_2715046 = {};
      }
      
      break;
    case 24:
    case 27:
            result_2715046 = [];
    
      break;
    case 4:
    case 16:
            result_2715046 = new Array(x_2715044.length);
      for (var i = 0; i < x_2715044.length; ++i) {
        result_2715046[i] = genericReset(x_2715044[i], ti_2715045.base);
      }
    
      break;
    default: 
      break;
    }

  return result_2715046;

}
var ConstSet23 = setConstr(true);
var ConstSet24 = setConstr(true);
var ConstSet25 = setConstr(true);
var ConstSet26 = setConstr(true);
var ConstSet27 = setConstr(true);
var ConstSet28 = setConstr(true);
var ConstSet29 = setConstr(true);
var ConstSet30 = setConstr(true);
var ConstSet31 = setConstr(true);
var ConstSet32 = setConstr(true);
var ConstSet33 = setConstr(true);
var ConstSet34 = setConstr(true);
var ConstSet35 = setConstr(true);
var ConstSet36 = setConstr(true);
var ConstSet37 = setConstr(true);
var ConstSet38 = setConstr(2, 1);
var ConstSet39 = setConstr(true);
var ConstSet40 = setConstr(2, 1);
var ConstSet41 = setConstr(2, 1);
var ConstSet42 = setConstr(2, 1);
var ConstSet43 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet44 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet45 = setConstr(2, 1);
function nimMin(a_2695803, b_2695804) {
    var Tmp1;

  var result_2695805 = 0;

  BeforeRet: do {
    if ((a_2695803 <= b_2695804)) {
    Tmp1 = a_2695803;
    }
    else {
    Tmp1 = b_2695804;
    }
    
    result_2695805 = Tmp1;
    break BeforeRet;
  } while (false);

  return result_2695805;

}
function nimMax(a_2695821, b_2695822) {
    var Tmp1;

  var result_2695823 = 0;

  BeforeRet: do {
    if ((b_2695822 <= a_2695821)) {
    Tmp1 = a_2695821;
    }
    else {
    Tmp1 = b_2695822;
    }
    
    result_2695823 = Tmp1;
    break BeforeRet;
  } while (false);

  return result_2695823;

}
function mnewString(len_2695044) {
        return new Array(len_2695044);
  

  
}
var ConstSet46 = setConstr(13, 10, 47);
var ConstSet47 = setConstr(2, 1);
var ConstSet48 = setConstr([65, 90], [97, 122], 95, 58, [128, 255]);
var ConstSet49 = setConstr([65, 90], [97, 122], [48, 57], 46, 45, 95, 58, [128, 255]);
var ConstSet50 = setConstr([65, 90], [97, 122], 95, 58, [128, 255]);
var ConstSet51 = setConstr([48, 57]);
var ConstSet52 = setConstr(2, 4, 12);
function eqStrings(a_2695222, b_2695223) {
        if (a_2695222 == b_2695223) return true;
    if (a_2695222 === null && b_2695223.length == 0) return true;
    if (b_2695223 === null && a_2695222.length == 0) return true;
    if ((!a_2695222) || (!b_2695223)) return false;
    var alen = a_2695222.length;
    if (alen != b_2695223.length) return false;
    for (var i = 0; i < alen; ++i)
      if (a_2695222[i] != b_2695223[i]) return false;
    return true;
  

  
}
var ConstSet53 = setConstr(39, 34);
var ConstSet54 = setConstr(34, 39, 96, 61, 60, 62, 32, 0, 9, 10, 12, 12);
var ConstSet55 = setConstr(2);
var ConstSet56 = setConstr(2);
var ConstSet57 = setConstr(2);
var ConstSet58 = setConstr([48, 57]);
var ConstSet59 = setConstr(0, 125);
var ConstSet60 = setConstr([48, 57]);
var ConstSet61 = setConstr([65, 90]);
var ConstSet62 = setConstr([97, 122], [65, 90], [48, 57], [128, 255], 95);
var ConstSet63 = setConstr(2);
var ConstSet64 = setConstr(0, 1, 5, 3, 4);
var ConstSet65 = setConstr(0, 1, 5, 3, 4);
    var errorMessages_12451072 = [makeNimstrLit("no error"), makeNimstrLit("\']]>\' expected"), makeNimstrLit("name expected"), makeNimstrLit("\';\' expected"), makeNimstrLit("\'?>\' expected"), makeNimstrLit("\'>\' expected"), makeNimstrLit("\'=\' expected"), makeNimstrLit("\'\"\' or \"\'\" expected"), makeNimstrLit("\'-->\' expected"), makeNimstrLit("attribute value expected")];
var ConstSet66 = setConstr(2);
var ConstSet67 = setConstr([65, 90]);
var ConstSet68 = setConstr([65, 90]);
var ConstSet69 = setConstr(2);
var ConstSet70 = setConstr(0, 1, 5, 3, 4);
var ConstSet71 = setConstr(0, 1, 5, 3, 4);
var ConstSet72 = setConstr(true);
var ConstSet73 = setConstr(true);
var ConstSet74 = setConstr(true);
var ConstSet75 = setConstr(true);
var ConstSet76 = setConstr([65, 90], [97, 122]);
var ConstSet77 = setConstr([48, 57]);
var ConstSet78 = setConstr(true);
var ConstSet79 = setConstr(true);
var ConstSet80 = setConstr(true);
var ConstSet81 = setConstr(true);
var ConstSet82 = setConstr(true);
var ConstSet83 = setConstr(true);
var ConstSet84 = setConstr(true);
var ConstSet85 = setConstr([48, 57]);
var ConstSet86 = setConstr(true);
var ConstSet87 = setConstr(true);
var ConstSet88 = setConstr(true);
var ConstSet89 = setConstr(true);
var ConstSet90 = setConstr(true);
var ConstSet91 = setConstr(true);
var ConstSet92 = setConstr(true);
var ConstSet93 = setConstr(true);
var ConstSet94 = setConstr(true);
var ConstSet95 = setConstr(true);
var ConstSet96 = setConstr(true);
var ConstSet97 = setConstr(true);
var ConstSet98 = setConstr(true);
var ConstSet99 = setConstr(true);
var ConstSet100 = setConstr(true);
var ConstSet101 = setConstr(9, [11, 12], 32);
var ConstSet102 = setConstr(true);
var ConstSet103 = setConstr(true);
var ConstSet104 = setConstr(true);
var ConstSet105 = setConstr(true);
var ConstSet106 = setConstr(true);
var ConstSet107 = setConstr(true);
var ConstSet108 = setConstr(true);
var ConstSet109 = setConstr(true);
var ConstSet110 = setConstr(9, 10, 12);
var ConstSet111 = setConstr(true);
var ConstSet112 = setConstr(true);
var ConstSet113 = setConstr(true);
var ConstSet114 = setConstr(true);
var ConstSet115 = setConstr(true);
var ConstSet116 = setConstr(true);
var ConstSet117 = setConstr(40, 91, 123, 58);
var ConstSet118 = setConstr([97, 122], [65, 90], [48, 57], 45, 95, 58, 46);
var ConstSet119 = setConstr(true);
var ConstSet120 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet121 = setConstr(true);
var ConstSet122 = setConstr(true);
var ConstSet123 = setConstr([48, 57]);
var ConstSet124 = setConstr(true);
var ConstSet125 = setConstr(true);
var ConstSet126 = setConstr(true);
var ConstSet127 = setConstr(true);
function reprEnum(e_2780272, typ_2780273) {
  var result_2780274 = [];

    var tmp_2780275 = false;
    var item_2780276 = typ_2780273.node.sons[e_2780272];
    tmp_2780275 = item_2780276 !== undefined
    if (tmp_2780275) {
    result_2780274 = nimCopy(null, makeNimstrLit(item_2780276.name), NTI2421013);
    }
    else {
      result_2780274 = nimCopy(null, (cstrToNimstr((e_2780272)+"") || []).concat(makeNimstrLit(" (invalid data!)") || []), NTI2421013);
    }
    

  return result_2780274;

}
var ConstSet128 = setConstr(true);
var ConstSet129 = setConstr(true);
var ConstSet130 = setConstr(true);
var ConstSet131 = setConstr(true);
var ConstSet132 = setConstr(true);
if (!Math.trunc) {
  Math.trunc = function(v) {
    v = +v;
    if (!isFinite(v)) return v;
    return (v - v % 1) || (v < 0 ? -0 : v === 0 ? v : 0);
  };
}

var objectID_11605031 = [0];
function input_14100015() {
  var result_14100017 = null;

    result_14100017 = document.getElementById("input").value;

  return result_14100017;

}
function paragraphIfText_11776729(elem_11776731) {
    var Tmp1;

  var result_11776732 = null;

    if (elem_11776731.isText) {
    Tmp1 = {isText: false, tag: 1, content: [elem_11776731], str: null, attrs: ({data: [], counter: 0, first: 0, last: 0})};
    }
    else {
    Tmp1 = elem_11776731;
    }
    
    result_11776732 = Tmp1;

  return result_11776732;

}
function isFatPointer_2700401(ti_2700403) {
  var result_2700404 = false;

  BeforeRet: do {
    result_2700404 = !((ConstSet3[ti_2700403.base.kind] != undefined));
    break BeforeRet;
  } while (false);

  return result_2700404;

}
function nimCopyAux(dest_2705028, src_2705029, n_2705031) {
    switch (n_2705031.kind) {
    case 0:
      break;
    case 1:
            dest_2705028[n_2705031.offset] = nimCopy(dest_2705028[n_2705031.offset], src_2705029[n_2705031.offset], n_2705031.typ);
    
      break;
    case 2:
          for (var i = 0; i < n_2705031.sons.length; i++) {
      nimCopyAux(dest_2705028, src_2705029, n_2705031.sons[i]);
    }
    
      break;
    case 3:
            dest_2705028[n_2705031.offset] = nimCopy(dest_2705028[n_2705031.offset], src_2705029[n_2705031.offset], n_2705031.typ);
      for (var i = 0; i < n_2705031.sons.length; ++i) {
        nimCopyAux(dest_2705028, src_2705029, n_2705031.sons[i][1]);
      }
    
      break;
    }

  
}
function add_2592211(x_2592214, x_2592214_Idx, y_2592215) {
          if (x_2592214[x_2592214_Idx] === null) { x_2592214[x_2592214_Idx] = []; }
      var off = x_2592214[x_2592214_Idx].length;
      x_2592214[x_2592214_Idx].length += y_2592215.length;
      for (var i = 0; i < y_2592215.length; ++i) {
        x_2592214[x_2592214_Idx][off+i] = y_2592215.charCodeAt(i);
      }
    

  
}
function newSeq_2690128(len_2690131) {
  var result_2690133 = [];

    result_2690133 = new Array(len_2690131); for (var i=0;i<len_2690131;++i) {result_2690133[i]=null;}
  return result_2690133;

}
function unhandledException(e_2650059) {
    var buf_2650060 = [[]];
    if (!(((e_2650059.message).length == 0))) {
    buf_2650060[0].push.apply(buf_2650060[0], makeNimstrLit("Error: unhandled exception: "));;
    buf_2650060[0].push.apply(buf_2650060[0], e_2650059.message);;
    }
    else {
    buf_2650060[0].push.apply(buf_2650060[0], makeNimstrLit("Error: unhandled exception"));;
    }
    
    buf_2650060[0].push.apply(buf_2650060[0], makeNimstrLit(" ["));;
    add_2592211(buf_2650060, 0, e_2650059.name);
    buf_2650060[0].push.apply(buf_2650060[0], makeNimstrLit("]\x0A"));;
    var cbuf_2655201 = toJSStr(buf_2650060[0]);
    framePtr = null;
      if (typeof(Error) !== "undefined") {
    throw new Error(cbuf_2655201);
  }
  else {
    throw cbuf_2655201;
  }
  

  
}
function anyNext_11985020(parser_11985022, offset_11985023) {
  var result_11985024 = false;

    result_11985024 = ((parser_11985022.pos + offset_11985023) < (parser_11985022.str).length);

  return result_11985024;

}
function peekMatch_11995014(parser_11995016, pat_11995018, offset_11995019) {
    var Tmp1;

  var result_11995020 = false;

    if (!anyNext_11985020(parser_11995016, offset_11995019)) Tmp1 = false; else {      Tmp1 = (pat_11995018[parser_11995016.str.charCodeAt((parser_11995016.pos + offset_11995019))] != undefined);    }    result_11995020 = Tmp1;

  return result_11995020;

}
function nextMatch_12035286(parser_12035288, parser_12035288_Idx, pat_12035290, offset_12035291) {
  var result_12035292 = false;

    result_12035292 = peekMatch_11995014(parser_12035288[parser_12035288_Idx], pat_12035290, offset_12035291);
    if (result_12035292) {
    parser_12035288[parser_12035288_Idx].pos += (offset_12035291 + 1);
    }
    

  return result_12035292;

}
function newElem_11776665(tag_11776667, content_11776684) {
  var result_11776685 = null;

    result_11776685 = {isText: false, tag: tag_11776667, content: nimCopy(null, content_11776684, NTI11776668), str: null, attrs: ({data: [], counter: 0, first: 0, last: 0})};

  return result_11776685;

}
function newStr_11776616(s_11776618) {
  var result_11776619 = null;

    result_11776619 = {isText: true, str: s_11776618, tag: 0, attrs: ({data: [], counter: 0, first: 0, last: 0}), content: []};

  return result_11776619;

}
function HEX5BHEX5D_11776075(c_11776077, ind_11776082) {
  var result_11776083 = null;

    result_11776083 = c_11776077.substring(ind_11776082.a, (ind_11776082.b + 1));

  return result_11776083;

}
function HEX2EHEX2E_4625220(a_4625225, b_4625227) {
  var result_4625229 = ({a: 0, b: 0});

    nimCopy(result_4625229, {a: a_4625225, b: b_4625227}, NTI3520020);

  return result_4625229;

}
function peekMatch_12025020(parser_12025022, pat_12025023, offset_12025024) {
    var Tmp1;

  var result_12025025 = false;

    if (!anyNext_11985020(parser_12025022, ((offset_12025024 + (pat_12025023).length) - 1))) Tmp1 = false; else {      Tmp1 = (HEX5BHEX5D_11776075(parser_12025022.str, HEX2EHEX2E_4625220((parser_12025022.pos + offset_12025024), (((parser_12025022.pos + offset_12025024) + (pat_12025023).length) - 1))) == toJSStr(pat_12025023));    }    result_12025025 = Tmp1;

  return result_12025025;

}
function nextMatch_12035365(parser_12035367, parser_12035367_Idx, pat_12035368, offset_12035369) {
  var result_12035370 = false;

    result_12035370 = peekMatch_12025020(parser_12035367[parser_12035367_Idx], pat_12035368, offset_12035369);
    if (result_12035370) {
    parser_12035367[parser_12035367_Idx].pos += (offset_12035369 + (pat_12035368).length);
    }
    

  return result_12035370;

}
function anyPrev_11985038(parser_11985040, offset_11985041) {
  var result_11985042 = false;

    result_11985042 = (0 <= ((parser_11985040.pos + offset_11985041) - 1));

  return result_11985042;

}
function peekPrevMatch_13255001(parser_13255004, pat_13255005, offset_13255006) {
  var result_13255007 = false;

    result_13255007 = (anyPrev_11985038(parser_13255004, offset_13255006) && peekMatch_11995014(parser_13255004, pat_13255005, (offset_13255006 - 1)));

  return result_13255007;

}
function add_13295003(x_13295006, x_13295006_Idx) {
    x_13295006[x_13295006_Idx] += "*";;

  
}
function add_13310003(x_13310006, x_13310006_Idx) {
    x_13310006[x_13310006_Idx] += "_";;

  
}
function peekMatch_11990024(parser_11990026, pat_11990027, offset_11990028) {
    var Tmp1;

  var result_11990029 = false;

    if (!anyNext_11985020(parser_11990026, offset_11990028)) Tmp1 = false; else {      Tmp1 = (parser_11990026.str.charCodeAt((parser_11990026.pos + offset_11990028)) == pat_11990027);    }    result_11990029 = Tmp1;

  return result_11990029;

}
function nextMatch_12035261(parser_12035263, parser_12035263_Idx, pat_12035264, offset_12035265) {
  var result_12035266 = false;

    result_12035266 = peekMatch_11990024(parser_12035263[parser_12035263_Idx], pat_12035264, offset_12035265);
    if (result_12035266) {
    parser_12035263[parser_12035263_Idx].pos += (offset_12035265 + 1);
    }
    

  return result_12035266;

}
function peekMatch_12005020(parser_12005022, pat_12005023, offset_12005024, len_12005025) {
    var Tmp1;

  var result_12005026 = false;

  BeforeRet: do {
    if (anyNext_11985020(parser_12005022, ((offset_12005024 + len_12005025) - 1))) {
    L2: do {
      var i_12005034 = 0;
      var colontmp__14100168 = 0;
      colontmp__14100168 = len_12005025;
      var i_14100169 = 0;
      L3: do {
          L4: while (true) {
          if (!(i_14100169 < colontmp__14100168)) break L4;
            i_12005034 = i_14100169;
            if (!((parser_12005022.str.charCodeAt((parser_12005022.pos + (offset_12005024 + i_12005034))) == pat_12005023))) {
            result_12005026 = false;
            break BeforeRet;
            }
            
            i_14100169 += 1;
          }
      } while(false);
    } while(false);
    Tmp1 = true;
    }
    else {
    Tmp1 = false;
    }
    
    result_12005026 = Tmp1;
  } while (false);

  return result_12005026;

}
function nextMatch_12035312(parser_12035314, parser_12035314_Idx, pat_12035315, offset_12035316, len_12035317) {
  var result_12035318 = false;

    result_12035318 = peekMatch_12005020(parser_12035314[parser_12035314_Idx], pat_12035315, offset_12035316, len_12035317);
    if (result_12035318) {
    parser_12035314[parser_12035314_Idx].pos += (offset_12035316 + len_12035317);
    }
    

  return result_12035318;

}
function parseCodeBlockStr_13175021(parser_13175023, parser_13175023_Idx, delimChar_13175024) {
              var Tmp8;

  var result_13175025 = null;

  BeforeRet: do {
    result_13175025 = "";
    var delimLen_13175027 = 3;
    L1: do {
        L2: while (true) {
        if (!nextMatch_12035261(parser_13175023, parser_13175023_Idx, delimChar_13175024, 0)) break L2;
          delimLen_13175027 += 1;
        }
    } while(false);
    L3: do {
        L4: while (true) {
        if (!nextMatch_12035286(parser_13175023, parser_13175023_Idx, ConstSet12, 0)) break L4;
        }
    } while(false);
    L5: do {
      var ch_13175034 = 0;
      L6: do {
          L7: while (true) {
          if (!(parser_13175023[parser_13175023_Idx].pos < (parser_13175023[parser_13175023_Idx].str).length)) break L7;
            ch_13175034 = parser_13175023[parser_13175023_Idx].str.charCodeAt((parser_13175023[parser_13175023_Idx].pos + 0));
            if (nextMatch_12035312(parser_13175023, parser_13175023_Idx, delimChar_13175024, 0, delimLen_13175027)) {
            parser_13175023[parser_13175023_Idx].pos -= 1;
            break BeforeRet;
            }
            else {
              switch (ch_13175034) {
              case 62:
                Tmp8 = "&gt;";
                break;
              case 60:
                Tmp8 = "&lt;";
                break;
              case 38:
                Tmp8 = "&amp;";
                break;
              default: 
                Tmp8 = String.fromCharCode(ch_13175034);
                break;
              }
            result_13175025 += Tmp8;;
            }
            
            parser_13175023[parser_13175023_Idx].pos += 1;
          }
      } while(false);
    } while(false);
  } while (false);

  return result_13175025;

}
function parseCodeBlock_13180014(parser_13180016, parser_13180016_Idx, delimChar_13180017) {
  var result_13180018 = null;

    result_13180018 = newElem_11776665(17, [newStr_11776616(parseCodeBlockStr_13175021(parser_13180016, parser_13180016_Idx, delimChar_13180017))]);

  return result_13180018;

}
function add_13220002(x_13220007, x_13220007_Idx, y_13220009) {
    var Tmp1;

    var xl_13220015 = (x_13220007[x_13220007_Idx]).length;
    if (x_13220007[x_13220007_Idx].length < (Tmp1 = (xl_13220015 + (y_13220009).length), Tmp1)) { for (var i=x_13220007[x_13220007_Idx].length;i<Tmp1;++i) x_13220007[x_13220007_Idx].push(null); }
               else { x_13220007[x_13220007_Idx].length = Tmp1; };
    L2: do {
      var i_13220040 = 0;
      var colontmp__14100173 = 0;
      colontmp__14100173 = ((y_13220009).length-1);
      var res_14100174 = 0;
      L3: do {
          L4: while (true) {
          if (!(res_14100174 <= colontmp__14100173)) break L4;
            i_13220040 = res_14100174;
            x_13220007[x_13220007_Idx][(xl_13220015 + i_13220040)] = y_13220009[i_13220040];
            res_14100174 += 1;
          }
      } while(false);
    } while(false);

  
}
function parseLink_13465032(parser_13465034, parser_13465034_Idx, failOnNewline_13465035) {
                var Tmp6;

  var result_13465040 = {Field0: false, Field1: [], Field2: []};

  BeforeRet: do {
    var state_13465045 = 0;
    var delim_13465046 = 0;
    var escaped_13465047 = false;
    var openparens_13465049 = 1;
    L1: do {
        L2: while (true) {
        if (!nextMatch_12035286(parser_13465034, parser_13465034_Idx, ConstSet20, 0)) break L2;
        }
    } while(false);
    L3: do {
      var ch_13465059 = 0;
      L4: do {
          L5: while (true) {
          if (!(parser_13465034[parser_13465034_Idx].pos < (parser_13465034[parser_13465034_Idx].str).length)) break L5;
            ch_13465059 = parser_13465034[parser_13465034_Idx].str.charCodeAt((parser_13465034[parser_13465034_Idx].pos + 0));
            switch (state_13465045) {
            case 0:
              switch (ch_13465059) {
              case 9:
              case 11:
              case 12:
              case 13:
              case 32:
                state_13465045 = 1;
                break;
              case 10:
                result_13465040.Field0 = failOnNewline_13465035;
                break BeforeRet;
                break;
              case 40:
                openparens_13465049 += 1;
                addChar(result_13465040.Field1, 40);;
                break;
              case 41:
                openparens_13465049 -= 1;
                if ((openparens_13465049 == 0)) {
                result_13465040.Field0 = true;
                break BeforeRet;
                }
                else {
                addChar(result_13465040.Field1, 41);;
                }
                
                break;
              default: 
                addChar(result_13465040.Field1, ch_13465059);;
                break;
              }
              break;
            case 1:
              switch (ch_13465059) {
              case 34:
              case 39:
              case 60:
                state_13465045 = 2;
                if ((ch_13465059 == 60)) {
                Tmp6 = 62;
                }
                else {
                Tmp6 = ch_13465059;
                }
                
                delim_13465046 = Tmp6;
                break;
              case 41:
                result_13465040.Field0 = true;
                break BeforeRet;
                break;
              case 10:
                result_13465040.Field0 = failOnNewline_13465035;
                break BeforeRet;
                break;
              case 9:
              case 11:
              case 12:
              case 13:
              case 32:
                break;
              default: 
                parser_13465034[parser_13465034_Idx].pos -= 1;
                state_13465045 = 3;
                delim_13465046 = 41;
                break;
              }
              break;
            case 2:
              if (!(escaped_13465047)) {
              if ((ch_13465059 == 92)) {
              escaped_13465047 = true;
              }
              else {
              if ((ch_13465059 == delim_13465046)) {
              if ((delim_13465046 == 41)) {
              parser_13465034[parser_13465034_Idx].pos -= 1;
              }
              
              state_13465045 = 3;
              }
              else {
              if ((ch_13465059 == 10)) {
              result_13465040.Field0 = failOnNewline_13465035;
              break BeforeRet;
              }
              else {
              addChar(result_13465040.Field2, ch_13465059);;
              }
              }}
              }
              else {
                if (!((setConstr(92, delim_13465046)[ch_13465059] != undefined))) {
                addChar(result_13465040.Field2, 92);;
                }
                
                addChar(result_13465040.Field2, ch_13465059);;
                escaped_13465047 = false;
              }
              
              break;
            case 3:
              switch (ch_13465059) {
              case 41:
                result_13465040.Field0 = true;
                break BeforeRet;
                break;
              case 10:
                result_13465040.Field0 = failOnNewline_13465035;
                break BeforeRet;
                break;
              case 9:
              case 11:
              case 12:
              case 13:
              case 32:
                break;
              default: 
                result_13465040.Field0 = false;
                break BeforeRet;
                break;
              }
              break;
            }
            parser_13465034[parser_13465034_Idx].pos += 1;
          }
      } while(false);
    } while(false);
    result_13465040.Field0 = failOnNewline_13465035;
  } while (false);

  return result_13465040;

}
function nextPowerOfTwo_3715014(x_3715016) {
  var result_3715017 = 0;

    result_3715017 = (x_3715016 - 1);
    result_3715017 = (result_3715017 | (result_3715017 >> 16));
    result_3715017 = (result_3715017 | (result_3715017 >> 8));
    result_3715017 = (result_3715017 | (result_3715017 >> 4));
    result_3715017 = (result_3715017 | (result_3715017 >> 2));
    result_3715017 = (result_3715017 | (result_3715017 >> 1));
    result_3715017 += (1 + ((x_3715016 <= 0) ? 1:0));

  return result_3715017;

}
function slotsNeeded_11680048(count_11680050) {
  var result_11680051 = 0;

    result_11680051 = nextPowerOfTwo_3715014((Math.trunc((count_11680050 * 3) / 2) + 4));

  return result_11680051;

}
function imul_11616082(a_11616084, b_11616085) {
  var result_11616086 = 0;

    var mask_11616087 = 65535;
    var aHi_11616096 = (((a_11616084 >>> 0) >>> 16) & mask_11616087);
    var aLo_11616097 = (a_11616084 & mask_11616087);
    var bHi_11616106 = (((b_11616085 >>> 0) >>> 16) & mask_11616087);
    var bLo_11616107 = (b_11616085 & mask_11616087);
    result_11616086 = ((((aLo_11616097 * bLo_11616107) >>> 0) + (((((aHi_11616096 * bLo_11616107) >>> 0) + ((aLo_11616097 * bHi_11616106) >>> 0)) >>> 0) << 16)) >>> 0);

  return result_11616086;

}
function rotl32_11616201(x_11616203, r_11616204) {
  var result_11616205 = 0;

    result_11616205 = ((x_11616203 << r_11616204) | ((x_11616203 >>> 0) >>> (32 - r_11616204)));

  return result_11616205;

}
function murmurHash_11616229(x_11616232) {
  var result_11616233 = 0;

  BeforeRet: do {
    var size_11616243 = (x_11616232).length;
    var stepSize_11616245 = 4;
    var n_11616246 = Math.trunc(size_11616243 / stepSize_11616245);
    var h1_11616247 = 0;
    var i_11616249 = 0;
    L1: do {
        L2: while (true) {
        if (!(i_11616249 < (n_11616246 * stepSize_11616245))) break L2;
          var k1_11616250 = 0;
          var j_11616251 = stepSize_11616245;
          L3: do {
              L4: while (true) {
              if (!(0 < j_11616251)) break L4;
                j_11616251 -= 1;
                k1_11616250 = ((k1_11616250 << 8) | x_11616232[(i_11616249 + j_11616251)]);
              }
          } while(false);
          i_11616249 += stepSize_11616245;
          k1_11616250 = imul_11616082(k1_11616250, 3432918353);
          k1_11616250 = rotl32_11616201(k1_11616250, 15);
          k1_11616250 = imul_11616082(k1_11616250, 461845907);
          h1_11616247 = (h1_11616247 ^ k1_11616250);
          h1_11616247 = rotl32_11616201(h1_11616247, 13);
          h1_11616247 = ((((h1_11616247 * 5) >>> 0) + 3864292196) >>> 0);
        }
    } while(false);
    var k1_11620207 = 0;
    var rem_11620208 = Math.trunc(size_11616243 % stepSize_11616245);
    L5: do {
        L6: while (true) {
        if (!(0 < rem_11620208)) break L6;
          rem_11620208 -= 1;
          k1_11620207 = ((k1_11620207 << 8) | x_11616232[(i_11616249 + rem_11620208)]);
        }
    } while(false);
    k1_11620207 = imul_11616082(k1_11620207, 3432918353);
    k1_11620207 = rotl32_11616201(k1_11620207, 15);
    k1_11620207 = imul_11616082(k1_11620207, 461845907);
    h1_11616247 = (h1_11616247 ^ k1_11620207);
    h1_11616247 = (h1_11616247 ^ size_11616243);
    h1_11616247 = (h1_11616247 ^ ((h1_11616247 >>> 0) >>> 16));
    h1_11616247 = imul_11616082(h1_11616247, 2246822507);
    h1_11616247 = (h1_11616247 ^ ((h1_11616247 >>> 0) >>> 13));
    h1_11616247 = imul_11616082(h1_11616247, 3266489909);
    h1_11616247 = (h1_11616247 ^ ((h1_11616247 >>> 0) >>> 16));
    result_11616233 = (h1_11616247|0);
    break BeforeRet;
  } while (false);

  return result_11616233;

}
function hash_11655814(x_11655816) {
  var result_11655817 = 0;

    var xx_11656201 = cstrToNimstr(x_11655816);
    result_11655817 = murmurHash_11616229((xx_11656201.slice(0, ((xx_11656201).length-1)+1)));

  return result_11655817;

}
function isFilled_11676218(hcode_11676220) {
  var result_11676221 = false;

    result_11676221 = !((hcode_11676220 == 0));

  return result_11676221;

}
function nextTry_11680014(h_11680016, maxHash_11680017) {
  var result_11680018 = 0;

    result_11680018 = ((h_11680016 + 1) & maxHash_11680017);

  return result_11680018;

}
function rawGet_11805621(t_11805626, key_11805627, hc_11805628, hc_11805628_Idx) {
            var Tmp3;

  var result_11805629 = 0;

  BeforeRet: do {
    hc_11805628[hc_11805628_Idx] = hash_11655814(key_11805627);
    if ((hc_11805628[hc_11805628_Idx] == 0)) {
    hc_11805628[hc_11805628_Idx] = 314159265;
    }
    
    if (((t_11805626.data).length == 0)) {
    result_11805629 = -1;
    break BeforeRet;
    }
    
    var h_11815138 = (hc_11805628[hc_11805628_Idx] & ((t_11805626.data).length-1));
    L1: do {
        L2: while (true) {
        if (!isFilled_11676218(t_11805626.data[h_11815138].Field0)) break L2;
            if (!(t_11805626.data[h_11815138].Field0 == hc_11805628[hc_11805628_Idx])) Tmp3 = false; else {              Tmp3 = (t_11805626.data[h_11815138].Field2 == key_11805627);            }          if (Tmp3) {
          result_11805629 = h_11815138;
          break BeforeRet;
          }
          
          h_11815138 = nextTry_11680014(h_11815138, ((t_11805626.data).length-1));
        }
    } while(false);
    result_11805629 = (-1 - h_11815138);
  } while (false);

  return result_11805629;

}
function mustRehash_11830601(t_11830604) {
  var result_11830605 = false;

    result_11830605 = ((((t_11830604.data).length * 2) < (t_11830604.counter * 3)) || (((t_11830604.data).length - t_11830604.counter) < 4));

  return result_11830605;

}
function rawInsert_11856317(t_11856323, data_11856326, data_11856326_Idx, key_11856327, val_11856329, hc_11856330, h_11856331) {
    data_11856326[data_11856326_Idx][h_11856331].Field2 = key_11856327;
    data_11856326[data_11856326_Idx][h_11856331].Field3 = val_11856329;
    data_11856326[data_11856326_Idx][h_11856331].Field0 = hc_11856330;
    data_11856326[data_11856326_Idx][h_11856331].Field1 = -1;
    if ((t_11856323.first < 0)) {
    t_11856323.first = h_11856331;
    }
    
    if ((0 <= t_11856323.last)) {
    data_11856326[data_11856326_Idx][t_11856323.last].Field1 = h_11856331;
    }
    
    t_11856323.last = h_11856331;

  
}
function enlarge_11855180(t_11855186) {
          var Tmp6;
          var Tmp7;

    var n_11855194 = [];
    n_11855194 = new Array(((t_11855186.data).length * 2)); for (var i=0;i<((t_11855186.data).length * 2);++i) {n_11855194[i]={Field0: 0, Field1: 0, Field2: null, Field3: null};}    var h_11855333 = t_11855186.first;
    t_11855186.first = -1;
    t_11855186.last = -1;
    var Tmp1 = t_11855186.data; t_11855186.data = n_11855194; n_11855194 = Tmp1;    L2: do {
        L3: while (true) {
        if (!(0 <= h_11855333)) break L3;
          var nxt_11855489 = n_11855194[h_11855333].Field1;
          var eh_11855638 = n_11855194[h_11855333].Field0;
          if (isFilled_11676218(eh_11855638)) {
          var j_11855645 = (eh_11855638 & ((t_11855186.data).length-1));
          L4: do {
              L5: while (true) {
              if (!isFilled_11676218(t_11855186.data[j_11855645].Field0)) break L5;
                j_11855645 = nextTry_11680014(j_11855645, ((t_11855186.data).length-1));
              }
          } while(false);
          Tmp6 = n_11855194[h_11855333].Field2;
          n_11855194[h_11855333].Field2 = genericReset(n_11855194[h_11855333].Field2, NTI2421015);
          Tmp7 = n_11855194[h_11855333].Field3;
          n_11855194[h_11855333].Field3 = genericReset(n_11855194[h_11855333].Field3, NTI2421015);
          rawInsert_11856317(t_11855186, t_11855186, "data", Tmp6, Tmp7, n_11855194[h_11855333].Field0, j_11855645);
          }
          
          h_11855333 = nxt_11855489;
        }
    } while(false);

  
}
function rawGetKnownHC_11857133(t_11857138, key_11857139, hc_11857140) {
  var result_11857141 = 0;

  BeforeRet: do {
    if (((t_11857138.data).length == 0)) {
    result_11857141 = -1;
    break BeforeRet;
    }
    
    var h_11860138 = (hc_11857140 & ((t_11857138.data).length-1));
    L1: do {
        L2: while (true) {
        if (!isFilled_11676218(t_11857138.data[h_11860138].Field0)) break L2;
          if (((t_11857138.data[h_11860138].Field0 == hc_11857140) && (t_11857138.data[h_11860138].Field2 == key_11857139))) {
          result_11857141 = h_11860138;
          break BeforeRet;
          }
          
          h_11860138 = nextTry_11680014(h_11860138, ((t_11857138.data).length-1));
        }
    } while(false);
    result_11857141 = (-1 - h_11860138);
  } while (false);

  return result_11857141;

}
function HEX5BHEX5DHEX3D_11790186(t_11790192, key_11790193, val_11790195) {
    if (((t_11790192.data).length == 0)) {
    var correctSizeHEX60gensym4_11800001 = slotsNeeded_11680048(32);
    t_11790192.counter = 0;
    t_11790192.data = new Array(correctSizeHEX60gensym4_11800001); for (var i=0;i<correctSizeHEX60gensym4_11800001;++i) {t_11790192.data[i]={Field0: 0, Field1: 0, Field2: null, Field3: null};}    t_11790192.first = -1;
    t_11790192.last = -1;
    }
    
    var hc_11805601 = [0];
    var index_11815603 = rawGet_11805621(t_11790192, key_11790193, hc_11805601, 0);
    if ((0 <= index_11815603)) {
    t_11790192.data[index_11815603].Field3 = val_11790195;
    }
    else {
      if (((t_11790192.data).length == 0)) {
      var correctSizeHEX60gensym9_11825001 = slotsNeeded_11680048(32);
      t_11790192.counter = 0;
      t_11790192.data = new Array(correctSizeHEX60gensym9_11825001); for (var i=0;i<correctSizeHEX60gensym9_11825001;++i) {t_11790192.data[i]={Field0: 0, Field1: 0, Field2: null, Field3: null};}      t_11790192.first = -1;
      t_11790192.last = -1;
      }
      
      if (mustRehash_11830601(t_11790192)) {
      enlarge_11855180(t_11790192);
      index_11815603 = rawGetKnownHC_11857133(t_11790192, key_11790193, hc_11805601[0]);
      }
      
      index_11815603 = (-1 - index_11815603);
      rawInsert_11856317(t_11790192, t_11790192, "data", key_11790193, val_11790195, hc_11805601[0], index_11815603);
      t_11790192.counter += 1;
    }
    

  
}
function attr_11790071(elem_11790073, key_11790074, val_11790075) {
    var Tmp1;

    var Tmp1 = elem_11790073;
    if (ConstSet23[Tmp1.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'attrs\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    HEX5BHEX5DHEX3D_11790186(Tmp1.attrs, key_11790074, val_11790075);

  
}
function find_11890134(a_11890138, item_11890139) {
  var result_11890140 = 0;

  BeforeRet: do {
    result_11890140 = 0;
    L1: do {
      var i_11890173 = null;
      var i_11890173_Idx = 0;
      var i_14100204 = 0;
      L2: do {
          L3: while (true) {
          if (!(i_14100204 < (a_11890138).length)) break L3;
            i_11890173 = a_11890138; i_11890173_Idx = i_14100204;
            if ((i_11890173[i_11890173_Idx] == item_11890139)) {
            break BeforeRet;
            }
            
            result_11890140 += 1;
            i_14100204 += 1;
          }
      } while(false);
    } while(false);
    result_11890140 = -1;
  } while (false);

  return result_11890140;

}
function contains_11890127(a_11890131, item_11890132) {
  var result_11890133 = false;

  BeforeRet: do {
    result_11890133 = (0 <= find_11890134(a_11890131, item_11890132));
    break BeforeRet;
  } while (false);

  return result_11890133;

}
function HEX5BHEX5D_11776122(c_11776124, ind_11776137) {
  var result_11776138 = null;

    result_11776138 = c_11776124.substring(((c_11776124).length - ind_11776137.a), (((c_11776124).length - ind_11776137.b) + 1));

  return result_11776138;

}
function HEX2EHEX2E_11890001(a_11890006, b_11890008) {
  var result_11890010 = ({a: 0, b: 0});

    nimCopy(result_11890010, {a: a_11890006, b: b_11890008}, NTI11776134);

  return result_11890010;

}
function del_11860974(t_11860980, key_11860981) {
            var Tmp4;
            var Tmp5;

  BeforeRet: do {
    if ((t_11860980.counter == 0)) {
    break BeforeRet;
    }
    
    var n_11860989 = [];
    n_11860989 = new Array((t_11860980.data).length); for (var i=0;i<(t_11860980.data).length;++i) {n_11860989[i]={Field0: 0, Field1: 0, Field2: null, Field3: null};}    var h_11861128 = t_11860980.first;
    t_11860980.first = -1;
    t_11860980.last = -1;
    var Tmp1 = t_11860980.data; t_11860980.data = n_11860989; n_11860989 = Tmp1;    var resHEX60gensym17_11865001 = 0;
    resHEX60gensym17_11865001 = hash_11655814(key_11860981);
    if ((resHEX60gensym17_11865001 == 0)) {
    resHEX60gensym17_11865001 = 314159265;
    }
    
    var hc_11870002 = resHEX60gensym17_11865001;
    L2: do {
        L3: while (true) {
        if (!(0 <= h_11861128)) break L3;
          var nxt_11870151 = n_11860989[h_11861128].Field1;
          if (isFilled_11676218(n_11860989[h_11861128].Field0)) {
          if (((n_11860989[h_11861128].Field0 == hc_11870002) && (n_11860989[h_11861128].Field2 == key_11860981))) {
          t_11860980.counter -= 1;
          }
          else {
            var j_11870925 = (-1 - rawGetKnownHC_11857133(t_11860980, n_11860989[h_11861128].Field2, n_11860989[h_11861128].Field0));
            Tmp4 = n_11860989[h_11861128].Field2;
            n_11860989[h_11861128].Field2 = genericReset(n_11860989[h_11861128].Field2, NTI2421015);
            Tmp5 = n_11860989[h_11861128].Field3;
            n_11860989[h_11861128].Field3 = genericReset(n_11860989[h_11861128].Field3, NTI2421015);
            rawInsert_11856317(t_11860980, t_11860980, "data", Tmp4, Tmp5, n_11860989[h_11861128].Field0, j_11870925);
          }
          
          }
          
          h_11861128 = nxt_11870151;
        }
    } while(false);
  } while (false);

  
}
function pop_11945119(t_11945125, key_11945126, val_11945128, val_11945128_Idx) {
    var Tmp1;

  var result_11945129 = false;

    var hc_11945130 = [0];
    var index_11945159 = rawGet_11805621(t_11945125, key_11945126, hc_11945130, 0);
    result_11945129 = (0 <= index_11945159);
    if (result_11945129) {
    Tmp1 = t_11945125.data[index_11945159].Field3;
    t_11945125.data[index_11945159].Field3 = genericReset(t_11945125.data[index_11945159].Field3, NTI2421015);
    val_11945128[val_11945128_Idx] = Tmp1;
    del_11860974(t_11945125, key_11945126);
    }
    

  return result_11945129;

}
function setLink_11871472(elem_11871474, link_11871475) {
    var Tmp1;
        var Tmp2;
        var Tmp3;
          var Tmp4;
      var Tmp5;
        var Tmp6;
        var Tmp7;
          var Tmp8;
      var Tmp9;
        var Tmp10;
        var Tmp11;
      var Tmp12;

    var link_11871476 = link_11871475.trim();
    var Tmp1 = elem_11871474;
    if (ConstSet22[Tmp1.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    switch (Tmp1.tag) {
    case 23:
      attr_11790071(elem_11871474, "href", link_11871476);
      break;
    case 21:
        if (!(4 <= (link_11871476).length)) Tmp3 = false; else {          Tmp3 = contains_11890127([".mp4", ".m4v", ".mov", ".ogv"], HEX5BHEX5D_11776122(link_11871476, HEX2EHEX2E_11890001(4, 1)));        }        if (Tmp3) Tmp2 = true; else {          if (!(5 <= (link_11871476).length)) Tmp4 = false; else {            Tmp4 = (HEX5BHEX5D_11776122(link_11871476, HEX2EHEX2E_11890001(5, 1)) == ".webm");          }          Tmp2 = Tmp4;        }      if (Tmp2) {
      var Tmp5 = elem_11871474;
      if (ConstSet24[Tmp5.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp5.tag = 24;
      }
      else {
        if (!(4 <= (link_11871476).length)) Tmp7 = false; else {          Tmp7 = contains_11890127([".mp3", ".oga", ".ogg", ".wav"], HEX5BHEX5D_11776122(link_11871476, HEX2EHEX2E_11890001(4, 1)));        }        if (Tmp7) Tmp6 = true; else {          if (!(5 <= (link_11871476).length)) Tmp8 = false; else {            Tmp8 = (HEX5BHEX5D_11776122(link_11871476, HEX2EHEX2E_11890001(5, 1)) == ".flac");          }          Tmp6 = Tmp8;        }      if (Tmp6) {
      var Tmp9 = elem_11871474;
      if (ConstSet25[Tmp9.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp9.tag = 25;
      }
      }
        var Tmp10 = elem_11871474;
        if (ConstSet26[Tmp10.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      if (!((Tmp10.tag == 21))) {
      attr_11790071(elem_11871474, "controls", "");
      var altText_11945008 = [null];
        var Tmp11 = elem_11871474;
        if (ConstSet27[Tmp11.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'attrs\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      if (pop_11945119(Tmp11.attrs, "alt", altText_11945008, 0)) {
      var Tmp12 = elem_11871474;
      if (ConstSet28[Tmp12.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp12.content = nimCopy(null, [newStr_11776616(altText_11945008[0])], NTI11776743);
      }
      
      }
      
      attr_11790071(elem_11871474, "src", link_11871476);
      break;
    default: 
      attr_11790071(elem_11871474, "src", link_11871476);
      break;
    }

  
}
function add_13470063(x_13470066, x_13470066_Idx) {
    x_13470066[x_13470066_Idx] += "[";;

  
}
function add_13470090(x_13470093, x_13470093_Idx) {
    x_13470093[x_13470093_Idx] += "]";;

  
}
function escapeHtmlChar_11945557(ch_11945559) {
    var Tmp1;

  var result_11945560 = null;

    switch (ch_11945559) {
    case 60:
      Tmp1 = "&lt;";
      break;
    case 62:
      Tmp1 = "&gt;";
      break;
    case 38:
      Tmp1 = "&amp;";
      break;
    default: 
      Tmp1 = String.fromCharCode(ch_11945559);
      break;
    }
    result_11945560 = Tmp1;

  return result_11945560;

}
function parseReferenceName_13470046(parser_13470048, parser_13470048_Idx, failed_13470050, failed_13470050_Idx) {
              var Tmp4;

  var result_13470051 = [null];

  BeforeRet: do {
    result_13470051[0] = "";
    var openbracks_13470053 = 1;
    var escaped_13470054 = false;
    L1: do {
      var ch_13470055 = 0;
      L2: do {
          L3: while (true) {
          if (!(parser_13470048[parser_13470048_Idx].pos < (parser_13470048[parser_13470048_Idx].str).length)) break L3;
            ch_13470055 = parser_13470048[parser_13470048_Idx].str.charCodeAt((parser_13470048[parser_13470048_Idx].pos + 0));
            if (!(escaped_13470054)) {
            switch (ch_13470055) {
            case 92:
              escaped_13470054 = true;
              break;
            case 91:
              openbracks_13470053 += 1;
              add_13470063(result_13470051, 0);
              break;
            case 93:
              openbracks_13470053 -= 1;
              if ((openbracks_13470053 == 0)) {
              break BeforeRet;
              }
              else {
              add_13470090(result_13470051, 0);
              }
              
              break;
            case 10:
              failed_13470050[failed_13470050_Idx] = true;
              break BeforeRet;
              break;
            default: 
              result_13470051[0] += escapeHtmlChar_11945557(ch_13470055);;
              break;
            }
            }
            else {
              switch (ch_13470055) {
              case 92:
              case 91:
              case 93:
                Tmp4 = String.fromCharCode(ch_13470055);
                break;
              default: 
                Tmp4 = ("\\\\" + escapeHtmlChar_11945557(ch_13470055));
                break;
              }
              result_13470051[0] += Tmp4;;
              escaped_13470054 = false;
            }
            
            parser_13470048[parser_13470048_Idx].pos += 1;
          }
      } while(false);
    } while(false);
    failed_13470050[failed_13470050_Idx] = true;
  } while (false);

  return result_13470051[0];

}
function rawGet_13520602(t_13520606, key_13520607, hc_13520608, hc_13520608_Idx) {
            var Tmp3;

  var result_13520609 = 0;

  BeforeRet: do {
    hc_13520608[hc_13520608_Idx] = hash_11655814(key_13520607);
    if ((hc_13520608[hc_13520608_Idx] == 0)) {
    hc_13520608[hc_13520608_Idx] = 314159265;
    }
    
    if (((t_13520606.data).length == 0)) {
    result_13520609 = -1;
    break BeforeRet;
    }
    
    var h_13530138 = (hc_13520608[hc_13520608_Idx] & ((t_13520606.data).length-1));
    L1: do {
        L2: while (true) {
        if (!isFilled_11676218(t_13520606.data[h_13530138].Field0)) break L2;
            if (!(t_13520606.data[h_13530138].Field0 == hc_13520608[hc_13520608_Idx])) Tmp3 = false; else {              Tmp3 = (t_13520606.data[h_13530138].Field1 == key_13520607);            }          if (Tmp3) {
          result_13520609 = h_13530138;
          break BeforeRet;
          }
          
          h_13530138 = nextTry_11680014(h_13530138, ((t_13520606.data).length-1));
        }
    } while(false);
    result_13520609 = (-1 - h_13530138);
  } while (false);

  return result_13520609;

}
function mustRehash_13545601(t_13545604) {
  var result_13545605 = false;

    result_13545605 = ((((t_13545604.data).length * 2) < (t_13545604.counter * 3)) || (((t_13545604.data).length - t_13545604.counter) < 4));

  return result_13545605;

}
function rawInsert_13571108(t_13571114, data_13571117, data_13571117_Idx, key_13571118, val_13571120, hc_13571121, h_13571122) {
    data_13571117[data_13571117_Idx][h_13571122].Field1 = key_13571118;
    data_13571117[data_13571117_Idx][h_13571122].Field2 = nimCopy(null, val_13571120, NTI11776471);
    data_13571117[data_13571117_Idx][h_13571122].Field0 = hc_13571121;

  
}
function enlarge_13570161(t_13570167) {
    var n_13570175 = [];
    n_13570175 = new Array(((t_13570167.data).length * 2)); for (var i=0;i<((t_13570167.data).length * 2);++i) {n_13570175[i]={Field0: 0, Field1: null, Field2: []};}    var Tmp1 = t_13570167.data; t_13570167.data = n_13570175; n_13570175 = Tmp1;    L2: do {
      var i_13570334 = 0;
      var colontmp__14100216 = 0;
      colontmp__14100216 = ((n_13570175).length-1);
      var res_14100221 = 0;
      L3: do {
          L4: while (true) {
          if (!(res_14100221 <= colontmp__14100216)) break L4;
            i_13570334 = res_14100221;
            var eh_13570483 = n_13570175[i_13570334].Field0;
            if (isFilled_11676218(eh_13570483)) {
            var j_13570490 = (eh_13570483 & ((t_13570167.data).length-1));
            L5: do {
                L6: while (true) {
                if (!isFilled_11676218(t_13570167.data[j_13570490].Field0)) break L6;
                  j_13570490 = nextTry_11680014(j_13570490, ((t_13570167.data).length-1));
                }
            } while(false);
            rawInsert_13571108(t_13570167, t_13570167, "data", n_13570175[i_13570334].Field1, n_13570175[i_13570334].Field2, eh_13570483, j_13570490);
            }
            
            res_14100221 += 1;
          }
      } while(false);
    } while(false);

  
}
function rawGetKnownHC_13571594(t_13571598, key_13571599, hc_13571600) {
  var result_13571601 = 0;

  BeforeRet: do {
    if (((t_13571598.data).length == 0)) {
    result_13571601 = -1;
    break BeforeRet;
    }
    
    var h_13575138 = (hc_13571600 & ((t_13571598.data).length-1));
    L1: do {
        L2: while (true) {
        if (!isFilled_11676218(t_13571598.data[h_13575138].Field0)) break L2;
          if (((t_13571598.data[h_13575138].Field0 == hc_13571600) && (t_13571598.data[h_13575138].Field1 == key_13571599))) {
          result_13571601 = h_13575138;
          break BeforeRet;
          }
          
          h_13575138 = nextTry_11680014(h_13575138, ((t_13571598.data).length-1));
        }
    } while(false);
    result_13571601 = (-1 - h_13575138);
  } while (false);

  return result_13571601;

}
function mgetOrPut_13505103(t_13505109, key_13505110, val_13505111) {
  var result_13505113 = null;
  var result_13505113_Idx = 0;

    if (((t_13505109.data).length == 0)) {
    var correctSizeHEX60gensym70_13515001 = slotsNeeded_11680048(32);
    t_13505109.counter = 0;
    t_13505109.data = new Array(correctSizeHEX60gensym70_13515001); for (var i=0;i<correctSizeHEX60gensym70_13515001;++i) {t_13505109.data[i]={Field0: 0, Field1: null, Field2: []};}    }
    
    var hc_13520601 = [0];
    var index_13530633 = rawGet_13520602(t_13505109, key_13505110, hc_13520601, 0);
    if ((index_13530633 < 0)) {
    if (((t_13505109.data).length == 0)) {
    var correctSizeHEX60gensym75_13540001 = slotsNeeded_11680048(32);
    t_13505109.counter = 0;
    t_13505109.data = new Array(correctSizeHEX60gensym75_13540001); for (var i=0;i<correctSizeHEX60gensym75_13540001;++i) {t_13505109.data[i]={Field0: 0, Field1: null, Field2: []};}    }
    
    if (mustRehash_13545601(t_13505109)) {
    enlarge_13570161(t_13505109);
    index_13530633 = rawGetKnownHC_13571594(t_13505109, key_13505110, hc_13520601[0]);
    }
    
    index_13530633 = (-1 - index_13530633);
    rawInsert_13571108(t_13505109, t_13505109, "data", key_13505110, val_13505111, hc_13520601[0], index_13530633);
    t_13505109.counter += 1;
    }
    
    result_13505113 = t_13505109.data[index_13530633]; result_13505113_Idx = "Field2";

  return [result_13505113, result_13505113_Idx];

}
function parseBracket_13151414(image_13151416, parser_13151417, parser_13151417_Idx, singleLine_13151418) {
    var Tmp1;
      var Tmp2;
      var Tmp3;
        var Tmp4;
    var Tmp5;
    var Tmp6;
    var Tmp7;
    var Tmp8;
      var Tmp9;
      var Tmp10;
      var Tmp11;
        var Tmp12;
      var Tmp13;
      var Tmp14;
        var Tmp15;
        var Tmp16;
      var Tmp17;

  var result_13475019 = null;

  BeforeRet: do {
    var firstPos_13475020 = parser_13151417[parser_13151417_Idx].pos;
    var colontmp__14100181 = parseDelimed_13180048(parser_13151417, parser_13151417_Idx, makeNimstrLit("]"), singleLine_13151418);
    var titleWorked_13475021 = colontmp__14100181["Field0"];
    var titleElems_13475022 = nimCopy(null, colontmp__14100181["Field1"], NTI13180054);
    parser_13151417[parser_13151417_Idx].pos += 1;
    var secondPos_13475029 = (parser_13151417[parser_13151417_Idx].pos - 2);
    if (!((titleWorked_13475021 == 0))) {
    result_13475019 = newElem_11776665(0, titleElems_13475022);
    break BeforeRet;
    }
    
      if (!(!(image_13151416) && ((titleElems_13475022).length == 1))) Tmp3 = false; else {        Tmp3 = titleElems_13475022[0].isText;      }      if (!Tmp3) Tmp2 = false; else {        var Tmp4 = titleElems_13475022[0];
        if (ConstSet18[Tmp4.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
        Tmp2 = ((Tmp4.str).length == 1);      }    if (Tmp2) {
    var Tmp5 = titleElems_13475022[0];
    if (ConstSet19[Tmp5.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    switch ((Tmp6 = Tmp5.str, Tmp6).charCodeAt(0)) {
    case 32:
      Tmp7 = 1;
      break;
    case 120:
      Tmp7 = 2;
      break;
    default: 
      Tmp7 = 0;
      break;
    }
    Tmp1 = Tmp7;
    }
    else {
    Tmp1 = 0;
    }
    
    var checkMark_13480014 = Tmp1;
    if ((parser_13151417[parser_13151417_Idx].pos < (parser_13151417[parser_13151417_Idx].str).length)) {
    var initialPos_13480015 = parser_13151417[parser_13151417_Idx].pos;
    if (nextMatch_12035261(parser_13151417, parser_13151417_Idx, 40, 0)) {
    var colontmp__14100182 = parseLink_13465032(parser_13151417, parser_13151417_Idx, false);
    var linkWorked_13485001 = colontmp__14100182["Field0"];
    var link_13485002 = nimCopy(null, colontmp__14100182["Field1"], NTI2421013);
    var tip_13485003 = nimCopy(null, colontmp__14100182["Field2"], NTI2421013);
    if (linkWorked_13485001) {
    result_13475019 = {isText: false, str: null, tag: 0, attrs: ({data: [], counter: 0, first: 0, last: 0}), content: []};
    if (image_13151416) {
    var Tmp8 = result_13475019;
    if (ConstSet21[Tmp8.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    Tmp8.tag = 21;
    setLink_11871472(result_13475019, toJSStr(link_13485002));
    if ((0 < (secondPos_13475029 - firstPos_13475020))) {
    attr_11790071(result_13475019, "alt", HEX5BHEX5D_11776075(parser_13151417[parser_13151417_Idx].str, HEX2EHEX2E_4625220(firstPos_13475020, secondPos_13475029)));
    }
    
    }
    else {
      var Tmp9 = result_13475019;
      if (ConstSet29[Tmp9.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp9.tag = 23;
      var Tmp10 = result_13475019;
      if (ConstSet30[Tmp10.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp10.content = nimCopy(null, titleElems_13475022, NTI13180054);
        if (!(((link_13485002).length == 0) && ((titleElems_13475022).length == 1))) Tmp12 = false; else {          Tmp12 = titleElems_13475022[0].isText;        }      if (Tmp12) {
      var Tmp13 = titleElems_13475022[0];
      if (ConstSet31[Tmp13.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp11 = Tmp13.str;
      }
      else {
      Tmp11 = toJSStr(link_13485002);
      }
      
      setLink_11871472(result_13475019, Tmp11);
    }
    
    if (!(((tip_13485003).length == 0))) {
    attr_11790071(result_13475019, "title", toJSStr(tip_13485003));
    }
    
    break BeforeRet;
    }
    else {
      parser_13151417[parser_13151417_Idx].pos = initialPos_13480015;
    }
    
    }
    else {
    if (nextMatch_12035261(parser_13151417, parser_13151417_Idx, 91, 0)) {
    var refNameFailed_13500002 = [false];
    var refName_13500004 = parseReferenceName_13470046(parser_13151417, parser_13151417_Idx, refNameFailed_13500002, 0);
    if (refNameFailed_13500002[0]) {
    parser_13151417[parser_13151417_Idx].pos = initialPos_13480015;
    }
    else {
      if (((refName_13500004).length == 0)) {
      refName_13500004 = HEX5BHEX5D_11776075(parser_13151417[parser_13151417_Idx].str, HEX2EHEX2E_4625220(firstPos_13475020, secondPos_13475029));
      }
      
      result_13475019 = {isText: false, str: null, tag: 0, attrs: ({data: [], counter: 0, first: 0, last: 0}), content: []};
      if (image_13151416) {
      var Tmp14 = result_13475019;
      if (ConstSet32[Tmp14.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp14.tag = 21;
      if ((0 < (secondPos_13475029 - firstPos_13475020))) {
      attr_11790071(result_13475019, "alt", HEX5BHEX5D_11776075(parser_13151417[parser_13151417_Idx].str, HEX2EHEX2E_4625220(firstPos_13475020, secondPos_13475029)));
      }
      
      }
      else {
        var Tmp15 = result_13475019;
        if (ConstSet33[Tmp15.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
        Tmp15.tag = 23;
        var Tmp16 = result_13475019;
        if (ConstSet34[Tmp16.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
        Tmp16.content = nimCopy(null, titleElems_13475022, NTI13180054);
      }
      
      (Tmp17 = mgetOrPut_13505103(parser_13151417[parser_13151417_Idx].linkReferrers, refName_13500004, []), Tmp17)[0][Tmp17[1]].push(result_13475019);;
      break BeforeRet;
    }
    
    }
    else {
    parser_13151417[parser_13151417_Idx].pos -= 1;
    }
    }
    }
    
    if (image_13151416) {
    result_13475019 = newElem_11776665(0, titleElems_13475022);
    }
    else {
    if ((checkMark_13480014 == 0)) {
    result_13475019 = newElem_11776665(14, titleElems_13475022);
    }
    else {
      result_13475019 = newElem_11776665(22, []);
      attr_11790071(result_13475019, "type", "checkbox");
      attr_11790071(result_13475019, "disabled", "");
      if ((checkMark_13480014 == 2)) {
      attr_11790071(result_13475019, "checked", "");
      }
      
    }
    }
  } while (false);

  return result_13475019;

}
function add_13151613(x_13151616, x_13151616_Idx) {
    x_13151616[x_13151616_Idx] += "{";;

  
}
function add_13151640(x_13151643, x_13151643_Idx) {
    x_13151643[x_13151643_Idx] += "}";;

  
}
function parseCurly_13151419(parser_13151421, parser_13151421_Idx) {
              var Tmp4;
              var Tmp5;

  var result_13151422 = [null];

  BeforeRet: do {
    result_13151422[0] = "";
    var noHtmlEscape_13151601 = nextMatch_12035261(parser_13151421, parser_13151421_Idx, 33, 0);
    var opencurlys_13151603 = 1;
    var escaped_13151604 = false;
    L1: do {
      var ch_13151605 = 0;
      L2: do {
          L3: while (true) {
          if (!(parser_13151421[parser_13151421_Idx].pos < (parser_13151421[parser_13151421_Idx].str).length)) break L3;
            ch_13151605 = parser_13151421[parser_13151421_Idx].str.charCodeAt((parser_13151421[parser_13151421_Idx].pos + 0));
            if (!(escaped_13151604)) {
            switch (ch_13151605) {
            case 92:
              escaped_13151604 = true;
              break;
            case 123:
              opencurlys_13151603 += 1;
              add_13151613(result_13151422, 0);
              break;
            case 125:
              opencurlys_13151603 -= 1;
              if ((opencurlys_13151603 == 0)) {
              break BeforeRet;
              }
              else {
              add_13151640(result_13151422, 0);
              }
              
              break;
            default: 
              if (noHtmlEscape_13151601) {
              Tmp4 = String.fromCharCode(ch_13151605);
              }
              else {
              Tmp4 = escapeHtmlChar_11945557(ch_13151605);
              }
              
              result_13151422[0] += Tmp4;;
              break;
            }
            }
            else {
              switch (ch_13151605) {
              case 62:
              case 60:
              case 38:
                Tmp5 = escapeHtmlChar_11945557(ch_13151605);
                break;
              case 92:
              case 125:
              case 123:
                Tmp5 = String.fromCharCode(ch_13151605);
                break;
              default: 
                Tmp5 = ("\\\\" + String.fromCharCode(ch_13151605));
                break;
              }
              result_13151422[0] += Tmp5;;
              escaped_13151604 = false;
            }
            
            parser_13151421[parser_13151421_Idx].pos += 1;
          }
      } while(false);
    } while(false);
  } while (false);

  return result_13151422[0];

}
function ssClose_12295021(s_12295023) {
    var s_12295024 = s_12295023;
    s_12295024.data = nimCopy(null, [], NTI2421013);

  
}
function ssAtEnd_12200297(s_12200299) {
  var result_12200300 = false;

  BeforeRet: do {
    var s_12200301 = s_12200299;
    result_12200300 = ((s_12200301.data).length <= s_12200301.pos);
    break BeforeRet;
  } while (false);

  return result_12200300;

}
function clamp_12205049(x_12205052, a_12205053, b_12205054) {
  var result_12205055 = 0;

  BeforeRet: do {
    if ((x_12205052 < a_12205053)) {
    result_12205055 = a_12205053;
    break BeforeRet;
    }
    
    if ((b_12205054 < x_12205052)) {
    result_12205055 = b_12205054;
    break BeforeRet;
    }
    
    result_12205055 = x_12205052;
    break BeforeRet;
  } while (false);

  return result_12205055;

}
function ssSetPosition_12205044(s_12205046, pos_12205047) {
    var s_12205048 = s_12205046;
    s_12205048.pos = clamp_12205049(pos_12205047, 0, (s_12205048.data).length);

  
}
function ssGetPosition_12205082(s_12205084) {
  var result_12205085 = 0;

  BeforeRet: do {
    var s_12205086 = s_12205084;
    result_12205085 = s_12205086.pos;
    break BeforeRet;
  } while (false);

  return result_12205085;

}
function HEX5BHEX5DHEX3D_11130021(s_11130025, s_11130025_Idx, x_11130027, b_11130028) {
    var a_11130201 = x_11130027.a;
    var L_11130401 = ((x_11130027.b - a_11130201) + 1);
    if ((L_11130401 == (b_11130028).length)) {
    L1: do {
      var i_11130409 = 0;
      var i_14100236 = 0;
      L2: do {
          L3: while (true) {
          if (!(i_14100236 < L_11130401)) break L3;
            i_11130409 = i_14100236;
            s_11130025[s_11130025_Idx][(i_11130409 + a_11130201)] = b_11130028[i_11130409];
            i_14100236 += 1;
          }
      } while(false);
    } while(false);
    }
    else {
      var shiftHEX60gensym78_11140002 = ((b_11130028).length - nimMax(0, L_11130401));
      var newLenHEX60gensym78_11140003 = ((s_11130025[s_11130025_Idx]).length + shiftHEX60gensym78_11140002);
      if ((0 < shiftHEX60gensym78_11140002)) {
      (s_11130025[s_11130025_Idx].length = newLenHEX60gensym78_11140003);
      L4: do {
        var iHEX60gensym78_11140010 = 0;
        var colontmp__14100239 = 0;
        var colontmp__14100240 = 0;
        colontmp__14100239 = (newLenHEX60gensym78_11140003 - 1);
        colontmp__14100240 = (a_11130201 + (b_11130028).length);
        var res_14100245 = colontmp__14100239;
        L5: do {
            L6: while (true) {
            if (!(colontmp__14100240 <= res_14100245)) break L6;
              iHEX60gensym78_11140010 = res_14100245;
              s_11130025[s_11130025_Idx][iHEX60gensym78_11140010] = s_11130025[s_11130025_Idx][(iHEX60gensym78_11140010 - shiftHEX60gensym78_11140002)];
              res_14100245 -= 1;
            }
        } while(false);
      } while(false);
      }
      else {
        L7: do {
          var iHEX60gensym78_11140017 = 0;
          var colontmp__14100251 = 0;
          var colontmp__14100252 = 0;
          colontmp__14100251 = (a_11130201 + (b_11130028).length);
          colontmp__14100252 = (newLenHEX60gensym78_11140003 - 1);
          var res_14100253 = colontmp__14100251;
          L8: do {
              L9: while (true) {
              if (!(res_14100253 <= colontmp__14100252)) break L9;
                iHEX60gensym78_11140017 = res_14100253;
                s_11130025[s_11130025_Idx][iHEX60gensym78_11140017] = s_11130025[s_11130025_Idx][(iHEX60gensym78_11140017 - shiftHEX60gensym78_11140002)];
                res_14100253 += 1;
              }
          } while(false);
        } while(false);
        (s_11130025[s_11130025_Idx].length = newLenHEX60gensym78_11140003);
      }
      
      L10: do {
        var iHEX60gensym78_11140025 = 0;
        var colontmp__14100259 = 0;
        colontmp__14100259 = (b_11130028).length;
        var i_14100260 = 0;
        L11: do {
            L12: while (true) {
            if (!(i_14100260 < colontmp__14100259)) break L12;
              iHEX60gensym78_11140025 = i_14100260;
              s_11130025[s_11130025_Idx][(a_11130201 + iHEX60gensym78_11140025)] = b_11130028[iHEX60gensym78_11140025];
              i_14100260 += 1;
            }
        } while(false);
      } while(false);
    }
    

  
}
function HEX5BHEX5D_4625283(s_4625287, x_4625289) {
  var result_4625290 = [];

    var a_4625401 = x_4625289.a;
    var L_4625601 = ((x_4625289.b - a_4625401) + 1);
    result_4625290 = nimCopy(null, mnewString(L_4625601), NTI2421013);
    L1: do {
      var i_4625609 = 0;
      var i_14100265 = 0;
      L2: do {
          L3: while (true) {
          if (!(i_14100265 < L_4625601)) break L3;
            i_4625609 = i_14100265;
            result_4625290[i_4625609] = s_4625287[(i_4625609 + a_4625401)];
            i_14100265 += 1;
          }
      } while(false);
    } while(false);

  return result_4625290;

}
function ssReadDataStr_12205100(s_12205102, buffer_12205104, buffer_12205104_Idx, slice_12205109) {
  var result_12205110 = 0;

    var s_12205111 = s_12205102;
    result_12205110 = nimMin(((slice_12205109.b + 1) - slice_12205109.a), ((s_12205111.data).length - s_12205111.pos));
    if ((0 < result_12205110)) {
    L1: do {
    } while(false);
    HEX5BHEX5DHEX3D_11130021(buffer_12205104, buffer_12205104_Idx, HEX2EHEX2E_4625220(slice_12205109.a, ((slice_12205109.a + result_12205110) - 1)), HEX5BHEX5D_4625283(s_12205111.data, HEX2EHEX2E_4625220(s_12205111.pos, ((s_12205111.pos + result_12205110) - 1))));
    s_12205111.pos += result_12205110;
    }
    else {
      result_12205110 = 0;
    }
    

  return result_12205110;

}
function isNimException_2610704() {
    return lastJSError && lastJSError.m_type;

  
}
function getCurrentException() {
  var result_2610723 = null;

    if (isNimException_2610704()) {
    result_2610723 = lastJSError;
    }
    

  return result_2610723;

}
function ssReadData_12235420(s_12235422, buffer_12235423, buffer_12235423_Idx, bufLen_12235424) {
    var Tmp2;

  var result_12235425 = 0;

    var s_12235426 = s_12235422;
    result_12235425 = nimMin(bufLen_12235424, ((s_12235426.data).length - s_12235426.pos));
    if ((0 < result_12235425)) {
++excHandler;
    Tmp2 = framePtr;
    try {
    HEX5BHEX5DHEX3D_11130021(buffer_12235423, buffer_12235423_Idx, HEX2EHEX2E_4625220(0, (result_12235425 - 1)), HEX5BHEX5D_4625283(s_12235426.data, HEX2EHEX2E_4625220(s_12235426.pos, ((s_12235426.pos + result_12235425) - 1))));
--excHandler;
} catch (EXC) {
 var prevJSError = lastJSError;
 lastJSError = EXC;
 --excHandler;
    framePtr = Tmp2;
    raiseException({message: makeNimstrLit("could not read string stream, did you use a non-string buffer pointer?"), parent: getCurrentException(), m_type: NTI2427619, name: null, trace: [], up: null}, "Defect");
    lastJSError = prevJSError;
    } finally {
    framePtr = Tmp2;
    }
    s_12235426.pos += result_12235425;
    }
    else {
      result_12235425 = 0;
    }
    

  return result_12235425;

}
function ssPeekData_12255051(s_12255053, buffer_12255054, buffer_12255054_Idx, bufLen_12255055) {
    var Tmp2;

  var result_12255056 = 0;

    var s_12255057 = s_12255053;
    result_12255056 = nimMin(bufLen_12255055, ((s_12255057.data).length - s_12255057.pos));
    if ((0 < result_12255056)) {
++excHandler;
    Tmp2 = framePtr;
    try {
    HEX5BHEX5DHEX3D_11130021(buffer_12255054, buffer_12255054_Idx, HEX2EHEX2E_4625220(0, (result_12255056 - 1)), HEX5BHEX5D_4625283(s_12255057.data, HEX2EHEX2E_4625220(s_12255057.pos, ((s_12255057.pos + result_12255056) - 1))));
--excHandler;
} catch (EXC) {
 var prevJSError = lastJSError;
 lastJSError = EXC;
 --excHandler;
    framePtr = Tmp2;
    raiseException({message: makeNimstrLit("could not peek string stream, did you use a non-string buffer pointer?"), parent: getCurrentException(), m_type: NTI2427619, name: null, trace: [], up: null}, "Defect");
    lastJSError = prevJSError;
    } finally {
    framePtr = Tmp2;
    }
    }
    else {
      result_12255056 = 0;
    }
    

  return result_12255056;

}
function ssWriteData_12275015(s_12275017, buffer_12275018, buffer_12275018_Idx, bufLen_12275019) {
    var Tmp2;

  BeforeRet: do {
    var s_12275020 = s_12275017;
    if ((bufLen_12275019 <= 0)) {
    break BeforeRet;
    }
    
    if (((s_12275020.data).length < (s_12275020.pos + bufLen_12275019))) {
    (s_12275020.data.length = (s_12275020.pos + bufLen_12275019));
    }
    
++excHandler;
    Tmp2 = framePtr;
    try {
    HEX5BHEX5DHEX3D_11130021(s_12275020, "data", HEX2EHEX2E_4625220(s_12275020.pos, ((s_12275020.pos + bufLen_12275019) - 1)), HEX5BHEX5D_4625283(buffer_12275018[buffer_12275018_Idx], HEX2EHEX2E_4625220(0, (bufLen_12275019 - 1))));
--excHandler;
} catch (EXC) {
 var prevJSError = lastJSError;
 lastJSError = EXC;
 --excHandler;
    framePtr = Tmp2;
    raiseException({message: makeNimstrLit("could not write to string stream, did you use a non-string buffer pointer?"), parent: getCurrentException(), m_type: NTI2427619, name: null, trace: [], up: null}, "Defect");
    lastJSError = prevJSError;
    } finally {
    framePtr = Tmp2;
    }
    s_12275020.pos += bufLen_12275019;
  } while (false);

  
}
function newStringStream_12295214(s_12295216) {
  var result_12295218 = null;

    result_12295218 = ({m_type: NTI12200253, data: [], pos: 0, closeImpl: null, atEndImpl: null, setPositionImpl: null, getPositionImpl: null, readDataStrImpl: null, readLineImpl: null, readDataImpl: null, peekDataImpl: null, writeDataImpl: null, flushImpl: null});
    result_12295218.data = nimCopy(null, s_12295216, NTI2421013);
    result_12295218.pos = 0;
    result_12295218.closeImpl = ssClose_12295021;
    result_12295218.atEndImpl = ssAtEnd_12200297;
    result_12295218.setPositionImpl = ssSetPosition_12205044;
    result_12295218.getPositionImpl = ssGetPosition_12205082;
    result_12295218.readDataStrImpl = ssReadDataStr_12205100;
    result_12295218.readDataImpl = ssReadData_12235420;
    result_12295218.peekDataImpl = ssPeekData_12255051;
    result_12295218.writeDataImpl = ssWriteData_12275015;

  return result_12295218;

}
function setPosition_12036240(s_12036242, pos_12036243) {
    s_12036242.setPositionImpl(s_12036242, pos_12036243);

  
}
function readData_12036274(s_12036276, buffer_12036277, buffer_12036277_Idx, bufLen_12036278) {
  var result_12036279 = 0;

    result_12036279 = s_12036276.readDataImpl(s_12036276, buffer_12036277, buffer_12036277_Idx, bufLen_12036278);

  return result_12036279;

}
function readDataStr_12036293(s_12036295, buffer_12036297, buffer_12036297_Idx, slice_12036302) {
  var result_12036303 = 0;

    if (!((s_12036295.readDataStrImpl == null))) {
    result_12036303 = s_12036295.readDataStrImpl(s_12036295, buffer_12036297, buffer_12036297_Idx, slice_12036302);
    }
    else {
      result_12036303 = readData_12036274(s_12036295, buffer_12036297[buffer_12036297_Idx], slice_12036302.a, ((slice_12036302.b + 1) - slice_12036302.a));
    }
    

  return result_12036303;

}
function fillBuffer_12306058(L_12306061) {
                  var Tmp8;

    var charsRead_12306062 = 0;
    var toCopy_12306063 = 0;
    var s_12306064 = 0;
    var oldBufLen_12306065 = 0;
    toCopy_12306063 = ((L_12306061.buf).length - (L_12306061.sentinel + 1));
    if ((0 < toCopy_12306063)) {
    L1: do {
      var i_12335208 = 0;
      var i_14100275 = 0;
      L2: do {
          L3: while (true) {
          if (!(i_14100275 < toCopy_12306063)) break L3;
            i_12335208 = i_14100275;
            L_12306061.buf[i_12335208] = L_12306061.buf[((L_12306061.sentinel + 1) + i_12335208)];
            i_14100275 += 1;
          }
      } while(false);
    } while(false);
    }
    
    charsRead_12306062 = readDataStr_12036293(L_12306061.input, L_12306061, "buf", HEX2EHEX2E_4625220(toCopy_12306063, (((toCopy_12306063 + L_12306061.sentinel) + 1) - 1)));
    s_12306064 = (toCopy_12306063 + charsRead_12306062);
    if ((charsRead_12306062 < (L_12306061.sentinel + 1))) {
    L_12306061.buf[s_12306064] = 0;
    L_12306061.sentinel = s_12306064;
    }
    else {
      s_12306064 -= 1;
      L4: do {
          L5: while (true) {
          if (!true) break L5;
            L6: do {
                L7: while (true) {
                  if (!(0 <= s_12306064)) Tmp8 = false; else {                    Tmp8 = !((L_12306061.refillChars[L_12306061.buf[s_12306064]] != undefined));                  }                if (!Tmp8) break L7;
                  s_12306064 -= 1;
                }
            } while(false);
            if ((0 <= s_12306064)) {
            L_12306061.sentinel = s_12306064;
            break L4;
            }
            else {
              oldBufLen_12306065 = (L_12306061.buf).length;
              (L_12306061.buf.length = ((L_12306061.buf).length * 2));
              charsRead_12306062 = readDataStr_12036293(L_12306061.input, L_12306061, "buf", HEX2EHEX2E_4625220(oldBufLen_12306065, ((L_12306061.buf).length - 1)));
              if ((charsRead_12306062 < oldBufLen_12306065)) {
              L_12306061.buf[(oldBufLen_12306065 + charsRead_12306062)] = 0;
              L_12306061.sentinel = (oldBufLen_12306065 + charsRead_12306062);
              break L4;
              }
              
              s_12306064 = ((L_12306061.buf).length - 1);
            }
            
          }
      } while(false);
    }
    

  
}
function skipUtf8Bom_12415214(L_12415217) {
      var Tmp1;
      var Tmp2;

      if (!(L_12415217.buf[0] == 239)) Tmp2 = false; else {        Tmp2 = (L_12415217.buf[1] == 187);      }      if (!Tmp2) Tmp1 = false; else {        Tmp1 = (L_12415217.buf[2] == 191);      }    if (Tmp1) {
    L_12415217.bufpos += 3;
    L_12415217.lineStart += 3;
    }
    

  
}
function open_12415243(L_12415246, input_12415247, bufLen_12415249, refillChars_12415251) {
    L_12415246.input = input_12415247;
    L_12415246.bufpos = 0;
    L_12415246.offsetBase = 0;
    nimCopy(L_12415246.refillChars, refillChars_12415251, NTI12415250);
    L_12415246.buf = nimCopy(null, mnewString(bufLen_12415249), NTI2421013);
    L_12415246.sentinel = (bufLen_12415249 - 1);
    L_12415246.lineStart = 0;
    L_12415246.lineNumber = 1;
    fillBuffer_12306058(L_12415246);
    skipUtf8Bom_12415214(L_12415246);

  
}
function open_12451101(my_12451104, input_12451105, filename_12451106, options_12451110) {
    open_12415243(my_12451104, input_12451105, 8192, ConstSet46);
    my_12451104.filename = nimCopy(null, filename_12451106, NTI2421013);
    my_12451104.state = 0;
    my_12451104.kind = 0;
    my_12451104.a = nimCopy(null, [], NTI2421013);
    my_12451104.b = nimCopy(null, [], NTI2421013);
    my_12451104.c = nimCopy(null, [], NTI2421013);
    my_12451104.cIsEmpty = true;
    nimCopy(my_12451104.options, options_12451110, NTI12451107);

  
}
function fillBaseLexer_12370229(L_12370232, pos_12370233) {
  var result_12370234 = 0;

    if ((pos_12370233 < L_12370232.sentinel)) {
    result_12370234 = (pos_12370233 + 1);
    }
    else {
      fillBuffer_12306058(L_12370232);
      L_12370232.offsetBase += pos_12370233;
      L_12370232.bufpos = 0;
      result_12370234 = 0;
    }
    

  return result_12370234;

}
function handleRefillChar_12400220(L_12400223, pos_12400224) {
  var result_12400225 = 0;

    result_12400225 = fillBaseLexer_12370229(L_12400223, pos_12400224);

  return result_12400225;

}
function markError_12460286(my_12460289, kind_12460290) {
    my_12460289.err = kind_12460290;
    my_12460289.state = 4;

  
}
function parseName_12460463(my_12460466, dest_12460468, dest_12460468_Idx) {
    var pos_12460469 = my_12460466.bufpos;
    if ((ConstSet48[my_12460466.buf[pos_12460469]] != undefined)) {
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          addChar(dest_12460468[dest_12460468_Idx], my_12460466.buf[pos_12460469]);;
          pos_12460469 += 1;
          if (!((ConstSet49[my_12460466.buf[pos_12460469]] != undefined))) {
          break L1;
          }
          
        }
    } while(false);
    my_12460466.bufpos = pos_12460469;
    }
    else {
    markError_12460286(my_12460466, 2);
    }
    

  
}
function handleCR_12380220(L_12380223, pos_12380224) {
  var result_12380225 = 0;

    L_12380223.lineNumber += 1;
    result_12380225 = fillBaseLexer_12370229(L_12380223, pos_12380224);
    if ((L_12380223.buf[result_12380225] == 10)) {
    result_12380225 = fillBaseLexer_12370229(L_12380223, result_12380225);
    }
    
    L_12380223.lineStart = result_12380225;

  return result_12380225;

}
function handleLF_12390220(L_12390223, pos_12390224) {
  var result_12390225 = 0;

    L_12390223.lineNumber += 1;
    result_12390225 = fillBaseLexer_12370229(L_12390223, pos_12390224);
    L_12390223.lineStart = result_12390225;

  return result_12390225;

}
function parseWhitespace_12460421(my_12460424, skip_12460425) {
    var pos_12460426 = my_12460424.bufpos;
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12460424.buf[pos_12460426]) {
          case 32:
          case 9:
            if (!(skip_12460425)) {
            addChar(my_12460424.a, my_12460424.buf[pos_12460426]);;
            }
            
            pos_12460426 += 1;
            break;
          case 13:
            pos_12460426 = handleCR_12380220(my_12460424, pos_12460426);
            if (!(skip_12460425)) {
            addChar(my_12460424.a, 10);;
            }
            
            break;
          case 10:
            pos_12460426 = handleLF_12390220(my_12460424, pos_12460426);
            if (!(skip_12460425)) {
            addChar(my_12460424.a, 10);;
            }
            
            break;
          default: 
            break L1;
            break;
          }
        }
    } while(false);
    my_12460424.bufpos = pos_12460426;

  
}
function parseEndTag_12485033(my_12485036) {
    my_12485036.bufpos = handleRefillChar_12400220(my_12485036, (my_12485036.bufpos + 1));
    parseName_12460463(my_12485036, my_12485036, "a");
    parseWhitespace_12460421(my_12485036, true);
    if ((my_12485036.buf[my_12485036.bufpos] == 62)) {
    my_12485036.bufpos += 1;
    }
    else {
    markError_12460286(my_12485036, 5);
    }
    
    my_12485036.kind = 7;

  
}
function parseCDATA_12460319(my_12460322) {
              var Tmp3;

    var pos_12460323 = (my_12460322.bufpos + 9);
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12460322.buf[pos_12460323]) {
          case 93:
              if (!(my_12460322.buf[(pos_12460323 + 1)] == 93)) Tmp3 = false; else {                Tmp3 = (my_12460322.buf[(pos_12460323 + 2)] == 62);              }            if (Tmp3) {
            pos_12460323 += 3;
            break L1;
            }
            
            addChar(my_12460322.a, 93);;
            pos_12460323 += 1;
            break;
          case 0:
            markError_12460286(my_12460322, 1);
            break L1;
            break;
          case 13:
            pos_12460323 = handleCR_12380220(my_12460322, pos_12460323);
            addChar(my_12460322.a, 10);;
            break;
          case 10:
            pos_12460323 = handleLF_12390220(my_12460322, pos_12460323);
            addChar(my_12460322.a, 10);;
            break;
          case 47:
            pos_12460323 = handleRefillChar_12400220(my_12460322, pos_12460323);
            addChar(my_12460322.a, 47);;
            break;
          default: 
            addChar(my_12460322.a, my_12460322.buf[pos_12460323]);;
            pos_12460323 += 1;
            break;
          }
        }
    } while(false);
    my_12460322.bufpos = pos_12460323;
    my_12460322.kind = 11;

  
}
function parseComment_12460355(my_12460358) {
              var Tmp3;

    var pos_12460359 = (my_12460358.bufpos + 4);
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12460358.buf[pos_12460359]) {
          case 45:
              if (!(my_12460358.buf[(pos_12460359 + 1)] == 45)) Tmp3 = false; else {                Tmp3 = (my_12460358.buf[(pos_12460359 + 2)] == 62);              }            if (Tmp3) {
            pos_12460359 += 3;
            break L1;
            }
            
            if ((my_12460358.options[1] != undefined)) {
            addChar(my_12460358.a, 45);;
            }
            
            pos_12460359 += 1;
            break;
          case 0:
            markError_12460286(my_12460358, 8);
            break L1;
            break;
          case 13:
            pos_12460359 = handleCR_12380220(my_12460358, pos_12460359);
            if ((my_12460358.options[1] != undefined)) {
            addChar(my_12460358.a, 10);;
            }
            
            break;
          case 10:
            pos_12460359 = handleLF_12390220(my_12460358, pos_12460359);
            if ((my_12460358.options[1] != undefined)) {
            addChar(my_12460358.a, 10);;
            }
            
            break;
          case 47:
            pos_12460359 = handleRefillChar_12400220(my_12460358, pos_12460359);
            if ((my_12460358.options[1] != undefined)) {
            addChar(my_12460358.a, 47);;
            }
            
            break;
          default: 
            if ((my_12460358.options[1] != undefined)) {
            addChar(my_12460358.a, my_12460358.buf[pos_12460359]);;
            }
            
            pos_12460359 += 1;
            break;
          }
        }
    } while(false);
    my_12460358.bufpos = pos_12460359;
    my_12460358.kind = 4;

  
}
function parseSpecial_12480068(my_12480071) {
    var pos_12480072 = (my_12480071.bufpos + 2);
    var opentags_12480074 = 0;
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12480071.buf[pos_12480072]) {
          case 0:
            markError_12460286(my_12480071, 5);
            break L1;
            break;
          case 60:
            opentags_12480074 += 1;
            pos_12480072 += 1;
            addChar(my_12480071.a, 60);;
            break;
          case 62:
            if ((opentags_12480074 <= 0)) {
            pos_12480072 += 1;
            break L1;
            }
            
            opentags_12480074 -= 1;
            pos_12480072 += 1;
            addChar(my_12480071.a, 62);;
            break;
          case 13:
            pos_12480072 = handleCR_12380220(my_12480071, pos_12480072);
            addChar(my_12480071.a, 10);;
            break;
          case 10:
            pos_12480072 = handleLF_12390220(my_12480071, pos_12480072);
            addChar(my_12480071.a, 10);;
            break;
          case 47:
            pos_12480072 = handleRefillChar_12400220(my_12480071, pos_12480072);
            addChar(my_12480071.b, 47);;
            break;
          default: 
            addChar(my_12480071.a, my_12480071.buf[pos_12480072]);;
            pos_12480072 += 1;
            break;
          }
        }
    } while(false);
    my_12480071.bufpos = pos_12480072;
    my_12480071.kind = 13;

  
}
function parsePI_12480025(my_12480028) {
    my_12480028.bufpos += 2;
    parseName_12460463(my_12480028, my_12480028, "a");
    var pos_12480036 = my_12480028.bufpos;
    (my_12480028.b.length = 0);
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12480028.buf[pos_12480036]) {
          case 0:
            markError_12460286(my_12480028, 4);
            break L1;
            break;
          case 63:
            if ((my_12480028.buf[(pos_12480036 + 1)] == 62)) {
            pos_12480036 += 2;
            break L1;
            }
            
            addChar(my_12480028.b, 63);;
            pos_12480036 += 1;
            break;
          case 13:
            pos_12480036 = handleCR_12380220(my_12480028, pos_12480036);
            addChar(my_12480028.b, 10);;
            break;
          case 10:
            pos_12480036 = handleLF_12390220(my_12480028, pos_12480036);
            addChar(my_12480028.b, 10);;
            break;
          case 47:
            pos_12480036 = handleRefillChar_12400220(my_12480028, pos_12480036);
            addChar(my_12480028.b, 47);;
            break;
          default: 
            addChar(my_12480028.b, my_12480028.buf[pos_12480036]);;
            pos_12480036 += 1;
            break;
          }
        }
    } while(false);
    my_12480028.bufpos = pos_12480036;
    my_12480028.kind = 5;

  
}
function parseTag_12480124(my_12480127) {
        var Tmp1;

  BeforeRet: do {
    my_12480127.bufpos += 1;
    parseName_12460463(my_12480127, my_12480127, "a");
    if (((my_12480127.a).length == 0)) {
    my_12480127.kind = 2;
    addChar(my_12480127.a, 60);;
    break BeforeRet;
    }
    
    parseWhitespace_12460421(my_12480127, true);
    if ((ConstSet50[my_12480127.buf[my_12480127.bufpos]] != undefined)) {
    my_12480127.kind = 8;
    my_12480127.state = 2;
    my_12480127.c = nimCopy(null, my_12480127.a, NTI2421013);
    my_12480127.cIsEmpty = false;
    }
    else {
      my_12480127.kind = 6;
      var slash_12485007 = (my_12480127.buf[my_12480127.bufpos] == 47);
      if (slash_12485007) {
      my_12480127.bufpos = handleRefillChar_12400220(my_12480127, my_12480127.bufpos);
      }
      
        if (!slash_12485007) Tmp1 = false; else {          Tmp1 = (my_12480127.buf[my_12480127.bufpos] == 62);        }      if (Tmp1) {
      my_12480127.bufpos += 1;
      my_12480127.state = 3;
      my_12480127.c = nimCopy(null, [], NTI2421013);
      my_12480127.cIsEmpty = true;
      }
      else {
      if ((my_12480127.buf[my_12480127.bufpos] == 62)) {
      my_12480127.bufpos += 1;
      }
      else {
      markError_12460286(my_12480127, 5);
      }
      }
    }
    
  } while (false);

  
}
function HEX3CHEX3DHEX25_2425474(x_2425476, y_2425477) {
  var result_2425478 = false;

    result_2425478 = ((x_2425476 >>> 0) <= (y_2425477 >>> 0));

  return result_2425478;

}
function nuctoUTF8(c_3990474) {
  var result_3990475 = [];

    result_3990475 = nimCopy(null, [], NTI2421013);
    var iHEX60gensym49_3995001 = c_3990474;
    if (HEX3CHEX3DHEX25_2425474(iHEX60gensym49_3995001, 127)) {
    (result_3990475.length = 1);
    result_3990475[0] = iHEX60gensym49_3995001;
    }
    else {
    if (HEX3CHEX3DHEX25_2425474(iHEX60gensym49_3995001, 2047)) {
    (result_3990475.length = 2);
    result_3990475[0] = ((iHEX60gensym49_3995001 >> 6) | 192);
    result_3990475[1] = ((iHEX60gensym49_3995001 & 63) | 128);
    }
    else {
    if (HEX3CHEX3DHEX25_2425474(iHEX60gensym49_3995001, 65535)) {
    (result_3990475.length = 3);
    result_3990475[0] = ((iHEX60gensym49_3995001 >> 12) | 224);
    result_3990475[1] = (((iHEX60gensym49_3995001 >> 6) & 63) | 128);
    result_3990475[2] = ((iHEX60gensym49_3995001 & 63) | 128);
    }
    else {
    if (HEX3CHEX3DHEX25_2425474(iHEX60gensym49_3995001, 2097151)) {
    (result_3990475.length = 4);
    result_3990475[0] = ((iHEX60gensym49_3995001 >> 18) | 240);
    result_3990475[1] = (((iHEX60gensym49_3995001 >> 12) & 63) | 128);
    result_3990475[2] = (((iHEX60gensym49_3995001 >> 6) & 63) | 128);
    result_3990475[3] = ((iHEX60gensym49_3995001 & 63) | 128);
    }
    else {
    if (HEX3CHEX3DHEX25_2425474(iHEX60gensym49_3995001, 67108863)) {
    (result_3990475.length = 5);
    result_3990475[0] = ((iHEX60gensym49_3995001 >> 24) | 248);
    result_3990475[1] = (((iHEX60gensym49_3995001 >> 18) & 63) | 128);
    result_3990475[2] = (((iHEX60gensym49_3995001 >> 12) & 63) | 128);
    result_3990475[3] = (((iHEX60gensym49_3995001 >> 6) & 63) | 128);
    result_3990475[4] = ((iHEX60gensym49_3995001 & 63) | 128);
    }
    else {
    if (HEX3CHEX3DHEX25_2425474(iHEX60gensym49_3995001, 2147483647)) {
    (result_3990475.length = 6);
    result_3990475[0] = ((iHEX60gensym49_3995001 >> 30) | 252);
    result_3990475[1] = (((iHEX60gensym49_3995001 >> 24) & 63) | 128);
    result_3990475[2] = (((iHEX60gensym49_3995001 >> 18) & 63) | 128);
    result_3990475[3] = (((iHEX60gensym49_3995001 >> 12) & 63) | 128);
    result_3990475[4] = (((iHEX60gensym49_3995001 >> 6) & 63) | 128);
    result_3990475[5] = ((iHEX60gensym49_3995001 & 63) | 128);
    }
    else {
    }
    }}}}}

  return result_3990475;

}
function parseEntity_12470020(my_12470023, dest_12470025, dest_12470025_Idx) {
      var Tmp5;
      var Tmp6;
      var Tmp7;
      var Tmp8;
      var Tmp9;
      var Tmp10;
      var Tmp11;
      var Tmp12;
      var Tmp13;
      var Tmp14;
      var Tmp15;
      var Tmp16;
      var Tmp17;
      var Tmp18;
      var Tmp19;
        var Tmp20;

    var pos_12470026 = (my_12470023.bufpos + 1);
    my_12470023.kind = 2;
    if ((my_12470023.buf[pos_12470026] == 35)) {
    var r_12470027 = 0;
    pos_12470026 += 1;
    if ((my_12470023.buf[pos_12470026] == 120)) {
    pos_12470026 += 1;
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12470023.buf[pos_12470026]) {
          case 48:
          case 49:
          case 50:
          case 51:
          case 52:
          case 53:
          case 54:
          case 55:
          case 56:
          case 57:
            r_12470027 = ((r_12470027 << 4) | (my_12470023.buf[pos_12470026] - 48));
            break;
          case 97:
          case 98:
          case 99:
          case 100:
          case 101:
          case 102:
            r_12470027 = ((r_12470027 << 4) | ((my_12470023.buf[pos_12470026] - 97) + 10));
            break;
          case 65:
          case 66:
          case 67:
          case 68:
          case 69:
          case 70:
            r_12470027 = ((r_12470027 << 4) | ((my_12470023.buf[pos_12470026] - 65) + 10));
            break;
          default: 
            break L1;
            break;
          }
          pos_12470026 += 1;
        }
    } while(false);
    }
    else {
      L3: do {
          L4: while (true) {
          if (!(ConstSet51[my_12470023.buf[pos_12470026]] != undefined)) break L4;
            r_12470027 = ((r_12470027 * 10) + (my_12470023.buf[pos_12470026] - 48));
            pos_12470026 += 1;
          }
      } while(false);
    }
    
    dest_12470025[dest_12470025_Idx].push.apply(dest_12470025[dest_12470025_Idx], nuctoUTF8(((r_12470027)|0)));;
    }
    else {
      if (!(my_12470023.buf[pos_12470026] == 108)) Tmp6 = false; else {        Tmp6 = (my_12470023.buf[(pos_12470026 + 1)] == 116);      }      if (!Tmp6) Tmp5 = false; else {        Tmp5 = (my_12470023.buf[(pos_12470026 + 2)] == 59);      }    if (Tmp5) {
    addChar(dest_12470025[dest_12470025_Idx], 60);;
    pos_12470026 += 2;
    }
    else {
      if (!(my_12470023.buf[pos_12470026] == 103)) Tmp8 = false; else {        Tmp8 = (my_12470023.buf[(pos_12470026 + 1)] == 116);      }      if (!Tmp8) Tmp7 = false; else {        Tmp7 = (my_12470023.buf[(pos_12470026 + 2)] == 59);      }    if (Tmp7) {
    addChar(dest_12470025[dest_12470025_Idx], 62);;
    pos_12470026 += 2;
    }
    else {
      if (!(my_12470023.buf[pos_12470026] == 97)) Tmp11 = false; else {        Tmp11 = (my_12470023.buf[(pos_12470026 + 1)] == 109);      }      if (!Tmp11) Tmp10 = false; else {        Tmp10 = (my_12470023.buf[(pos_12470026 + 2)] == 112);      }      if (!Tmp10) Tmp9 = false; else {        Tmp9 = (my_12470023.buf[(pos_12470026 + 3)] == 59);      }    if (Tmp9) {
    addChar(dest_12470025[dest_12470025_Idx], 38);;
    pos_12470026 += 3;
    }
    else {
      if (!(my_12470023.buf[pos_12470026] == 97)) Tmp15 = false; else {        Tmp15 = (my_12470023.buf[(pos_12470026 + 1)] == 112);      }      if (!Tmp15) Tmp14 = false; else {        Tmp14 = (my_12470023.buf[(pos_12470026 + 2)] == 111);      }      if (!Tmp14) Tmp13 = false; else {        Tmp13 = (my_12470023.buf[(pos_12470026 + 3)] == 115);      }      if (!Tmp13) Tmp12 = false; else {        Tmp12 = (my_12470023.buf[(pos_12470026 + 4)] == 59);      }    if (Tmp12) {
    addChar(dest_12470025[dest_12470025_Idx], 39);;
    pos_12470026 += 4;
    }
    else {
      if (!(my_12470023.buf[pos_12470026] == 113)) Tmp19 = false; else {        Tmp19 = (my_12470023.buf[(pos_12470026 + 1)] == 117);      }      if (!Tmp19) Tmp18 = false; else {        Tmp18 = (my_12470023.buf[(pos_12470026 + 2)] == 111);      }      if (!Tmp18) Tmp17 = false; else {        Tmp17 = (my_12470023.buf[(pos_12470026 + 3)] == 116);      }      if (!Tmp17) Tmp16 = false; else {        Tmp16 = (my_12470023.buf[(pos_12470026 + 4)] == 59);      }    if (Tmp16) {
    addChar(dest_12470025[dest_12470025_Idx], 34);;
    pos_12470026 += 4;
    }
    else {
      my_12470023.bufpos = pos_12470026;
      var name_12475052 = [[]];
      parseName_12460463(my_12470023, name_12475052, 0);
      pos_12470026 = my_12470023.bufpos;
        if (!!((my_12470023.err == 2))) Tmp20 = false; else {          Tmp20 = (my_12470023.buf[pos_12470026] == 59);        }      if (Tmp20) {
      my_12470023.kind = 12;
      }
      else {
      addChar(dest_12470025[dest_12470025_Idx], 38);;
      }
      
      dest_12470025[dest_12470025_Idx].push.apply(dest_12470025[dest_12470025_Idx], name_12475052[0]);;
    }
    }}}}}
    if ((my_12470023.buf[pos_12470026] == 59)) {
    pos_12470026 += 1;
    }
    else {
      my_12470023.err = 3;
    }
    
    my_12470023.bufpos = pos_12470026;

  
}
function parseCharData_12525020(my_12525023) {
    var pos_12525024 = my_12525023.bufpos;
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12525023.buf[pos_12525024]) {
          case 0:
          case 60:
          case 38:
            break L1;
            break;
          case 13:
            pos_12525024 = handleCR_12380220(my_12525023, pos_12525024);
            addChar(my_12525023.a, 10);;
            break;
          case 10:
            pos_12525024 = handleLF_12390220(my_12525023, pos_12525024);
            addChar(my_12525023.a, 10);;
            break;
          case 47:
            pos_12525024 = handleRefillChar_12400220(my_12525023, pos_12525024);
            addChar(my_12525023.a, 47);;
            break;
          default: 
            addChar(my_12525023.a, my_12525023.buf[pos_12525024]);;
            pos_12525024 += 1;
            break;
          }
        }
    } while(false);
    my_12525023.bufpos = pos_12525024;
    my_12525023.kind = 2;

  
}
function rawGetTok_12525044(my_12525047) {
          var Tmp1;
          var Tmp2;
          var Tmp3;
          var Tmp4;
          var Tmp5;
          var Tmp6;
          var Tmp7;

    my_12525047.kind = 0;
    (my_12525047.a.length = 0);
    var pos_12525048 = my_12525047.bufpos;
    switch (my_12525047.buf[pos_12525048]) {
    case 60:
      switch (my_12525047.buf[(pos_12525048 + 1)]) {
      case 47:
        parseEndTag_12485033(my_12525047);
        break;
      case 33:
          if (!(my_12525047.buf[(pos_12525048 + 2)] == 91)) Tmp6 = false; else {            Tmp6 = (my_12525047.buf[(pos_12525048 + 3)] == 67);          }          if (!Tmp6) Tmp5 = false; else {            Tmp5 = (my_12525047.buf[(pos_12525048 + 4)] == 68);          }          if (!Tmp5) Tmp4 = false; else {            Tmp4 = (my_12525047.buf[(pos_12525048 + 5)] == 65);          }          if (!Tmp4) Tmp3 = false; else {            Tmp3 = (my_12525047.buf[(pos_12525048 + 6)] == 84);          }          if (!Tmp3) Tmp2 = false; else {            Tmp2 = (my_12525047.buf[(pos_12525048 + 7)] == 65);          }          if (!Tmp2) Tmp1 = false; else {            Tmp1 = (my_12525047.buf[(pos_12525048 + 8)] == 91);          }        if (Tmp1) {
        parseCDATA_12460319(my_12525047);
        }
        else {
          if (!(my_12525047.buf[(pos_12525048 + 2)] == 45)) Tmp7 = false; else {            Tmp7 = (my_12525047.buf[(pos_12525048 + 3)] == 45);          }        if (Tmp7) {
        parseComment_12460355(my_12525047);
        }
        else {
        parseSpecial_12480068(my_12525047);
        }
        }
        break;
      case 63:
        parsePI_12480025(my_12525047);
        break;
      default: 
        parseTag_12480124(my_12525047);
        break;
      }
      break;
    case 32:
    case 9:
    case 13:
    case 10:
      parseWhitespace_12460421(my_12525047, false);
      my_12525047.kind = 3;
      break;
    case 0:
      my_12525047.kind = 1;
      break;
    case 38:
      parseEntity_12470020(my_12525047, my_12525047, "a");
      break;
    default: 
      parseCharData_12525020(my_12525047);
      break;
    }

  
}
function getTok_12540214(my_12540217) {
              var Tmp3;

    L1: do {
        L2: while (true) {
        if (!true) break L2;
          var lastKind_12540218 = my_12540217.kind;
          rawGetTok_12525044(my_12540217);
          switch (my_12540217.kind) {
          case 4:
            if ((my_12540217.options[1] != undefined)) {
            break L1;
            }
            
            break;
          case 3:
              if ((my_12540217.options[0] != undefined)) Tmp3 = true; else {                Tmp3 = (ConstSet52[lastKind_12540218] != undefined);              }            if (Tmp3) {
            break L1;
            }
            
            break;
          default: 
            break L1;
            break;
          }
        }
    } while(false);

  
}
function parseAttribute_12485057(my_12485060) {
      var Tmp1;
        var Tmp2;
            var Tmp9;

  BeforeRet: do {
    my_12485060.kind = 9;
    (my_12485060.a.length = 0);
    (my_12485060.b.length = 0);
    parseName_12460463(my_12485060, my_12485060, "a");
    if (((my_12485060.a).length == 0)) {
    markError_12460286(my_12485060, 5);
    break BeforeRet;
    }
    
    var startPos_12485062 = my_12485060.bufpos;
    parseWhitespace_12460421(my_12485060, true);
    if (!((my_12485060.buf[my_12485060.bufpos] == 61))) {
      if (!((my_12485060.options[3] != undefined))) Tmp1 = true; else {        if (!!((my_12485060.buf[my_12485060.bufpos] == 62))) Tmp2 = false; else {          Tmp2 = (my_12485060.bufpos == startPos_12485062);        }        Tmp1 = Tmp2;      }    if (Tmp1) {
    markError_12460286(my_12485060, 6);
    }
    
    break BeforeRet;
    }
    
    my_12485060.bufpos += 1;
    parseWhitespace_12460421(my_12485060, true);
    var pos_12500007 = my_12485060.bufpos;
    if ((ConstSet53[my_12485060.buf[pos_12500007]] != undefined)) {
    var quote_12505008 = my_12485060.buf[pos_12500007];
    var pendingSpace_12505009 = false;
    pos_12500007 += 1;
    L3: do {
        L4: while (true) {
        if (!true) break L4;
          switch (my_12485060.buf[pos_12500007]) {
          case 0:
            markError_12460286(my_12485060, 7);
            break L3;
            break;
          case 38:
            if (pendingSpace_12505009) {
            addChar(my_12485060.b, 32);;
            pendingSpace_12505009 = false;
            }
            
            my_12485060.bufpos = pos_12500007;
            parseEntity_12470020(my_12485060, my_12485060, "b");
            my_12485060.kind = 9;
            pos_12500007 = my_12485060.bufpos;
            break;
          case 32:
          case 9:
            pendingSpace_12505009 = true;
            pos_12500007 += 1;
            break;
          case 13:
            pos_12500007 = handleCR_12380220(my_12485060, pos_12500007);
            pendingSpace_12505009 = true;
            break;
          case 10:
            pos_12500007 = handleLF_12390220(my_12485060, pos_12500007);
            pendingSpace_12505009 = true;
            break;
          case 47:
            pos_12500007 = handleRefillChar_12400220(my_12485060, pos_12500007);
            addChar(my_12485060.b, 47);;
            break;
          default: 
            if ((my_12485060.buf[pos_12500007] == quote_12505008)) {
            pos_12500007 += 1;
            break L3;
            }
            else {
              if (pendingSpace_12505009) {
              addChar(my_12485060.b, 32);;
              pendingSpace_12505009 = false;
              }
              
              addChar(my_12485060.b, my_12485060.buf[pos_12500007]);;
              pos_12500007 += 1;
            }
            
            break;
          }
        }
    } while(false);
    }
    else {
    if ((my_12485060.options[2] != undefined)) {
    var startPos_12510009 = pos_12500007;
    L5: do {
        L6: while (true) {
          var c_12510010 = my_12485060.buf[pos_12500007];
        if (!!((ConstSet54[c_12510010] != undefined))) break L6;
          if ((c_12510010 == 38)) {
          my_12485060.bufpos = pos_12500007;
          parseEntity_12470020(my_12485060, my_12485060, "b");
          my_12485060.kind = 9;
          pos_12500007 = my_12485060.bufpos;
          }
          else {
          if ((c_12510010 == 47)) {
          pos_12500007 = handleRefillChar_12400220(my_12485060, pos_12500007);
          addChar(my_12485060.b, 47);;
          }
          else {
            addChar(my_12485060.b, c_12510010);;
            pos_12500007 += 1;
          }
          }
        }
    } while(false);
    if ((pos_12500007 == startPos_12510009)) {
    markError_12460286(my_12485060, 9);
    }
    
    }
    else {
      markError_12460286(my_12485060, 7);
      L7: do {
          L8: while (true) {
            if (!!((my_12485060.buf[pos_12500007] == 62))) Tmp9 = false; else {              Tmp9 = (32 < my_12485060.buf[pos_12500007]);            }          if (!Tmp9) break L8;
            addChar(my_12485060.b, my_12485060.buf[pos_12500007]);;
            pos_12500007 += 1;
          }
      } while(false);
    }
    }
    my_12485060.bufpos = pos_12500007;
    parseWhitespace_12460421(my_12485060, true);
  } while (false);

  
}
function next_12545021(my_12545024) {
        var Tmp1;

    switch (my_12545024.state) {
    case 1:
      getTok_12540214(my_12545024);
      break;
    case 0:
      my_12545024.state = 1;
      getTok_12540214(my_12545024);
        if (!(my_12545024.kind == 5)) Tmp1 = false; else {          Tmp1 = eqStrings(my_12545024.a, makeNimstrLit("xml"));        }      if (Tmp1) {
      getTok_12540214(my_12545024);
      }
      
      break;
    case 2:
      if ((my_12545024.buf[my_12545024.bufpos] == 62)) {
      my_12545024.kind = 10;
      my_12545024.bufpos += 1;
      my_12545024.state = 1;
      }
      else {
      if ((my_12545024.buf[my_12545024.bufpos] == 47)) {
      my_12545024.bufpos = handleRefillChar_12400220(my_12545024, my_12545024.bufpos);
      if ((my_12545024.buf[my_12545024.bufpos] == 62)) {
      my_12545024.kind = 10;
      my_12545024.bufpos += 1;
      my_12545024.state = 3;
      }
      else {
      markError_12460286(my_12545024, 5);
      }
      
      }
      else {
      parseAttribute_12485057(my_12545024);
      }
      }
      break;
    case 3:
      my_12545024.state = 1;
      my_12545024.kind = 7;
      if (!(my_12545024.cIsEmpty)) {
      my_12545024.a = nimCopy(null, my_12545024.c, NTI2421013);
      }
      
      break;
    case 4:
      my_12545024.kind = 0;
      my_12545024.state = 1;
      break;
    }

  
}
function kind_12451215(my_12451217) {
  var result_12451218 = 0;

  BeforeRet: do {
    result_12451218 = my_12451217.kind;
    break BeforeRet;
  } while (false);

  return result_12451218;

}
function newXmlNode_12666049(kind_12666051) {
  var result_12666052 = null;

    result_12666052 = {k: kind_12666051, fText: [], fTag: [], s: [], fAttr: null, fClientData: 0};

  return result_12666052;

}
function newElement_12666113(tag_12666115) {
    var Tmp1;
    var Tmp2;

  var result_12666116 = null;

    result_12666116 = newXmlNode_12666049(2);
    var Tmp1 = result_12666116;
    if (ConstSet55[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fTag\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.fTag = nimCopy(null, tag_12666115, NTI2421013);
    var Tmp2 = result_12666116;
    if (ConstSet56[Tmp2.k]===undefined) { raiseFieldError(makeNimstrLit("\'s\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp2.s = nimCopy(null, [], NTI12666133);

  return result_12666116;

}
function tag_12705215(n_12705217) {
    var Tmp1;

  var result_12705218 = [];

    var Tmp1 = n_12705217;
    if (ConstSet57[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fTag\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    result_12705218 = nimCopy(null, Tmp1.fTag, NTI2421013);

  return result_12705218;

}
function invalidFormatString_11500046() {
    raiseException({message: makeNimstrLit("invalid format string"), parent: null, m_type: NTI2427643, name: null, trace: [], up: null}, "ValueError");

  
}
function nsuToLowerAsciiChar(c_10595023) {
  var result_10595024 = 0;

    if ((ConstSet61[c_10595023] != undefined)) {
    result_10595024 = (c_10595023 + 32);
    }
    else {
      result_10595024 = c_10595023;
    }
    

  return result_10595024;

}
function nsuCmpIgnoreStyle(a_10675022, b_10675023) {
          var Tmp7;
          var Tmp8;

  var result_10675024 = 0;

  BeforeRet: do {
    var i_10675026 = 0;
    var j_10675028 = 0;
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          L3: do {
              L4: while (true) {
              if (!((i_10675026 < (a_10675022).length) && (a_10675022[i_10675026] == 95))) break L4;
                i_10675026 += 1;
              }
          } while(false);
          L5: do {
              L6: while (true) {
              if (!((j_10675028 < (b_10675023).length) && (b_10675023[j_10675028] == 95))) break L6;
                j_10675028 += 1;
              }
          } while(false);
          if ((i_10675026 < (a_10675022).length)) {
          Tmp7 = nsuToLowerAsciiChar(a_10675022[i_10675026]);
          }
          else {
          Tmp7 = 0;
          }
          
          var aa_10675041 = Tmp7;
          if ((j_10675028 < (b_10675023).length)) {
          Tmp8 = nsuToLowerAsciiChar(b_10675023[j_10675028]);
          }
          else {
          Tmp8 = 0;
          }
          
          var bb_10675042 = Tmp8;
          result_10675024 = (aa_10675041 - bb_10675042);
          if (!((result_10675024 == 0))) {
          break BeforeRet;
          }
          
          if (((a_10675022).length <= i_10675026)) {
          if (((b_10675023).length <= j_10675028)) {
          result_10675024 = 0;
          break BeforeRet;
          }
          
          result_10675024 = -1;
          break BeforeRet;
          }
          else {
          if (((b_10675023).length <= j_10675028)) {
          result_10675024 = 1;
          break BeforeRet;
          }
          }
          i_10675026 += 1;
          j_10675028 += 1;
        }
    } while(false);
  } while (false);

  return result_10675024;

}
function findNormalized_11500014(x_11500016, inArray_11500018) {
  var result_11500019 = 0;

  BeforeRet: do {
    var i_11500021 = 0;
    L1: do {
        L2: while (true) {
        if (!(i_11500021 < ((inArray_11500018).length-1))) break L2;
          if ((nsuCmpIgnoreStyle(x_11500016, inArray_11500018[i_11500021]) == 0)) {
          result_11500019 = i_11500021;
          break BeforeRet;
          }
          
          i_11500021 += 2;
        }
    } while(false);
    result_11500019 = -1;
    break BeforeRet;
  } while (false);

  return result_11500019;

}
function substr_2806022(s_2806024, first_2806025, last_2806026) {
  var result_2806027 = [];

    var first_2806028 = nimMax(first_2806025, 0);
    var L_2806030 = nimMax(((nimMin(last_2806026, ((s_2806024).length-1)) - first_2806028) + 1), 0);
    result_2806027 = nimCopy(null, mnewString(L_2806030), NTI2421013);
    L1: do {
      var i_2806039 = 0;
      var colontmp__14100308 = 0;
      colontmp__14100308 = (L_2806030 - 1);
      var res_14100309 = 0;
      L2: do {
          L3: while (true) {
          if (!(res_14100309 <= colontmp__14100308)) break L3;
            i_2806039 = res_14100309;
            result_2806027[i_2806039] = s_2806024[(i_2806039 + first_2806028)];
            res_14100309 += 1;
          }
      } while(false);
    } while(false);

  return result_2806027;

}
function nsuAddf(s_11505018, s_11505018_Idx, formatstr_11505019, a_11505021) {
                  var Tmp5;
            var Tmp6;
              var Tmp7;
            var Tmp10;
              var Tmp11;
                var Tmp12;
                  var Tmp15;
              var Tmp16;

    var i_11505025 = 0;
    var num_11505027 = 0;
    L1: do {
        L2: while (true) {
        if (!(i_11505025 < (formatstr_11505019).length)) break L2;
          if (((formatstr_11505019[i_11505025] == 36) && ((i_11505025 + 1) < (formatstr_11505019).length))) {
          switch (formatstr_11505019[(i_11505025 + 1)]) {
          case 35:
            if ((((a_11505021).length-1) < num_11505027)) {
            invalidFormatString_11500046();
            }
            
            s_11505018[s_11505018_Idx].push.apply(s_11505018[s_11505018_Idx], a_11505021[num_11505027]);;
            i_11505025 += 2;
            num_11505027 += 1;
            break;
          case 36:
            addChar(s_11505018[s_11505018_Idx], 36);;
            i_11505025 += 2;
            break;
          case 49:
          case 50:
          case 51:
          case 52:
          case 53:
          case 54:
          case 55:
          case 56:
          case 57:
          case 45:
            var j_11510025 = 0;
            i_11505025 += 1;
            var negative_11510032 = (formatstr_11505019[i_11505025] == 45);
            if (negative_11510032) {
            i_11505025 += 1;
            }
            
            L3: do {
                L4: while (true) {
                  if (!(i_11505025 < (formatstr_11505019).length)) Tmp5 = false; else {                    Tmp5 = (ConstSet58[formatstr_11505019[i_11505025]] != undefined);                  }                if (!Tmp5) break L4;
                  j_11510025 = (((j_11510025 * 10) + formatstr_11505019[i_11505025]) - 48);
                  i_11505025 += 1;
                }
            } while(false);
            if (!(negative_11510032)) {
            Tmp6 = (j_11510025 - 1);
            }
            else {
            Tmp6 = ((a_11505021).length - j_11510025);
            }
            
            var idx_11515025 = Tmp6;
              if ((idx_11515025 < 0)) Tmp7 = true; else {                Tmp7 = (((a_11505021).length-1) < idx_11515025);              }            if (Tmp7) {
            invalidFormatString_11500046();
            }
            
            s_11505018[s_11505018_Idx].push.apply(s_11505018[s_11505018_Idx], a_11505021[idx_11515025]);;
            break;
          case 123:
            var j_11520006 = (i_11505025 + 2);
            var k_11520008 = 0;
            var negative_11520009 = (formatstr_11505019[j_11520006] == 45);
            if (negative_11520009) {
            j_11520006 += 1;
            }
            
            var isNumber_11520017 = 0;
            L8: do {
                L9: while (true) {
                if (!((j_11520006 < (formatstr_11505019).length) && !((ConstSet59[formatstr_11505019[j_11520006]] != undefined)))) break L9;
                  if ((ConstSet60[formatstr_11505019[j_11520006]] != undefined)) {
                  k_11520008 = (((k_11520008 * 10) + formatstr_11505019[j_11520006]) - 48);
                  if ((isNumber_11520017 == 0)) {
                  isNumber_11520017 = 1;
                  }
                  
                  }
                  else {
                    isNumber_11520017 = -1;
                  }
                  
                  j_11520006 += 1;
                }
            } while(false);
            if ((isNumber_11520017 == 1)) {
            if (!(negative_11520009)) {
            Tmp10 = (k_11520008 - 1);
            }
            else {
            Tmp10 = ((a_11505021).length - k_11520008);
            }
            
            var idx_11530025 = Tmp10;
              if ((idx_11530025 < 0)) Tmp11 = true; else {                Tmp11 = (((a_11505021).length-1) < idx_11530025);              }            if (Tmp11) {
            invalidFormatString_11500046();
            }
            
            s_11505018[s_11505018_Idx].push.apply(s_11505018[s_11505018_Idx], a_11505021[idx_11530025]);;
            }
            else {
              var x_11535006 = findNormalized_11500014(substr_2806022(formatstr_11505019, (i_11505025 + 2), (j_11520006 - 1)), a_11505021);
                if (!(0 <= x_11535006)) Tmp12 = false; else {                  Tmp12 = (x_11535006 < ((a_11505021).length-1));                }              if (Tmp12) {
              s_11505018[s_11505018_Idx].push.apply(s_11505018[s_11505018_Idx], a_11505021[(x_11535006 + 1)]);;
              }
              else {
              invalidFormatString_11500046();
              }
              
            }
            
            i_11505025 = (j_11520006 + 1);
            break;
          case 97:
          case 98:
          case 99:
          case 100:
          case 101:
          case 102:
          case 103:
          case 104:
          case 105:
          case 106:
          case 107:
          case 108:
          case 109:
          case 110:
          case 111:
          case 112:
          case 113:
          case 114:
          case 115:
          case 116:
          case 117:
          case 118:
          case 119:
          case 120:
          case 121:
          case 122:
          case 65:
          case 66:
          case 67:
          case 68:
          case 69:
          case 70:
          case 71:
          case 72:
          case 73:
          case 74:
          case 75:
          case 76:
          case 77:
          case 78:
          case 79:
          case 80:
          case 81:
          case 82:
          case 83:
          case 84:
          case 85:
          case 86:
          case 87:
          case 88:
          case 89:
          case 90:
          case 128:
          case 129:
          case 130:
          case 131:
          case 132:
          case 133:
          case 134:
          case 135:
          case 136:
          case 137:
          case 138:
          case 139:
          case 140:
          case 141:
          case 142:
          case 143:
          case 144:
          case 145:
          case 146:
          case 147:
          case 148:
          case 149:
          case 150:
          case 151:
          case 152:
          case 153:
          case 154:
          case 155:
          case 156:
          case 157:
          case 158:
          case 159:
          case 160:
          case 161:
          case 162:
          case 163:
          case 164:
          case 165:
          case 166:
          case 167:
          case 168:
          case 169:
          case 170:
          case 171:
          case 172:
          case 173:
          case 174:
          case 175:
          case 176:
          case 177:
          case 178:
          case 179:
          case 180:
          case 181:
          case 182:
          case 183:
          case 184:
          case 185:
          case 186:
          case 187:
          case 188:
          case 189:
          case 190:
          case 191:
          case 192:
          case 193:
          case 194:
          case 195:
          case 196:
          case 197:
          case 198:
          case 199:
          case 200:
          case 201:
          case 202:
          case 203:
          case 204:
          case 205:
          case 206:
          case 207:
          case 208:
          case 209:
          case 210:
          case 211:
          case 212:
          case 213:
          case 214:
          case 215:
          case 216:
          case 217:
          case 218:
          case 219:
          case 220:
          case 221:
          case 222:
          case 223:
          case 224:
          case 225:
          case 226:
          case 227:
          case 228:
          case 229:
          case 230:
          case 231:
          case 232:
          case 233:
          case 234:
          case 235:
          case 236:
          case 237:
          case 238:
          case 239:
          case 240:
          case 241:
          case 242:
          case 243:
          case 244:
          case 245:
          case 246:
          case 247:
          case 248:
          case 249:
          case 250:
          case 251:
          case 252:
          case 253:
          case 254:
          case 255:
          case 95:
            var j_11540006 = (i_11505025 + 1);
            L13: do {
                L14: while (true) {
                  if (!(j_11540006 < (formatstr_11505019).length)) Tmp15 = false; else {                    Tmp15 = (ConstSet62[formatstr_11505019[j_11540006]] != undefined);                  }                if (!Tmp15) break L14;
                  j_11540006 += 1;
                }
            } while(false);
            var x_11545013 = findNormalized_11500014(substr_2806022(formatstr_11505019, (i_11505025 + 1), (j_11540006 - 1)), a_11505021);
              if (!(0 <= x_11545013)) Tmp16 = false; else {                Tmp16 = (x_11545013 < ((a_11505021).length-1));              }            if (Tmp16) {
            s_11505018[s_11505018_Idx].push.apply(s_11505018[s_11505018_Idx], a_11505021[(x_11545013 + 1)]);;
            }
            else {
            invalidFormatString_11500046();
            }
            
            i_11505025 = j_11540006;
            break;
          default: 
            invalidFormatString_11500046();
            break;
          }
          }
          else {
            addChar(s_11505018[s_11505018_Idx], formatstr_11505019[i_11505025]);;
            i_11505025 += 1;
          }
          
        }
    } while(false);

  
}
function nsuFormatOpenArray(formatstr_11550027, a_11550029) {
  var result_11550030 = [[]];

    result_11550030[0] = nimCopy(null, mnewString(0), NTI2421013);
    nsuAddf(result_11550030, 0, formatstr_11550027, a_11550029);

  return result_11550030[0];

}
function getLine_12451332(my_12451334) {
  var result_12451335 = 0;

    result_12451335 = my_12451334.lineNumber;

  return result_12451335;

}
function getColNumber_12445214(L_12445216, pos_12445217) {
  var result_12445218 = 0;

    result_12445218 = Math.abs((pos_12445217 - L_12445216.lineStart));

  return result_12445218;

}
function getColumn_12451300(my_12451302) {
  var result_12451303 = 0;

    result_12451303 = getColNumber_12445214(my_12451302, my_12451302.bufpos);

  return result_12451303;

}
function errorMsg_12460266(my_12460268, msg_12460269) {
  var result_12460270 = [];

    result_12460270 = nimCopy(null, nsuFormatOpenArray(makeNimstrLit("$1($2, $3) Error: $4"), [nimCopy(null, my_12460268.filename, NTI2421013), cstrToNimstr((getLine_12451332(my_12460268))+""), cstrToNimstr((getColumn_12451300(my_12460268))+""), nimCopy(null, msg_12460269, NTI2421013)]), NTI2421013);

  return result_12460270;

}
function add_12735257(father_12735259, son_12735260) {
    var Tmp1;

    var Tmp1 = father_12735259;
    if (ConstSet63[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'s\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.s.push(son_12735260);;

  
}
function addNode_12891027(father_12891029, son_12891030) {
    if (!((son_12891030 == null))) {
    add_12735257(father_12891029, son_12891030);
    }
    

  
}
function newComment_12675214(comment_12675216) {
    var Tmp1;

  var result_12675217 = null;

    result_12675217 = newXmlNode_12666049(5);
    var Tmp1 = result_12675217;
    if (ConstSet64[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fText\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.fText = nimCopy(null, comment_12675216, NTI2421013);

  return result_12675217;

}
function newText_12666162(text_12666164) {
    var Tmp1;

  var result_12666165 = null;

    result_12666165 = newXmlNode_12666049(0);
    var Tmp1 = result_12666165;
    if (ConstSet65[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fText\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.fText = nimCopy(null, text_12666164, NTI2421013);

  return result_12666165;

}
function errorMsg_12451366(my_12451368) {
  var result_12451369 = [];

    result_12451369 = nimCopy(null, nsuFormatOpenArray(makeNimstrLit("$1($2, $3) Error: $4"), [nimCopy(null, my_12451368.filename, NTI2421013), cstrToNimstr((getLine_12451332(my_12451368))+""), cstrToNimstr((getColumn_12451300(my_12451368))+""), nimCopy(null, errorMessages_12451072[my_12451368.err], NTI2421013)]), NTI2421013);

  return result_12451369;

}
function attrsHEX3D_12820215(n_12820217, attr_12820218) {
    var Tmp1;

    var Tmp1 = n_12820217;
    if (ConstSet66[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fAttr\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.fAttr = attr_12820218;

  
}
function nstnewStringTable(mode_12590028) {
  var result_12590030 = null;

    result_12590030 = ({m_type: NTI12547208, counter: 0, data: [], mode: 0});
    result_12590030.mode = mode_12590028;
    result_12590030.counter = 0;
    result_12590030.data = new Array(64); for (var i=0;i<64;++i) {result_12590030.data[i]={Field0: [], Field1: [], Field2: false};}
  return result_12590030;

}
function hash_11655214(x_11655216) {
  var result_11655217 = 0;

    result_11655217 = murmurHash_11616229((x_11655216.slice(0, ((x_11655216).length-1)+1)));

  return result_11655217;

}
function HEX21HEX26_11601057(h_11601059, val_11601060) {
  var result_11601061 = 0;

    var h_11601062 = (h_11601059 >>> 0);
    var val_11601063 = (val_11601060 >>> 0);
    var res_11601064 = ((h_11601062 + val_11601063) >>> 0);
    res_11601064 = ((res_11601064 + (res_11601064 << 10)) >>> 0);
    res_11601064 = (res_11601064 ^ ((res_11601064 >>> 0) >>> 6));
    result_11601061 = (res_11601064|0);

  return result_11601061;

}
function HEX21HEX24_11601092(h_11601094) {
  var result_11601095 = 0;

    var h_11601096 = (h_11601094 >>> 0);
    var res_11601104 = ((h_11601096 + (h_11601096 << 3)) >>> 0);
    res_11601104 = (res_11601104 ^ ((res_11601104 >>> 0) >>> 11));
    res_11601104 = ((res_11601104 + (res_11601104 << 15)) >>> 0);
    result_11601095 = (res_11601104|0);

  return result_11601095;

}
function hashIgnoreCase_11665045(x_11665047) {
  var result_11665048 = 0;

    var h_11665049 = 0;
    L1: do {
      var i_11665058 = 0;
      var colontmp__14100322 = 0;
      colontmp__14100322 = ((x_11665047).length - 1);
      var res_14100323 = 0;
      L2: do {
          L3: while (true) {
          if (!(res_14100323 <= colontmp__14100322)) break L3;
            i_11665058 = res_14100323;
            var c_11665059 = x_11665047[i_11665058];
            if ((ConstSet67[c_11665059] != undefined)) {
            c_11665059 = (c_11665059 + 32);
            }
            
            h_11665049 = HEX21HEX26_11601057(h_11665049, c_11665059);
            res_14100323 += 1;
          }
      } while(false);
    } while(false);
    result_11665048 = HEX21HEX24_11601092(h_11665049);

  return result_11665048;

}
function hashIgnoreStyle_11656414(x_11656416) {
  var result_11656417 = 0;

    var h_11656418 = 0;
    var i_11656420 = 0;
    var xLen_11656421 = (x_11656416).length;
    L1: do {
        L2: while (true) {
        if (!(i_11656420 < xLen_11656421)) break L2;
          var c_11656422 = x_11656416[i_11656420];
          if ((c_11656422 == 95)) {
          i_11656420 += 1;
          }
          else {
            if ((ConstSet68[c_11656422] != undefined)) {
            c_11656422 = (c_11656422 + 32);
            }
            
            h_11656418 = HEX21HEX26_11601057(h_11656418, c_11656422);
            i_11656420 += 1;
          }
          
        }
    } while(false);
    result_11656417 = HEX21HEX24_11601092(h_11656418);

  return result_11656417;

}
function myhash_12547419(t_12547421, key_12547422) {
  var result_12547423 = 0;

    switch (t_12547421.mode) {
    case 0:
      result_12547423 = hash_11655214(key_12547422);
      break;
    case 1:
      result_12547423 = hashIgnoreCase_11665045(key_12547422);
      break;
    case 2:
      result_12547423 = hashIgnoreStyle_11656414(key_12547422);
      break;
    }

  return result_12547423;

}
function cmpStrings(a_2695186, b_2695187) {
        if (a_2695186 == b_2695187) return 0;
    if (!a_2695186) return -1;
    if (!b_2695187) return 1;
    for (var i = 0; i < a_2695186.length && i < b_2695187.length; i++) {
      var result = a_2695186[i] - b_2695187[i];
      if (result != 0) return result;
    }
    return a_2695186.length - b_2695187.length;
  

  
}
function cmp_2429060(x_2429062, y_2429063) {
  var result_2695206 = 0;

  BeforeRet: do {
    result_2695206 = cmpStrings(x_2429062, y_2429063);
    break BeforeRet;
  } while (false);

  return result_2695206;

}
function nsuCmpIgnoreCase(a_10670016, b_10670017) {
  var result_10670018 = 0;

  BeforeRet: do {
    var i_10670020 = 0;
    var m_10670021 = nimMin((a_10670016).length, (b_10670017).length);
    L1: do {
        L2: while (true) {
        if (!(i_10670020 < m_10670021)) break L2;
          result_10670018 = (nsuToLowerAsciiChar(a_10670016[i_10670020]) - nsuToLowerAsciiChar(b_10670017[i_10670020]));
          if (!((result_10670018 == 0))) {
          break BeforeRet;
          }
          
          i_10670020 += 1;
        }
    } while(false);
    result_10670018 = ((a_10670016).length - (b_10670017).length);
  } while (false);

  return result_10670018;

}
function myCmp_12547439(t_12547441, a_12547442, b_12547443) {
  var result_12547444 = false;

    switch (t_12547441.mode) {
    case 0:
      result_12547444 = (cmp_2429060(a_12547442, b_12547443) == 0);
      break;
    case 1:
      result_12547444 = (nsuCmpIgnoreCase(a_12547442, b_12547443) == 0);
      break;
    case 2:
      result_12547444 = (nsuCmpIgnoreStyle(a_12547442, b_12547443) == 0);
      break;
    }

  return result_12547444;

}
function nextTry_12560214(h_12560216, maxHash_12560217) {
  var result_12560218 = 0;

    result_12560218 = ((h_12560216 + 1) & maxHash_12560217);

  return result_12560218;

}
function rawGet_12560232(t_12560234, key_12560235) {
  var result_12560236 = 0;

  BeforeRet: do {
    var h_12560243 = (myhash_12547419(t_12560234, key_12560235) & ((t_12560234.data).length-1));
    L1: do {
        L2: while (true) {
        if (!t_12560234.data[h_12560243].Field2) break L2;
          if (myCmp_12547439(t_12560234, t_12560234.data[h_12560243].Field0, key_12560235)) {
          result_12560236 = h_12560243;
          break BeforeRet;
          }
          
          h_12560243 = nextTry_12560214(h_12560243, ((t_12560234.data).length-1));
        }
    } while(false);
    result_12560236 = -1;
  } while (false);

  return result_12560236;

}
function mustRehash_12547458(length_12547460, counter_12547461) {
  var result_12547462 = false;

    result_12547462 = (((length_12547460 * 2) < (counter_12547461 * 3)) || ((length_12547460 - counter_12547461) < 4));

  return result_12547462;

}
function rawInsert_12585032(t_12585034, data_12585036, data_12585036_Idx, key_12585037, val_12585038) {
    var h_12585045 = (myhash_12547419(t_12585034, key_12585037) & ((data_12585036[data_12585036_Idx]).length-1));
    L1: do {
        L2: while (true) {
        if (!data_12585036[data_12585036_Idx][h_12585045].Field2) break L2;
          h_12585045 = nextTry_12560214(h_12585045, ((data_12585036[data_12585036_Idx]).length-1));
        }
    } while(false);
    data_12585036[data_12585036_Idx][h_12585045].Field0 = nimCopy(null, key_12585037, NTI2421013);
    data_12585036[data_12585036_Idx][h_12585045].Field1 = nimCopy(null, val_12585038, NTI2421013);
    data_12585036[data_12585036_Idx][h_12585045].Field2 = true;

  
}
function enlarge_12585065(t_12585067) {
            var Tmp4;
            var Tmp5;

    var n_12585068 = [[]];
    n_12585068[0] = new Array(((t_12585067.data).length * 2)); for (var i=0;i<((t_12585067.data).length * 2);++i) {n_12585068[0][i]={Field0: [], Field1: [], Field2: false};}    L1: do {
      var i_12585094 = 0;
      var colontmp__14100336 = 0;
      colontmp__14100336 = ((t_12585067.data).length-1);
      var res_14100337 = 0;
      L2: do {
          L3: while (true) {
          if (!(res_14100337 <= colontmp__14100336)) break L3;
            i_12585094 = res_14100337;
            if (t_12585067.data[i_12585094].Field2) {
            Tmp4 = t_12585067.data[i_12585094].Field0;
            t_12585067.data[i_12585094].Field0 = genericReset(t_12585067.data[i_12585094].Field0, NTI2421013);
            Tmp5 = t_12585067.data[i_12585094].Field1;
            t_12585067.data[i_12585094].Field1 = genericReset(t_12585067.data[i_12585094].Field1, NTI2421013);
            rawInsert_12585032(t_12585067, n_12585068, 0, Tmp4, Tmp5);
            }
            
            res_14100337 += 1;
          }
      } while(false);
    } while(false);
    var Tmp6 = t_12585067.data; t_12585067.data = n_12585068[0]; n_12585068[0] = Tmp6;
  
}
function nstPut(t_12585175, key_12585176, val_12585177) {
    var index_12585178 = rawGet_12560232(t_12585175, key_12585176);
    if ((0 <= index_12585178)) {
    t_12585175.data[index_12585178].Field1 = nimCopy(null, val_12585177, NTI2421013);
    }
    else {
      if (mustRehash_12547458((t_12585175.data).length, t_12585175.counter)) {
      enlarge_12585065(t_12585175);
      }
      
      rawInsert_12585032(t_12585175, t_12585175, "data", key_12585176, val_12585177);
      t_12585175.counter += 1;
    }
    

  
}
function nstnewStringTableWithTableConstr(keyValuePairs_12590126, mode_12590127) {
  var result_12590129 = null;

    result_12590129 = nstnewStringTable(mode_12590127);
    L1: do {
      var key_12590162 = null;
      var key_12590162_Idx = 0;
      var val_12590164 = null;
      var val_12590164_Idx = 0;
      var i_14100318 = 0;
      L2: do {
          L3: while (true) {
          if (!(i_14100318 < (keyValuePairs_12590126).length)) break L3;
            key_12590162 = keyValuePairs_12590126[i_14100318]; key_12590162_Idx = "Field0";
            val_12590164 = keyValuePairs_12590126[i_14100318]; val_12590164_Idx = "Field1";
            nstPut(result_12590129, key_12590162[key_12590162_Idx], val_12590164[val_12590164_Idx]);
            i_14100318 += 1;
          }
      } while(false);
    } while(false);

  return result_12590129;

}
function attrs_12810246(n_12810248) {
    var Tmp1;

  var result_12810249 = null;

    var Tmp1 = n_12810248;
    if (ConstSet69[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fAttr\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    result_12810249 = Tmp1.fAttr;

  return result_12810249;

}
function newCData_12675232(cdata_12675234) {
    var Tmp1;

  var result_12675235 = null;

    result_12675235 = newXmlNode_12666049(3);
    var Tmp1 = result_12675235;
    if (ConstSet70[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fText\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.fText = nimCopy(null, cdata_12675234, NTI2421013);

  return result_12675235;

}
function newEntity_12675250(entity_12675252) {
    var Tmp1;

  var result_12675253 = null;

    result_12675253 = newXmlNode_12666049(4);
    var Tmp1 = result_12675253;
    if (ConstSet71[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fText\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.fText = nimCopy(null, entity_12675252, NTI2421013);

  return result_12675253;

}
function parse_12895022(x_12895025, errors_12895028, errors_12895028_Idx) {
  var result_12915243 = null;

    switch (kind_12451215(x_12895025)) {
    case 4:
      result_12915243 = newComment_12675214(x_12895025.a);
      next_12545021(x_12895025);
      break;
    case 2:
    case 3:
      result_12915243 = newText_12666162(x_12895025.a);
      next_12545021(x_12895025);
      break;
    case 5:
    case 13:
      next_12545021(x_12895025);
      break;
    case 0:
      errors_12895028[errors_12895028_Idx].push(errorMsg_12451366(x_12895025));;
      next_12545021(x_12895025);
      break;
    case 6:
      result_12915243 = newElement_12666113(x_12895025.a);
      next_12545021(x_12895025);
      untilElementEnd_12895029(x_12895025, result_12915243, errors_12895028, errors_12895028_Idx);
      break;
    case 7:
      errors_12895028[errors_12895028_Idx].push(errorMsg_12460266(x_12895025, (makeNimstrLit("unexpected ending tag: ") || []).concat(x_12895025.a || [])));;
      break;
    case 8:
      result_12915243 = newElement_12666113(x_12895025.a);
      next_12545021(x_12895025);
      attrsHEX3D_12820215(result_12915243, nstnewStringTableWithTableConstr([], 0));
      L1: do {
          L2: while (true) {
          if (!true) break L2;
            switch (kind_12451215(x_12895025)) {
            case 9:
              nstPut(attrs_12810246(result_12915243), x_12895025.a, x_12895025.b);
              next_12545021(x_12895025);
              break;
            case 10:
              next_12545021(x_12895025);
              break L1;
              break;
            case 0:
              errors_12895028[errors_12895028_Idx].push(errorMsg_12451366(x_12895025));;
              next_12545021(x_12895025);
              break L1;
              break;
            default: 
              errors_12895028[errors_12895028_Idx].push(errorMsg_12460266(x_12895025, makeNimstrLit("\'>\' expected")));;
              next_12545021(x_12895025);
              break L1;
              break;
            }
          }
      } while(false);
      untilElementEnd_12895029(x_12895025, result_12915243, errors_12895028, errors_12895028_Idx);
      break;
    case 9:
    case 10:
      errors_12895028[errors_12895028_Idx].push(errorMsg_12460266(x_12895025, makeNimstrLit("<some_tag> expected")));;
      next_12545021(x_12895025);
      break;
    case 11:
      result_12915243 = newCData_12675232(x_12895025.a);
      next_12545021(x_12895025);
      break;
    case 12:
      result_12915243 = newEntity_12675250(x_12895025.a);
      next_12545021(x_12895025);
      break;
    case 1:
      break;
    }

  return result_12915243;

}
function untilElementEnd_12895029(x_12895032, result_12895033, errors_12895036, errors_12895036_Idx) {
  BeforeRet: do {
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (kind_12451215(x_12895032)) {
          case 7:
            if (eqStrings(x_12895032.a, tag_12705215(result_12895033))) {
            break BeforeRet;
            }
            else {
            errors_12895036[errors_12895036_Idx].push(errorMsg_12460266(x_12895032, (makeNimstrLit("</") || []).concat(tag_12705215(result_12895033) || [],makeNimstrLit("> expected") || [])));;
            }
            
            break L1;
            break;
          case 1:
            errors_12895036[errors_12895036_Idx].push(errorMsg_12460266(x_12895032, (makeNimstrLit("</") || []).concat(tag_12705215(result_12895033) || [],makeNimstrLit("> expected") || [])));;
            break L1;
            break;
          default: 
            addNode_12891027(result_12895033, parse_12895022(x_12895032, errors_12895036, errors_12895036_Idx));
            break;
          }
        }
    } while(false);
  } while (false);

  
}
function parseXml_13125229(text_13125231, i_13125232) {
  var result_13125234 = {Field0: false, Field1: 0};

    var errors_13125236 = [[]];
    var x_13125237 = [({m_type: NTI12451023, a: [], b: [], c: [], kind: 0, err: 0, state: 0, cIsEmpty: false, filename: [], options: {}, bufpos: 0, buf: [], input: null, lineNumber: 0, sentinel: 0, lineStart: 0, offsetBase: 0, refillChars: {}})];
    var stream_13125238 = newStringStream_12295214(text_13125231);
    setPosition_12036240(stream_13125238, i_13125232);
    open_12451101(x_13125237[0], stream_13125238, [], ConstSet47);
    next_12545021(x_13125237[0]);
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (kind_12451215(x_13125237[0])) {
          case 8:
          case 6:
            var node_13150201 = newElement_12666113(x_13125237[0].a);
            untilElementEnd_12895029(x_13125237[0], node_13150201, errors_13125236, 0);
            result_13125234["Field0"] = true;
            break;
          case 4:
          case 13:
          case 5:
          case 11:
            next_12545021(x_13125237[0]);
            result_13125234["Field0"] = true;
            break;
          case 7:
          case 2:
          case 3:
          case 1:
            result_13125234["Field0"] = true;
            break L1;
            break;
          default: 
            result_13125234["Field0"] = false;
            break L1;
            break;
          }
        }
    } while(false);
    result_13125234["Field1"] = x_13125237[0].bufpos;

  return result_13125234;

}
function add_11776037(x_11776040, x_11776040_Idx, y_11776041) {
    x_11776040[x_11776040_Idx] += String.fromCharCode(y_11776041);;

  
}
function parseAmpStr_13165026(parser_13165028, parser_13165028_Idx) {
    var Tmp1;

  var result_13165029 = [null];

  BeforeRet: do {
    var initialPos_13165030 = parser_13165028[parser_13165028_Idx].pos;
    if ((initialPos_13165030 < (parser_13165028[parser_13165028_Idx].str).length)) {
    Tmp1 = parser_13165028[parser_13165028_Idx].str.charCodeAt(initialPos_13165030);
    }
    else {
    Tmp1 = 32;
    }
    
    var firstChar_13165031 = Tmp1;
    switch (firstChar_13165031) {
    case 65:
    case 66:
    case 67:
    case 68:
    case 69:
    case 70:
    case 71:
    case 72:
    case 73:
    case 74:
    case 75:
    case 76:
    case 77:
    case 78:
    case 79:
    case 80:
    case 81:
    case 82:
    case 83:
    case 84:
    case 85:
    case 86:
    case 87:
    case 88:
    case 89:
    case 90:
    case 97:
    case 98:
    case 99:
    case 100:
    case 101:
    case 102:
    case 103:
    case 104:
    case 105:
    case 106:
    case 107:
    case 108:
    case 109:
    case 110:
    case 111:
    case 112:
    case 113:
    case 114:
    case 115:
    case 116:
    case 117:
    case 118:
    case 119:
    case 120:
    case 121:
    case 122:
      parser_13165028[parser_13165028_Idx].pos += 2;
      result_13165029[0] = "&";
      L2: do {
        var ch_13165038 = 0;
        L3: do {
            L4: while (true) {
            if (!(parser_13165028[parser_13165028_Idx].pos < (parser_13165028[parser_13165028_Idx].str).length)) break L4;
              ch_13165038 = parser_13165028[parser_13165028_Idx].str.charCodeAt((parser_13165028[parser_13165028_Idx].pos + 0));
              add_11776037(result_13165029, 0, ch_13165038);
              if ((ch_13165038 == 59)) {
              break L2;
              }
              else {
              if (!((ConstSet76[ch_13165038] != undefined))) {
              parser_13165028[parser_13165028_Idx].pos = initialPos_13165030;
              result_13165029[0] = "&amp;";
              break BeforeRet;
              }
              }
              parser_13165028[parser_13165028_Idx].pos += 1;
            }
        } while(false);
      } while(false);
      break;
    case 35:
      parser_13165028[parser_13165028_Idx].pos += 2;
      result_13165029[0] = "&";
      L5: do {
        var ch_13170014 = 0;
        L6: do {
            L7: while (true) {
            if (!(parser_13165028[parser_13165028_Idx].pos < (parser_13165028[parser_13165028_Idx].str).length)) break L7;
              ch_13170014 = parser_13165028[parser_13165028_Idx].str.charCodeAt((parser_13165028[parser_13165028_Idx].pos + 0));
              add_11776037(result_13165029, 0, ch_13170014);
              if ((ch_13170014 == 59)) {
              break L5;
              }
              else {
              if (!((ConstSet77[ch_13170014] != undefined))) {
              parser_13165028[parser_13165028_Idx].pos = initialPos_13165030;
              result_13165029[0] = "&amp;";
              break BeforeRet;
              }
              }
              parser_13165028[parser_13165028_Idx].pos += 1;
            }
        } while(false);
      } while(false);
      break;
    default: 
      result_13165029[0] = "&amp;";
      break;
    }
  } while (false);

  return result_13165029[0];

}
function parseDelimed_13180048(parser_13180050, parser_13180050_Idx, delim_13180051, singleLine_13180052) {
                    function canAsterisk_13250022(parser_13250024) {
                      var result_13250025 = false;

                        result_13250025 = !(((!(anyPrev_11985038(parser_13250024, 0)) || peekPrevMatch_13255001(parser_13250024, ConstSet6, 0)) && (!(anyNext_11985020(parser_13250024, 0)) || peekMatch_11995014(parser_13250024, ConstSet7, 1))));

                      return result_13250025;

                    }
                    var Tmp5;
                  var Tmp6;
                    function canEndUnderscore_13270014(parser_13270016) {
                      var result_13270017 = false;

                        result_13270017 = ((!(anyNext_11985020(parser_13270016, 1)) || peekMatch_11995014(parser_13270016, ConstSet9, 1)) && !((!(anyPrev_11985038(parser_13270016, 0)) || peekPrevMatch_13255001(parser_13270016, ConstSet10, 0))));

                      return result_13270017;

                    }
                    var Tmp7;
                  var Tmp8;
              var Tmp9;
              function parseAux_13195401(tag_13195403, del_13195404, parser_13195405, parser_13195405_Idx) {
                    var Tmp1;

                var result_13195406 = 0;

                  var currentPos_13195407 = parser_13195405[parser_13195405_Idx].pos;
                  var colontmp__14100171 = parseDelimed_13180048(parser_13195405, parser_13195405_Idx, del_13195404, singleLine_13180052);
                  var finishReason_13195408 = colontmp__14100171["Field0"];
                  var parsedElems_13195409 = nimCopy(null, colontmp__14100171["Field1"], NTI13180054);
                  if ((finishReason_13195408 == 0)) {
                  elems_13180069[0].push(newElem_11776665(tag_13195403, parsedElems_13195409));;
                  lastStr_13180057 = newStr_11776616("");
                  elems_13180069[0].push(lastStr_13180057);;
                  result_13195406 = 0;
                  }
                  else {
                    var Tmp1 = lastStr_13180057;
                    if (ConstSet13[Tmp1.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                    Tmp1.str += HEX5BHEX5D_11776075(parser_13195405[parser_13195405_Idx].str, HEX2EHEX2E_4625220(initialPos_13195202, (currentPos_13195407 - 1)));;
                    add_13220002(elems_13180069, 0, parsedElems_13195409);
                    lastStr_13180057 = newStr_11776616("");
                    elems_13180069[0].push(lastStr_13180057);;
                    result_13195406 = finishReason_13195408;
                  }
                  

                return result_13195406;

              }
              function bracket_13225072(image_13225074, parser_13225075, parser_13225075_Idx) {
                    var Tmp1;
                  var Tmp2;
                  var Tmp3;
                  var Tmp4;

                var result_13225076 = 0;

                  var elem_13225077 = parseBracket_13151414(image_13225074, parser_13225075, parser_13225075_Idx, singleLine_13180052);
                    var Tmp1 = elem_13225077;
                    if (ConstSet35[Tmp1.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                  if ((Tmp1.tag == 0)) {
                  var Tmp2 = lastStr_13180057;
                  if (ConstSet36[Tmp2.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                  if (image_13225074) {
                  Tmp3 = "![";
                  }
                  else {
                  Tmp3 = "[";
                  }
                  
                  Tmp2.str += Tmp3;;
                  var Tmp4 = elem_13225077;
                  if (ConstSet37[Tmp4.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                  add_13220002(elems_13180069, 0, Tmp4.content);
                  lastStr_13180057 = newStr_11776616("");
                  elems_13180069[0].push(lastStr_13180057);;
                  result_13225076 = 2;
                  }
                  else {
                    elems_13180069[0].push(elem_13225077);;
                    lastStr_13180057 = newStr_11776616("");
                    elems_13180069[0].push(lastStr_13180057);;
                    result_13225076 = 0;
                  }
                  

                return result_13225076;

              }
              var Tmp10;
                var Tmp11;
                var Tmp12;
                function canStartUnderscore_13260014(parser_13260016) {
                  var result_13260017 = false;

                    result_13260017 = ((!(anyPrev_11985038(parser_13260016, 0)) || peekPrevMatch_13255001(parser_13260016, ConstSet43, 0)) && !((!(anyNext_11985020(parser_13260016, 1)) || peekMatch_11995014(parser_13260016, ConstSet44, 1))));

                  return result_13260017;

                }
              var Tmp13;
                var Tmp14;
              var Tmp15;
              var Tmp16;
                var Tmp17;
                var Tmp18;

  var result_13180055 = {Field0: 0, Field1: []};

  BeforeRet: do {
    var escaped_13180056 = false;
    var lastStr_13180057 = newStr_11776616("");
    var elems_13180069 = [[lastStr_13180057]];
    L1: do {
      var ch_13180090 = 0;
      L2: do {
          L3: while (true) {
          if (!(parser_13180050[parser_13180050_Idx].pos < (parser_13180050[parser_13180050_Idx].str).length)) break L3;
            ch_13180090 = parser_13180050[parser_13180050_Idx].str.charCodeAt((parser_13180050[parser_13180050_Idx].pos + 0));
            L4: do {
              if (!(escaped_13180056)) {
              var initialPos_13195202 = parser_13180050[parser_13180050_Idx].pos;
              switch (toJSStr(delim_13180051)) {
              case "":
                break;
              case "*":
                if (nextMatch_12035365(parser_13180050, parser_13180050_Idx, makeNimstrLit("**"), 0)) {
                var colontmp__14100161 = parseDelimed_13180048(parser_13180050, parser_13180050_Idx, makeNimstrLit("**"), singleLine_13180052);
                var finishReason_13280020 = colontmp__14100161["Field0"];
                var parsedElems_13280021 = nimCopy(null, colontmp__14100161["Field1"], NTI13180054);
                if ((finishReason_13280020 == 0)) {
                elems_13180069[0].push(newElem_11776665(16, parsedElems_13280021));;
                lastStr_13180057 = newStr_11776616("");
                elems_13180069[0].push(lastStr_13180057);;
                break L4;
                }
                else {
                  parser_13180050[parser_13180050_Idx].pos = initialPos_13195202;
                  if (canAsterisk_13250022(parser_13180050[parser_13180050_Idx])) {
                  var colontmp__14100125 = 0;
                  var colontmp__14100126 = nimCopy(null, elems_13180069[0], NTI13180054);
                  nimCopy(result_13180055, {Field0: colontmp__14100125, Field1: nimCopy(null, colontmp__14100126, NTI13180054)}, NTI13180053);
                  break BeforeRet;
                  }
                  else {
                    var Tmp5 = lastStr_13180057;
                    if (ConstSet8[Tmp5.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                    add_13295003(Tmp5, "str");
                    break L4;
                  }
                  
                }
                
                }
                else {
                  if (!canAsterisk_13250022(parser_13180050[parser_13180050_Idx])) Tmp6 = false; else {                    Tmp6 = nextMatch_12035365(parser_13180050, parser_13180050_Idx, makeNimstrLit("*"), 0);                  }                if (Tmp6) {
                parser_13180050[parser_13180050_Idx].pos -= 1;
                var colontmp__14100127 = 0;
                var colontmp__14100128 = nimCopy(null, elems_13180069[0], NTI13180054);
                nimCopy(result_13180055, {Field0: colontmp__14100127, Field1: nimCopy(null, colontmp__14100128, NTI13180054)}, NTI13180053);
                break BeforeRet;
                }
                }
                break;
              case "_":
                if (nextMatch_12035365(parser_13180050, parser_13180050_Idx, makeNimstrLit("__"), 0)) {
                var colontmp__14100162 = parseDelimed_13180048(parser_13180050, parser_13180050_Idx, makeNimstrLit("__"), singleLine_13180052);
                var finishReason_13295030 = colontmp__14100162["Field0"];
                var parsedElems_13295031 = nimCopy(null, colontmp__14100162["Field1"], NTI13180054);
                if ((finishReason_13295030 == 0)) {
                elems_13180069[0].push(newElem_11776665(19, parsedElems_13295031));;
                lastStr_13180057 = newStr_11776616("");
                elems_13180069[0].push(lastStr_13180057);;
                break L4;
                }
                else {
                  parser_13180050[parser_13180050_Idx].pos = initialPos_13195202;
                  if (canEndUnderscore_13270014(parser_13180050[parser_13180050_Idx])) {
                  var colontmp__14100129 = 0;
                  var colontmp__14100130 = nimCopy(null, elems_13180069[0], NTI13180054);
                  nimCopy(result_13180055, {Field0: colontmp__14100129, Field1: nimCopy(null, colontmp__14100130, NTI13180054)}, NTI13180053);
                  break BeforeRet;
                  }
                  else {
                    var Tmp7 = lastStr_13180057;
                    if (ConstSet11[Tmp7.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                    add_13310003(Tmp7, "str");
                    break L4;
                  }
                  
                }
                
                }
                else {
                  if (!canEndUnderscore_13270014(parser_13180050[parser_13180050_Idx])) Tmp8 = false; else {                    Tmp8 = nextMatch_12035365(parser_13180050, parser_13180050_Idx, makeNimstrLit("_"), 0);                  }                if (Tmp8) {
                parser_13180050[parser_13180050_Idx].pos -= 1;
                var colontmp__14100131 = 0;
                var colontmp__14100132 = nimCopy(null, elems_13180069[0], NTI13180054);
                nimCopy(result_13180055, {Field0: colontmp__14100131, Field1: nimCopy(null, colontmp__14100132, NTI13180054)}, NTI13180053);
                break BeforeRet;
                }
                }
                break;
              default: 
                if (nextMatch_12035365(parser_13180050, parser_13180050_Idx, delim_13180051, 0)) {
                parser_13180050[parser_13180050_Idx].pos -= 1;
                var colontmp__14100133 = 0;
                var colontmp__14100134 = nimCopy(null, elems_13180069[0], NTI13180054);
                nimCopy(result_13180055, {Field0: colontmp__14100133, Field1: nimCopy(null, colontmp__14100134, NTI13180054)}, NTI13180053);
                break BeforeRet;
                }
                
                break;
              }
              if (((singleLine_13180052 && (nextMatch_12035365(parser_13180050, parser_13180050_Idx, makeNimstrLit("\x0D\x0A"), 0) || nextMatch_12035365(parser_13180050, parser_13180050_Idx, makeNimstrLit("\x0A"), 0))) || (!(singleLine_13180052) && (nextMatch_12035365(parser_13180050, parser_13180050_Idx, makeNimstrLit("\x0D\x0A\x0D\x0A"), 0) || nextMatch_12035365(parser_13180050, parser_13180050_Idx, makeNimstrLit("\x0A\x0A"), 0))))) {
              if ((singleLine_13180052 && ((delim_13180051).length == 0))) {
              parser_13180050[parser_13180050_Idx].pos -= 1;
              }
              else {
                parser_13180050[parser_13180050_Idx].pos = initialPos_13195202;
              }
              
              if (((delim_13180051).length == 0)) {
              Tmp9 = 1;
              }
              else {
              Tmp9 = 0;
              }
              
              var colontmp__14100135 = Tmp9;
              var colontmp__14100136 = nimCopy(null, elems_13180069[0], NTI13180054);
              nimCopy(result_13180055, {Field0: colontmp__14100135, Field1: nimCopy(null, colontmp__14100136, NTI13180054)}, NTI13180053);
              break BeforeRet;
              }
              else {
              if ((nextMatch_12035365(parser_13180050, parser_13180050_Idx, makeNimstrLit("  \x0D\x0A"), 0) || nextMatch_12035365(parser_13180050, parser_13180050_Idx, makeNimstrLit("  \x0A"), 0))) {
              elems_13180069[0].push(newElem_11776665(2, []));;
              lastStr_13180057 = newStr_11776616("");
              elems_13180069[0].push(lastStr_13180057);;
              }
              else {
              if (nextMatch_12035365(parser_13180050, parser_13180050_Idx, makeNimstrLit("```"), 0)) {
              elems_13180069[0].push(parseCodeBlock_13180014(parser_13180050, parser_13180050_Idx, 96));;
              lastStr_13180057 = newStr_11776616("");
              elems_13180069[0].push(lastStr_13180057);;
              }
              else {
              if (nextMatch_12035365(parser_13180050, parser_13180050_Idx, makeNimstrLit("~~~"), 0)) {
              elems_13180069[0].push(parseCodeBlock_13180014(parser_13180050, parser_13180050_Idx, 126));;
              lastStr_13180057 = newStr_11776616("");
              elems_13180069[0].push(lastStr_13180057);;
              }
              else {
              if (nextMatch_12035365(parser_13180050, parser_13180050_Idx, makeNimstrLit("^("), 0)) {
              var reasonHEX60gensym38_13350001 = parseAux_13195401(13, makeNimstrLit(")"), parser_13180050, parser_13180050_Idx);
              if ((ConstSet14[reasonHEX60gensym38_13350001] != undefined)) {
              var colontmp__14100137 = reasonHEX60gensym38_13350001;
              var colontmp__14100138 = nimCopy(null, elems_13180069[0], NTI13180054);
              nimCopy(result_13180055, {Field0: colontmp__14100137, Field1: nimCopy(null, colontmp__14100138, NTI13180054)}, NTI13180053);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch_12035365(parser_13180050, parser_13180050_Idx, makeNimstrLit("**"), 0)) {
              var reasonHEX60gensym40_13360001 = parseAux_13195401(16, makeNimstrLit("**"), parser_13180050, parser_13180050_Idx);
              if ((ConstSet15[reasonHEX60gensym40_13360001] != undefined)) {
              var colontmp__14100139 = reasonHEX60gensym40_13360001;
              var colontmp__14100140 = nimCopy(null, elems_13180069[0], NTI13180054);
              nimCopy(result_13180055, {Field0: colontmp__14100139, Field1: nimCopy(null, colontmp__14100140, NTI13180054)}, NTI13180053);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch_12035365(parser_13180050, parser_13180050_Idx, makeNimstrLit("__"), 0)) {
              var reasonHEX60gensym42_13370001 = parseAux_13195401(19, makeNimstrLit("__"), parser_13180050, parser_13180050_Idx);
              if ((ConstSet16[reasonHEX60gensym42_13370001] != undefined)) {
              var colontmp__14100141 = reasonHEX60gensym42_13370001;
              var colontmp__14100142 = nimCopy(null, elems_13180069[0], NTI13180054);
              nimCopy(result_13180055, {Field0: colontmp__14100141, Field1: nimCopy(null, colontmp__14100142, NTI13180054)}, NTI13180053);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch_12035365(parser_13180050, parser_13180050_Idx, makeNimstrLit("~~"), 0)) {
              var reasonHEX60gensym44_13380001 = parseAux_13195401(20, makeNimstrLit("~~"), parser_13180050, parser_13180050_Idx);
              if ((ConstSet17[reasonHEX60gensym44_13380001] != undefined)) {
              var colontmp__14100143 = reasonHEX60gensym44_13380001;
              var colontmp__14100144 = nimCopy(null, elems_13180069[0], NTI13180054);
              nimCopy(result_13180055, {Field0: colontmp__14100143, Field1: nimCopy(null, colontmp__14100144, NTI13180054)}, NTI13180053);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch_12035365(parser_13180050, parser_13180050_Idx, makeNimstrLit("!["), 0)) {
              var reason_13385010 = bracket_13225072(true, parser_13180050, parser_13180050_Idx);
              if ((ConstSet38[reason_13385010] != undefined)) {
              var colontmp__14100145 = reason_13385010;
              var colontmp__14100146 = nimCopy(null, elems_13180069[0], NTI13180054);
              nimCopy(result_13180055, {Field0: colontmp__14100145, Field1: nimCopy(null, colontmp__14100146, NTI13180054)}, NTI13180053);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch_12035261(parser_13180050, parser_13180050_Idx, 123, 0)) {
              var Tmp10 = lastStr_13180057;
              if (ConstSet39[Tmp10.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp10.str += parseCurly_13151419(parser_13180050, parser_13180050_Idx);;
              }
              else {
              if (nextMatch_12035261(parser_13180050, parser_13180050_Idx, 91, 0)) {
              var reason_13395002 = bracket_13225072(false, parser_13180050, parser_13180050_Idx);
              if ((ConstSet40[reason_13395002] != undefined)) {
              var colontmp__14100147 = reason_13395002;
              var colontmp__14100148 = nimCopy(null, elems_13180069[0], NTI13180054);
              nimCopy(result_13180055, {Field0: colontmp__14100147, Field1: nimCopy(null, colontmp__14100148, NTI13180054)}, NTI13180053);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch_12035261(parser_13180050, parser_13180050_Idx, 96, 0)) {
              var reasonHEX60gensym49_13405001 = parseAux_13195401(18, makeNimstrLit("`"), parser_13180050, parser_13180050_Idx);
              if ((ConstSet41[reasonHEX60gensym49_13405001] != undefined)) {
              var colontmp__14100149 = reasonHEX60gensym49_13405001;
              var colontmp__14100150 = nimCopy(null, elems_13180069[0], NTI13180054);
              nimCopy(result_13180055, {Field0: colontmp__14100149, Field1: nimCopy(null, colontmp__14100150, NTI13180054)}, NTI13180053);
              break BeforeRet;
              }
              
              }
              else {
                if (!canAsterisk_13250022(parser_13180050[parser_13180050_Idx])) Tmp11 = false; else {                  Tmp11 = nextMatch_12035261(parser_13180050, parser_13180050_Idx, 42, 0);                }              if (Tmp11) {
              var reasonHEX60gensym51_13415001 = parseAux_13195401(15, makeNimstrLit("*"), parser_13180050, parser_13180050_Idx);
              if ((ConstSet42[reasonHEX60gensym51_13415001] != undefined)) {
              var colontmp__14100151 = reasonHEX60gensym51_13415001;
              var colontmp__14100152 = nimCopy(null, elems_13180069[0], NTI13180054);
              nimCopy(result_13180055, {Field0: colontmp__14100151, Field1: nimCopy(null, colontmp__14100152, NTI13180054)}, NTI13180053);
              break BeforeRet;
              }
              
              }
              else {
                if (!canStartUnderscore_13260014(parser_13180050[parser_13180050_Idx])) Tmp12 = false; else {                  Tmp12 = nextMatch_12035261(parser_13180050, parser_13180050_Idx, 95, 0);                }              if (Tmp12) {
              var reasonHEX60gensym53_13425001 = parseAux_13195401(15, makeNimstrLit("_"), parser_13180050, parser_13180050_Idx);
              if ((ConstSet45[reasonHEX60gensym53_13425001] != undefined)) {
              var colontmp__14100153 = reasonHEX60gensym53_13425001;
              var colontmp__14100154 = nimCopy(null, elems_13180069[0], NTI13180054);
              nimCopy(result_13180055, {Field0: colontmp__14100153, Field1: nimCopy(null, colontmp__14100154, NTI13180054)}, NTI13180053);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch_12035261(parser_13180050, parser_13180050_Idx, 60, 0)) {
              parser_13180050[parser_13180050_Idx].pos -= 1;
              var colontmp__14100229 = parseXml_13125229(cstrToNimstr(parser_13180050[parser_13180050_Idx].str), parser_13180050[parser_13180050_Idx].pos);
              var change_13430201 = colontmp__14100229["Field0"];
              var pos_13430202 = colontmp__14100229["Field1"];
              if (change_13430201) {
              var Tmp13 = lastStr_13180057;
              if (ConstSet72[Tmp13.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp13.str += HEX5BHEX5D_11776075(parser_13180050[parser_13180050_Idx].str, HEX2EHEX2E_4625220(parser_13180050[parser_13180050_Idx].pos, ((parser_13180050[parser_13180050_Idx].pos + pos_13430202) - 1)));;
              parser_13180050[parser_13180050_Idx].pos += (pos_13430202 - 1);
              }
              else {
                var Tmp14 = lastStr_13180057;
                if (ConstSet73[Tmp14.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp14.str += "&lt;";;
              }
              
              }
              else {
              if (nextMatch_12035261(parser_13180050, parser_13180050_Idx, 62, 0)) {
              var Tmp15 = lastStr_13180057;
              if (ConstSet74[Tmp15.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp15.str += "&gt;";;
              break L4;
              }
              else {
              if (nextMatch_12035261(parser_13180050, parser_13180050_Idx, 38, 0)) {
              var Tmp16 = lastStr_13180057;
              if (ConstSet75[Tmp16.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp16.str += parseAmpStr_13165026(parser_13180050, parser_13180050_Idx);;
              }
              else {
              if (nextMatch_12035261(parser_13180050, parser_13180050_Idx, 92, 0)) {
              parser_13180050[parser_13180050_Idx].pos -= 1;
              escaped_13180056 = true;
              }
              else {
                var Tmp17 = lastStr_13180057;
                if (ConstSet78[Tmp17.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              add_11776037(Tmp17, "str", ch_13180090);
              }
              }}}}}}}}}}}}}}}}}
              }
              else {
                var Tmp18 = lastStr_13180057;
                if (ConstSet79[Tmp18.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_11776037(Tmp18, "str", ch_13180090);
                escaped_13180056 = false;
              }
              
            } while(false);
            parser_13180050[parser_13180050_Idx].pos += 1;
          }
      } while(false);
    } while(false);
    var colontmp__14100156 = 1;
    var colontmp__14100157 = nimCopy(null, elems_13180069[0], NTI13180054);
    nimCopy(result_13180055, {Field0: colontmp__14100156, Field1: nimCopy(null, colontmp__14100157, NTI13180054)}, NTI13180053);
  } while (false);

  return result_13180055;

}
function parseInline_13575855(parser_13575857, parser_13575857_Idx, singleLine_13575858) {
  var result_13575860 = [];

    var colontmp__14100122 = parseDelimed_13180048(parser_13575857, parser_13575857_Idx, [], singleLine_13575858);
    var finishReason_13575861 = colontmp__14100122["Field0"];
    var elems_13575862 = nimCopy(null, colontmp__14100122["Field1"], NTI13180054);
    result_13575860 = nimCopy(null, elems_13575862, NTI13180054);

  return result_13575860;

}
function HEX5BHEX5D_13190005(s_13190010, i_13190011) {
  var result_13190013 = null;
  var result_13190013_Idx = 0;

    result_13190013 = s_13190010; result_13190013_Idx = ((s_13190010).length - i_13190011);

  return [result_13190013, result_13190013_Idx];

}
function HEX5BHEX5DHEX3D_13725004(s_13725009, i_13725010, x_13725011) {
    s_13725009[((s_13725009).length - i_13725010)] = x_13725011;

  
}
function peekPrevMatch_12035242(parser_12035244, pat_12035245, offset_12035246) {
  var result_12035247 = false;

    result_12035247 = (anyPrev_11985038(parser_12035244, (offset_12035246 - (pat_12035245).length)) && peekMatch_12025020(parser_12035244, pat_12035245, (offset_12035246 - (pat_12035245).length)));

  return result_12035247;

}
function style_11871454(elem_11871456, style_11871457) {
    attr_11790071(elem_11871456, "style", style_11871457);

  
}
function getOrDefault_14010228(t_14010233, key_14010234, default_14010235) {
    var Tmp1;

  var result_14010236 = [];

    var hcHEX60gensym169_14015001 = [0];
    var indexHEX60gensym169_14015010 = rawGet_13520602(t_14010233, key_14010234, hcHEX60gensym169_14015001, 0);
    if ((0 <= indexHEX60gensym169_14015010)) {
    Tmp1 = t_14010233.data[indexHEX60gensym169_14015010].Field2;
    }
    else {
    Tmp1 = default_14010235;
    }
    
    result_14010236 = nimCopy(null, Tmp1, NTI11776471);

  return result_14010236;

}
function parseTopLevel_13590292(parser_13590294, parser_13590294_Idx) {
            var Tmp4;
              var Tmp5;
              var Tmp6;
                var Tmp7;
                var Tmp8;
                var Tmp9;
                var Tmp10;
                var Tmp11;
                var Tmp12;
                var Tmp15;
              var Tmp16;
              var Tmp17;
                var Tmp18;
                var Tmp19;
                var Tmp20;
                var Tmp21;
                var Tmp22;
                var Tmp23;
              function skipWhitespaceUntilNewline_13700018(parser_13700020, parser_13700020_Idx) {
                var result_13700021 = false;

                BeforeRet: do {
                  var i_13700023 = 0;
                  L1: do {
                      L2: while (true) {
                      if (!((parser_13700020[parser_13700020_Idx].pos + i_13700023) < (parser_13700020[parser_13700020_Idx].str).length)) break L2;
                        var ch_13705001 = parser_13700020[parser_13700020_Idx].str.charCodeAt((parser_13700020[parser_13700020_Idx].pos + i_13700023));
                        switch (ch_13705001) {
                        case 10:
                          parser_13700020[parser_13700020_Idx].pos += i_13700023;
                          result_13700021 = true;
                          break BeforeRet;
                          break;
                        case 9:
                        case 11:
                        case 12:
                        case 13:
                        case 32:
                          break;
                        default: 
                          result_13700021 = false;
                          break BeforeRet;
                          break;
                        }
                        i_13700023 += 1;
                      }
                  } while(false);
                } while (false);

                return result_13700021;

              }
              var Tmp24;
              var Tmp25;
              var Tmp26;
              var Tmp27;
              var Tmp28;
                var Tmp29;
                var Tmp30;
                var Tmp31;
                var Tmp32;
                var Tmp33;
              var Tmp34;
              var Tmp35;
              var Tmp36;
              var Tmp37;
              var Tmp38;
              var Tmp39;
              var Tmp40;
              var Tmp41;
                var Tmp42;
                var Tmp43;
                var Tmp44;
                var Tmp45;
                var Tmp46;
                var Tmp47;
                  var Tmp48;
                  var Tmp49;
                  var Tmp50;
                    var Tmp51;
                    var Tmp52;
                    var Tmp53;
                    var Tmp54;
                    var Tmp55;
                var Tmp56;
                var Tmp57;
                var Tmp58;
                var Tmp59;
                var Tmp60;
                var Tmp61;
                var Tmp62;
                var Tmp63;
                      var Tmp66;
                var Tmp69;
                var Tmp70;
                var Tmp71;
                var Tmp74;
                var Tmp75;
                var Tmp76;
                  var Tmp77;
                  var Tmp78;

  var result_13590296 = [];

    var lastElement_13590297 = null;
    L1: do {
      var firstCh_13590302 = 0;
      L2: do {
          L3: while (true) {
          if (!(parser_13590294[parser_13590294_Idx].pos < (parser_13590294[parser_13590294_Idx].str).length)) break L3;
            firstCh_13590302 = parser_13590294[parser_13590294_Idx].str.charCodeAt((parser_13590294[parser_13590294_Idx].pos + 0));
            if ((ConstSet1[firstCh_13590302] != undefined)) {
            if (!((lastElement_13590297 == null))) {
            result_13590296.push(paragraphIfText_11776729(lastElement_13590297));;
            lastElement_13590297 = null;
            }
            
            }
            else {
            if (!((lastElement_13590297 == null))) {
            var Tmp4 = lastElement_13590297;
            if (ConstSet2[Tmp4.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
            switch (Tmp4.tag) {
            case 9:
              if (nextMatch_12035286(parser_13590294, parser_13590294_Idx, ConstSet4, 1)) {
              var item_13610202 = newElem_11776665(11, []);
              var Tmp5 = item_13610202;
              if (ConstSet5[Tmp5.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp5.content = nimCopy(null, parseInline_13575855(parser_13590294, parser_13590294_Idx, true), NTI13575859);
              var Tmp6 = lastElement_13590297;
              if (ConstSet80[Tmp6.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp6.content.push(item_13610202);;
              }
              else {
                var Tmp7 = lastElement_13590297;
                if (ConstSet82[Tmp7.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp9 = (Tmp8 = HEX5BHEX5D_13190005(Tmp7.content, 1), Tmp8)[0][Tmp8[1]];
                if (ConstSet81[Tmp9.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp9.content.push(newStr_11776616("\n"));;
                var Tmp10 = lastElement_13590297;
                if (ConstSet84[Tmp10.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp12 = (Tmp11 = HEX5BHEX5D_13190005(Tmp10.content, 1), Tmp11)[0][Tmp11[1]];
                if (ConstSet83[Tmp12.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_13220002(Tmp12, "content", parseInline_13575855(parser_13590294, parser_13590294_Idx, true));
              }
              
              break;
            case 10:
              var i_13655013 = 0;
              L13: do {
                  L14: while (true) {
                  if (!peekMatch_11995014(parser_13590294[parser_13590294_Idx], ConstSet85, i_13655013)) break L14;
                    i_13655013 += 1;
                  }
              } while(false);
                if (!(((parser_13590294[parser_13590294_Idx].pos + i_13655013) + 1) < (parser_13590294[parser_13590294_Idx].str).length)) Tmp15 = false; else {                  Tmp15 = peekMatch_11990024(parser_13590294[parser_13590294_Idx], 46, i_13655013);                }              if (Tmp15) {
              parser_13590294[parser_13590294_Idx].pos += (i_13655013 + 1);
              var item_13655026 = newElem_11776665(11, []);
              var Tmp16 = item_13655026;
              if (ConstSet86[Tmp16.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp16.content = nimCopy(null, parseInline_13575855(parser_13590294, parser_13590294_Idx, true), NTI13575859);
              var Tmp17 = lastElement_13590297;
              if (ConstSet87[Tmp17.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp17.content.push(item_13655026);;
              }
              else {
                var Tmp18 = lastElement_13590297;
                if (ConstSet89[Tmp18.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp20 = (Tmp19 = HEX5BHEX5D_13190005(Tmp18.content, 1), Tmp19)[0][Tmp19[1]];
                if (ConstSet88[Tmp20.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp20.content.push(newStr_11776616("\n "));;
                var Tmp21 = lastElement_13590297;
                if (ConstSet91[Tmp21.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp23 = (Tmp22 = HEX5BHEX5D_13190005(Tmp21.content, 1), Tmp22)[0][Tmp22[1]];
                if (ConstSet90[Tmp23.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_13220002(Tmp23, "content", parseInline_13575855(parser_13590294, parser_13590294_Idx, true));
              }
              
              break;
            case 12:
              if ((firstCh_13590302 == 62)) {
              parser_13590294[parser_13590294_Idx].pos += 1;
              }
              
              var rem_13705036 = skipWhitespaceUntilNewline_13700018(parser_13590294, parser_13590294_Idx);
              if (rem_13705036) {
              if ((firstCh_13590302 == 62)) {
              var Tmp24 = lastElement_13590297;
              if (ConstSet92[Tmp24.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              var Tmp25 = lastElement_13590297;
              if (ConstSet93[Tmp25.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              HEX5BHEX5DHEX3D_13725004(Tmp24.content, 1, paragraphIfText_11776729((Tmp26 = HEX5BHEX5D_13190005(Tmp25.content, 1), Tmp26)[0][Tmp26[1]]));
              var Tmp27 = lastElement_13590297;
              if (ConstSet94[Tmp27.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp27.content.push(newStr_11776616("\n"));;
              if (peekPrevMatch_12035242(parser_13590294[parser_13590294_Idx], makeNimstrLit("  "), 0)) {
              var Tmp28 = lastElement_13590297;
              if (ConstSet95[Tmp28.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp28.content.push(newElem_11776665(2, []));;
              }
              
              }
              else {
                var Tmp29 = lastElement_13590297;
                if (ConstSet96[Tmp29.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp30 = lastElement_13590297;
                if (ConstSet97[Tmp30.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                HEX5BHEX5DHEX3D_13725004(Tmp29.content, 1, paragraphIfText_11776729((Tmp31 = HEX5BHEX5D_13190005(Tmp30.content, 1), Tmp31)[0][Tmp31[1]]));
                result_13590296.push(lastElement_13590297);;
                if (peekPrevMatch_12035242(parser_13590294[parser_13590294_Idx], makeNimstrLit("  "), 0)) {
                result_13590296.push(newElem_11776665(2, []));;
                }
                
              }
              
              }
              else {
                var Tmp32 = lastElement_13590297;
                if (ConstSet98[Tmp32.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              if ((Tmp33 = HEX5BHEX5D_13190005(Tmp32.content, 1), Tmp33)[0][Tmp33[1]].isText) {
              var Tmp34 = lastElement_13590297;
              if (ConstSet99[Tmp34.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp34.content.push(newStr_11776616("\n"));;
              var Tmp35 = lastElement_13590297;
              if (ConstSet100[Tmp35.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp35.content.push(newElem_11776665(1, parseInline_13575855(parser_13590294, parser_13590294_Idx, true)));;
              }
              else {
              if ((ConstSet101[firstCh_13590302] != undefined)) {
              var Tmp36 = lastElement_13590297;
              if (ConstSet103[Tmp36.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              var Tmp38 = (Tmp37 = HEX5BHEX5D_13190005(Tmp36.content, 1), Tmp37)[0][Tmp37[1]];
              if (ConstSet102[Tmp38.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp38.content.push(newStr_11776616("\n "));;
              var Tmp39 = lastElement_13590297;
              if (ConstSet105[Tmp39.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              var Tmp41 = (Tmp40 = HEX5BHEX5D_13190005(Tmp39.content, 1), Tmp40)[0][Tmp40[1]];
              if (ConstSet104[Tmp41.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              add_13220002(Tmp41, "content", parseInline_13575855(parser_13590294, parser_13590294_Idx, true));
              }
              else {
                var Tmp42 = lastElement_13590297;
                if (ConstSet107[Tmp42.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp44 = (Tmp43 = HEX5BHEX5D_13190005(Tmp42.content, 1), Tmp43)[0][Tmp43[1]];
                if (ConstSet106[Tmp44.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp44.content.push(newStr_11776616("\n"));;
                var Tmp45 = lastElement_13590297;
                if (ConstSet109[Tmp45.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp47 = (Tmp46 = HEX5BHEX5D_13190005(Tmp45.content, 1), Tmp46)[0][Tmp46[1]];
                if (ConstSet108[Tmp47.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_13220002(Tmp47, "content", parseInline_13575855(parser_13590294, parser_13590294_Idx, true));
              }
              }}
              break;
            case 0:
            case 1:
            case 2:
            case 3:
            case 4:
            case 5:
            case 6:
            case 7:
            case 8:
            case 11:
            case 13:
            case 14:
            case 15:
            case 16:
            case 17:
            case 18:
            case 19:
            case 20:
            case 21:
            case 22:
            case 23:
            case 24:
            case 25:
              result_13590296.push(paragraphIfText_11776729(lastElement_13590297));;
              lastElement_13590297 = null;
              parser_13590294[parser_13590294_Idx].pos -= 1;
              break;
            }
            }
            else {
              switch (firstCh_13590302) {
              case 9:
              case 11:
              case 12:
              case 32:
                  if (!!(((result_13590296).length == 0))) Tmp50 = false; else {                    Tmp50 = !((Tmp51 = HEX5BHEX5D_13190005(result_13590296, 1), Tmp51)[0][Tmp51[1]].isText);                  }                  if (!Tmp50) Tmp49 = false; else {                    var Tmp53 = (Tmp52 = HEX5BHEX5D_13190005(result_13590296, 1), Tmp52)[0][Tmp52[1]];
                    if (ConstSet111[Tmp53.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                    Tmp49 = (ConstSet110[Tmp53.tag] != undefined);                  }                  if (!Tmp49) Tmp48 = false; else {                    var Tmp55 = (Tmp54 = HEX5BHEX5D_13190005(result_13590296, 1), Tmp54)[0][Tmp54[1]];
                    if (ConstSet112[Tmp55.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                    Tmp48 = !(((Tmp55.content).length == 0));                  }                if (Tmp48) {
                var Tmp57 = (Tmp56 = HEX5BHEX5D_13190005(result_13590296, 1), Tmp56)[0][Tmp56[1]];
                if (ConstSet114[Tmp57.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp59 = (Tmp58 = HEX5BHEX5D_13190005(Tmp57.content, 1), Tmp58)[0][Tmp58[1]];
                if (ConstSet113[Tmp59.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp59.content.push(newStr_11776616("\n "));;
                var Tmp61 = (Tmp60 = HEX5BHEX5D_13190005(result_13590296, 1), Tmp60)[0][Tmp60[1]];
                if (ConstSet116[Tmp61.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp63 = (Tmp62 = HEX5BHEX5D_13190005(Tmp61.content, 1), Tmp62)[0][Tmp62[1]];
                if (ConstSet115[Tmp63.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_13220002(Tmp63, "content", parseInline_13575855(parser_13590294, parser_13590294_Idx, false));
                }
                else {
                  lastElement_13590297 = newElem_11776665(1, parseInline_13575855(parser_13590294, parser_13590294_Idx, true));
                }
                
                break;
              case 35:
                var level_13940002 = 1;
                L64: do {
                    L65: while (true) {
                      if (!(level_13940002 < 6)) Tmp66 = false; else {                        Tmp66 = peekMatch_11990024(parser_13590294[parser_13590294_Idx], 35, level_13940002);                      }                    if (!Tmp66) break L65;
                      level_13940002 += 1;
                    }
                } while(false);
                parser_13590294[parser_13590294_Idx].pos += level_13940002;
                lastElement_13590297 = newElem_11776665((2 + level_13940002), []);
                if (nextMatch_12035261(parser_13590294, parser_13590294_Idx, 124, 0)) {
                style_11871454(lastElement_13590297, "text-align:center");
                }
                else {
                if (nextMatch_12035261(parser_13590294, parser_13590294_Idx, 60, 0)) {
                style_11871454(lastElement_13590297, "text-align:left");
                }
                else {
                if (nextMatch_12035261(parser_13590294, parser_13590294_Idx, 62, 0)) {
                style_11871454(lastElement_13590297, "text-align:right");
                }
                }}
                if (nextMatch_12035286(parser_13590294, parser_13590294_Idx, ConstSet117, 0)) {
                var id_13945003 = [""];
                L67: do {
                    L68: while (true) {
                      var ch_13950001 = parser_13590294[parser_13590294_Idx].str.charCodeAt((parser_13590294[parser_13590294_Idx].pos + 0));
                    if (!nextMatch_12035286(parser_13590294, parser_13590294_Idx, ConstSet118, 0)) break L68;
                      add_11776037(id_13945003, 0, ch_13950001);
                    }
                } while(false);
                parser_13590294[parser_13590294_Idx].pos += 1;
                attr_11790071(lastElement_13590297, "id", id_13945003[0]);
                }
                
                var Tmp69 = lastElement_13590297;
                if (ConstSet119[Tmp69.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_13220002(Tmp69, "content", parseInline_13575855(parser_13590294, parser_13590294_Idx, true));
                break;
              case 42:
              case 45:
              case 43:
                if (nextMatch_12035286(parser_13590294, parser_13590294_Idx, ConstSet120, 1)) {
                lastElement_13590297 = newElem_11776665(9, []);
                var item_13960012 = newElem_11776665(11, []);
                var Tmp70 = item_13960012;
                if (ConstSet121[Tmp70.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_13220002(Tmp70, "content", parseInline_13575855(parser_13590294, parser_13590294_Idx, true));
                var Tmp71 = lastElement_13590297;
                if (ConstSet122[Tmp71.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp71.content.push(item_13960012);;
                }
                else {
                  lastElement_13590297 = newElem_11776665(1, parseInline_13575855(parser_13590294, parser_13590294_Idx, false));
                }
                
                break;
              case 48:
              case 49:
              case 50:
              case 51:
              case 52:
              case 53:
              case 54:
              case 55:
              case 56:
              case 57:
                var originalPos_13980001 = parser_13590294[parser_13590294_Idx].pos;
                parser_13590294[parser_13590294_Idx].pos += 1;
                L72: do {
                    L73: while (true) {
                    if (!nextMatch_12035286(parser_13590294, parser_13590294_Idx, ConstSet123, 0)) break L73;
                    }
                } while(false);
                if (nextMatch_12035261(parser_13590294, parser_13590294_Idx, 46, 0)) {
                lastElement_13590297 = newElem_11776665(10, []);
                var item_13980008 = newElem_11776665(11, []);
                var Tmp74 = item_13980008;
                if (ConstSet124[Tmp74.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_13220002(Tmp74, "content", parseInline_13575855(parser_13590294, parser_13590294_Idx, true));
                var Tmp75 = lastElement_13590297;
                if (ConstSet125[Tmp75.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp75.content.push(item_13980008);;
                }
                else {
                  parser_13590294[parser_13590294_Idx].pos = originalPos_13980001;
                  lastElement_13590297 = newElem_11776665(1, parseInline_13575855(parser_13590294, parser_13590294_Idx, false));
                }
                
                break;
              case 62:
                lastElement_13590297 = newElem_11776665(12, []);
                parser_13590294[parser_13590294_Idx].pos += 1;
                var Tmp76 = lastElement_13590297;
                if (ConstSet126[Tmp76.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp76.content.push(newElem_11776665(1, parseInline_13575855(parser_13590294, parser_13590294_Idx, true)));;
                break;
              case 91:
                var initialPos_14010010 = parser_13590294[parser_13590294_Idx].pos;
                parser_13590294[parser_13590294_Idx].pos += 1;
                var refNameFailed_14010017 = [false];
                var refName_14010019 = parseReferenceName_13470046(parser_13590294, parser_13590294_Idx, refNameFailed_14010017, 0);
                  if (!!(refNameFailed_14010017[0])) Tmp78 = false; else {                    parser_13590294[parser_13590294_Idx].pos += 1;
                    Tmp78 = nextMatch_12035261(parser_13590294, parser_13590294_Idx, 58, 0);                  }                  if (!Tmp78) Tmp77 = false; else {                    var colontmp__14100350 = parseLink_13465032(parser_13590294, parser_13590294_Idx, true);
                    var correct_14010026 = colontmp__14100350["Field0"];
                    var link_14010027 = nimCopy(null, colontmp__14100350["Field1"], NTI2421013);
                    var tip_14010028 = nimCopy(null, colontmp__14100350["Field2"], NTI2421013);
                    Tmp77 = correct_14010026;                  }                if (Tmp77) {
                L79: do {
                  var el_14020169 = null;
                  var el_14020169_Idx = 0;
                  var colontmp__14100111 = [];
                  colontmp__14100111 = getOrDefault_14010228(parser_13590294[parser_13590294_Idx].linkReferrers, refName_14010019, []);
                  var i_14100112 = 0;
                  var L_14100113 = (colontmp__14100111).length;
                  L80: do {
                      L81: while (true) {
                      if (!(i_14100112 < L_14100113)) break L81;
                        el_14020169 = colontmp__14100111; el_14020169_Idx = i_14100112;
                        setLink_11871472(el_14020169[el_14020169_Idx], toJSStr(link_14010027));
                        if (!(((tip_14010028).length == 0))) {
                        attr_11790071(el_14020169[el_14020169_Idx], "title", toJSStr(tip_14010028));
                        }
                        
                        i_14100112 += 1;
                      }
                  } while(false);
                } while(false);
                }
                else {
                  parser_13590294[parser_13590294_Idx].pos = initialPos_14010010;
                  lastElement_13590297 = newElem_11776665(1, parseInline_13575855(parser_13590294, parser_13590294_Idx, false));
                }
                
                break;
              default: 
                if (nextMatch_12035365(parser_13590294, parser_13590294_Idx, makeNimstrLit("```"), 0)) {
                result_13590296.push(parseCodeBlock_13180014(parser_13590294, parser_13590294_Idx, 96));;
                lastElement_13590297 = null;
                }
                else {
                if (nextMatch_12035365(parser_13590294, parser_13590294_Idx, makeNimstrLit("~~~"), 0)) {
                result_13590296.push(parseCodeBlock_13180014(parser_13590294, parser_13590294_Idx, 126));;
                lastElement_13590297 = null;
                }
                else {
                  lastElement_13590297 = newElem_11776665(1, parseInline_13575855(parser_13590294, parser_13590294_Idx, false));
                }
                }
                break;
              }
            }
            }
            parser_13590294[parser_13590294_Idx].pos += 1;
          }
      } while(false);
    } while(false);
    if (!((lastElement_13590297 == null))) {
    result_13590296.push(lastElement_13590297);;
    }
    

  return result_13590296;

}
function parseMarggers_14046027(text_14046029) {
  var result_14046031 = [];

    var parser_14046032 = [{str: text_14046029, pos: 0, linkReferrers: ({data: [], counter: 0})}];
    result_14046031 = nimCopy(null, parseTopLevel_13590292(parser_14046032, 0), NTI13590295);

  return result_14046031;

}
function len_11950159(t_11950164) {
  var result_11950165 = 0;

    result_11950165 = t_11950164.counter;

  return result_11950165;

}
function add_11975287(x_11975290, x_11975290_Idx) {
    x_11975290[x_11975290_Idx] += " ";;

  
}
function add_11980004(x_11980007, x_11980007_Idx) {
    x_11980007[x_11980007_Idx] += ">";;

  
}
function isEmpty_11945502(tag_11945504) {
    var Tmp1;

  var result_11945505 = false;

    switch (tag_11945504) {
    case 2:
    case 21:
    case 22:
      Tmp1 = true;
      break;
    default: 
      Tmp1 = false;
      break;
    }
    result_11945505 = Tmp1;

  return result_11945505;

}
function toCstring_11975266(elem_11975268) {
    var Tmp1;
      var Tmp2;
        var Tmp4;
        var Tmp8;
        var Tmp11;
      var Tmp12;

  var result_11975269 = [null];

    if (elem_11975268.isText) {
    var Tmp1 = elem_11975268;
    if (ConstSet127[Tmp1.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    result_11975269[0] = Tmp1.str;
    }
    else {
      result_11975269[0] = "<";
      var Tmp2 = elem_11975268;
      if (ConstSet128[Tmp2.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      result_11975269[0] += toJSStr(reprEnum(Tmp2.tag, NTI11776402));;
      L3: do {
        var attrName_11975284 = null;
        var attrValue_11975285 = null;
        var colontmp__14100352 = ({data: [], counter: 0, first: 0, last: 0});
        var Tmp4 = elem_11975268;
        if (ConstSet129[Tmp4.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'attrs\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
        nimCopy(colontmp__14100352, Tmp4.attrs, NTI11776446);
        var L_14100354 = len_11950159(colontmp__14100352);
        if ((0 < colontmp__14100352.counter)) {
        var h_14100355 = colontmp__14100352.first;
        L5: do {
            L6: while (true) {
            if (!(0 <= h_14100355)) break L6;
              var nxt_14100357 = colontmp__14100352.data[h_14100355].Field1;
              if (isFilled_11676218(colontmp__14100352.data[h_14100355].Field0)) {
              attrName_11975284 = colontmp__14100352.data[h_14100355].Field2;
              attrValue_11975285 = colontmp__14100352.data[h_14100355].Field3;
              add_11975287(result_11975269, 0);
              result_11975269[0] += attrName_11975284;;
              if (!(((attrValue_11975285).length == 0))) {
              result_11975269[0] += "=\"";;
              result_11975269[0] += attrValue_11975285;;
              result_11975269[0] += "\"";;
              }
              
              }
              
              h_14100355 = nxt_14100357;
            }
        } while(false);
        }
        
      } while(false);
      add_11980004(result_11975269, 0);
      L7: do {
        var cont_11980032 = null;
        var cont_11980032_Idx = 0;
        var colontmp__14100359 = [];
        var Tmp8 = elem_11975268;
        if (ConstSet130[Tmp8.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
        colontmp__14100359 = Tmp8.content;
        var i_14100360 = 0;
        var L_14100361 = (colontmp__14100359).length;
        L9: do {
            L10: while (true) {
            if (!(i_14100360 < L_14100361)) break L10;
              cont_11980032 = colontmp__14100359; cont_11980032_Idx = i_14100360;
              result_11975269[0] += toCstring_11975266(cont_11980032[cont_11980032_Idx]);;
              i_14100360 += 1;
            }
        } while(false);
      } while(false);
        var Tmp11 = elem_11975268;
        if (ConstSet131[Tmp11.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      if (!(isEmpty_11945502(Tmp11.tag))) {
      result_11975269[0] += "</";;
      var Tmp12 = elem_11975268;
      if (ConstSet132[Tmp12.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      result_11975269[0] += toJSStr(reprEnum(Tmp12.tag, NTI11776402));;
      add_11980004(result_11975269, 0);
      }
      
    }
    

  return result_11975269[0];

}
function convertMarggers_14096014(text_14096016) {
  var result_14096017 = null;

    result_14096017 = "";
    L1: do {
      var elem_14096025 = null;
      var elem_14096025_Idx = 0;
      var colontmp__14100079 = [];
      colontmp__14100079 = parseMarggers_14046027(text_14096016);
      var i_14100081 = 0;
      var L_14100082 = (colontmp__14100079).length;
      L2: do {
          L3: while (true) {
          if (!(i_14100081 < L_14100082)) break L3;
            elem_14096025 = colontmp__14100079; elem_14096025_Idx = i_14100081;
            result_14096017 += toCstring_11975266(elem_14096025[elem_14096025_Idx]);;
            result_14096017 += "\n";;
            i_14100081 += 1;
          }
      } while(false);
    } while(false);

  return result_14096017;

}
function convert() {
    var input_14100063 = input_14100015();
    var output_14100064 = convertMarggers_14096014(input_14100063);
    document.getElementById("output").innerHTML = output_14100064;

  
}
function convertToSource() {
    var input_14100365 = input_14100015();
    var output_14100366 = convertMarggers_14096014(input_14100365);
    var sourceBlock_14100367 = document.createElement("pre");
    sourceBlock_14100367.textContent = output_14100366;
    var outputElement_14100368 = document.getElementById("output");
    outputElement_14100368.innerHTML = "";
    outputElement_14100368.appendChild(sourceBlock_14100367);

  
}
function filename_14100382() {
  var result_14100384 = null;

    result_14100384 = document.getElementById("filename").value || "output.html";

  return result_14100384;

}
function download() {
    var input_14100404 = input_14100015();
    var output_14100405 = convertMarggers_14096014(input_14100404);
    var blob_14100415 = new Blob([output_14100405], {type: 'text/html'});
    var url_14100416 = window.URL.createObjectURL(blob_14100415);
    var a_14100417 = document.createElement("a");
    a_14100417.style.display = "none";
    a_14100417.setAttribute("href", url_14100416);
    a_14100417.setAttribute("download", filename_14100382());
    document.body.appendChild(a_14100417);
    a_14100417.click();
    window.URL.revokeObjectURL(url_14100416);
    document.body.removeChild(a_14100417);

  
}
