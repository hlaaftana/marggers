/* Generated by the Nim Compiler v1.4.2 */
var framePtr = null;
var excHandler = 0;
var lastJSError = null;
var NTI13095217 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI13080100 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI2427621 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI2427643 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI12247202 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12247204 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI12247206 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI12247208 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI12247210 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI12366031 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI12366017 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12366021 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI12366015 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI12366133 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI12076107 = {size: 0,kind: 19,base: null,node: null,finalizer: null};
var NTI12040250 = {size: 0,kind: 19,base: null,node: null,finalizer: null};
var NTI11825253 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI2421011 = {size: 0,kind: 2,base: null,node: null,finalizer: null};
var NTI11931026 = {size: 0,kind: 19,base: null,node: null,finalizer: null};
var NTI11661179 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI11661173 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI11661167 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI11661161 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI11661155 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI11661144 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI11661140 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI11661135 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI11661131 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI11661127 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI11661126 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI11661124 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI11931018 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI12076021 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12076065 = {size: 0,kind: 19,base: null,node: null,finalizer: null};
var NTI12076019 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12076017 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12076015 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12076023 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI12860072 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI12860082 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI12860083 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI2421044 = {size: 0,kind: 31,base: null,node: null,finalizer: null};
var NTI3520020 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI11601258 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI11601256 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI11601255 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI11601222 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI2421064 = {size: 0,kind: 1,base: null,node: null,finalizer: null};
var NTI11601251 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI11601224 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI11601315 = {size: 0,kind: 24,base: null,node: null,finalizer: null};
var NTI2427408 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI2427728 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI2421015 = {size: 0,kind: 29,base: null,node: null,finalizer: null};
var NTI2427723 = {size: 0,kind: 22,base: null,node: null,finalizer: null};
var NTI2427617 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI2427619 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI2427651 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI2421013 = {size: 0,kind: 28,base: null,node: null,finalizer: null};
var NNI2427651 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI2427651.node = NNI2427651;
var NNI2427619 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI2427619.node = NNI2427619;
NTI2427723.base = NTI2427617;
NTI2427728.base = NTI2427617;
var NNI2427617 = {kind: 2, len: 5, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "parent", len: 0, typ: NTI2427723, name: "parent", sons: null}, 
{kind: 1, offset: "name", len: 0, typ: NTI2421015, name: "name", sons: null}, 
{kind: 1, offset: "message", len: 0, typ: NTI2421013, name: "msg", sons: null}, 
{kind: 1, offset: "trace", len: 0, typ: NTI2421013, name: "trace", sons: null}, 
{kind: 1, offset: "up", len: 0, typ: NTI2427728, name: "up", sons: null}]};
NTI2427617.node = NNI2427617;
var NNI2427408 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI2427408.node = NNI2427408;
NTI2427617.base = NTI2427408;
NTI2427619.base = NTI2427617;
NTI2427651.base = NTI2427619;
var NNI11601222 = {kind: 2, offset: 0, typ: null, name: null, len: 24, sons: {"0": {kind: 1, offset: 0, typ: NTI11601222, name: "noTag", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI11601222, name: "p", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI11601222, name: "br", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI11601222, name: "h1", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI11601222, name: "h2", len: 0, sons: null}, 
"5": {kind: 1, offset: 5, typ: NTI11601222, name: "h3", len: 0, sons: null}, 
"6": {kind: 1, offset: 6, typ: NTI11601222, name: "h4", len: 0, sons: null}, 
"7": {kind: 1, offset: 7, typ: NTI11601222, name: "h5", len: 0, sons: null}, 
"8": {kind: 1, offset: 8, typ: NTI11601222, name: "h6", len: 0, sons: null}, 
"9": {kind: 1, offset: 9, typ: NTI11601222, name: "ul", len: 0, sons: null}, 
"10": {kind: 1, offset: 10, typ: NTI11601222, name: "ol", len: 0, sons: null}, 
"11": {kind: 1, offset: 11, typ: NTI11601222, name: "li", len: 0, sons: null}, 
"12": {kind: 1, offset: 12, typ: NTI11601222, name: "blockquote", len: 0, sons: null}, 
"13": {kind: 1, offset: 13, typ: NTI11601222, name: "sup", len: 0, sons: null}, 
"14": {kind: 1, offset: 14, typ: NTI11601222, name: "sub", len: 0, sons: null}, 
"15": {kind: 1, offset: 15, typ: NTI11601222, name: "em", len: 0, sons: null}, 
"16": {kind: 1, offset: 16, typ: NTI11601222, name: "strong", len: 0, sons: null}, 
"17": {kind: 1, offset: 17, typ: NTI11601222, name: "pre", len: 0, sons: null}, 
"18": {kind: 1, offset: 18, typ: NTI11601222, name: "code", len: 0, sons: null}, 
"19": {kind: 1, offset: 19, typ: NTI11601222, name: "u", len: 0, sons: null}, 
"20": {kind: 1, offset: 20, typ: NTI11601222, name: "s", len: 0, sons: null}, 
"21": {kind: 1, offset: 21, typ: NTI11601222, name: "img", len: 0, sons: null}, 
"22": {kind: 1, offset: 22, typ: NTI11601222, name: "input", len: 0, sons: null}, 
"23": {kind: 1, offset: 23, typ: NTI11601222, name: "a", len: 0, sons: null}}};
NTI11601222.node = NNI11601222;
var NNI11601256 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI2421015, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI2421015, name: "Field1", sons: null}]};
NTI11601256.node = NNI11601256;
NTI11601255.base = NTI11601256;
NTI11601258.base = NTI11601224;
var NNI11601251 = {kind: 3, offset: "isText", len: 2, typ: NTI2421064, name: "isText", sons: [[setConstr(1), {kind: 1, offset: "str", len: 0, typ: NTI2421015, name: "str", sons: null}], 
[setConstr(2), {kind: 2, len: 3, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "tag", len: 0, typ: NTI11601222, name: "tag", sons: null}, 
{kind: 1, offset: "attrs", len: 0, typ: NTI11601255, name: "attrs", sons: null}, 
{kind: 1, offset: "content", len: 0, typ: NTI11601258, name: "content", sons: null}]}]]};
NTI11601251.node = NNI11601251;
NTI11601224.base = NTI11601251;
NTI11601315.base = NTI11601224;
var NNI3520020 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "a", len: 0, typ: NTI2421044, name: "a", sons: null}, 
{kind: 1, offset: "b", len: 0, typ: NTI2421044, name: "b", sons: null}]};
NTI3520020.node = NNI3520020;
NTI12860083.base = NTI11601224;
var NNI12860072 = {kind: 2, offset: 0, typ: null, name: null, len: 3, sons: {"0": {kind: 1, offset: 0, typ: NTI12860072, name: "frDone", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12860072, name: "frReachedEnd", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12860072, name: "frFailed", len: 0, sons: null}}};
NTI12860072.node = NNI12860072;
var NNI12860082 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI12860072, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI12860083, name: "Field1", sons: null}]};
NTI12860082.node = NNI12860082;
var NNI12076015 = {kind: 2, offset: 0, typ: null, name: null, len: 14, sons: {"0": {kind: 1, offset: 0, typ: NTI12076015, name: "xmlError", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12076015, name: "xmlEof", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12076015, name: "xmlCharData", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI12076015, name: "xmlWhitespace", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI12076015, name: "xmlComment", len: 0, sons: null}, 
"5": {kind: 1, offset: 5, typ: NTI12076015, name: "xmlPI", len: 0, sons: null}, 
"6": {kind: 1, offset: 6, typ: NTI12076015, name: "xmlElementStart", len: 0, sons: null}, 
"7": {kind: 1, offset: 7, typ: NTI12076015, name: "xmlElementEnd", len: 0, sons: null}, 
"8": {kind: 1, offset: 8, typ: NTI12076015, name: "xmlElementOpen", len: 0, sons: null}, 
"9": {kind: 1, offset: 9, typ: NTI12076015, name: "xmlAttribute", len: 0, sons: null}, 
"10": {kind: 1, offset: 10, typ: NTI12076015, name: "xmlElementClose", len: 0, sons: null}, 
"11": {kind: 1, offset: 11, typ: NTI12076015, name: "xmlCData", len: 0, sons: null}, 
"12": {kind: 1, offset: 12, typ: NTI12076015, name: "xmlEntity", len: 0, sons: null}, 
"13": {kind: 1, offset: 13, typ: NTI12076015, name: "xmlSpecial", len: 0, sons: null}}};
NTI12076015.node = NNI12076015;
var NNI12076017 = {kind: 2, offset: 0, typ: null, name: null, len: 10, sons: {"0": {kind: 1, offset: 0, typ: NTI12076017, name: "errNone", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12076017, name: "errEndOfCDataExpected", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12076017, name: "errNameExpected", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI12076017, name: "errSemicolonExpected", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI12076017, name: "errQmGtExpected", len: 0, sons: null}, 
"5": {kind: 1, offset: 5, typ: NTI12076017, name: "errGtExpected", len: 0, sons: null}, 
"6": {kind: 1, offset: 6, typ: NTI12076017, name: "errEqExpected", len: 0, sons: null}, 
"7": {kind: 1, offset: 7, typ: NTI12076017, name: "errQuoteExpected", len: 0, sons: null}, 
"8": {kind: 1, offset: 8, typ: NTI12076017, name: "errEndOfCommentExpected", len: 0, sons: null}, 
"9": {kind: 1, offset: 9, typ: NTI12076017, name: "errAttributeValueExpected", len: 0, sons: null}}};
NTI12076017.node = NNI12076017;
var NNI12076019 = {kind: 2, offset: 0, typ: null, name: null, len: 5, sons: {"0": {kind: 1, offset: 0, typ: NTI12076019, name: "stateStart", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12076019, name: "stateNormal", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12076019, name: "stateAttr", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI12076019, name: "stateEmptyElementTag", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI12076019, name: "stateError", len: 0, sons: null}}};
NTI12076019.node = NNI12076019;
var NNI12076021 = {kind: 2, offset: 0, typ: null, name: null, len: 4, sons: {"0": {kind: 1, offset: 0, typ: NTI12076021, name: "reportWhitespace", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12076021, name: "reportComments", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12076021, name: "allowUnquotedAttribs", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI12076021, name: "allowEmptyAttribs", len: 0, sons: null}}};
NTI12076021.node = NNI12076021;
NTI12076065.base = NTI12076021;
var NNI12076023 = {kind: 2, len: 9, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "a", len: 0, typ: NTI2421013, name: "a", sons: null}, 
{kind: 1, offset: "b", len: 0, typ: NTI2421013, name: "b", sons: null}, 
{kind: 1, offset: "c", len: 0, typ: NTI2421013, name: "c", sons: null}, 
{kind: 1, offset: "kind", len: 0, typ: NTI12076015, name: "kind", sons: null}, 
{kind: 1, offset: "err", len: 0, typ: NTI12076017, name: "err", sons: null}, 
{kind: 1, offset: "state", len: 0, typ: NTI12076019, name: "state", sons: null}, 
{kind: 1, offset: "cIsEmpty", len: 0, typ: NTI2421064, name: "cIsEmpty", sons: null}, 
{kind: 1, offset: "filename", len: 0, typ: NTI2421013, name: "filename", sons: null}, 
{kind: 1, offset: "options", len: 0, typ: NTI12076065, name: "options", sons: null}]};
NTI12076023.node = NNI12076023;
var NNI11661126 = {kind: 2, len: 10, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "closeImpl", len: 0, typ: NTI11661127, name: "closeImpl", sons: null}, 
{kind: 1, offset: "atEndImpl", len: 0, typ: NTI11661131, name: "atEndImpl", sons: null}, 
{kind: 1, offset: "setPositionImpl", len: 0, typ: NTI11661135, name: "setPositionImpl", sons: null}, 
{kind: 1, offset: "getPositionImpl", len: 0, typ: NTI11661140, name: "getPositionImpl", sons: null}, 
{kind: 1, offset: "readDataStrImpl", len: 0, typ: NTI11661144, name: "readDataStrImpl", sons: null}, 
{kind: 1, offset: "readLineImpl", len: 0, typ: NTI11661155, name: "readLineImpl", sons: null}, 
{kind: 1, offset: "readDataImpl", len: 0, typ: NTI11661161, name: "readDataImpl", sons: null}, 
{kind: 1, offset: "peekDataImpl", len: 0, typ: NTI11661167, name: "peekDataImpl", sons: null}, 
{kind: 1, offset: "writeDataImpl", len: 0, typ: NTI11661173, name: "writeDataImpl", sons: null}, 
{kind: 1, offset: "flushImpl", len: 0, typ: NTI11661179, name: "flushImpl", sons: null}]};
NTI11661126.node = NNI11661126;
NTI11661126.base = NTI2427408;
NTI11661124.base = NTI11661126;
NTI11931026.base = NTI2421011;
var NNI11931018 = {kind: 2, len: 8, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "bufpos", len: 0, typ: NTI2421044, name: "bufpos", sons: null}, 
{kind: 1, offset: "buf", len: 0, typ: NTI2421013, name: "buf", sons: null}, 
{kind: 1, offset: "input", len: 0, typ: NTI11661124, name: "input", sons: null}, 
{kind: 1, offset: "lineNumber", len: 0, typ: NTI2421044, name: "lineNumber", sons: null}, 
{kind: 1, offset: "sentinel", len: 0, typ: NTI2421044, name: "sentinel", sons: null}, 
{kind: 1, offset: "lineStart", len: 0, typ: NTI2421044, name: "lineStart", sons: null}, 
{kind: 1, offset: "offsetBase", len: 0, typ: NTI2421044, name: "offsetBase", sons: null}, 
{kind: 1, offset: "refillChars", len: 0, typ: NTI11931026, name: "refillChars", sons: null}]};
NTI11931018.node = NNI11931018;
NTI11931018.base = NTI2427408;
NTI12076023.base = NTI11931018;
var NNI11825253 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "data", len: 0, typ: NTI2421013, name: "data", sons: null}, 
{kind: 1, offset: "pos", len: 0, typ: NTI2421044, name: "pos", sons: null}]};
NTI11825253.node = NNI11825253;
NTI11825253.base = NTI11661126;
NTI12040250.base = NTI2421011;
NTI12076107.base = NTI12076021;
var NNI12366017 = {kind: 2, offset: 0, typ: null, name: null, len: 6, sons: {"0": {kind: 1, offset: 0, typ: NTI12366017, name: "xnText", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12366017, name: "xnVerbatimText", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12366017, name: "xnElement", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI12366017, name: "xnCData", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI12366017, name: "xnEntity", len: 0, sons: null}, 
"5": {kind: 1, offset: 5, typ: NTI12366017, name: "xnComment", len: 0, sons: null}}};
NTI12366017.node = NNI12366017;
NTI12366031.base = NTI12366015;
var NNI12247204 = {kind: 2, len: 3, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI2421013, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI2421013, name: "Field1", sons: null}, 
{kind: 1, offset: "Field2", len: 0, typ: NTI2421064, name: "Field2", sons: null}]};
NTI12247204.node = NNI12247204;
NTI12247206.base = NTI12247204;
var NNI12247202 = {kind: 2, offset: 0, typ: null, name: null, len: 3, sons: {"0": {kind: 1, offset: 0, typ: NTI12247202, name: "modeCaseSensitive", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI12247202, name: "modeCaseInsensitive", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI12247202, name: "modeStyleInsensitive", len: 0, sons: null}}};
NTI12247202.node = NNI12247202;
var NNI12247208 = {kind: 2, len: 3, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "counter", len: 0, typ: NTI2421044, name: "counter", sons: null}, 
{kind: 1, offset: "data", len: 0, typ: NTI12247206, name: "data", sons: null}, 
{kind: 1, offset: "mode", len: 0, typ: NTI12247202, name: "mode", sons: null}]};
NTI12247208.node = NNI12247208;
NTI12247208.base = NTI2427408;
NTI12247210.base = NTI12247208;
var NNI12366021 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 3, offset: "k", len: 6, typ: NTI12366017, name: "k", sons: [[setConstr(0, 1, 5, 3, 4), {kind: 1, offset: "fText", len: 0, typ: NTI2421013, name: "fText", sons: null}], 
[setConstr(2), {kind: 2, len: 3, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "fTag", len: 0, typ: NTI2421013, name: "fTag", sons: null}, 
{kind: 1, offset: "s", len: 0, typ: NTI12366031, name: "s", sons: null}, 
{kind: 1, offset: "fAttr", len: 0, typ: NTI12247210, name: "fAttr", sons: null}]}]]}, 
{kind: 1, offset: "fClientData", len: 0, typ: NTI2421044, name: "fClientData", sons: null}]};
NTI12366021.node = NNI12366021;
NTI12366015.base = NTI12366021;
NTI12366133.base = NTI12366015;
var NNI2427643 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI2427643.node = NNI2427643;
var NNI2427621 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI2427621.node = NNI2427621;
NTI2427621.base = NTI2427617;
NTI2427643.base = NTI2427621;
NTI13080100.base = NTI11601224;
NTI13095217.base = NTI11601224;
function setConstr() {
        var result = {};
    for (var i = 0; i < arguments.length; ++i) {
      var x = arguments[i];
      if (typeof(x) == "object") {
        for (var j = x[0]; j <= x[1]; ++j) {
          result[j] = true;
        }
      } else {
        result[x] = true;
      }
    }
    return result;
  

  
}
var ConstSet1 = setConstr(13, 10);
var ConstSet2 = setConstr(true);
var ConstSet3 = setConstr(17, 16, 4, 18, 27, 19, 23, 22, 21);
function nimCopy(dest_2705023, src_2705024, ti_2705025) {
  var result_2710219 = null;

    switch (ti_2705025.kind) {
    case 21:
    case 22:
    case 23:
    case 5:
      if (!(isFatPointer_2700401(ti_2705025))) {
      result_2710219 = src_2705024;
      }
      else {
        result_2710219 = [src_2705024[0], src_2705024[1]];
      }
      
      break;
    case 19:
            if (dest_2705023 === null || dest_2705023 === undefined) {
        dest_2705023 = {};
      }
      else {
        for (var key in dest_2705023) { delete dest_2705023[key]; }
      }
      for (var key in src_2705024) { dest_2705023[key] = src_2705024[key]; }
      result_2710219 = dest_2705023;
    
      break;
    case 18:
    case 17:
      if (!((ti_2705025.base == null))) {
      result_2710219 = nimCopy(dest_2705023, src_2705024, ti_2705025.base);
      }
      else {
      if ((ti_2705025.kind == 17)) {
      result_2710219 = (dest_2705023 === null || dest_2705023 === undefined) ? {m_type: ti_2705025} : dest_2705023;
      }
      else {
        result_2710219 = (dest_2705023 === null || dest_2705023 === undefined) ? {} : dest_2705023;
      }
      }
      nimCopyAux(result_2710219, src_2705024, ti_2705025.node);
      break;
    case 24:
    case 4:
    case 27:
    case 16:
            if (src_2705024 === null) {
        result_2710219 = null;
      }
      else {
        if (dest_2705023 === null || dest_2705023 === undefined) {
          dest_2705023 = new Array(src_2705024.length);
        }
        else {
          dest_2705023.length = src_2705024.length;
        }
        result_2710219 = dest_2705023;
        for (var i = 0; i < src_2705024.length; ++i) {
          result_2710219[i] = nimCopy(result_2710219[i], src_2705024[i], ti_2705025.base);
        }
      }
    
      break;
    case 28:
            if (src_2705024 !== null) {
        result_2710219 = src_2705024.slice(0);
      }
    
      break;
    default: 
      result_2710219 = src_2705024;
      break;
    }

  return result_2710219;

}
function makeNimstrLit(c_2690062) {
      var ln = c_2690062.length;
  var result = new Array(ln);
  for (var i = 0; i < ln; ++i) {
    result[i] = c_2690062.charCodeAt(i);
  }
  return result;
  

  
}
function toJSStr(s_2690096) {
                    var Tmp5;
            var Tmp7;

  var result_2690097 = null;

    var res_2690170 = newSeq_2690128((s_2690096).length);
    var i_2690172 = 0;
    var j_2690174 = 0;
    L1: do {
        L2: while (true) {
        if (!(i_2690172 < (s_2690096).length)) break L2;
          var c_2690175 = s_2690096[i_2690172];
          if ((c_2690175 < 128)) {
          res_2690170[j_2690174] = String.fromCharCode(c_2690175);
          i_2690172 += 1;
          }
          else {
            var helper_2690198 = newSeq_2690128(0);
            L3: do {
                L4: while (true) {
                if (!true) break L4;
                  var code_2690199 = c_2690175.toString(16);
                  if (((code_2690199).length == 1)) {
                  helper_2690198.push("%0");;
                  }
                  else {
                  helper_2690198.push("%");;
                  }
                  
                  helper_2690198.push(code_2690199);;
                  i_2690172 += 1;
                    if (((s_2690096).length <= i_2690172)) Tmp5 = true; else {                      Tmp5 = (s_2690096[i_2690172] < 128);                    }                  if (Tmp5) {
                  break L3;
                  }
                  
                  c_2690175 = s_2690096[i_2690172];
                }
            } while(false);
++excHandler;
            Tmp7 = framePtr;
            try {
            res_2690170[j_2690174] = decodeURIComponent(helper_2690198.join(""));
--excHandler;
} catch (EXC) {
 var prevJSError = lastJSError;
 lastJSError = EXC;
 --excHandler;
            framePtr = Tmp7;
            res_2690170[j_2690174] = helper_2690198.join("");
            lastJSError = prevJSError;
            } finally {
            framePtr = Tmp7;
            }
          }
          
          j_2690174 += 1;
        }
    } while(false);
    if (res_2690170.length < j_2690174) { for (var i=res_2690170.length;i<j_2690174;++i) res_2690170.push(null); }
               else { res_2690170.length = j_2690174; };
    result_2690097 = res_2690170.join("");

  return result_2690097;

}
function raiseException(e_2655218, ename_2655219) {
    e_2655218.name = ename_2655219;
    if ((excHandler == 0)) {
    unhandledException(e_2655218);
    }
    
    throw e_2655218;

  
}
function raiseFieldError(f_2685047) {
    raiseException({message: nimCopy(null, f_2685047, NTI2421013), parent: null, m_type: NTI2427651, name: null, trace: [], up: null}, "FieldDefect");

  
}
var ConstSet4 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet5 = setConstr(true);
var ConstSet6 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet7 = setConstr(true);
var ConstSet8 = setConstr(true);
function mnewString(len_2695044) {
        return new Array(len_2695044);
  

  
}
function nimCharToStr(x_2610674) {
  var result_2610675 = [];

    result_2610675 = nimCopy(null, mnewString(1), NTI2421013);
    result_2610675[0] = x_2610674;

  return result_2610675;

}
var ConstSet9 = setConstr(true);
var ConstSet10 = setConstr(2, 1);
var ConstSet11 = setConstr(2, 1);
var ConstSet12 = setConstr(2, 1);
var ConstSet13 = setConstr(2, 1);
var ConstSet14 = setConstr(true);
var ConstSet15 = setConstr(true);
function addChar(x_2740031, c_2740032) {
    x_2740031.push(c_2740032);

  
}
var ConstSet16 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet17 = setConstr(34, 39, 60);
var ConstSet18 = setConstr(true);
var ConstSet19 = setConstr(true);
var ConstSet20 = setConstr(true);
var ConstSet21 = setConstr(true);
var ConstSet22 = setConstr(true);
var ConstSet23 = setConstr(true);
var ConstSet24 = setConstr(true);
function genericReset(x_2715044, ti_2715045) {
  var result_2715046 = null;

    result_2715046 = null;
    switch (ti_2715045.kind) {
    case 21:
    case 22:
    case 23:
    case 5:
      if (isFatPointer_2700401(ti_2715045)) {
              result_2715046 = [null, 0];
      
      }
      
      break;
    case 19:
            result_2715046 = {};
    
      break;
    case 18:
    case 17:
      if ((ti_2715045.kind == 17)) {
      result_2715046 = {m_type: ti_2715045};
      }
      else {
        result_2715046 = {};
      }
      
      break;
    case 24:
    case 27:
            result_2715046 = [];
    
      break;
    case 4:
    case 16:
            result_2715046 = new Array(x_2715044.length);
      for (var i = 0; i < x_2715044.length; ++i) {
        result_2715046[i] = genericReset(x_2715044[i], ti_2715045.base);
      }
    
      break;
    default: 
      break;
    }

  return result_2715046;

}
var ConstSet25 = setConstr(true);
var ConstSet26 = setConstr(true);
var ConstSet27 = setConstr(true);
var ConstSet28 = setConstr(true);
var ConstSet29 = setConstr(true);
var ConstSet30 = setConstr(true);
var ConstSet31 = setConstr(true);
var ConstSet32 = setConstr(true);
var ConstSet33 = setConstr(2, 1);
var ConstSet34 = setConstr(true);
var ConstSet35 = setConstr(true);
var ConstSet36 = setConstr(true);
var ConstSet37 = setConstr(true);
var ConstSet38 = setConstr(2, 1);
var ConstSet39 = setConstr(2, 1);
var ConstSet40 = setConstr(2, 1);
var ConstSet41 = setConstr(2, 1);
function nimMin(a_2695803, b_2695804) {
    var Tmp1;

  var result_2695805 = 0;

  BeforeRet: do {
    if ((a_2695803 <= b_2695804)) {
    Tmp1 = a_2695803;
    }
    else {
    Tmp1 = b_2695804;
    }
    
    result_2695805 = Tmp1;
    break BeforeRet;
  } while (false);

  return result_2695805;

}
function nimMax(a_2695821, b_2695822) {
    var Tmp1;

  var result_2695823 = 0;

  BeforeRet: do {
    if ((b_2695822 <= a_2695821)) {
    Tmp1 = a_2695821;
    }
    else {
    Tmp1 = b_2695822;
    }
    
    result_2695823 = Tmp1;
    break BeforeRet;
  } while (false);

  return result_2695823;

}
var ConstSet42 = setConstr(13, 10, 47);
var ConstSet43 = setConstr(2, 1);
var ConstSet44 = setConstr([65, 90], [97, 122], 95, 58, [128, 255]);
var ConstSet45 = setConstr([65, 90], [97, 122], [48, 57], 46, 45, 95, 58, [128, 255]);
var ConstSet46 = setConstr([65, 90], [97, 122], 95, 58, [128, 255]);
var ConstSet47 = setConstr([48, 57]);
var ConstSet48 = setConstr(2, 4, 12);
function eqStrings(a_2695222, b_2695223) {
        if (a_2695222 == b_2695223) return true;
    if (a_2695222 === null && b_2695223.length == 0) return true;
    if (b_2695223 === null && a_2695222.length == 0) return true;
    if ((!a_2695222) || (!b_2695223)) return false;
    var alen = a_2695222.length;
    if (alen != b_2695223.length) return false;
    for (var i = 0; i < alen; ++i)
      if (a_2695222[i] != b_2695223[i]) return false;
    return true;
  

  
}
var ConstSet49 = setConstr(39, 34);
var ConstSet50 = setConstr(34, 39, 96, 61, 60, 62, 32, 0, 9, 10, 12, 12);
var ConstSet51 = setConstr(2);
var ConstSet52 = setConstr(2);
var ConstSet53 = setConstr(2);
var ConstSet54 = setConstr([48, 57]);
var ConstSet55 = setConstr(0, 125);
var ConstSet56 = setConstr([48, 57]);
var ConstSet57 = setConstr([65, 90]);
var ConstSet58 = setConstr([97, 122], [65, 90], [48, 57], [128, 255], 95);
function cstrToNimstr(c_2690079) {
      var ln = c_2690079.length;
  var result = new Array(ln);
  var r = 0;
  for (var i = 0; i < ln; ++i) {
    var ch = c_2690079.charCodeAt(i);

    if (ch < 128) {
      result[r] = ch;
    }
    else {
      if (ch < 2048) {
        result[r] = (ch >> 6) | 192;
      }
      else {
        if (ch < 55296 || ch >= 57344) {
          result[r] = (ch >> 12) | 224;
        }
        else {
            ++i;
            ch = 65536 + (((ch & 1023) << 10) | (c_2690079.charCodeAt(i) & 1023));
            result[r] = (ch >> 18) | 240;
            ++r;
            result[r] = ((ch >> 12) & 63) | 128;
        }
        ++r;
        result[r] = ((ch >> 6) & 63) | 128;
      }
      ++r;
      result[r] = (ch & 63) | 128;
    }
    ++r;
  }
  return result;
  

  
}
var ConstSet59 = setConstr(2);
var ConstSet60 = setConstr(0, 1, 5, 3, 4);
var ConstSet61 = setConstr(0, 1, 5, 3, 4);
    var errorMessages_12076072 = [makeNimstrLit("no error"), makeNimstrLit("\']]>\' expected"), makeNimstrLit("name expected"), makeNimstrLit("\';\' expected"), makeNimstrLit("\'?>\' expected"), makeNimstrLit("\'>\' expected"), makeNimstrLit("\'=\' expected"), makeNimstrLit("\'\"\' or \"\'\" expected"), makeNimstrLit("\'-->\' expected"), makeNimstrLit("attribute value expected")];
var ConstSet62 = setConstr(2);
var ConstSet63 = setConstr([65, 90]);
var ConstSet64 = setConstr([65, 90]);
var ConstSet65 = setConstr(2);
var ConstSet66 = setConstr(0, 1, 5, 3, 4);
var ConstSet67 = setConstr(0, 1, 5, 3, 4);
var ConstSet68 = setConstr(true);
var ConstSet69 = setConstr(true);
var ConstSet70 = setConstr(true);
var ConstSet71 = setConstr(true);
var ConstSet72 = setConstr(true);
var ConstSet73 = setConstr(true);
var ConstSet74 = setConstr(true);
var ConstSet75 = setConstr(true);
var ConstSet76 = setConstr(true);
var ConstSet77 = setConstr(true);
var ConstSet78 = setConstr(true);
var ConstSet79 = setConstr(true);
var ConstSet80 = setConstr(true);
var ConstSet81 = setConstr(true);
var ConstSet82 = setConstr(true);
var ConstSet83 = setConstr([48, 57]);
var ConstSet84 = setConstr(true);
var ConstSet85 = setConstr(true);
var ConstSet86 = setConstr(true);
var ConstSet87 = setConstr(true);
var ConstSet88 = setConstr(true);
var ConstSet89 = setConstr(true);
var ConstSet90 = setConstr(true);
var ConstSet91 = setConstr(true);
var ConstSet92 = setConstr(true);
var ConstSet93 = setConstr(true);
var ConstSet94 = setConstr(true);
var ConstSet95 = setConstr(true);
var ConstSet96 = setConstr(true);
var ConstSet97 = setConstr(true);
var ConstSet98 = setConstr(true);
var ConstSet99 = setConstr(true);
var ConstSet100 = setConstr(true);
var ConstSet101 = setConstr(true);
var ConstSet102 = setConstr(true);
var ConstSet103 = setConstr(true);
var ConstSet104 = setConstr(true);
var ConstSet105 = setConstr(true);
var ConstSet106 = setConstr(true);
var ConstSet107 = setConstr(10, 9, 12);
var ConstSet108 = setConstr(true);
var ConstSet109 = setConstr(true);
var ConstSet110 = setConstr(true);
var ConstSet111 = setConstr(true);
var ConstSet112 = setConstr(true);
var ConstSet113 = setConstr(true);
var ConstSet114 = setConstr(40, 91, 123, 60, 58);
var ConstSet115 = setConstr([97, 122], [65, 90], [48, 57], 45, 95, 58, 46);
var ConstSet116 = setConstr(true);
var ConstSet117 = setConstr(true);
var ConstSet118 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet119 = setConstr(true);
var ConstSet120 = setConstr(true);
var ConstSet121 = setConstr([48, 57]);
var ConstSet122 = setConstr(true);
var ConstSet123 = setConstr(true);
var ConstSet124 = setConstr(true);
var ConstSet125 = setConstr(true);
function reprEnum(e_2780272, typ_2780273) {
  var result_2780274 = [];

    var tmp_2780275 = false;
    var item_2780276 = typ_2780273.node.sons[e_2780272];
    tmp_2780275 = item_2780276 !== undefined
    if (tmp_2780275) {
    result_2780274 = nimCopy(null, makeNimstrLit(item_2780276.name), NTI2421013);
    }
    else {
      result_2780274 = nimCopy(null, (cstrToNimstr((e_2780272)+"") || []).concat(makeNimstrLit(" (invalid data!)") || []), NTI2421013);
    }
    

  return result_2780274;

}
var ConstSet126 = setConstr(true);
var ConstSet127 = setConstr(true);
var ConstSet128 = setConstr(true);
var ConstSet129 = setConstr(true);
var ConstSet130 = setConstr(true);
if (!Math.trunc) {
  Math.trunc = function(v) {
    v = +v;
    if (!isFinite(v)) return v;
    return (v - v % 1) || (v < 0 ? -0 : v === 0 ? v : 0);
  };
}

var objectID_12175031 = [0];
function input_13490015() {
  var result_13490017 = null;

    result_13490017 = document.getElementById("input").value;

  return result_13490017;

}
function paragraphIfText_11601376(elem_11601378) {
    var Tmp1;

  var result_11601379 = null;

    if (elem_11601378.isText) {
    Tmp1 = {isText: false, tag: 1, content: [elem_11601378], str: null, attrs: []};
    }
    else {
    Tmp1 = elem_11601378;
    }
    
    result_11601379 = Tmp1;

  return result_11601379;

}
function isFatPointer_2700401(ti_2700403) {
  var result_2700404 = false;

  BeforeRet: do {
    result_2700404 = !((ConstSet3[ti_2700403.base.kind] != undefined));
    break BeforeRet;
  } while (false);

  return result_2700404;

}
function nimCopyAux(dest_2705028, src_2705029, n_2705031) {
    switch (n_2705031.kind) {
    case 0:
      break;
    case 1:
            dest_2705028[n_2705031.offset] = nimCopy(dest_2705028[n_2705031.offset], src_2705029[n_2705031.offset], n_2705031.typ);
    
      break;
    case 2:
          for (var i = 0; i < n_2705031.sons.length; i++) {
      nimCopyAux(dest_2705028, src_2705029, n_2705031.sons[i]);
    }
    
      break;
    case 3:
            dest_2705028[n_2705031.offset] = nimCopy(dest_2705028[n_2705031.offset], src_2705029[n_2705031.offset], n_2705031.typ);
      for (var i = 0; i < n_2705031.sons.length; ++i) {
        nimCopyAux(dest_2705028, src_2705029, n_2705031.sons[i][1]);
      }
    
      break;
    }

  
}
function add_2592211(x_2592214, x_2592214_Idx, y_2592215) {
          if (x_2592214[x_2592214_Idx] === null) { x_2592214[x_2592214_Idx] = []; }
      var off = x_2592214[x_2592214_Idx].length;
      x_2592214[x_2592214_Idx].length += y_2592215.length;
      for (var i = 0; i < y_2592215.length; ++i) {
        x_2592214[x_2592214_Idx][off+i] = y_2592215.charCodeAt(i);
      }
    

  
}
function newSeq_2690128(len_2690131) {
  var result_2690133 = [];

    result_2690133 = new Array(len_2690131); for (var i=0;i<len_2690131;++i) {result_2690133[i]=null;}
  return result_2690133;

}
function unhandledException(e_2650059) {
    var buf_2650060 = [[]];
    if (!(((e_2650059.message).length == 0))) {
    buf_2650060[0].push.apply(buf_2650060[0], makeNimstrLit("Error: unhandled exception: "));;
    buf_2650060[0].push.apply(buf_2650060[0], e_2650059.message);;
    }
    else {
    buf_2650060[0].push.apply(buf_2650060[0], makeNimstrLit("Error: unhandled exception"));;
    }
    
    buf_2650060[0].push.apply(buf_2650060[0], makeNimstrLit(" ["));;
    add_2592211(buf_2650060, 0, e_2650059.name);
    buf_2650060[0].push.apply(buf_2650060[0], makeNimstrLit("]\x0A"));;
    var cbuf_2655201 = toJSStr(buf_2650060[0]);
    framePtr = null;
      if (typeof(Error) !== "undefined") {
    throw new Error(cbuf_2655201);
  }
  else {
    throw cbuf_2655201;
  }
  

  
}
function peekMatch_11635020(parser_11635023, pat_11635025, offset_11635026) {
    var Tmp1;

  var result_11635027 = false;

    if (!((parser_11635023.pos + offset_11635026) < (parser_11635023.str).length)) Tmp1 = false; else {      Tmp1 = (pat_11635025[parser_11635023.str.charCodeAt((parser_11635023.pos + offset_11635026))] != undefined);    }    result_11635027 = Tmp1;

  return result_11635027;

}
function nextMatch_11660228(parser_11660231, pat_11660233, offset_11660234) {
  var result_11660235 = false;

    result_11660235 = peekMatch_11635020(parser_11660231, pat_11660233, offset_11660234);
    if (result_11660235) {
    parser_11660231.pos += (offset_11660234 + 1);
    }
    

  return result_11660235;

}
function newElem_11601312(tag_11601314, content_11601331) {
  var result_11601332 = null;

    result_11601332 = {isText: false, tag: tag_11601314, content: nimCopy(null, content_11601331, NTI11601315), str: null, attrs: []};

  return result_11601332;

}
function newStr_11601263(s_11601265) {
  var result_11601266 = null;

    result_11601266 = {isText: true, str: s_11601265, tag: 0, attrs: [], content: []};

  return result_11601266;

}
function HEX5BHEX5D_11601071(c_11601073, ind_11601078) {
  var result_11601079 = null;

    result_11601079 = c_11601073.substring(ind_11601078.a, (ind_11601078.b + 1));

  return result_11601079;

}
function HEX2EHEX2E_4625220(a_4625225, b_4625227) {
  var result_4625229 = ({a: 0, b: 0});

    nimCopy(result_4625229, {a: a_4625225, b: b_4625227}, NTI3520020);

  return result_4625229;

}
function peekMatch_11650014(parser_11650017, pat_11650018, offset_11650019) {
    var Tmp1;

  var result_11650020 = false;

    if (!(((parser_11650017.pos + offset_11650019) + (pat_11650018).length) <= (parser_11650017.str).length)) Tmp1 = false; else {      Tmp1 = (HEX5BHEX5D_11601071(parser_11650017.str, HEX2EHEX2E_4625220((parser_11650017.pos + offset_11650019), (((parser_11650017.pos + offset_11650019) + (pat_11650018).length) - 1))) == toJSStr(pat_11650018));    }    result_11650020 = Tmp1;

  return result_11650020;

}
function nextMatch_11660281(parser_11660284, pat_11660285, offset_11660286) {
  var result_11660287 = false;

    result_11660287 = peekMatch_11650014(parser_11660284, pat_11660285, offset_11660286);
    if (result_11660287) {
    parser_11660284.pos += (offset_11660286 + (pat_11660285).length);
    }
    

  return result_11660287;

}
function HEX5BHEX5D_12860006(s_12860011, i_12860012) {
  var result_12860014 = null;
  var result_12860014_Idx = 0;

    result_12860014 = s_12860011; result_12860014_Idx = ((s_12860011).length - i_12860012);

  return [result_12860014, result_12860014_Idx];

}
function parseCodeBlock_12851313(parser_12851316) {
              var Tmp6;
              var Tmp7;
              var Tmp8;
              var Tmp9;

  var result_12851317 = null;

  BeforeRet: do {
    result_12851317 = newElem_11601312(17, [newStr_11601263("")]);
    L1: do {
        L2: while (true) {
        if (!nextMatch_11660228(parser_12851316, ConstSet6, 0)) break L2;
        }
    } while(false);
    L3: do {
      var ch_12851329 = 0;
      L4: do {
          L5: while (true) {
          if (!(parser_12851316.pos < (parser_12851316.str).length)) break L5;
            ch_12851329 = parser_12851316.str.charCodeAt((parser_12851316.pos + 0));
            if (nextMatch_11660281(parser_12851316, makeNimstrLit("```"), 0)) {
            parser_12851316.pos -= 1;
            break BeforeRet;
            }
            else {
              var Tmp6 = result_12851317;
              if (ConstSet8[Tmp6.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              var Tmp8 = (Tmp7 = HEX5BHEX5D_12860006(Tmp6.content, 1), Tmp7)[0][Tmp7[1]];
              if (ConstSet7[Tmp8.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              switch (ch_12851329) {
              case 62:
                Tmp9 = makeNimstrLit("&gt;");
                break;
              case 60:
                Tmp9 = makeNimstrLit("&lt;");
                break;
              case 38:
                Tmp9 = makeNimstrLit("&amp;");
                break;
              default: 
                Tmp9 = nimCharToStr(ch_12851329);
                break;
              }
            Tmp8.str += toJSStr(Tmp9);;
            }
            
            parser_12851316.pos += 1;
          }
      } while(false);
    } while(false);
  } while (false);

  return result_12851317;

}
function add_12885216(x_12885221, x_12885221_Idx, y_12885223) {
    var Tmp1;

    var xl_12885229 = (x_12885221[x_12885221_Idx]).length;
    if (x_12885221[x_12885221_Idx].length < (Tmp1 = (xl_12885229 + (y_12885223).length), Tmp1)) { for (var i=x_12885221[x_12885221_Idx].length;i<Tmp1;++i) x_12885221[x_12885221_Idx].push(null); }
               else { x_12885221[x_12885221_Idx].length = Tmp1; };
    L2: do {
      var i_12885254 = 0;
      var colontmp__13490171 = 0;
      colontmp__13490171 = ((y_12885223).length-1);
      var res_13490172 = 0;
      L3: do {
          L4: while (true) {
          if (!(res_13490172 <= colontmp__13490171)) break L4;
            i_12885254 = res_13490172;
            x_12885221[x_12885221_Idx][(xl_12885229 + i_12885254)] = y_12885223[i_12885254];
            res_13490172 += 1;
          }
      } while(false);
    } while(false);

  
}
function parseLink_13045050(parser_13045053) {
              var Tmp4;

  var result_13045058 = {Field0: false, Field1: [], Field2: []};

  BeforeRet: do {
    var state_13045063 = 0;
    var delim_13045064 = 0;
    var escaped_13045065 = false;
    var openparens_13045067 = 1;
    L1: do {
      var ch_13045068 = 0;
      L2: do {
          L3: while (true) {
          if (!(parser_13045053.pos < (parser_13045053.str).length)) break L3;
            ch_13045068 = parser_13045053.str.charCodeAt((parser_13045053.pos + 0));
            switch (state_13045063) {
            case 0:
              switch (ch_13045068) {
              case 9:
              case 10:
              case 11:
              case 12:
              case 13:
              case 32:
                state_13045063 = 1;
                break;
              case 40:
                openparens_13045067 += 1;
                addChar(result_13045058.Field1, 40);;
                break;
              case 41:
                openparens_13045067 -= 1;
                if ((openparens_13045067 == 0)) {
                result_13045058.Field0 = true;
                break BeforeRet;
                }
                else {
                addChar(result_13045058.Field1, 41);;
                }
                
                break;
              default: 
                addChar(result_13045058.Field1, ch_13045068);;
                break;
              }
              break;
            case 1:
              if (!((ConstSet16[ch_13045068] != undefined))) {
              if ((ConstSet17[ch_13045068] != undefined)) {
              state_13045063 = 2;
              if ((ch_13045068 == 60)) {
              Tmp4 = 62;
              }
              else {
              Tmp4 = ch_13045068;
              }
              
              delim_13045064 = Tmp4;
              }
              else {
              if ((ch_13045068 == 41)) {
              result_13045058.Field0 = true;
              break BeforeRet;
              }
              }
              }
              
              break;
            case 2:
              if (!(escaped_13045065)) {
              if ((ch_13045068 == 92)) {
              escaped_13045065 = true;
              }
              else {
              if ((ch_13045068 == delim_13045064)) {
              state_13045063 = 3;
              }
              else {
              addChar(result_13045058.Field2, ch_13045068);;
              }
              }
              }
              else {
                if (!((setConstr(92, delim_13045064)[ch_13045068] != undefined))) {
                addChar(result_13045058.Field2, 92);;
                }
                
                addChar(result_13045058.Field2, ch_13045068);;
                escaped_13045065 = false;
              }
              
              break;
            case 3:
              if ((ch_13045068 == 41)) {
              result_13045058.Field0 = true;
              break BeforeRet;
              }
              
              break;
            }
            parser_13045053.pos += 1;
          }
      } while(false);
    } while(false);
    result_13045058.Field0 = false;
  } while (false);

  return result_13045058;

}
function parseBracket_12851214(image_12851216, parser_12851218, doubleNewLine_12851219) {
    var Tmp1;
      var Tmp2;
      var Tmp3;
        var Tmp4;
    var Tmp5;
    var Tmp6;
    var Tmp7;
    var Tmp8;
    var Tmp9;
    var Tmp10;
      var Tmp11;
      var Tmp12;
      var Tmp13;
      var Tmp14;
        var Tmp15;
      var Tmp16;
      var Tmp17;
      var Tmp18;
    var Tmp19;
      var Tmp20;
      var Tmp21;
      var Tmp22;

  var result_13060043 = null;

  BeforeRet: do {
    var firstPos_13060044 = parser_12851218.pos;
    var colontmp__13490178 = parseDelimed_12860076(parser_12851218, makeNimstrLit("]"), doubleNewLine_12851219);
    var titleWorked_13060045 = colontmp__13490178["Field0"];
    var titleElems_13060046 = nimCopy(null, colontmp__13490178["Field1"], NTI12860083);
    parser_12851218.pos += 1;
    var secondPos_13060053 = (parser_12851218.pos - 2);
    if (!((titleWorked_13060045 == 0))) {
    result_13060043 = newElem_11601312(0, titleElems_13060046);
    break BeforeRet;
    }
    
      if (!(!(image_12851216) && ((titleElems_13060046).length == 1))) Tmp3 = false; else {        Tmp3 = titleElems_13060046[0].isText;      }      if (!Tmp3) Tmp2 = false; else {        var Tmp4 = titleElems_13060046[0];
        if (ConstSet14[Tmp4.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
        Tmp2 = ((Tmp4.str).length == 1);      }    if (Tmp2) {
    var Tmp5 = titleElems_13060046[0];
    if (ConstSet15[Tmp5.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    switch ((Tmp6 = Tmp5.str, Tmp6).charCodeAt(0)) {
    case 32:
      Tmp7 = 1;
      break;
    case 120:
      Tmp7 = 2;
      break;
    default: 
      Tmp7 = 0;
      break;
    }
    Tmp1 = Tmp7;
    }
    else {
    Tmp1 = 0;
    }
    
    var checkMark_13065014 = Tmp1;
    if ((parser_12851218.pos < (parser_12851218.str).length)) {
    if ((parser_12851218.str.charCodeAt((parser_12851218.pos + 0)) == 40)) {
    var oldPos_13070001 = parser_12851218.pos;
    parser_12851218.pos += 1;
    var colontmp__13490179 = parseLink_13045050(parser_12851218);
    var linkWorked_13070008 = colontmp__13490179["Field0"];
    var link_13070009 = nimCopy(null, colontmp__13490179["Field1"], NTI2421013);
    var tip_13070010 = nimCopy(null, colontmp__13490179["Field2"], NTI2421013);
    if (linkWorked_13070008) {
    var elem_13070011 = {isText: false, str: null, tag: 0, attrs: [], content: []};
    if (image_12851216) {
    var Tmp8 = elem_13070011;
    if (ConstSet18[Tmp8.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    Tmp8.tag = 21;
    var Tmp9 = elem_13070011;
    if (ConstSet19[Tmp9.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'attrs\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    Tmp9.attrs.push({Field0: "src", Field1: toJSStr(link_13070009)});;
    if ((0 < (secondPos_13060053 - firstPos_13060044))) {
    var Tmp10 = elem_13070011;
    if (ConstSet20[Tmp10.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'attrs\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    Tmp10.attrs.push({Field0: "alt", Field1: HEX5BHEX5D_11601071(parser_12851218.str, HEX2EHEX2E_4625220(firstPos_13060044, secondPos_13060053))});;
    }
    
    }
    else {
      var Tmp11 = elem_13070011;
      if (ConstSet21[Tmp11.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp11.tag = 23;
      var Tmp12 = elem_13070011;
      if (ConstSet22[Tmp12.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp12.content = nimCopy(null, titleElems_13060046, NTI12860083);
      var Tmp13 = elem_13070011;
      if (ConstSet23[Tmp13.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'attrs\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
        if (!(((link_13070009).length == 0) && ((titleElems_13060046).length == 1))) Tmp15 = false; else {          Tmp15 = titleElems_13060046[0].isText;        }      if (Tmp15) {
      var Tmp17 = titleElems_13060046[0];
      if (ConstSet24[Tmp17.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp16 = Tmp17.str;
      var Tmp18 = titleElems_13060046[0];
      if (ConstSet25[Tmp18.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp18.str = genericReset(Tmp18.str, NTI2421015);
      Tmp14 = Tmp16;
      }
      else {
      Tmp14 = toJSStr(link_13070009);
      }
      
      Tmp13.attrs.push({Field0: "href", Field1: Tmp14});;
    }
    
    if (!(((tip_13070010).length == 0))) {
    var Tmp19 = elem_13070011;
    if (ConstSet26[Tmp19.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'attrs\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    Tmp19.attrs.push({Field0: "title", Field1: toJSStr(tip_13070010)});;
    }
    
    result_13060043 = elem_13070011;
    break BeforeRet;
    }
    else {
      parser_12851218.pos = oldPos_13070001;
    }
    
    }
    else {
    parser_12851218.pos -= 1;
    }
    
    }
    
    if (image_12851216) {
    result_13060043 = newElem_11601312(0, titleElems_13060046);
    }
    else {
    if ((checkMark_13065014 == 0)) {
    result_13060043 = newElem_11601312(14, titleElems_13060046);
    }
    else {
      var elem_13080018 = newElem_11601312(22, []);
      var Tmp20 = elem_13080018;
      if (ConstSet27[Tmp20.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'attrs\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp20.attrs.push({Field0: "type", Field1: "checkbox"});;
      var Tmp21 = elem_13080018;
      if (ConstSet28[Tmp21.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'attrs\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp21.attrs.push({Field0: "disabled", Field1: ""});;
      if ((checkMark_13065014 == 2)) {
      var Tmp22 = elem_13080018;
      if (ConstSet29[Tmp22.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'attrs\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      Tmp22.attrs.push({Field0: "checked", Field1: ""});;
      }
      
      result_13060043 = elem_13080018;
    }
    }
  } while (false);

  return result_13060043;

}
function peekMatch_11645020(parser_11645023, pat_11645024, offset_11645025) {
    var Tmp1;

  var result_11645026 = false;

    if (!((parser_11645023.pos + offset_11645025) < (parser_11645023.str).length)) Tmp1 = false; else {      Tmp1 = (parser_11645023.str.charCodeAt((parser_11645023.pos + offset_11645025)) == pat_11645024);    }    result_11645026 = Tmp1;

  return result_11645026;

}
function nextMatch_11660255(parser_11660258, pat_11660259, offset_11660260) {
  var result_11660261 = false;

    result_11660261 = peekMatch_11645020(parser_11660258, pat_11660259, offset_11660260);
    if (result_11660261) {
    parser_11660258.pos += (offset_11660260 + 1);
    }
    

  return result_11660261;

}
function add_12851237(x_12851240, x_12851240_Idx) {
    x_12851240[x_12851240_Idx] += "{";;

  
}
function add_12851265(x_12851268, x_12851268_Idx) {
    x_12851268[x_12851268_Idx] += "}";;

  
}
function add_11601033(x_11601036, x_11601036_Idx, y_11601037) {
    x_11601036[x_11601036_Idx] += String.fromCharCode(y_11601037);;

  
}
function parseCurly_12851220(parser_12851223) {
              var Tmp4;
                var Tmp5;
              var Tmp6;
              var Tmp7;
              var Tmp8;

  var result_12851224 = null;

  BeforeRet: do {
    result_12851224 = newStr_11601263("");
    var opencurlys_12851226 = 1;
    var escaped_12851227 = false;
    L1: do {
      var ch_12851228 = 0;
      L2: do {
          L3: while (true) {
          if (!(parser_12851223.pos < (parser_12851223.str).length)) break L3;
            ch_12851228 = parser_12851223.str.charCodeAt((parser_12851223.pos + 0));
            if (!(escaped_12851227)) {
            switch (ch_12851228) {
            case 92:
              escaped_12851227 = true;
              break;
            case 123:
              opencurlys_12851226 += 1;
              var Tmp4 = result_12851224;
              if (ConstSet34[Tmp4.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              add_12851237(Tmp4, "str");
              break;
            case 125:
              opencurlys_12851226 -= 1;
              if ((opencurlys_12851226 == 0)) {
              break BeforeRet;
              }
              else {
                var Tmp5 = result_12851224;
                if (ConstSet35[Tmp5.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              add_12851265(Tmp5, "str");
              }
              
              break;
            default: 
              var Tmp6 = result_12851224;
              if (ConstSet36[Tmp6.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              add_11601033(Tmp6, "str", ch_12851228);
              break;
            }
            }
            else {
              var Tmp7 = result_12851224;
              if (ConstSet37[Tmp7.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              switch (ch_12851228) {
              case 62:
                Tmp8 = makeNimstrLit("&gt;");
                break;
              case 60:
                Tmp8 = makeNimstrLit("&lt;");
                break;
              case 38:
                Tmp8 = makeNimstrLit("&amp;");
                break;
              case 92:
              case 125:
              case 123:
                Tmp8 = nimCharToStr(ch_12851228);
                break;
              default: 
                Tmp8 = [92].concat([ch_12851228]);
                break;
              }
              Tmp7.str += toJSStr(Tmp8);;
              escaped_12851227 = false;
            }
            
            parser_12851223.pos += 1;
          }
      } while(false);
    } while(false);
  } while (false);

  return result_12851224;

}
function ssClose_11920021(s_11920023) {
    var s_11920024 = s_11920023;
    s_11920024.data = nimCopy(null, [], NTI2421013);

  
}
function ssAtEnd_11825297(s_11825299) {
  var result_11825300 = false;

  BeforeRet: do {
    var s_11825301 = s_11825299;
    result_11825300 = ((s_11825301.data).length <= s_11825301.pos);
    break BeforeRet;
  } while (false);

  return result_11825300;

}
function clamp_11830049(x_11830052, a_11830053, b_11830054) {
  var result_11830055 = 0;

  BeforeRet: do {
    if ((x_11830052 < a_11830053)) {
    result_11830055 = a_11830053;
    break BeforeRet;
    }
    
    if ((b_11830054 < x_11830052)) {
    result_11830055 = b_11830054;
    break BeforeRet;
    }
    
    result_11830055 = x_11830052;
    break BeforeRet;
  } while (false);

  return result_11830055;

}
function ssSetPosition_11830044(s_11830046, pos_11830047) {
    var s_11830048 = s_11830046;
    s_11830048.pos = clamp_11830049(pos_11830047, 0, (s_11830048.data).length);

  
}
function ssGetPosition_11830082(s_11830084) {
  var result_11830085 = 0;

  BeforeRet: do {
    var s_11830086 = s_11830084;
    result_11830085 = s_11830086.pos;
    break BeforeRet;
  } while (false);

  return result_11830085;

}
function HEX5BHEX5DHEX3D_11130021(s_11130025, s_11130025_Idx, x_11130027, b_11130028) {
    var a_11130201 = x_11130027.a;
    var L_11130401 = ((x_11130027.b - a_11130201) + 1);
    if ((L_11130401 == (b_11130028).length)) {
    L1: do {
      var i_11130409 = 0;
      var i_13490191 = 0;
      L2: do {
          L3: while (true) {
          if (!(i_13490191 < L_11130401)) break L3;
            i_11130409 = i_13490191;
            s_11130025[s_11130025_Idx][(i_11130409 + a_11130201)] = b_11130028[i_11130409];
            i_13490191 += 1;
          }
      } while(false);
    } while(false);
    }
    else {
      var shiftHEX60gensym78_11140002 = ((b_11130028).length - nimMax(0, L_11130401));
      var newLenHEX60gensym78_11140003 = ((s_11130025[s_11130025_Idx]).length + shiftHEX60gensym78_11140002);
      if ((0 < shiftHEX60gensym78_11140002)) {
      (s_11130025[s_11130025_Idx].length = newLenHEX60gensym78_11140003);
      L4: do {
        var iHEX60gensym78_11140010 = 0;
        var colontmp__13490194 = 0;
        var colontmp__13490195 = 0;
        colontmp__13490194 = (newLenHEX60gensym78_11140003 - 1);
        colontmp__13490195 = (a_11130201 + (b_11130028).length);
        var res_13490200 = colontmp__13490194;
        L5: do {
            L6: while (true) {
            if (!(colontmp__13490195 <= res_13490200)) break L6;
              iHEX60gensym78_11140010 = res_13490200;
              s_11130025[s_11130025_Idx][iHEX60gensym78_11140010] = s_11130025[s_11130025_Idx][(iHEX60gensym78_11140010 - shiftHEX60gensym78_11140002)];
              res_13490200 -= 1;
            }
        } while(false);
      } while(false);
      }
      else {
        L7: do {
          var iHEX60gensym78_11140017 = 0;
          var colontmp__13490206 = 0;
          var colontmp__13490207 = 0;
          colontmp__13490206 = (a_11130201 + (b_11130028).length);
          colontmp__13490207 = (newLenHEX60gensym78_11140003 - 1);
          var res_13490212 = colontmp__13490206;
          L8: do {
              L9: while (true) {
              if (!(res_13490212 <= colontmp__13490207)) break L9;
                iHEX60gensym78_11140017 = res_13490212;
                s_11130025[s_11130025_Idx][iHEX60gensym78_11140017] = s_11130025[s_11130025_Idx][(iHEX60gensym78_11140017 - shiftHEX60gensym78_11140002)];
                res_13490212 += 1;
              }
          } while(false);
        } while(false);
        (s_11130025[s_11130025_Idx].length = newLenHEX60gensym78_11140003);
      }
      
      L10: do {
        var iHEX60gensym78_11140025 = 0;
        var colontmp__13490218 = 0;
        colontmp__13490218 = (b_11130028).length;
        var i_13490219 = 0;
        L11: do {
            L12: while (true) {
            if (!(i_13490219 < colontmp__13490218)) break L12;
              iHEX60gensym78_11140025 = i_13490219;
              s_11130025[s_11130025_Idx][(a_11130201 + iHEX60gensym78_11140025)] = b_11130028[iHEX60gensym78_11140025];
              i_13490219 += 1;
            }
        } while(false);
      } while(false);
    }
    

  
}
function HEX5BHEX5D_4625283(s_4625287, x_4625289) {
  var result_4625290 = [];

    var a_4625401 = x_4625289.a;
    var L_4625601 = ((x_4625289.b - a_4625401) + 1);
    result_4625290 = nimCopy(null, mnewString(L_4625601), NTI2421013);
    L1: do {
      var i_4625609 = 0;
      var i_13490224 = 0;
      L2: do {
          L3: while (true) {
          if (!(i_13490224 < L_4625601)) break L3;
            i_4625609 = i_13490224;
            result_4625290[i_4625609] = s_4625287[(i_4625609 + a_4625401)];
            i_13490224 += 1;
          }
      } while(false);
    } while(false);

  return result_4625290;

}
function ssReadDataStr_11830100(s_11830102, buffer_11830104, buffer_11830104_Idx, slice_11830109) {
  var result_11830110 = 0;

    var s_11830111 = s_11830102;
    result_11830110 = nimMin(((slice_11830109.b + 1) - slice_11830109.a), ((s_11830111.data).length - s_11830111.pos));
    if ((0 < result_11830110)) {
    L1: do {
    } while(false);
    HEX5BHEX5DHEX3D_11130021(buffer_11830104, buffer_11830104_Idx, HEX2EHEX2E_4625220(slice_11830109.a, ((slice_11830109.a + result_11830110) - 1)), HEX5BHEX5D_4625283(s_11830111.data, HEX2EHEX2E_4625220(s_11830111.pos, ((s_11830111.pos + result_11830110) - 1))));
    s_11830111.pos += result_11830110;
    }
    else {
      result_11830110 = 0;
    }
    

  return result_11830110;

}
function isNimException_2610704() {
    return lastJSError && lastJSError.m_type;

  
}
function getCurrentException() {
  var result_2610723 = null;

    if (isNimException_2610704()) {
    result_2610723 = lastJSError;
    }
    

  return result_2610723;

}
function ssReadData_11860420(s_11860422, buffer_11860423, buffer_11860423_Idx, bufLen_11860424) {
    var Tmp2;

  var result_11860425 = 0;

    var s_11860426 = s_11860422;
    result_11860425 = nimMin(bufLen_11860424, ((s_11860426.data).length - s_11860426.pos));
    if ((0 < result_11860425)) {
++excHandler;
    Tmp2 = framePtr;
    try {
    HEX5BHEX5DHEX3D_11130021(buffer_11860423, buffer_11860423_Idx, HEX2EHEX2E_4625220(0, (result_11860425 - 1)), HEX5BHEX5D_4625283(s_11860426.data, HEX2EHEX2E_4625220(s_11860426.pos, ((s_11860426.pos + result_11860425) - 1))));
--excHandler;
} catch (EXC) {
 var prevJSError = lastJSError;
 lastJSError = EXC;
 --excHandler;
    framePtr = Tmp2;
    raiseException({message: makeNimstrLit("could not read string stream, did you use a non-string buffer pointer?"), parent: getCurrentException(), m_type: NTI2427619, name: null, trace: [], up: null}, "Defect");
    lastJSError = prevJSError;
    } finally {
    framePtr = Tmp2;
    }
    s_11860426.pos += result_11860425;
    }
    else {
      result_11860425 = 0;
    }
    

  return result_11860425;

}
function ssPeekData_11880051(s_11880053, buffer_11880054, buffer_11880054_Idx, bufLen_11880055) {
    var Tmp2;

  var result_11880056 = 0;

    var s_11880057 = s_11880053;
    result_11880056 = nimMin(bufLen_11880055, ((s_11880057.data).length - s_11880057.pos));
    if ((0 < result_11880056)) {
++excHandler;
    Tmp2 = framePtr;
    try {
    HEX5BHEX5DHEX3D_11130021(buffer_11880054, buffer_11880054_Idx, HEX2EHEX2E_4625220(0, (result_11880056 - 1)), HEX5BHEX5D_4625283(s_11880057.data, HEX2EHEX2E_4625220(s_11880057.pos, ((s_11880057.pos + result_11880056) - 1))));
--excHandler;
} catch (EXC) {
 var prevJSError = lastJSError;
 lastJSError = EXC;
 --excHandler;
    framePtr = Tmp2;
    raiseException({message: makeNimstrLit("could not peek string stream, did you use a non-string buffer pointer?"), parent: getCurrentException(), m_type: NTI2427619, name: null, trace: [], up: null}, "Defect");
    lastJSError = prevJSError;
    } finally {
    framePtr = Tmp2;
    }
    }
    else {
      result_11880056 = 0;
    }
    

  return result_11880056;

}
function ssWriteData_11900015(s_11900017, buffer_11900018, buffer_11900018_Idx, bufLen_11900019) {
    var Tmp2;

  BeforeRet: do {
    var s_11900020 = s_11900017;
    if ((bufLen_11900019 <= 0)) {
    break BeforeRet;
    }
    
    if (((s_11900020.data).length < (s_11900020.pos + bufLen_11900019))) {
    (s_11900020.data.length = (s_11900020.pos + bufLen_11900019));
    }
    
++excHandler;
    Tmp2 = framePtr;
    try {
    HEX5BHEX5DHEX3D_11130021(s_11900020, "data", HEX2EHEX2E_4625220(s_11900020.pos, ((s_11900020.pos + bufLen_11900019) - 1)), HEX5BHEX5D_4625283(buffer_11900018[buffer_11900018_Idx], HEX2EHEX2E_4625220(0, (bufLen_11900019 - 1))));
--excHandler;
} catch (EXC) {
 var prevJSError = lastJSError;
 lastJSError = EXC;
 --excHandler;
    framePtr = Tmp2;
    raiseException({message: makeNimstrLit("could not write to string stream, did you use a non-string buffer pointer?"), parent: getCurrentException(), m_type: NTI2427619, name: null, trace: [], up: null}, "Defect");
    lastJSError = prevJSError;
    } finally {
    framePtr = Tmp2;
    }
    s_11900020.pos += bufLen_11900019;
  } while (false);

  
}
function newStringStream_11920214(s_11920216) {
  var result_11920218 = null;

    result_11920218 = ({m_type: NTI11825253, data: [], pos: 0, closeImpl: null, atEndImpl: null, setPositionImpl: null, getPositionImpl: null, readDataStrImpl: null, readLineImpl: null, readDataImpl: null, peekDataImpl: null, writeDataImpl: null, flushImpl: null});
    result_11920218.data = nimCopy(null, s_11920216, NTI2421013);
    result_11920218.pos = 0;
    result_11920218.closeImpl = ssClose_11920021;
    result_11920218.atEndImpl = ssAtEnd_11825297;
    result_11920218.setPositionImpl = ssSetPosition_11830044;
    result_11920218.getPositionImpl = ssGetPosition_11830082;
    result_11920218.readDataStrImpl = ssReadDataStr_11830100;
    result_11920218.readDataImpl = ssReadData_11860420;
    result_11920218.peekDataImpl = ssPeekData_11880051;
    result_11920218.writeDataImpl = ssWriteData_11900015;

  return result_11920218;

}
function setPosition_11661240(s_11661242, pos_11661243) {
    s_11661242.setPositionImpl(s_11661242, pos_11661243);

  
}
function readData_11661274(s_11661276, buffer_11661277, buffer_11661277_Idx, bufLen_11661278) {
  var result_11661279 = 0;

    result_11661279 = s_11661276.readDataImpl(s_11661276, buffer_11661277, buffer_11661277_Idx, bufLen_11661278);

  return result_11661279;

}
function readDataStr_11661293(s_11661295, buffer_11661297, buffer_11661297_Idx, slice_11661302) {
  var result_11661303 = 0;

    if (!((s_11661295.readDataStrImpl == null))) {
    result_11661303 = s_11661295.readDataStrImpl(s_11661295, buffer_11661297, buffer_11661297_Idx, slice_11661302);
    }
    else {
      result_11661303 = readData_11661274(s_11661295, buffer_11661297[buffer_11661297_Idx], slice_11661302.a, ((slice_11661302.b + 1) - slice_11661302.a));
    }
    

  return result_11661303;

}
function fillBuffer_11931058(L_11931061) {
                  var Tmp8;

    var charsRead_11931062 = 0;
    var toCopy_11931063 = 0;
    var s_11931064 = 0;
    var oldBufLen_11931065 = 0;
    toCopy_11931063 = ((L_11931061.buf).length - (L_11931061.sentinel + 1));
    if ((0 < toCopy_11931063)) {
    L1: do {
      var i_11960208 = 0;
      var i_13490234 = 0;
      L2: do {
          L3: while (true) {
          if (!(i_13490234 < toCopy_11931063)) break L3;
            i_11960208 = i_13490234;
            L_11931061.buf[i_11960208] = L_11931061.buf[((L_11931061.sentinel + 1) + i_11960208)];
            i_13490234 += 1;
          }
      } while(false);
    } while(false);
    }
    
    charsRead_11931062 = readDataStr_11661293(L_11931061.input, L_11931061, "buf", HEX2EHEX2E_4625220(toCopy_11931063, (((toCopy_11931063 + L_11931061.sentinel) + 1) - 1)));
    s_11931064 = (toCopy_11931063 + charsRead_11931062);
    if ((charsRead_11931062 < (L_11931061.sentinel + 1))) {
    L_11931061.buf[s_11931064] = 0;
    L_11931061.sentinel = s_11931064;
    }
    else {
      s_11931064 -= 1;
      L4: do {
          L5: while (true) {
          if (!true) break L5;
            L6: do {
                L7: while (true) {
                  if (!(0 <= s_11931064)) Tmp8 = false; else {                    Tmp8 = !((L_11931061.refillChars[L_11931061.buf[s_11931064]] != undefined));                  }                if (!Tmp8) break L7;
                  s_11931064 -= 1;
                }
            } while(false);
            if ((0 <= s_11931064)) {
            L_11931061.sentinel = s_11931064;
            break L4;
            }
            else {
              oldBufLen_11931065 = (L_11931061.buf).length;
              (L_11931061.buf.length = ((L_11931061.buf).length * 2));
              charsRead_11931062 = readDataStr_11661293(L_11931061.input, L_11931061, "buf", HEX2EHEX2E_4625220(oldBufLen_11931065, ((L_11931061.buf).length - 1)));
              if ((charsRead_11931062 < oldBufLen_11931065)) {
              L_11931061.buf[(oldBufLen_11931065 + charsRead_11931062)] = 0;
              L_11931061.sentinel = (oldBufLen_11931065 + charsRead_11931062);
              break L4;
              }
              
              s_11931064 = ((L_11931061.buf).length - 1);
            }
            
          }
      } while(false);
    }
    

  
}
function skipUtf8Bom_12040214(L_12040217) {
      var Tmp1;
      var Tmp2;

      if (!(L_12040217.buf[0] == 239)) Tmp2 = false; else {        Tmp2 = (L_12040217.buf[1] == 187);      }      if (!Tmp2) Tmp1 = false; else {        Tmp1 = (L_12040217.buf[2] == 191);      }    if (Tmp1) {
    L_12040217.bufpos += 3;
    L_12040217.lineStart += 3;
    }
    

  
}
function open_12040243(L_12040246, input_12040247, bufLen_12040249, refillChars_12040251) {
    L_12040246.input = input_12040247;
    L_12040246.bufpos = 0;
    L_12040246.offsetBase = 0;
    nimCopy(L_12040246.refillChars, refillChars_12040251, NTI12040250);
    L_12040246.buf = nimCopy(null, mnewString(bufLen_12040249), NTI2421013);
    L_12040246.sentinel = (bufLen_12040249 - 1);
    L_12040246.lineStart = 0;
    L_12040246.lineNumber = 1;
    fillBuffer_11931058(L_12040246);
    skipUtf8Bom_12040214(L_12040246);

  
}
function open_12076101(my_12076104, input_12076105, filename_12076106, options_12076110) {
    open_12040243(my_12076104, input_12076105, 8192, ConstSet42);
    my_12076104.filename = nimCopy(null, filename_12076106, NTI2421013);
    my_12076104.state = 0;
    my_12076104.kind = 0;
    my_12076104.a = nimCopy(null, [], NTI2421013);
    my_12076104.b = nimCopy(null, [], NTI2421013);
    my_12076104.c = nimCopy(null, [], NTI2421013);
    my_12076104.cIsEmpty = true;
    nimCopy(my_12076104.options, options_12076110, NTI12076107);

  
}
function fillBaseLexer_11995229(L_11995232, pos_11995233) {
  var result_11995234 = 0;

    if ((pos_11995233 < L_11995232.sentinel)) {
    result_11995234 = (pos_11995233 + 1);
    }
    else {
      fillBuffer_11931058(L_11995232);
      L_11995232.offsetBase += pos_11995233;
      L_11995232.bufpos = 0;
      result_11995234 = 0;
    }
    

  return result_11995234;

}
function handleRefillChar_12025220(L_12025223, pos_12025224) {
  var result_12025225 = 0;

    result_12025225 = fillBaseLexer_11995229(L_12025223, pos_12025224);

  return result_12025225;

}
function markError_12085286(my_12085289, kind_12085290) {
    my_12085289.err = kind_12085290;
    my_12085289.state = 4;

  
}
function parseName_12085463(my_12085466, dest_12085468, dest_12085468_Idx) {
    var pos_12085469 = my_12085466.bufpos;
    if ((ConstSet44[my_12085466.buf[pos_12085469]] != undefined)) {
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          addChar(dest_12085468[dest_12085468_Idx], my_12085466.buf[pos_12085469]);;
          pos_12085469 += 1;
          if (!((ConstSet45[my_12085466.buf[pos_12085469]] != undefined))) {
          break L1;
          }
          
        }
    } while(false);
    my_12085466.bufpos = pos_12085469;
    }
    else {
    markError_12085286(my_12085466, 2);
    }
    

  
}
function handleCR_12005220(L_12005223, pos_12005224) {
  var result_12005225 = 0;

    L_12005223.lineNumber += 1;
    result_12005225 = fillBaseLexer_11995229(L_12005223, pos_12005224);
    if ((L_12005223.buf[result_12005225] == 10)) {
    result_12005225 = fillBaseLexer_11995229(L_12005223, result_12005225);
    }
    
    L_12005223.lineStart = result_12005225;

  return result_12005225;

}
function handleLF_12015220(L_12015223, pos_12015224) {
  var result_12015225 = 0;

    L_12015223.lineNumber += 1;
    result_12015225 = fillBaseLexer_11995229(L_12015223, pos_12015224);
    L_12015223.lineStart = result_12015225;

  return result_12015225;

}
function parseWhitespace_12085421(my_12085424, skip_12085425) {
    var pos_12085426 = my_12085424.bufpos;
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12085424.buf[pos_12085426]) {
          case 32:
          case 9:
            if (!(skip_12085425)) {
            addChar(my_12085424.a, my_12085424.buf[pos_12085426]);;
            }
            
            pos_12085426 += 1;
            break;
          case 13:
            pos_12085426 = handleCR_12005220(my_12085424, pos_12085426);
            if (!(skip_12085425)) {
            addChar(my_12085424.a, 10);;
            }
            
            break;
          case 10:
            pos_12085426 = handleLF_12015220(my_12085424, pos_12085426);
            if (!(skip_12085425)) {
            addChar(my_12085424.a, 10);;
            }
            
            break;
          default: 
            break L1;
            break;
          }
        }
    } while(false);
    my_12085424.bufpos = pos_12085426;

  
}
function parseEndTag_12110033(my_12110036) {
    my_12110036.bufpos = handleRefillChar_12025220(my_12110036, (my_12110036.bufpos + 1));
    parseName_12085463(my_12110036, my_12110036, "a");
    parseWhitespace_12085421(my_12110036, true);
    if ((my_12110036.buf[my_12110036.bufpos] == 62)) {
    my_12110036.bufpos += 1;
    }
    else {
    markError_12085286(my_12110036, 5);
    }
    
    my_12110036.kind = 7;

  
}
function parseCDATA_12085319(my_12085322) {
              var Tmp3;

    var pos_12085323 = (my_12085322.bufpos + 9);
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12085322.buf[pos_12085323]) {
          case 93:
              if (!(my_12085322.buf[(pos_12085323 + 1)] == 93)) Tmp3 = false; else {                Tmp3 = (my_12085322.buf[(pos_12085323 + 2)] == 62);              }            if (Tmp3) {
            pos_12085323 += 3;
            break L1;
            }
            
            addChar(my_12085322.a, 93);;
            pos_12085323 += 1;
            break;
          case 0:
            markError_12085286(my_12085322, 1);
            break L1;
            break;
          case 13:
            pos_12085323 = handleCR_12005220(my_12085322, pos_12085323);
            addChar(my_12085322.a, 10);;
            break;
          case 10:
            pos_12085323 = handleLF_12015220(my_12085322, pos_12085323);
            addChar(my_12085322.a, 10);;
            break;
          case 47:
            pos_12085323 = handleRefillChar_12025220(my_12085322, pos_12085323);
            addChar(my_12085322.a, 47);;
            break;
          default: 
            addChar(my_12085322.a, my_12085322.buf[pos_12085323]);;
            pos_12085323 += 1;
            break;
          }
        }
    } while(false);
    my_12085322.bufpos = pos_12085323;
    my_12085322.kind = 11;

  
}
function parseComment_12085355(my_12085358) {
              var Tmp3;

    var pos_12085359 = (my_12085358.bufpos + 4);
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12085358.buf[pos_12085359]) {
          case 45:
              if (!(my_12085358.buf[(pos_12085359 + 1)] == 45)) Tmp3 = false; else {                Tmp3 = (my_12085358.buf[(pos_12085359 + 2)] == 62);              }            if (Tmp3) {
            pos_12085359 += 3;
            break L1;
            }
            
            if ((my_12085358.options[1] != undefined)) {
            addChar(my_12085358.a, 45);;
            }
            
            pos_12085359 += 1;
            break;
          case 0:
            markError_12085286(my_12085358, 8);
            break L1;
            break;
          case 13:
            pos_12085359 = handleCR_12005220(my_12085358, pos_12085359);
            if ((my_12085358.options[1] != undefined)) {
            addChar(my_12085358.a, 10);;
            }
            
            break;
          case 10:
            pos_12085359 = handleLF_12015220(my_12085358, pos_12085359);
            if ((my_12085358.options[1] != undefined)) {
            addChar(my_12085358.a, 10);;
            }
            
            break;
          case 47:
            pos_12085359 = handleRefillChar_12025220(my_12085358, pos_12085359);
            if ((my_12085358.options[1] != undefined)) {
            addChar(my_12085358.a, 47);;
            }
            
            break;
          default: 
            if ((my_12085358.options[1] != undefined)) {
            addChar(my_12085358.a, my_12085358.buf[pos_12085359]);;
            }
            
            pos_12085359 += 1;
            break;
          }
        }
    } while(false);
    my_12085358.bufpos = pos_12085359;
    my_12085358.kind = 4;

  
}
function parseSpecial_12105068(my_12105071) {
    var pos_12105072 = (my_12105071.bufpos + 2);
    var opentags_12105074 = 0;
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12105071.buf[pos_12105072]) {
          case 0:
            markError_12085286(my_12105071, 5);
            break L1;
            break;
          case 60:
            opentags_12105074 += 1;
            pos_12105072 += 1;
            addChar(my_12105071.a, 60);;
            break;
          case 62:
            if ((opentags_12105074 <= 0)) {
            pos_12105072 += 1;
            break L1;
            }
            
            opentags_12105074 -= 1;
            pos_12105072 += 1;
            addChar(my_12105071.a, 62);;
            break;
          case 13:
            pos_12105072 = handleCR_12005220(my_12105071, pos_12105072);
            addChar(my_12105071.a, 10);;
            break;
          case 10:
            pos_12105072 = handleLF_12015220(my_12105071, pos_12105072);
            addChar(my_12105071.a, 10);;
            break;
          case 47:
            pos_12105072 = handleRefillChar_12025220(my_12105071, pos_12105072);
            addChar(my_12105071.b, 47);;
            break;
          default: 
            addChar(my_12105071.a, my_12105071.buf[pos_12105072]);;
            pos_12105072 += 1;
            break;
          }
        }
    } while(false);
    my_12105071.bufpos = pos_12105072;
    my_12105071.kind = 13;

  
}
function parsePI_12105025(my_12105028) {
    my_12105028.bufpos += 2;
    parseName_12085463(my_12105028, my_12105028, "a");
    var pos_12105036 = my_12105028.bufpos;
    (my_12105028.b.length = 0);
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12105028.buf[pos_12105036]) {
          case 0:
            markError_12085286(my_12105028, 4);
            break L1;
            break;
          case 63:
            if ((my_12105028.buf[(pos_12105036 + 1)] == 62)) {
            pos_12105036 += 2;
            break L1;
            }
            
            addChar(my_12105028.b, 63);;
            pos_12105036 += 1;
            break;
          case 13:
            pos_12105036 = handleCR_12005220(my_12105028, pos_12105036);
            addChar(my_12105028.b, 10);;
            break;
          case 10:
            pos_12105036 = handleLF_12015220(my_12105028, pos_12105036);
            addChar(my_12105028.b, 10);;
            break;
          case 47:
            pos_12105036 = handleRefillChar_12025220(my_12105028, pos_12105036);
            addChar(my_12105028.b, 47);;
            break;
          default: 
            addChar(my_12105028.b, my_12105028.buf[pos_12105036]);;
            pos_12105036 += 1;
            break;
          }
        }
    } while(false);
    my_12105028.bufpos = pos_12105036;
    my_12105028.kind = 5;

  
}
function parseTag_12105124(my_12105127) {
        var Tmp1;

  BeforeRet: do {
    my_12105127.bufpos += 1;
    parseName_12085463(my_12105127, my_12105127, "a");
    if (((my_12105127.a).length == 0)) {
    my_12105127.kind = 2;
    addChar(my_12105127.a, 60);;
    break BeforeRet;
    }
    
    parseWhitespace_12085421(my_12105127, true);
    if ((ConstSet46[my_12105127.buf[my_12105127.bufpos]] != undefined)) {
    my_12105127.kind = 8;
    my_12105127.state = 2;
    my_12105127.c = nimCopy(null, my_12105127.a, NTI2421013);
    my_12105127.cIsEmpty = false;
    }
    else {
      my_12105127.kind = 6;
      var slash_12110007 = (my_12105127.buf[my_12105127.bufpos] == 47);
      if (slash_12110007) {
      my_12105127.bufpos = handleRefillChar_12025220(my_12105127, my_12105127.bufpos);
      }
      
        if (!slash_12110007) Tmp1 = false; else {          Tmp1 = (my_12105127.buf[my_12105127.bufpos] == 62);        }      if (Tmp1) {
      my_12105127.bufpos += 1;
      my_12105127.state = 3;
      my_12105127.c = nimCopy(null, [], NTI2421013);
      my_12105127.cIsEmpty = true;
      }
      else {
      if ((my_12105127.buf[my_12105127.bufpos] == 62)) {
      my_12105127.bufpos += 1;
      }
      else {
      markError_12085286(my_12105127, 5);
      }
      }
    }
    
  } while (false);

  
}
function HEX3CHEX3DHEX25_2425474(x_2425476, y_2425477) {
  var result_2425478 = false;

    result_2425478 = ((x_2425476 >>> 0) <= (y_2425477 >>> 0));

  return result_2425478;

}
function nuctoUTF8(c_3990474) {
  var result_3990475 = [];

    result_3990475 = nimCopy(null, [], NTI2421013);
    var iHEX60gensym49_3995001 = c_3990474;
    if (HEX3CHEX3DHEX25_2425474(iHEX60gensym49_3995001, 127)) {
    (result_3990475.length = 1);
    result_3990475[0] = iHEX60gensym49_3995001;
    }
    else {
    if (HEX3CHEX3DHEX25_2425474(iHEX60gensym49_3995001, 2047)) {
    (result_3990475.length = 2);
    result_3990475[0] = ((iHEX60gensym49_3995001 >> 6) | 192);
    result_3990475[1] = ((iHEX60gensym49_3995001 & 63) | 128);
    }
    else {
    if (HEX3CHEX3DHEX25_2425474(iHEX60gensym49_3995001, 65535)) {
    (result_3990475.length = 3);
    result_3990475[0] = ((iHEX60gensym49_3995001 >> 12) | 224);
    result_3990475[1] = (((iHEX60gensym49_3995001 >> 6) & 63) | 128);
    result_3990475[2] = ((iHEX60gensym49_3995001 & 63) | 128);
    }
    else {
    if (HEX3CHEX3DHEX25_2425474(iHEX60gensym49_3995001, 2097151)) {
    (result_3990475.length = 4);
    result_3990475[0] = ((iHEX60gensym49_3995001 >> 18) | 240);
    result_3990475[1] = (((iHEX60gensym49_3995001 >> 12) & 63) | 128);
    result_3990475[2] = (((iHEX60gensym49_3995001 >> 6) & 63) | 128);
    result_3990475[3] = ((iHEX60gensym49_3995001 & 63) | 128);
    }
    else {
    if (HEX3CHEX3DHEX25_2425474(iHEX60gensym49_3995001, 67108863)) {
    (result_3990475.length = 5);
    result_3990475[0] = ((iHEX60gensym49_3995001 >> 24) | 248);
    result_3990475[1] = (((iHEX60gensym49_3995001 >> 18) & 63) | 128);
    result_3990475[2] = (((iHEX60gensym49_3995001 >> 12) & 63) | 128);
    result_3990475[3] = (((iHEX60gensym49_3995001 >> 6) & 63) | 128);
    result_3990475[4] = ((iHEX60gensym49_3995001 & 63) | 128);
    }
    else {
    if (HEX3CHEX3DHEX25_2425474(iHEX60gensym49_3995001, 2147483647)) {
    (result_3990475.length = 6);
    result_3990475[0] = ((iHEX60gensym49_3995001 >> 30) | 252);
    result_3990475[1] = (((iHEX60gensym49_3995001 >> 24) & 63) | 128);
    result_3990475[2] = (((iHEX60gensym49_3995001 >> 18) & 63) | 128);
    result_3990475[3] = (((iHEX60gensym49_3995001 >> 12) & 63) | 128);
    result_3990475[4] = (((iHEX60gensym49_3995001 >> 6) & 63) | 128);
    result_3990475[5] = ((iHEX60gensym49_3995001 & 63) | 128);
    }
    else {
    }
    }}}}}

  return result_3990475;

}
function parseEntity_12095020(my_12095023, dest_12095025, dest_12095025_Idx) {
      var Tmp5;
      var Tmp6;
      var Tmp7;
      var Tmp8;
      var Tmp9;
      var Tmp10;
      var Tmp11;
      var Tmp12;
      var Tmp13;
      var Tmp14;
      var Tmp15;
      var Tmp16;
      var Tmp17;
      var Tmp18;
      var Tmp19;
        var Tmp20;

    var pos_12095026 = (my_12095023.bufpos + 1);
    my_12095023.kind = 2;
    if ((my_12095023.buf[pos_12095026] == 35)) {
    var r_12095027 = 0;
    pos_12095026 += 1;
    if ((my_12095023.buf[pos_12095026] == 120)) {
    pos_12095026 += 1;
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12095023.buf[pos_12095026]) {
          case 48:
          case 49:
          case 50:
          case 51:
          case 52:
          case 53:
          case 54:
          case 55:
          case 56:
          case 57:
            r_12095027 = ((r_12095027 << 4) | (my_12095023.buf[pos_12095026] - 48));
            break;
          case 97:
          case 98:
          case 99:
          case 100:
          case 101:
          case 102:
            r_12095027 = ((r_12095027 << 4) | ((my_12095023.buf[pos_12095026] - 97) + 10));
            break;
          case 65:
          case 66:
          case 67:
          case 68:
          case 69:
          case 70:
            r_12095027 = ((r_12095027 << 4) | ((my_12095023.buf[pos_12095026] - 65) + 10));
            break;
          default: 
            break L1;
            break;
          }
          pos_12095026 += 1;
        }
    } while(false);
    }
    else {
      L3: do {
          L4: while (true) {
          if (!(ConstSet47[my_12095023.buf[pos_12095026]] != undefined)) break L4;
            r_12095027 = ((r_12095027 * 10) + (my_12095023.buf[pos_12095026] - 48));
            pos_12095026 += 1;
          }
      } while(false);
    }
    
    dest_12095025[dest_12095025_Idx].push.apply(dest_12095025[dest_12095025_Idx], nuctoUTF8(((r_12095027)|0)));;
    }
    else {
      if (!(my_12095023.buf[pos_12095026] == 108)) Tmp6 = false; else {        Tmp6 = (my_12095023.buf[(pos_12095026 + 1)] == 116);      }      if (!Tmp6) Tmp5 = false; else {        Tmp5 = (my_12095023.buf[(pos_12095026 + 2)] == 59);      }    if (Tmp5) {
    addChar(dest_12095025[dest_12095025_Idx], 60);;
    pos_12095026 += 2;
    }
    else {
      if (!(my_12095023.buf[pos_12095026] == 103)) Tmp8 = false; else {        Tmp8 = (my_12095023.buf[(pos_12095026 + 1)] == 116);      }      if (!Tmp8) Tmp7 = false; else {        Tmp7 = (my_12095023.buf[(pos_12095026 + 2)] == 59);      }    if (Tmp7) {
    addChar(dest_12095025[dest_12095025_Idx], 62);;
    pos_12095026 += 2;
    }
    else {
      if (!(my_12095023.buf[pos_12095026] == 97)) Tmp11 = false; else {        Tmp11 = (my_12095023.buf[(pos_12095026 + 1)] == 109);      }      if (!Tmp11) Tmp10 = false; else {        Tmp10 = (my_12095023.buf[(pos_12095026 + 2)] == 112);      }      if (!Tmp10) Tmp9 = false; else {        Tmp9 = (my_12095023.buf[(pos_12095026 + 3)] == 59);      }    if (Tmp9) {
    addChar(dest_12095025[dest_12095025_Idx], 38);;
    pos_12095026 += 3;
    }
    else {
      if (!(my_12095023.buf[pos_12095026] == 97)) Tmp15 = false; else {        Tmp15 = (my_12095023.buf[(pos_12095026 + 1)] == 112);      }      if (!Tmp15) Tmp14 = false; else {        Tmp14 = (my_12095023.buf[(pos_12095026 + 2)] == 111);      }      if (!Tmp14) Tmp13 = false; else {        Tmp13 = (my_12095023.buf[(pos_12095026 + 3)] == 115);      }      if (!Tmp13) Tmp12 = false; else {        Tmp12 = (my_12095023.buf[(pos_12095026 + 4)] == 59);      }    if (Tmp12) {
    addChar(dest_12095025[dest_12095025_Idx], 39);;
    pos_12095026 += 4;
    }
    else {
      if (!(my_12095023.buf[pos_12095026] == 113)) Tmp19 = false; else {        Tmp19 = (my_12095023.buf[(pos_12095026 + 1)] == 117);      }      if (!Tmp19) Tmp18 = false; else {        Tmp18 = (my_12095023.buf[(pos_12095026 + 2)] == 111);      }      if (!Tmp18) Tmp17 = false; else {        Tmp17 = (my_12095023.buf[(pos_12095026 + 3)] == 116);      }      if (!Tmp17) Tmp16 = false; else {        Tmp16 = (my_12095023.buf[(pos_12095026 + 4)] == 59);      }    if (Tmp16) {
    addChar(dest_12095025[dest_12095025_Idx], 34);;
    pos_12095026 += 4;
    }
    else {
      my_12095023.bufpos = pos_12095026;
      var name_12100052 = [[]];
      parseName_12085463(my_12095023, name_12100052, 0);
      pos_12095026 = my_12095023.bufpos;
        if (!!((my_12095023.err == 2))) Tmp20 = false; else {          Tmp20 = (my_12095023.buf[pos_12095026] == 59);        }      if (Tmp20) {
      my_12095023.kind = 12;
      }
      else {
      addChar(dest_12095025[dest_12095025_Idx], 38);;
      }
      
      dest_12095025[dest_12095025_Idx].push.apply(dest_12095025[dest_12095025_Idx], name_12100052[0]);;
    }
    }}}}}
    if ((my_12095023.buf[pos_12095026] == 59)) {
    pos_12095026 += 1;
    }
    else {
      my_12095023.err = 3;
    }
    
    my_12095023.bufpos = pos_12095026;

  
}
function parseCharData_12150020(my_12150023) {
    var pos_12150024 = my_12150023.bufpos;
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (my_12150023.buf[pos_12150024]) {
          case 0:
          case 60:
          case 38:
            break L1;
            break;
          case 13:
            pos_12150024 = handleCR_12005220(my_12150023, pos_12150024);
            addChar(my_12150023.a, 10);;
            break;
          case 10:
            pos_12150024 = handleLF_12015220(my_12150023, pos_12150024);
            addChar(my_12150023.a, 10);;
            break;
          case 47:
            pos_12150024 = handleRefillChar_12025220(my_12150023, pos_12150024);
            addChar(my_12150023.a, 47);;
            break;
          default: 
            addChar(my_12150023.a, my_12150023.buf[pos_12150024]);;
            pos_12150024 += 1;
            break;
          }
        }
    } while(false);
    my_12150023.bufpos = pos_12150024;
    my_12150023.kind = 2;

  
}
function rawGetTok_12150044(my_12150047) {
          var Tmp1;
          var Tmp2;
          var Tmp3;
          var Tmp4;
          var Tmp5;
          var Tmp6;
          var Tmp7;

    my_12150047.kind = 0;
    (my_12150047.a.length = 0);
    var pos_12150048 = my_12150047.bufpos;
    switch (my_12150047.buf[pos_12150048]) {
    case 60:
      switch (my_12150047.buf[(pos_12150048 + 1)]) {
      case 47:
        parseEndTag_12110033(my_12150047);
        break;
      case 33:
          if (!(my_12150047.buf[(pos_12150048 + 2)] == 91)) Tmp6 = false; else {            Tmp6 = (my_12150047.buf[(pos_12150048 + 3)] == 67);          }          if (!Tmp6) Tmp5 = false; else {            Tmp5 = (my_12150047.buf[(pos_12150048 + 4)] == 68);          }          if (!Tmp5) Tmp4 = false; else {            Tmp4 = (my_12150047.buf[(pos_12150048 + 5)] == 65);          }          if (!Tmp4) Tmp3 = false; else {            Tmp3 = (my_12150047.buf[(pos_12150048 + 6)] == 84);          }          if (!Tmp3) Tmp2 = false; else {            Tmp2 = (my_12150047.buf[(pos_12150048 + 7)] == 65);          }          if (!Tmp2) Tmp1 = false; else {            Tmp1 = (my_12150047.buf[(pos_12150048 + 8)] == 91);          }        if (Tmp1) {
        parseCDATA_12085319(my_12150047);
        }
        else {
          if (!(my_12150047.buf[(pos_12150048 + 2)] == 45)) Tmp7 = false; else {            Tmp7 = (my_12150047.buf[(pos_12150048 + 3)] == 45);          }        if (Tmp7) {
        parseComment_12085355(my_12150047);
        }
        else {
        parseSpecial_12105068(my_12150047);
        }
        }
        break;
      case 63:
        parsePI_12105025(my_12150047);
        break;
      default: 
        parseTag_12105124(my_12150047);
        break;
      }
      break;
    case 32:
    case 9:
    case 13:
    case 10:
      parseWhitespace_12085421(my_12150047, false);
      my_12150047.kind = 3;
      break;
    case 0:
      my_12150047.kind = 1;
      break;
    case 38:
      parseEntity_12095020(my_12150047, my_12150047, "a");
      break;
    default: 
      parseCharData_12150020(my_12150047);
      break;
    }

  
}
function getTok_12165214(my_12165217) {
              var Tmp3;

    L1: do {
        L2: while (true) {
        if (!true) break L2;
          var lastKind_12165218 = my_12165217.kind;
          rawGetTok_12150044(my_12165217);
          switch (my_12165217.kind) {
          case 4:
            if ((my_12165217.options[1] != undefined)) {
            break L1;
            }
            
            break;
          case 3:
              if ((my_12165217.options[0] != undefined)) Tmp3 = true; else {                Tmp3 = (ConstSet48[lastKind_12165218] != undefined);              }            if (Tmp3) {
            break L1;
            }
            
            break;
          default: 
            break L1;
            break;
          }
        }
    } while(false);

  
}
function parseAttribute_12110057(my_12110060) {
      var Tmp1;
        var Tmp2;
            var Tmp9;

  BeforeRet: do {
    my_12110060.kind = 9;
    (my_12110060.a.length = 0);
    (my_12110060.b.length = 0);
    parseName_12085463(my_12110060, my_12110060, "a");
    if (((my_12110060.a).length == 0)) {
    markError_12085286(my_12110060, 5);
    break BeforeRet;
    }
    
    var startPos_12110062 = my_12110060.bufpos;
    parseWhitespace_12085421(my_12110060, true);
    if (!((my_12110060.buf[my_12110060.bufpos] == 61))) {
      if (!((my_12110060.options[3] != undefined))) Tmp1 = true; else {        if (!!((my_12110060.buf[my_12110060.bufpos] == 62))) Tmp2 = false; else {          Tmp2 = (my_12110060.bufpos == startPos_12110062);        }        Tmp1 = Tmp2;      }    if (Tmp1) {
    markError_12085286(my_12110060, 6);
    }
    
    break BeforeRet;
    }
    
    my_12110060.bufpos += 1;
    parseWhitespace_12085421(my_12110060, true);
    var pos_12125007 = my_12110060.bufpos;
    if ((ConstSet49[my_12110060.buf[pos_12125007]] != undefined)) {
    var quote_12130008 = my_12110060.buf[pos_12125007];
    var pendingSpace_12130009 = false;
    pos_12125007 += 1;
    L3: do {
        L4: while (true) {
        if (!true) break L4;
          switch (my_12110060.buf[pos_12125007]) {
          case 0:
            markError_12085286(my_12110060, 7);
            break L3;
            break;
          case 38:
            if (pendingSpace_12130009) {
            addChar(my_12110060.b, 32);;
            pendingSpace_12130009 = false;
            }
            
            my_12110060.bufpos = pos_12125007;
            parseEntity_12095020(my_12110060, my_12110060, "b");
            my_12110060.kind = 9;
            pos_12125007 = my_12110060.bufpos;
            break;
          case 32:
          case 9:
            pendingSpace_12130009 = true;
            pos_12125007 += 1;
            break;
          case 13:
            pos_12125007 = handleCR_12005220(my_12110060, pos_12125007);
            pendingSpace_12130009 = true;
            break;
          case 10:
            pos_12125007 = handleLF_12015220(my_12110060, pos_12125007);
            pendingSpace_12130009 = true;
            break;
          case 47:
            pos_12125007 = handleRefillChar_12025220(my_12110060, pos_12125007);
            addChar(my_12110060.b, 47);;
            break;
          default: 
            if ((my_12110060.buf[pos_12125007] == quote_12130008)) {
            pos_12125007 += 1;
            break L3;
            }
            else {
              if (pendingSpace_12130009) {
              addChar(my_12110060.b, 32);;
              pendingSpace_12130009 = false;
              }
              
              addChar(my_12110060.b, my_12110060.buf[pos_12125007]);;
              pos_12125007 += 1;
            }
            
            break;
          }
        }
    } while(false);
    }
    else {
    if ((my_12110060.options[2] != undefined)) {
    var startPos_12135009 = pos_12125007;
    L5: do {
        L6: while (true) {
          var c_12135010 = my_12110060.buf[pos_12125007];
        if (!!((ConstSet50[c_12135010] != undefined))) break L6;
          if ((c_12135010 == 38)) {
          my_12110060.bufpos = pos_12125007;
          parseEntity_12095020(my_12110060, my_12110060, "b");
          my_12110060.kind = 9;
          pos_12125007 = my_12110060.bufpos;
          }
          else {
          if ((c_12135010 == 47)) {
          pos_12125007 = handleRefillChar_12025220(my_12110060, pos_12125007);
          addChar(my_12110060.b, 47);;
          }
          else {
            addChar(my_12110060.b, c_12135010);;
            pos_12125007 += 1;
          }
          }
        }
    } while(false);
    if ((pos_12125007 == startPos_12135009)) {
    markError_12085286(my_12110060, 9);
    }
    
    }
    else {
      markError_12085286(my_12110060, 7);
      L7: do {
          L8: while (true) {
            if (!!((my_12110060.buf[pos_12125007] == 62))) Tmp9 = false; else {              Tmp9 = (32 < my_12110060.buf[pos_12125007]);            }          if (!Tmp9) break L8;
            addChar(my_12110060.b, my_12110060.buf[pos_12125007]);;
            pos_12125007 += 1;
          }
      } while(false);
    }
    }
    my_12110060.bufpos = pos_12125007;
    parseWhitespace_12085421(my_12110060, true);
  } while (false);

  
}
function next_12170021(my_12170024) {
        var Tmp1;

    switch (my_12170024.state) {
    case 1:
      getTok_12165214(my_12170024);
      break;
    case 0:
      my_12170024.state = 1;
      getTok_12165214(my_12170024);
        if (!(my_12170024.kind == 5)) Tmp1 = false; else {          Tmp1 = eqStrings(my_12170024.a, makeNimstrLit("xml"));        }      if (Tmp1) {
      getTok_12165214(my_12170024);
      }
      
      break;
    case 2:
      if ((my_12170024.buf[my_12170024.bufpos] == 62)) {
      my_12170024.kind = 10;
      my_12170024.bufpos += 1;
      my_12170024.state = 1;
      }
      else {
      if ((my_12170024.buf[my_12170024.bufpos] == 47)) {
      my_12170024.bufpos = handleRefillChar_12025220(my_12170024, my_12170024.bufpos);
      if ((my_12170024.buf[my_12170024.bufpos] == 62)) {
      my_12170024.kind = 10;
      my_12170024.bufpos += 1;
      my_12170024.state = 3;
      }
      else {
      markError_12085286(my_12170024, 5);
      }
      
      }
      else {
      parseAttribute_12110057(my_12170024);
      }
      }
      break;
    case 3:
      my_12170024.state = 1;
      my_12170024.kind = 7;
      if (!(my_12170024.cIsEmpty)) {
      my_12170024.a = nimCopy(null, my_12170024.c, NTI2421013);
      }
      
      break;
    case 4:
      my_12170024.kind = 0;
      my_12170024.state = 1;
      break;
    }

  
}
function kind_12076215(my_12076217) {
  var result_12076218 = 0;

  BeforeRet: do {
    result_12076218 = my_12076217.kind;
    break BeforeRet;
  } while (false);

  return result_12076218;

}
function newXmlNode_12366049(kind_12366051) {
  var result_12366052 = null;

    result_12366052 = {k: kind_12366051, fText: [], fTag: [], s: [], fAttr: null, fClientData: 0};

  return result_12366052;

}
function newElement_12366113(tag_12366115) {
    var Tmp1;
    var Tmp2;

  var result_12366116 = null;

    result_12366116 = newXmlNode_12366049(2);
    var Tmp1 = result_12366116;
    if (ConstSet51[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fTag\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.fTag = nimCopy(null, tag_12366115, NTI2421013);
    var Tmp2 = result_12366116;
    if (ConstSet52[Tmp2.k]===undefined) { raiseFieldError(makeNimstrLit("\'s\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp2.s = nimCopy(null, [], NTI12366133);

  return result_12366116;

}
function tag_12405215(n_12405217) {
    var Tmp1;

  var result_12405218 = [];

    var Tmp1 = n_12405217;
    if (ConstSet53[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fTag\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    result_12405218 = nimCopy(null, Tmp1.fTag, NTI2421013);

  return result_12405218;

}
function invalidFormatString_11500046() {
    raiseException({message: makeNimstrLit("invalid format string"), parent: null, m_type: NTI2427643, name: null, trace: [], up: null}, "ValueError");

  
}
function nsuToLowerAsciiChar(c_10595023) {
  var result_10595024 = 0;

    if ((ConstSet57[c_10595023] != undefined)) {
    result_10595024 = (c_10595023 + 32);
    }
    else {
      result_10595024 = c_10595023;
    }
    

  return result_10595024;

}
function nsuCmpIgnoreStyle(a_10675022, b_10675023) {
          var Tmp7;
          var Tmp8;

  var result_10675024 = 0;

  BeforeRet: do {
    var i_10675026 = 0;
    var j_10675028 = 0;
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          L3: do {
              L4: while (true) {
              if (!((i_10675026 < (a_10675022).length) && (a_10675022[i_10675026] == 95))) break L4;
                i_10675026 += 1;
              }
          } while(false);
          L5: do {
              L6: while (true) {
              if (!((j_10675028 < (b_10675023).length) && (b_10675023[j_10675028] == 95))) break L6;
                j_10675028 += 1;
              }
          } while(false);
          if ((i_10675026 < (a_10675022).length)) {
          Tmp7 = nsuToLowerAsciiChar(a_10675022[i_10675026]);
          }
          else {
          Tmp7 = 0;
          }
          
          var aa_10675041 = Tmp7;
          if ((j_10675028 < (b_10675023).length)) {
          Tmp8 = nsuToLowerAsciiChar(b_10675023[j_10675028]);
          }
          else {
          Tmp8 = 0;
          }
          
          var bb_10675042 = Tmp8;
          result_10675024 = (aa_10675041 - bb_10675042);
          if (!((result_10675024 == 0))) {
          break BeforeRet;
          }
          
          if (((a_10675022).length <= i_10675026)) {
          if (((b_10675023).length <= j_10675028)) {
          result_10675024 = 0;
          break BeforeRet;
          }
          
          result_10675024 = -1;
          break BeforeRet;
          }
          else {
          if (((b_10675023).length <= j_10675028)) {
          result_10675024 = 1;
          break BeforeRet;
          }
          }
          i_10675026 += 1;
          j_10675028 += 1;
        }
    } while(false);
  } while (false);

  return result_10675024;

}
function findNormalized_11500014(x_11500016, inArray_11500018) {
  var result_11500019 = 0;

  BeforeRet: do {
    var i_11500021 = 0;
    L1: do {
        L2: while (true) {
        if (!(i_11500021 < ((inArray_11500018).length-1))) break L2;
          if ((nsuCmpIgnoreStyle(x_11500016, inArray_11500018[i_11500021]) == 0)) {
          result_11500019 = i_11500021;
          break BeforeRet;
          }
          
          i_11500021 += 2;
        }
    } while(false);
    result_11500019 = -1;
    break BeforeRet;
  } while (false);

  return result_11500019;

}
function substr_2806022(s_2806024, first_2806025, last_2806026) {
  var result_2806027 = [];

    var first_2806028 = nimMax(first_2806025, 0);
    var L_2806030 = nimMax(((nimMin(last_2806026, ((s_2806024).length-1)) - first_2806028) + 1), 0);
    result_2806027 = nimCopy(null, mnewString(L_2806030), NTI2421013);
    L1: do {
      var i_2806039 = 0;
      var colontmp__13490267 = 0;
      colontmp__13490267 = (L_2806030 - 1);
      var res_13490268 = 0;
      L2: do {
          L3: while (true) {
          if (!(res_13490268 <= colontmp__13490267)) break L3;
            i_2806039 = res_13490268;
            result_2806027[i_2806039] = s_2806024[(i_2806039 + first_2806028)];
            res_13490268 += 1;
          }
      } while(false);
    } while(false);

  return result_2806027;

}
function nsuAddf(s_11505018, s_11505018_Idx, formatstr_11505019, a_11505021) {
                  var Tmp5;
            var Tmp6;
              var Tmp7;
            var Tmp10;
              var Tmp11;
                var Tmp12;
                  var Tmp15;
              var Tmp16;

    var i_11505025 = 0;
    var num_11505027 = 0;
    L1: do {
        L2: while (true) {
        if (!(i_11505025 < (formatstr_11505019).length)) break L2;
          if (((formatstr_11505019[i_11505025] == 36) && ((i_11505025 + 1) < (formatstr_11505019).length))) {
          switch (formatstr_11505019[(i_11505025 + 1)]) {
          case 35:
            if ((((a_11505021).length-1) < num_11505027)) {
            invalidFormatString_11500046();
            }
            
            s_11505018[s_11505018_Idx].push.apply(s_11505018[s_11505018_Idx], a_11505021[num_11505027]);;
            i_11505025 += 2;
            num_11505027 += 1;
            break;
          case 36:
            addChar(s_11505018[s_11505018_Idx], 36);;
            i_11505025 += 2;
            break;
          case 49:
          case 50:
          case 51:
          case 52:
          case 53:
          case 54:
          case 55:
          case 56:
          case 57:
          case 45:
            var j_11510025 = 0;
            i_11505025 += 1;
            var negative_11510032 = (formatstr_11505019[i_11505025] == 45);
            if (negative_11510032) {
            i_11505025 += 1;
            }
            
            L3: do {
                L4: while (true) {
                  if (!(i_11505025 < (formatstr_11505019).length)) Tmp5 = false; else {                    Tmp5 = (ConstSet54[formatstr_11505019[i_11505025]] != undefined);                  }                if (!Tmp5) break L4;
                  j_11510025 = (((j_11510025 * 10) + formatstr_11505019[i_11505025]) - 48);
                  i_11505025 += 1;
                }
            } while(false);
            if (!(negative_11510032)) {
            Tmp6 = (j_11510025 - 1);
            }
            else {
            Tmp6 = ((a_11505021).length - j_11510025);
            }
            
            var idx_11515025 = Tmp6;
              if ((idx_11515025 < 0)) Tmp7 = true; else {                Tmp7 = (((a_11505021).length-1) < idx_11515025);              }            if (Tmp7) {
            invalidFormatString_11500046();
            }
            
            s_11505018[s_11505018_Idx].push.apply(s_11505018[s_11505018_Idx], a_11505021[idx_11515025]);;
            break;
          case 123:
            var j_11520006 = (i_11505025 + 2);
            var k_11520008 = 0;
            var negative_11520009 = (formatstr_11505019[j_11520006] == 45);
            if (negative_11520009) {
            j_11520006 += 1;
            }
            
            var isNumber_11520017 = 0;
            L8: do {
                L9: while (true) {
                if (!((j_11520006 < (formatstr_11505019).length) && !((ConstSet55[formatstr_11505019[j_11520006]] != undefined)))) break L9;
                  if ((ConstSet56[formatstr_11505019[j_11520006]] != undefined)) {
                  k_11520008 = (((k_11520008 * 10) + formatstr_11505019[j_11520006]) - 48);
                  if ((isNumber_11520017 == 0)) {
                  isNumber_11520017 = 1;
                  }
                  
                  }
                  else {
                    isNumber_11520017 = -1;
                  }
                  
                  j_11520006 += 1;
                }
            } while(false);
            if ((isNumber_11520017 == 1)) {
            if (!(negative_11520009)) {
            Tmp10 = (k_11520008 - 1);
            }
            else {
            Tmp10 = ((a_11505021).length - k_11520008);
            }
            
            var idx_11530025 = Tmp10;
              if ((idx_11530025 < 0)) Tmp11 = true; else {                Tmp11 = (((a_11505021).length-1) < idx_11530025);              }            if (Tmp11) {
            invalidFormatString_11500046();
            }
            
            s_11505018[s_11505018_Idx].push.apply(s_11505018[s_11505018_Idx], a_11505021[idx_11530025]);;
            }
            else {
              var x_11535006 = findNormalized_11500014(substr_2806022(formatstr_11505019, (i_11505025 + 2), (j_11520006 - 1)), a_11505021);
                if (!(0 <= x_11535006)) Tmp12 = false; else {                  Tmp12 = (x_11535006 < ((a_11505021).length-1));                }              if (Tmp12) {
              s_11505018[s_11505018_Idx].push.apply(s_11505018[s_11505018_Idx], a_11505021[(x_11535006 + 1)]);;
              }
              else {
              invalidFormatString_11500046();
              }
              
            }
            
            i_11505025 = (j_11520006 + 1);
            break;
          case 97:
          case 98:
          case 99:
          case 100:
          case 101:
          case 102:
          case 103:
          case 104:
          case 105:
          case 106:
          case 107:
          case 108:
          case 109:
          case 110:
          case 111:
          case 112:
          case 113:
          case 114:
          case 115:
          case 116:
          case 117:
          case 118:
          case 119:
          case 120:
          case 121:
          case 122:
          case 65:
          case 66:
          case 67:
          case 68:
          case 69:
          case 70:
          case 71:
          case 72:
          case 73:
          case 74:
          case 75:
          case 76:
          case 77:
          case 78:
          case 79:
          case 80:
          case 81:
          case 82:
          case 83:
          case 84:
          case 85:
          case 86:
          case 87:
          case 88:
          case 89:
          case 90:
          case 128:
          case 129:
          case 130:
          case 131:
          case 132:
          case 133:
          case 134:
          case 135:
          case 136:
          case 137:
          case 138:
          case 139:
          case 140:
          case 141:
          case 142:
          case 143:
          case 144:
          case 145:
          case 146:
          case 147:
          case 148:
          case 149:
          case 150:
          case 151:
          case 152:
          case 153:
          case 154:
          case 155:
          case 156:
          case 157:
          case 158:
          case 159:
          case 160:
          case 161:
          case 162:
          case 163:
          case 164:
          case 165:
          case 166:
          case 167:
          case 168:
          case 169:
          case 170:
          case 171:
          case 172:
          case 173:
          case 174:
          case 175:
          case 176:
          case 177:
          case 178:
          case 179:
          case 180:
          case 181:
          case 182:
          case 183:
          case 184:
          case 185:
          case 186:
          case 187:
          case 188:
          case 189:
          case 190:
          case 191:
          case 192:
          case 193:
          case 194:
          case 195:
          case 196:
          case 197:
          case 198:
          case 199:
          case 200:
          case 201:
          case 202:
          case 203:
          case 204:
          case 205:
          case 206:
          case 207:
          case 208:
          case 209:
          case 210:
          case 211:
          case 212:
          case 213:
          case 214:
          case 215:
          case 216:
          case 217:
          case 218:
          case 219:
          case 220:
          case 221:
          case 222:
          case 223:
          case 224:
          case 225:
          case 226:
          case 227:
          case 228:
          case 229:
          case 230:
          case 231:
          case 232:
          case 233:
          case 234:
          case 235:
          case 236:
          case 237:
          case 238:
          case 239:
          case 240:
          case 241:
          case 242:
          case 243:
          case 244:
          case 245:
          case 246:
          case 247:
          case 248:
          case 249:
          case 250:
          case 251:
          case 252:
          case 253:
          case 254:
          case 255:
          case 95:
            var j_11540006 = (i_11505025 + 1);
            L13: do {
                L14: while (true) {
                  if (!(j_11540006 < (formatstr_11505019).length)) Tmp15 = false; else {                    Tmp15 = (ConstSet58[formatstr_11505019[j_11540006]] != undefined);                  }                if (!Tmp15) break L14;
                  j_11540006 += 1;
                }
            } while(false);
            var x_11545013 = findNormalized_11500014(substr_2806022(formatstr_11505019, (i_11505025 + 1), (j_11540006 - 1)), a_11505021);
              if (!(0 <= x_11545013)) Tmp16 = false; else {                Tmp16 = (x_11545013 < ((a_11505021).length-1));              }            if (Tmp16) {
            s_11505018[s_11505018_Idx].push.apply(s_11505018[s_11505018_Idx], a_11505021[(x_11545013 + 1)]);;
            }
            else {
            invalidFormatString_11500046();
            }
            
            i_11505025 = j_11540006;
            break;
          default: 
            invalidFormatString_11500046();
            break;
          }
          }
          else {
            addChar(s_11505018[s_11505018_Idx], formatstr_11505019[i_11505025]);;
            i_11505025 += 1;
          }
          
        }
    } while(false);

  
}
function nsuFormatOpenArray(formatstr_11550027, a_11550029) {
  var result_11550030 = [[]];

    result_11550030[0] = nimCopy(null, mnewString(0), NTI2421013);
    nsuAddf(result_11550030, 0, formatstr_11550027, a_11550029);

  return result_11550030[0];

}
function getLine_12076332(my_12076334) {
  var result_12076335 = 0;

    result_12076335 = my_12076334.lineNumber;

  return result_12076335;

}
function getColNumber_12070214(L_12070216, pos_12070217) {
  var result_12070218 = 0;

    result_12070218 = Math.abs((pos_12070217 - L_12070216.lineStart));

  return result_12070218;

}
function getColumn_12076300(my_12076302) {
  var result_12076303 = 0;

    result_12076303 = getColNumber_12070214(my_12076302, my_12076302.bufpos);

  return result_12076303;

}
function errorMsg_12085266(my_12085268, msg_12085269) {
  var result_12085270 = [];

    result_12085270 = nimCopy(null, nsuFormatOpenArray(makeNimstrLit("$1($2, $3) Error: $4"), [nimCopy(null, my_12085268.filename, NTI2421013), cstrToNimstr((getLine_12076332(my_12085268))+""), cstrToNimstr((getColumn_12076300(my_12085268))+""), nimCopy(null, msg_12085269, NTI2421013)]), NTI2421013);

  return result_12085270;

}
function add_12435257(father_12435259, son_12435260) {
    var Tmp1;

    var Tmp1 = father_12435259;
    if (ConstSet59[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'s\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.s.push(son_12435260);;

  
}
function addNode_12591014(father_12591016, son_12591017) {
    if (!((son_12591017 == null))) {
    add_12435257(father_12591016, son_12591017);
    }
    

  
}
function newComment_12375214(comment_12375216) {
    var Tmp1;

  var result_12375217 = null;

    result_12375217 = newXmlNode_12366049(5);
    var Tmp1 = result_12375217;
    if (ConstSet60[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fText\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.fText = nimCopy(null, comment_12375216, NTI2421013);

  return result_12375217;

}
function newText_12366162(text_12366164) {
    var Tmp1;

  var result_12366165 = null;

    result_12366165 = newXmlNode_12366049(0);
    var Tmp1 = result_12366165;
    if (ConstSet61[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fText\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.fText = nimCopy(null, text_12366164, NTI2421013);

  return result_12366165;

}
function errorMsg_12076366(my_12076368) {
  var result_12076369 = [];

    result_12076369 = nimCopy(null, nsuFormatOpenArray(makeNimstrLit("$1($2, $3) Error: $4"), [nimCopy(null, my_12076368.filename, NTI2421013), cstrToNimstr((getLine_12076332(my_12076368))+""), cstrToNimstr((getColumn_12076300(my_12076368))+""), nimCopy(null, errorMessages_12076072[my_12076368.err], NTI2421013)]), NTI2421013);

  return result_12076369;

}
function attrsHEX3D_12520215(n_12520217, attr_12520218) {
    var Tmp1;

    var Tmp1 = n_12520217;
    if (ConstSet62[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fAttr\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.fAttr = attr_12520218;

  
}
function nstnewStringTable(mode_12290028) {
  var result_12290030 = null;

    result_12290030 = ({m_type: NTI12247208, counter: 0, data: [], mode: 0});
    result_12290030.mode = mode_12290028;
    result_12290030.counter = 0;
    result_12290030.data = new Array(64); for (var i=0;i<64;++i) {result_12290030.data[i]={Field0: [], Field1: [], Field2: false};}
  return result_12290030;

}
function imul_12186067(a_12186069, b_12186070) {
  var result_12186071 = 0;

    var mask_12186072 = 65535;
    var aHi_12186081 = (((a_12186069 >>> 0) >>> 16) & mask_12186072);
    var aLo_12186082 = (a_12186069 & mask_12186072);
    var bHi_12186091 = (((b_12186070 >>> 0) >>> 16) & mask_12186072);
    var bLo_12186092 = (b_12186070 & mask_12186072);
    result_12186071 = ((((aLo_12186082 * bLo_12186092) >>> 0) + (((((aHi_12186081 * bLo_12186092) >>> 0) + ((aLo_12186082 * bHi_12186091) >>> 0)) >>> 0) << 16)) >>> 0);

  return result_12186071;

}
function rotl32_12186201(x_12186203, r_12186204) {
  var result_12186205 = 0;

    result_12186205 = ((x_12186203 << r_12186204) | ((x_12186203 >>> 0) >>> (32 - r_12186204)));

  return result_12186205;

}
function murmurHash_12186229(x_12186232) {
  var result_12186233 = 0;

  BeforeRet: do {
    var size_12186243 = (x_12186232).length;
    var stepSize_12186245 = 4;
    var n_12186246 = Math.trunc(size_12186243 / stepSize_12186245);
    var h1_12186247 = 0;
    var i_12186249 = 0;
    L1: do {
        L2: while (true) {
        if (!(i_12186249 < (n_12186246 * stepSize_12186245))) break L2;
          var k1_12186250 = 0;
          var j_12186251 = stepSize_12186245;
          L3: do {
              L4: while (true) {
              if (!(0 < j_12186251)) break L4;
                j_12186251 -= 1;
                k1_12186250 = ((k1_12186250 << 8) | x_12186232[(i_12186249 + j_12186251)]);
              }
          } while(false);
          i_12186249 += stepSize_12186245;
          k1_12186250 = imul_12186067(k1_12186250, 3432918353);
          k1_12186250 = rotl32_12186201(k1_12186250, 15);
          k1_12186250 = imul_12186067(k1_12186250, 461845907);
          h1_12186247 = (h1_12186247 ^ k1_12186250);
          h1_12186247 = rotl32_12186201(h1_12186247, 13);
          h1_12186247 = ((((h1_12186247 * 5) >>> 0) + 3864292196) >>> 0);
        }
    } while(false);
    var k1_12190207 = 0;
    var rem_12190208 = Math.trunc(size_12186243 % stepSize_12186245);
    L5: do {
        L6: while (true) {
        if (!(0 < rem_12190208)) break L6;
          rem_12190208 -= 1;
          k1_12190207 = ((k1_12190207 << 8) | x_12186232[(i_12186249 + rem_12190208)]);
        }
    } while(false);
    k1_12190207 = imul_12186067(k1_12190207, 3432918353);
    k1_12190207 = rotl32_12186201(k1_12190207, 15);
    k1_12190207 = imul_12186067(k1_12190207, 461845907);
    h1_12186247 = (h1_12186247 ^ k1_12190207);
    h1_12186247 = (h1_12186247 ^ size_12186243);
    h1_12186247 = (h1_12186247 ^ ((h1_12186247 >>> 0) >>> 16));
    h1_12186247 = imul_12186067(h1_12186247, 2246822507);
    h1_12186247 = (h1_12186247 ^ ((h1_12186247 >>> 0) >>> 13));
    h1_12186247 = imul_12186067(h1_12186247, 3266489909);
    h1_12186247 = (h1_12186247 ^ ((h1_12186247 >>> 0) >>> 16));
    result_12186233 = (h1_12186247|0);
    break BeforeRet;
  } while (false);

  return result_12186233;

}
function hash_12225214(x_12225216) {
  var result_12225217 = 0;

    result_12225217 = murmurHash_12186229((x_12225216.slice(0, ((x_12225216).length-1)+1)));

  return result_12225217;

}
function HEX21HEX26_12171084(h_12171086, val_12171087) {
  var result_12171088 = 0;

    var h_12171089 = (h_12171086 >>> 0);
    var val_12171090 = (val_12171087 >>> 0);
    var res_12171091 = ((h_12171089 + val_12171090) >>> 0);
    res_12171091 = ((res_12171091 + (res_12171091 << 10)) >>> 0);
    res_12171091 = (res_12171091 ^ ((res_12171091 >>> 0) >>> 6));
    result_12171088 = (res_12171091|0);

  return result_12171088;

}
function HEX21HEX24_12171119(h_12171121) {
  var result_12171122 = 0;

    var h_12171123 = (h_12171121 >>> 0);
    var res_12171131 = ((h_12171123 + (h_12171123 << 3)) >>> 0);
    res_12171131 = (res_12171131 ^ ((res_12171131 >>> 0) >>> 11));
    res_12171131 = ((res_12171131 + (res_12171131 << 15)) >>> 0);
    result_12171122 = (res_12171131|0);

  return result_12171122;

}
function hashIgnoreCase_12235045(x_12235047) {
  var result_12235048 = 0;

    var h_12235049 = 0;
    L1: do {
      var i_12235058 = 0;
      var colontmp__13490285 = 0;
      colontmp__13490285 = ((x_12235047).length - 1);
      var res_13490286 = 0;
      L2: do {
          L3: while (true) {
          if (!(res_13490286 <= colontmp__13490285)) break L3;
            i_12235058 = res_13490286;
            var c_12235059 = x_12235047[i_12235058];
            if ((ConstSet63[c_12235059] != undefined)) {
            c_12235059 = (c_12235059 + 32);
            }
            
            h_12235049 = HEX21HEX26_12171084(h_12235049, c_12235059);
            res_13490286 += 1;
          }
      } while(false);
    } while(false);
    result_12235048 = HEX21HEX24_12171119(h_12235049);

  return result_12235048;

}
function hashIgnoreStyle_12226414(x_12226416) {
  var result_12226417 = 0;

    var h_12226418 = 0;
    var i_12226420 = 0;
    var xLen_12226421 = (x_12226416).length;
    L1: do {
        L2: while (true) {
        if (!(i_12226420 < xLen_12226421)) break L2;
          var c_12226422 = x_12226416[i_12226420];
          if ((c_12226422 == 95)) {
          i_12226420 += 1;
          }
          else {
            if ((ConstSet64[c_12226422] != undefined)) {
            c_12226422 = (c_12226422 + 32);
            }
            
            h_12226418 = HEX21HEX26_12171084(h_12226418, c_12226422);
            i_12226420 += 1;
          }
          
        }
    } while(false);
    result_12226417 = HEX21HEX24_12171119(h_12226418);

  return result_12226417;

}
function myhash_12247419(t_12247421, key_12247422) {
  var result_12247423 = 0;

    switch (t_12247421.mode) {
    case 0:
      result_12247423 = hash_12225214(key_12247422);
      break;
    case 1:
      result_12247423 = hashIgnoreCase_12235045(key_12247422);
      break;
    case 2:
      result_12247423 = hashIgnoreStyle_12226414(key_12247422);
      break;
    }

  return result_12247423;

}
function cmpStrings(a_2695186, b_2695187) {
        if (a_2695186 == b_2695187) return 0;
    if (!a_2695186) return -1;
    if (!b_2695187) return 1;
    for (var i = 0; i < a_2695186.length && i < b_2695187.length; i++) {
      var result = a_2695186[i] - b_2695187[i];
      if (result != 0) return result;
    }
    return a_2695186.length - b_2695187.length;
  

  
}
function cmp_2429060(x_2429062, y_2429063) {
  var result_2695206 = 0;

  BeforeRet: do {
    result_2695206 = cmpStrings(x_2429062, y_2429063);
    break BeforeRet;
  } while (false);

  return result_2695206;

}
function nsuCmpIgnoreCase(a_10670016, b_10670017) {
  var result_10670018 = 0;

  BeforeRet: do {
    var i_10670020 = 0;
    var m_10670021 = nimMin((a_10670016).length, (b_10670017).length);
    L1: do {
        L2: while (true) {
        if (!(i_10670020 < m_10670021)) break L2;
          result_10670018 = (nsuToLowerAsciiChar(a_10670016[i_10670020]) - nsuToLowerAsciiChar(b_10670017[i_10670020]));
          if (!((result_10670018 == 0))) {
          break BeforeRet;
          }
          
          i_10670020 += 1;
        }
    } while(false);
    result_10670018 = ((a_10670016).length - (b_10670017).length);
  } while (false);

  return result_10670018;

}
function myCmp_12247439(t_12247441, a_12247442, b_12247443) {
  var result_12247444 = false;

    switch (t_12247441.mode) {
    case 0:
      result_12247444 = (cmp_2429060(a_12247442, b_12247443) == 0);
      break;
    case 1:
      result_12247444 = (nsuCmpIgnoreCase(a_12247442, b_12247443) == 0);
      break;
    case 2:
      result_12247444 = (nsuCmpIgnoreStyle(a_12247442, b_12247443) == 0);
      break;
    }

  return result_12247444;

}
function nextTry_12260214(h_12260216, maxHash_12260217) {
  var result_12260218 = 0;

    result_12260218 = ((h_12260216 + 1) & maxHash_12260217);

  return result_12260218;

}
function rawGet_12260232(t_12260234, key_12260235) {
  var result_12260236 = 0;

  BeforeRet: do {
    var h_12260243 = (myhash_12247419(t_12260234, key_12260235) & ((t_12260234.data).length-1));
    L1: do {
        L2: while (true) {
        if (!t_12260234.data[h_12260243].Field2) break L2;
          if (myCmp_12247439(t_12260234, t_12260234.data[h_12260243].Field0, key_12260235)) {
          result_12260236 = h_12260243;
          break BeforeRet;
          }
          
          h_12260243 = nextTry_12260214(h_12260243, ((t_12260234.data).length-1));
        }
    } while(false);
    result_12260236 = -1;
  } while (false);

  return result_12260236;

}
function mustRehash_12247458(length_12247460, counter_12247461) {
  var result_12247462 = false;

    result_12247462 = (((length_12247460 * 2) < (counter_12247461 * 3)) || ((length_12247460 - counter_12247461) < 4));

  return result_12247462;

}
function rawInsert_12285032(t_12285034, data_12285036, data_12285036_Idx, key_12285037, val_12285038) {
    var h_12285045 = (myhash_12247419(t_12285034, key_12285037) & ((data_12285036[data_12285036_Idx]).length-1));
    L1: do {
        L2: while (true) {
        if (!data_12285036[data_12285036_Idx][h_12285045].Field2) break L2;
          h_12285045 = nextTry_12260214(h_12285045, ((data_12285036[data_12285036_Idx]).length-1));
        }
    } while(false);
    data_12285036[data_12285036_Idx][h_12285045].Field0 = nimCopy(null, key_12285037, NTI2421013);
    data_12285036[data_12285036_Idx][h_12285045].Field1 = nimCopy(null, val_12285038, NTI2421013);
    data_12285036[data_12285036_Idx][h_12285045].Field2 = true;

  
}
function enlarge_12285065(t_12285067) {
            var Tmp4;
            var Tmp5;

    var n_12285068 = [[]];
    n_12285068[0] = new Array(((t_12285067.data).length * 2)); for (var i=0;i<((t_12285067.data).length * 2);++i) {n_12285068[0][i]={Field0: [], Field1: [], Field2: false};}    L1: do {
      var i_12285094 = 0;
      var colontmp__13490299 = 0;
      colontmp__13490299 = ((t_12285067.data).length-1);
      var res_13490300 = 0;
      L2: do {
          L3: while (true) {
          if (!(res_13490300 <= colontmp__13490299)) break L3;
            i_12285094 = res_13490300;
            if (t_12285067.data[i_12285094].Field2) {
            Tmp4 = t_12285067.data[i_12285094].Field0;
            t_12285067.data[i_12285094].Field0 = genericReset(t_12285067.data[i_12285094].Field0, NTI2421013);
            Tmp5 = t_12285067.data[i_12285094].Field1;
            t_12285067.data[i_12285094].Field1 = genericReset(t_12285067.data[i_12285094].Field1, NTI2421013);
            rawInsert_12285032(t_12285067, n_12285068, 0, Tmp4, Tmp5);
            }
            
            res_13490300 += 1;
          }
      } while(false);
    } while(false);
    var Tmp6 = t_12285067.data; t_12285067.data = n_12285068[0]; n_12285068[0] = Tmp6;
  
}
function nstPut(t_12285175, key_12285176, val_12285177) {
    var index_12285178 = rawGet_12260232(t_12285175, key_12285176);
    if ((0 <= index_12285178)) {
    t_12285175.data[index_12285178].Field1 = nimCopy(null, val_12285177, NTI2421013);
    }
    else {
      if (mustRehash_12247458((t_12285175.data).length, t_12285175.counter)) {
      enlarge_12285065(t_12285175);
      }
      
      rawInsert_12285032(t_12285175, t_12285175, "data", key_12285176, val_12285177);
      t_12285175.counter += 1;
    }
    

  
}
function nstnewStringTableWithTableConstr(keyValuePairs_12290126, mode_12290127) {
  var result_12290129 = null;

    result_12290129 = nstnewStringTable(mode_12290127);
    L1: do {
      var key_12290162 = null;
      var key_12290162_Idx = 0;
      var val_12290164 = null;
      var val_12290164_Idx = 0;
      var i_13490277 = 0;
      L2: do {
          L3: while (true) {
          if (!(i_13490277 < (keyValuePairs_12290126).length)) break L3;
            key_12290162 = keyValuePairs_12290126[i_13490277]; key_12290162_Idx = "Field0";
            val_12290164 = keyValuePairs_12290126[i_13490277]; val_12290164_Idx = "Field1";
            nstPut(result_12290129, key_12290162[key_12290162_Idx], val_12290164[val_12290164_Idx]);
            i_13490277 += 1;
          }
      } while(false);
    } while(false);

  return result_12290129;

}
function attrs_12510246(n_12510248) {
    var Tmp1;

  var result_12510249 = null;

    var Tmp1 = n_12510248;
    if (ConstSet65[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fAttr\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    result_12510249 = Tmp1.fAttr;

  return result_12510249;

}
function newCData_12375232(cdata_12375234) {
    var Tmp1;

  var result_12375235 = null;

    result_12375235 = newXmlNode_12366049(3);
    var Tmp1 = result_12375235;
    if (ConstSet66[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fText\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.fText = nimCopy(null, cdata_12375234, NTI2421013);

  return result_12375235;

}
function newEntity_12375250(entity_12375252) {
    var Tmp1;

  var result_12375253 = null;

    result_12375253 = newXmlNode_12366049(4);
    var Tmp1 = result_12375253;
    if (ConstSet67[Tmp1.k]===undefined) { raiseFieldError(makeNimstrLit("\'fText\' is not accessible using discriminant \'k\' of type \'XmlNodeObj\'")); }
    Tmp1.fText = nimCopy(null, entity_12375252, NTI2421013);

  return result_12375253;

}
function parse_12595022(x_12595025, errors_12595028, errors_12595028_Idx) {
  var result_12615248 = null;

    switch (kind_12076215(x_12595025)) {
    case 4:
      result_12615248 = newComment_12375214(x_12595025.a);
      next_12170021(x_12595025);
      break;
    case 2:
    case 3:
      result_12615248 = newText_12366162(x_12595025.a);
      next_12170021(x_12595025);
      break;
    case 5:
    case 13:
      next_12170021(x_12595025);
      break;
    case 0:
      errors_12595028[errors_12595028_Idx].push(errorMsg_12076366(x_12595025));;
      next_12170021(x_12595025);
      break;
    case 6:
      result_12615248 = newElement_12366113(x_12595025.a);
      next_12170021(x_12595025);
      untilElementEnd_12595029(x_12595025, result_12615248, errors_12595028, errors_12595028_Idx);
      break;
    case 7:
      errors_12595028[errors_12595028_Idx].push(errorMsg_12085266(x_12595025, (makeNimstrLit("unexpected ending tag: ") || []).concat(x_12595025.a || [])));;
      break;
    case 8:
      result_12615248 = newElement_12366113(x_12595025.a);
      next_12170021(x_12595025);
      attrsHEX3D_12520215(result_12615248, nstnewStringTableWithTableConstr([], 0));
      L1: do {
          L2: while (true) {
          if (!true) break L2;
            switch (kind_12076215(x_12595025)) {
            case 9:
              nstPut(attrs_12510246(result_12615248), x_12595025.a, x_12595025.b);
              next_12170021(x_12595025);
              break;
            case 10:
              next_12170021(x_12595025);
              break L1;
              break;
            case 0:
              errors_12595028[errors_12595028_Idx].push(errorMsg_12076366(x_12595025));;
              next_12170021(x_12595025);
              break L1;
              break;
            default: 
              errors_12595028[errors_12595028_Idx].push(errorMsg_12085266(x_12595025, makeNimstrLit("\'>\' expected")));;
              next_12170021(x_12595025);
              break L1;
              break;
            }
          }
      } while(false);
      untilElementEnd_12595029(x_12595025, result_12615248, errors_12595028, errors_12595028_Idx);
      break;
    case 9:
    case 10:
      errors_12595028[errors_12595028_Idx].push(errorMsg_12085266(x_12595025, makeNimstrLit("<some_tag> expected")));;
      next_12170021(x_12595025);
      break;
    case 11:
      result_12615248 = newCData_12375232(x_12595025.a);
      next_12170021(x_12595025);
      break;
    case 12:
      result_12615248 = newEntity_12375250(x_12595025.a);
      next_12170021(x_12595025);
      break;
    case 1:
      break;
    }

  return result_12615248;

}
function untilElementEnd_12595029(x_12595032, result_12595033, errors_12595036, errors_12595036_Idx) {
  BeforeRet: do {
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (kind_12076215(x_12595032)) {
          case 7:
            if (eqStrings(x_12595032.a, tag_12405215(result_12595033))) {
            break BeforeRet;
            }
            else {
            errors_12595036[errors_12595036_Idx].push(errorMsg_12085266(x_12595032, (makeNimstrLit("</") || []).concat(tag_12405215(result_12595033) || [],makeNimstrLit("> expected") || [])));;
            }
            
            break L1;
            break;
          case 1:
            errors_12595036[errors_12595036_Idx].push(errorMsg_12085266(x_12595032, (makeNimstrLit("</") || []).concat(tag_12405215(result_12595033) || [],makeNimstrLit("> expected") || [])));;
            break L1;
            break;
          default: 
            addNode_12591014(result_12595033, parse_12595022(x_12595032, errors_12595036, errors_12595036_Idx));
            break;
          }
        }
    } while(false);
  } while (false);

  
}
function parseXml_12825229(text_12825231, i_12825232) {
  var result_12825234 = {Field0: false, Field1: 0};

    var errors_12825236 = [[]];
    var x_12825237 = [({m_type: NTI12076023, a: [], b: [], c: [], kind: 0, err: 0, state: 0, cIsEmpty: false, filename: [], options: {}, bufpos: 0, buf: [], input: null, lineNumber: 0, sentinel: 0, lineStart: 0, offsetBase: 0, refillChars: {}})];
    var stream_12825238 = newStringStream_11920214(text_12825231);
    setPosition_11661240(stream_12825238, i_12825232);
    open_12076101(x_12825237[0], stream_12825238, [], ConstSet43);
    next_12170021(x_12825237[0]);
    L1: do {
        L2: while (true) {
        if (!true) break L2;
          switch (kind_12076215(x_12825237[0])) {
          case 8:
          case 6:
            var node_12850201 = newElement_12366113(x_12825237[0].a);
            untilElementEnd_12595029(x_12825237[0], node_12850201, errors_12825236, 0);
            result_12825234["Field0"] = true;
            break;
          case 4:
          case 13:
          case 5:
          case 11:
            next_12170021(x_12825237[0]);
            result_12825234["Field0"] = true;
            break;
          case 7:
          case 2:
          case 3:
          case 1:
            result_12825234["Field0"] = true;
            break L1;
            break;
          default: 
            result_12825234["Field0"] = false;
            break L1;
            break;
          }
        }
    } while(false);
    result_12825234["Field1"] = x_12825237[0].bufpos;

  return result_12825234;

}
function parseDelimed_12860076(parser_12860079, delim_12860080, doubleNewLine_12860081) {
              var Tmp4;
            var Tmp5;
            function parseAux_12875401(tag_12875403, del_12875404, parser_12875406) {
                  var Tmp1;
                  var Tmp2;

              var result_12875407 = 0;

                var currentPos_12875408 = parser_12875406.pos;
                var colontmp__13490169 = parseDelimed_12860076(parser_12875406, del_12875404, doubleNewLine_12860081);
                var finishReason_12875409 = colontmp__13490169["Field0"];
                var parsedElems_12875410 = nimCopy(null, colontmp__13490169["Field1"], NTI12860083);
                if ((finishReason_12875409 == 0)) {
                elems_12860087[0].push(newElem_11601312(tag_12875403, parsedElems_12875410));;
                result_12875407 = 0;
                }
                else {
                  var Tmp2 = (Tmp1 = HEX5BHEX5D_12860006(elems_12860087[0], 1), Tmp1)[0][Tmp1[1]];
                  if (ConstSet9[Tmp2.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                  Tmp2.str += HEX5BHEX5D_11601071(parser_12875406.str, HEX2EHEX2E_4625220(initialPos_12875202, (currentPos_12875408 - 1)));;
                  add_12885216(elems_12860087, 0, parsedElems_12875410);
                  result_12875407 = finishReason_12875409;
                }
                
                elems_12860087[0].push(newStr_11601263(""));;

              return result_12875407;

            }
            function bracket_12885340(image_12885342, parser_12885344) {
                  var Tmp1;
                var Tmp2;
                var Tmp3;
                var Tmp4;
                var Tmp5;

              var result_12885345 = 0;

                var elem_12885346 = parseBracket_12851214(image_12885342, parser_12885344, doubleNewLine_12860081);
                  var Tmp1 = elem_12885346;
                  if (ConstSet30[Tmp1.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                if ((Tmp1.tag == 0)) {
                var Tmp3 = (Tmp2 = HEX5BHEX5D_12860006(elems_12860087[0], 1), Tmp2)[0][Tmp2[1]];
                if (ConstSet31[Tmp3.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                if (image_12885342) {
                Tmp4 = makeNimstrLit("![");
                }
                else {
                Tmp4 = makeNimstrLit("[");
                }
                
                Tmp3.str += toJSStr(Tmp4);;
                var Tmp5 = elem_12885346;
                if (ConstSet32[Tmp5.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_12885216(elems_12860087, 0, Tmp5.content);
                result_12885345 = 2;
                }
                else {
                  elems_12860087[0].push(elem_12885346);;
                  elems_12860087[0].push(newStr_11601263(""));;
                  result_12885345 = 0;
                }
                

              return result_12885345;

            }
            var Tmp6;
            var Tmp7;
              var Tmp8;
              var Tmp9;
            var Tmp10;
            var Tmp11;
              var Tmp13;
                          var Tmp17;
                          var Tmp18;
                var Tmp19;
                var Tmp20;
                          var Tmp24;
                          var Tmp25;
                var Tmp26;
                var Tmp27;
                var Tmp28;
                var Tmp29;
              var Tmp30;
              var Tmp31;
              var Tmp32;
              var Tmp33;
              var Tmp34;

  var result_12860084 = {Field0: 0, Field1: []};

  BeforeRet: do {
    var escaped_12860085 = false;
    var elems_12860087 = [[]];
    elems_12860087[0].push(newStr_11601263(""));;
    L1: do {
      var ch_12860096 = 0;
      L2: do {
          L3: while (true) {
          if (!(parser_12860079.pos < (parser_12860079.str).length)) break L3;
            ch_12860096 = parser_12860079.str.charCodeAt((parser_12860079.pos + 0));
            if (!(escaped_12860085)) {
            var initialPos_12875202 = parser_12860079.pos;
              if (!!(((delim_12860080).length == 0))) Tmp4 = false; else {                Tmp4 = nextMatch_11660281(parser_12860079, delim_12860080, 0);              }            if (Tmp4) {
            parser_12860079.pos -= 1;
            var colontmp__13490119 = 0;
            var colontmp__13490120 = nimCopy(null, elems_12860087[0], NTI12860083);
            nimCopy(result_12860084, {Field0: colontmp__13490119, Field1: nimCopy(null, colontmp__13490120, NTI12860083)}, NTI12860082);
            break BeforeRet;
            }
            else {
            if (((doubleNewLine_12860081 && (nextMatch_11660281(parser_12860079, makeNimstrLit("\x0D\x0A\x0D\x0A"), 0) || nextMatch_11660281(parser_12860079, makeNimstrLit("\x0A\x0A"), 0))) || (!(doubleNewLine_12860081) && (nextMatch_11660281(parser_12860079, makeNimstrLit("\x0D\x0A"), 0) || nextMatch_11660281(parser_12860079, makeNimstrLit("\x0A"), 0))))) {
            if ((!(doubleNewLine_12860081) && ((delim_12860080).length == 0))) {
            parser_12860079.pos -= 1;
            }
            else {
              parser_12860079.pos = initialPos_12875202;
            }
            
            if (((delim_12860080).length == 0)) {
            Tmp5 = 1;
            }
            else {
            Tmp5 = 0;
            }
            
            var colontmp__13490121 = Tmp5;
            var colontmp__13490122 = nimCopy(null, elems_12860087[0], NTI12860083);
            nimCopy(result_12860084, {Field0: colontmp__13490121, Field1: nimCopy(null, colontmp__13490122, NTI12860083)}, NTI12860082);
            break BeforeRet;
            }
            else {
            if ((nextMatch_11660281(parser_12860079, makeNimstrLit("  \x0D\x0A"), 0) || nextMatch_11660281(parser_12860079, makeNimstrLit("  \x0A"), 0))) {
            elems_12860087[0].push(newElem_11601312(2, []));;
            elems_12860087[0].push(newStr_11601263(""));;
            }
            else {
            if (nextMatch_11660281(parser_12860079, makeNimstrLit("```"), 0)) {
            elems_12860087[0].push(parseCodeBlock_12851313(parser_12860079));;
            elems_12860087[0].push(newStr_11601263(""));;
            }
            else {
            if (nextMatch_11660281(parser_12860079, makeNimstrLit("^("), 0)) {
            var reasonHEX60gensym9_12905001 = parseAux_12875401(13, makeNimstrLit(")"), parser_12860079);
            if ((ConstSet10[reasonHEX60gensym9_12905001] != undefined)) {
            var colontmp__13490124 = reasonHEX60gensym9_12905001;
            var colontmp__13490125 = nimCopy(null, elems_12860087[0], NTI12860083);
            nimCopy(result_12860084, {Field0: colontmp__13490124, Field1: nimCopy(null, colontmp__13490125, NTI12860083)}, NTI12860082);
            break BeforeRet;
            }
            
            }
            else {
            if (nextMatch_11660281(parser_12860079, makeNimstrLit("**"), 0)) {
            var reasonHEX60gensym11_12915001 = parseAux_12875401(16, makeNimstrLit("**"), parser_12860079);
            if ((ConstSet11[reasonHEX60gensym11_12915001] != undefined)) {
            var colontmp__13490126 = reasonHEX60gensym11_12915001;
            var colontmp__13490127 = nimCopy(null, elems_12860087[0], NTI12860083);
            nimCopy(result_12860084, {Field0: colontmp__13490126, Field1: nimCopy(null, colontmp__13490127, NTI12860083)}, NTI12860082);
            break BeforeRet;
            }
            
            }
            else {
            if (nextMatch_11660281(parser_12860079, makeNimstrLit("__"), 0)) {
            var reasonHEX60gensym13_12925001 = parseAux_12875401(19, makeNimstrLit("__"), parser_12860079);
            if ((ConstSet12[reasonHEX60gensym13_12925001] != undefined)) {
            var colontmp__13490128 = reasonHEX60gensym13_12925001;
            var colontmp__13490129 = nimCopy(null, elems_12860087[0], NTI12860083);
            nimCopy(result_12860084, {Field0: colontmp__13490128, Field1: nimCopy(null, colontmp__13490129, NTI12860083)}, NTI12860082);
            break BeforeRet;
            }
            
            }
            else {
            if (nextMatch_11660281(parser_12860079, makeNimstrLit("~~"), 0)) {
            var reasonHEX60gensym15_12935001 = parseAux_12875401(20, makeNimstrLit("~~"), parser_12860079);
            if ((ConstSet13[reasonHEX60gensym15_12935001] != undefined)) {
            var colontmp__13490130 = reasonHEX60gensym15_12935001;
            var colontmp__13490131 = nimCopy(null, elems_12860087[0], NTI12860083);
            nimCopy(result_12860084, {Field0: colontmp__13490130, Field1: nimCopy(null, colontmp__13490131, NTI12860083)}, NTI12860082);
            break BeforeRet;
            }
            
            }
            else {
            if (nextMatch_11660281(parser_12860079, makeNimstrLit("!["), 0)) {
            var reason_12940009 = bracket_12885340(true, parser_12860079);
            if ((ConstSet33[reason_12940009] != undefined)) {
            var colontmp__13490133 = reason_12940009;
            var colontmp__13490134 = nimCopy(null, elems_12860087[0], NTI12860083);
            nimCopy(result_12860084, {Field0: colontmp__13490133, Field1: nimCopy(null, colontmp__13490134, NTI12860083)}, NTI12860082);
            break BeforeRet;
            }
            
            }
            else {
            if (nextMatch_11660255(parser_12860079, 123, 0)) {
            elems_12860087[0].push(parseCurly_12851220(parser_12860079));;
            }
            else {
            if (nextMatch_11660255(parser_12860079, 91, 0)) {
            var reason_12945017 = bracket_12885340(false, parser_12860079);
            if ((ConstSet38[reason_12945017] != undefined)) {
            var colontmp__13490135 = reason_12945017;
            var colontmp__13490136 = nimCopy(null, elems_12860087[0], NTI12860083);
            nimCopy(result_12860084, {Field0: colontmp__13490135, Field1: nimCopy(null, colontmp__13490136, NTI12860083)}, NTI12860082);
            break BeforeRet;
            }
            
            }
            else {
            if (nextMatch_11660255(parser_12860079, 96, 0)) {
            var reasonHEX60gensym19_12955001 = parseAux_12875401(18, makeNimstrLit("`"), parser_12860079);
            if ((ConstSet39[reasonHEX60gensym19_12955001] != undefined)) {
            var colontmp__13490137 = reasonHEX60gensym19_12955001;
            var colontmp__13490138 = nimCopy(null, elems_12860087[0], NTI12860083);
            nimCopy(result_12860084, {Field0: colontmp__13490137, Field1: nimCopy(null, colontmp__13490138, NTI12860083)}, NTI12860082);
            break BeforeRet;
            }
            
            }
            else {
            if (nextMatch_11660255(parser_12860079, 42, 0)) {
            var reasonHEX60gensym21_12965001 = parseAux_12875401(15, makeNimstrLit("*"), parser_12860079);
            if ((ConstSet40[reasonHEX60gensym21_12965001] != undefined)) {
            var colontmp__13490139 = reasonHEX60gensym21_12965001;
            var colontmp__13490140 = nimCopy(null, elems_12860087[0], NTI12860083);
            nimCopy(result_12860084, {Field0: colontmp__13490139, Field1: nimCopy(null, colontmp__13490140, NTI12860083)}, NTI12860082);
            break BeforeRet;
            }
            
            }
            else {
            if (nextMatch_11660255(parser_12860079, 95, 0)) {
            var reasonHEX60gensym23_12975001 = parseAux_12875401(15, makeNimstrLit("_"), parser_12860079);
            if ((ConstSet41[reasonHEX60gensym23_12975001] != undefined)) {
            var colontmp__13490141 = reasonHEX60gensym23_12975001;
            var colontmp__13490142 = nimCopy(null, elems_12860087[0], NTI12860083);
            nimCopy(result_12860084, {Field0: colontmp__13490141, Field1: nimCopy(null, colontmp__13490142, NTI12860083)}, NTI12860082);
            break BeforeRet;
            }
            
            }
            else {
            if (nextMatch_11660255(parser_12860079, 60, 0)) {
            parser_12860079.pos -= 1;
            var colontmp__13490184 = parseXml_12825229(cstrToNimstr(parser_12860079.str), parser_12860079.pos);
            var change_12980201 = colontmp__13490184["Field0"];
            var pos_12980202 = colontmp__13490184["Field1"];
            if (change_12980201) {
            var Tmp7 = (Tmp6 = HEX5BHEX5D_12860006(elems_12860087[0], 1), Tmp6)[0][Tmp6[1]];
            if (ConstSet68[Tmp7.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
            Tmp7.str += HEX5BHEX5D_11601071(parser_12860079.str, HEX2EHEX2E_4625220(parser_12860079.pos, ((parser_12860079.pos + pos_12980202) - 1)));;
            parser_12860079.pos += (pos_12980202 - 1);
            }
            else {
              var Tmp9 = (Tmp8 = HEX5BHEX5D_12860006(elems_12860087[0], 1), Tmp8)[0][Tmp8[1]];
              if (ConstSet69[Tmp9.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
            Tmp9.str += "&lt;";;
            }
            
            }
            else {
            if (nextMatch_11660255(parser_12860079, 62, 0)) {
            parser_12860079.pos -= 1;
            var Tmp11 = (Tmp10 = HEX5BHEX5D_12860006(elems_12860087[0], 1), Tmp10)[0][Tmp10[1]];
            if (ConstSet70[Tmp11.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
            Tmp11.str += "&gt;";;
            }
            else {
            if (nextMatch_11660255(parser_12860079, 38, 0)) {
            parser_12860079.pos -= 1;
            L12: do {
              if (((parser_12860079.str).length < parser_12860079.pos)) {
              Tmp13 = 32;
              }
              else {
              Tmp13 = parser_12860079.str.charCodeAt((parser_12860079.pos + 1));
              }
              
              var firstChar_13005001 = Tmp13;
              parser_12860079.pos += 1;
              switch (firstChar_13005001) {
              case 65:
              case 66:
              case 67:
              case 68:
              case 69:
              case 70:
              case 71:
              case 72:
              case 73:
              case 74:
              case 75:
              case 76:
              case 77:
              case 78:
              case 79:
              case 80:
              case 81:
              case 82:
              case 83:
              case 84:
              case 85:
              case 86:
              case 87:
              case 88:
              case 89:
              case 90:
              case 97:
              case 98:
              case 99:
              case 100:
              case 101:
              case 102:
              case 103:
              case 104:
              case 105:
              case 106:
              case 107:
              case 108:
              case 109:
              case 110:
              case 111:
              case 112:
              case 113:
              case 114:
              case 115:
              case 116:
              case 117:
              case 118:
              case 119:
              case 120:
              case 121:
              case 122:
                parser_12860079.pos += 2;
                L14: do {
                  var ch_13005014 = 0;
                  L15: do {
                      L16: while (true) {
                      if (!(parser_12860079.pos < (parser_12860079.str).length)) break L16;
                        ch_13005014 = parser_12860079.str.charCodeAt((parser_12860079.pos + 0));
                        switch (ch_13005014) {
                        case 65:
                        case 66:
                        case 67:
                        case 68:
                        case 69:
                        case 70:
                        case 71:
                        case 72:
                        case 73:
                        case 74:
                        case 75:
                        case 76:
                        case 77:
                        case 78:
                        case 79:
                        case 80:
                        case 81:
                        case 82:
                        case 83:
                        case 84:
                        case 85:
                        case 86:
                        case 87:
                        case 88:
                        case 89:
                        case 90:
                        case 97:
                        case 98:
                        case 99:
                        case 100:
                        case 101:
                        case 102:
                        case 103:
                        case 104:
                        case 105:
                        case 106:
                        case 107:
                        case 108:
                        case 109:
                        case 110:
                        case 111:
                        case 112:
                        case 113:
                        case 114:
                        case 115:
                        case 116:
                        case 117:
                        case 118:
                        case 119:
                        case 120:
                        case 121:
                        case 122:
                          break;
                        case 59:
                          break L14;
                          break;
                        default: 
                          parser_12860079.pos = initialPos_12875202;
                          var Tmp18 = (Tmp17 = HEX5BHEX5D_12860006(elems_12860087[0], 1), Tmp17)[0][Tmp17[1]];
                          if (ConstSet71[Tmp18.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                          Tmp18.str += "&amp;";;
                          break L12;
                          break;
                        }
                        parser_12860079.pos += 1;
                      }
                  } while(false);
                } while(false);
                var Tmp20 = (Tmp19 = HEX5BHEX5D_12860006(elems_12860087[0], 1), Tmp19)[0][Tmp19[1]];
                if (ConstSet72[Tmp20.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp20.str += HEX5BHEX5D_11601071(parser_12860079.str, HEX2EHEX2E_4625220(initialPos_12875202, parser_12860079.pos));;
                break;
              case 35:
                parser_12860079.pos += 2;
                L21: do {
                  var ch_13015029 = 0;
                  L22: do {
                      L23: while (true) {
                      if (!(parser_12860079.pos < (parser_12860079.str).length)) break L23;
                        ch_13015029 = parser_12860079.str.charCodeAt((parser_12860079.pos + 0));
                        switch (ch_13015029) {
                        case 48:
                        case 49:
                        case 50:
                        case 51:
                        case 52:
                        case 53:
                        case 54:
                        case 55:
                        case 56:
                        case 57:
                          break;
                        case 59:
                          break L21;
                          break;
                        default: 
                          parser_12860079.pos = initialPos_12875202;
                          var Tmp25 = (Tmp24 = HEX5BHEX5D_12860006(elems_12860087[0], 1), Tmp24)[0][Tmp24[1]];
                          if (ConstSet73[Tmp25.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                          Tmp25.str += "&amp;";;
                          break L12;
                          break;
                        }
                        parser_12860079.pos += 1;
                      }
                  } while(false);
                } while(false);
                var Tmp27 = (Tmp26 = HEX5BHEX5D_12860006(elems_12860087[0], 1), Tmp26)[0][Tmp26[1]];
                if (ConstSet74[Tmp27.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp27.str += HEX5BHEX5D_11601071(parser_12860079.str, HEX2EHEX2E_4625220(initialPos_12875202, parser_12860079.pos));;
                break;
              default: 
                var Tmp29 = (Tmp28 = HEX5BHEX5D_12860006(elems_12860087[0], 1), Tmp28)[0][Tmp28[1]];
                if (ConstSet75[Tmp29.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp29.str += "&amp;";;
                break;
              }
            } while(false);
            }
            else {
            if (nextMatch_11660255(parser_12860079, 92, 0)) {
            parser_12860079.pos -= 1;
            escaped_12860085 = true;
            }
            else {
              var Tmp31 = (Tmp30 = HEX5BHEX5D_12860006(elems_12860087[0], 1), Tmp30)[0][Tmp30[1]];
              if (ConstSet76[Tmp31.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
            add_11601033(Tmp31, "str", ch_12860096);
            }
            }}}}}}}}}}}}}}}}}
            }
            else {
              var Tmp33 = (Tmp32 = HEX5BHEX5D_12860006(elems_12860087[0], 1), Tmp32)[0][Tmp32[1]];
              if (ConstSet77[Tmp33.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              add_11601033(Tmp33, "str", ch_12860096);
              escaped_12860085 = false;
            }
            
            if (!((Tmp34 = HEX5BHEX5D_12860006(elems_12860087[0], 1), Tmp34)[0][Tmp34[1]].isText)) {
            elems_12860087[0].push(newStr_11601263(""));;
            }
            
            parser_12860079.pos += 1;
          }
      } while(false);
    } while(false);
    var colontmp__13490159 = 1;
    var colontmp__13490160 = nimCopy(null, elems_12860087[0], NTI12860083);
    nimCopy(result_12860084, {Field0: colontmp__13490159, Field1: nimCopy(null, colontmp__13490160, NTI12860083)}, NTI12860082);
  } while (false);

  return result_12860084;

}
function parseInline_13080095(parser_13080098, doubleNewLine_13080099) {
  var result_13080101 = [];

    var colontmp__13490117 = parseDelimed_12860076(parser_13080098, [], doubleNewLine_13080099);
    var finishReason_13080102 = colontmp__13490117["Field0"];
    var elems_13080103 = nimCopy(null, colontmp__13490117["Field1"], NTI12860083);
    result_13080101 = nimCopy(null, elems_13080103, NTI12860083);

  return result_13080101;

}
function HEX5BHEX5DHEX3D_13210004(s_13210009, i_13210010, x_13210011) {
    s_13210009[((s_13210009).length - i_13210010)] = x_13210011;

  
}
function parseTopLevel_13095214(text_13095216) {
            var Tmp4;
              var Tmp5;
              var Tmp6;
                var Tmp7;
                var Tmp8;
                var Tmp9;
                var Tmp10;
                var Tmp11;
                var Tmp12;
                var Tmp15;
              var Tmp16;
              var Tmp17;
                var Tmp18;
                var Tmp19;
                var Tmp20;
                var Tmp21;
                var Tmp22;
                var Tmp23;
              function skipWhitespaceUntilNewline_13185018(parser_13185021) {
                var result_13185022 = false;

                BeforeRet: do {
                  var i_13185024 = 0;
                  L1: do {
                      L2: while (true) {
                      if (!((parser_13185021.pos + i_13185024) < (parser_13185021.str).length)) break L2;
                        var ch_13190001 = parser_13185021.str.charCodeAt((parser_13185021.pos + i_13185024));
                        switch (ch_13190001) {
                        case 10:
                          parser_13185021.pos += i_13185024;
                          result_13185022 = true;
                          break BeforeRet;
                          break;
                        case 9:
                        case 11:
                        case 12:
                        case 13:
                        case 32:
                          break;
                        default: 
                          result_13185022 = false;
                          break BeforeRet;
                          break;
                        }
                        i_13185024 += 1;
                      }
                  } while(false);
                } while (false);

                return result_13185022;

              }
              var Tmp24;
              var Tmp25;
              var Tmp26;
              var Tmp27;
              var Tmp28;
                var Tmp29;
                var Tmp30;
                var Tmp31;
                var Tmp32;
                var Tmp33;
              var Tmp34;
              var Tmp35;
              var Tmp36;
              var Tmp37;
              var Tmp38;
              var Tmp39;
              var Tmp40;
              var Tmp41;
                var Tmp42;
                var Tmp43;
                var Tmp44;
                var Tmp45;
                var Tmp46;
                var Tmp47;
                  var Tmp48;
                  var Tmp49;
                  var Tmp50;
                    var Tmp51;
                    var Tmp52;
                    var Tmp53;
                    var Tmp54;
                    var Tmp55;
                var Tmp56;
                var Tmp57;
                var Tmp58;
                var Tmp59;
                var Tmp60;
                var Tmp61;
                var Tmp62;
                var Tmp63;
                      var Tmp66;
                var Tmp69;
                var Tmp70;
                var Tmp71;
                var Tmp72;
                var Tmp75;
                var Tmp76;
                var Tmp77;

  var result_13095218 = [];

    var lastElement_13095219 = null;
    var parser_13095220 = [{str: text_13095216, pos: 0}];
    L1: do {
      var firstCh_13095226 = 0;
      L2: do {
          L3: while (true) {
          if (!(parser_13095220[0].pos < (parser_13095220[0].str).length)) break L3;
            firstCh_13095226 = parser_13095220[0].str.charCodeAt((parser_13095220[0].pos + 0));
            if ((ConstSet1[firstCh_13095226] != undefined)) {
            if (!((lastElement_13095219 == null))) {
            result_13095218.push(paragraphIfText_11601376(lastElement_13095219));;
            lastElement_13095219 = null;
            }
            
            }
            else {
            if (!((lastElement_13095219 == null))) {
            var Tmp4 = lastElement_13095219;
            if (ConstSet2[Tmp4.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
            switch (Tmp4.tag) {
            case 9:
              if (nextMatch_11660228(parser_13095220[0], ConstSet4, 1)) {
              var item_13115203 = newElem_11601312(11, []);
              var Tmp5 = item_13115203;
              if (ConstSet5[Tmp5.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp5.content = nimCopy(null, parseInline_13080095(parser_13095220[0], false), NTI13080100);
              var Tmp6 = lastElement_13095219;
              if (ConstSet78[Tmp6.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp6.content.push(item_13115203);;
              }
              else {
                var Tmp7 = lastElement_13095219;
                if (ConstSet80[Tmp7.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp9 = (Tmp8 = HEX5BHEX5D_12860006(Tmp7.content, 1), Tmp8)[0][Tmp8[1]];
                if (ConstSet79[Tmp9.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp9.content.push(newStr_11601263("\n"));;
                var Tmp10 = lastElement_13095219;
                if (ConstSet82[Tmp10.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp12 = (Tmp11 = HEX5BHEX5D_12860006(Tmp10.content, 1), Tmp11)[0][Tmp11[1]];
                if (ConstSet81[Tmp12.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_12885216(Tmp12, "content", parseInline_13080095(parser_13095220[0], false));
              }
              
              break;
            case 10:
              var i_13150013 = 0;
              L13: do {
                  L14: while (true) {
                  if (!peekMatch_11635020(parser_13095220[0], ConstSet83, i_13150013)) break L14;
                    i_13150013 += 1;
                  }
              } while(false);
                if (!(((parser_13095220[0].pos + i_13150013) + 1) < (parser_13095220[0].str).length)) Tmp15 = false; else {                  Tmp15 = peekMatch_11645020(parser_13095220[0], 46, i_13150013);                }              if (Tmp15) {
              parser_13095220[0].pos += (i_13150013 + 1);
              var item_13150028 = newElem_11601312(11, []);
              var Tmp16 = item_13150028;
              if (ConstSet84[Tmp16.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp16.content = nimCopy(null, parseInline_13080095(parser_13095220[0], false), NTI13080100);
              var Tmp17 = lastElement_13095219;
              if (ConstSet85[Tmp17.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp17.content.push(item_13150028);;
              }
              else {
                var Tmp18 = lastElement_13095219;
                if (ConstSet87[Tmp18.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp20 = (Tmp19 = HEX5BHEX5D_12860006(Tmp18.content, 1), Tmp19)[0][Tmp19[1]];
                if (ConstSet86[Tmp20.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp20.content.push(newStr_11601263("\n "));;
                var Tmp21 = lastElement_13095219;
                if (ConstSet89[Tmp21.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp23 = (Tmp22 = HEX5BHEX5D_12860006(Tmp21.content, 1), Tmp22)[0][Tmp22[1]];
                if (ConstSet88[Tmp23.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_12885216(Tmp23, "content", parseInline_13080095(parser_13095220[0], false));
              }
              
              break;
            case 12:
              if ((firstCh_13095226 == 62)) {
              parser_13095220[0].pos += 1;
              }
              
              var rem_13190037 = skipWhitespaceUntilNewline_13185018(parser_13095220[0]);
              if (rem_13190037) {
              if ((firstCh_13095226 == 62)) {
              var Tmp24 = lastElement_13095219;
              if (ConstSet90[Tmp24.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              var Tmp25 = lastElement_13095219;
              if (ConstSet91[Tmp25.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              HEX5BHEX5DHEX3D_13210004(Tmp24.content, 1, paragraphIfText_11601376((Tmp26 = HEX5BHEX5D_12860006(Tmp25.content, 1), Tmp26)[0][Tmp26[1]]));
              var Tmp27 = lastElement_13095219;
              if (ConstSet92[Tmp27.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp27.content.push(newStr_11601263("\n"));;
              if (((text_13095216.charCodeAt((parser_13095220[0].pos - 1)) == 32) && (text_13095216.charCodeAt((parser_13095220[0].pos - 2)) == 32))) {
              var Tmp28 = lastElement_13095219;
              if (ConstSet93[Tmp28.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp28.content.push(newElem_11601312(2, []));;
              }
              
              }
              else {
                var Tmp29 = lastElement_13095219;
                if (ConstSet94[Tmp29.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp30 = lastElement_13095219;
                if (ConstSet95[Tmp30.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                HEX5BHEX5DHEX3D_13210004(Tmp29.content, 1, paragraphIfText_11601376((Tmp31 = HEX5BHEX5D_12860006(Tmp30.content, 1), Tmp31)[0][Tmp31[1]]));
                result_13095218.push(lastElement_13095219);;
                if (((text_13095216.charCodeAt((parser_13095220[0].pos - 1)) == 32) && (text_13095216.charCodeAt((parser_13095220[0].pos - 2)) == 32))) {
                result_13095218.push(newElem_11601312(2, []));;
                }
                
              }
              
              }
              else {
                var Tmp32 = lastElement_13095219;
                if (ConstSet96[Tmp32.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              if ((Tmp33 = HEX5BHEX5D_12860006(Tmp32.content, 1), Tmp33)[0][Tmp33[1]].isText) {
              var Tmp34 = lastElement_13095219;
              if (ConstSet97[Tmp34.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp34.content.push(newStr_11601263("\n"));;
              var Tmp35 = lastElement_13095219;
              if (ConstSet98[Tmp35.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp35.content.push(newElem_11601312(1, parseInline_13080095(parser_13095220[0], false)));;
              }
              else {
              if ((firstCh_13095226 == 32)) {
              var Tmp36 = lastElement_13095219;
              if (ConstSet100[Tmp36.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              var Tmp38 = (Tmp37 = HEX5BHEX5D_12860006(Tmp36.content, 1), Tmp37)[0][Tmp37[1]];
              if (ConstSet99[Tmp38.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              Tmp38.content.push(newStr_11601263("\n "));;
              var Tmp39 = lastElement_13095219;
              if (ConstSet102[Tmp39.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              var Tmp41 = (Tmp40 = HEX5BHEX5D_12860006(Tmp39.content, 1), Tmp40)[0][Tmp40[1]];
              if (ConstSet101[Tmp41.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
              add_12885216(Tmp41, "content", parseInline_13080095(parser_13095220[0], false));
              }
              else {
                var Tmp42 = lastElement_13095219;
                if (ConstSet104[Tmp42.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp44 = (Tmp43 = HEX5BHEX5D_12860006(Tmp42.content, 1), Tmp43)[0][Tmp43[1]];
                if (ConstSet103[Tmp44.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp44.content.push(newStr_11601263("\n"));;
                var Tmp45 = lastElement_13095219;
                if (ConstSet106[Tmp45.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp47 = (Tmp46 = HEX5BHEX5D_12860006(Tmp45.content, 1), Tmp46)[0][Tmp46[1]];
                if (ConstSet105[Tmp47.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_12885216(Tmp47, "content", parseInline_13080095(parser_13095220[0], false));
              }
              }}
              break;
            default: 
              result_13095218.push(paragraphIfText_11601376(lastElement_13095219));;
              lastElement_13095219 = null;
              parser_13095220[0].pos -= 1;
              break;
            }
            }
            else {
              switch (firstCh_13095226) {
              case 32:
                  if (!!(((result_13095218).length == 0))) Tmp50 = false; else {                    Tmp50 = !((Tmp51 = HEX5BHEX5D_12860006(result_13095218, 1), Tmp51)[0][Tmp51[1]].isText);                  }                  if (!Tmp50) Tmp49 = false; else {                    var Tmp53 = (Tmp52 = HEX5BHEX5D_12860006(result_13095218, 1), Tmp52)[0][Tmp52[1]];
                    if (ConstSet108[Tmp53.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                    Tmp49 = (ConstSet107[Tmp53.tag] != undefined);                  }                  if (!Tmp49) Tmp48 = false; else {                    var Tmp55 = (Tmp54 = HEX5BHEX5D_12860006(result_13095218, 1), Tmp54)[0][Tmp54[1]];
                    if (ConstSet109[Tmp55.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                    Tmp48 = !(((Tmp55.content).length == 0));                  }                if (Tmp48) {
                var Tmp57 = (Tmp56 = HEX5BHEX5D_12860006(result_13095218, 1), Tmp56)[0][Tmp56[1]];
                if (ConstSet111[Tmp57.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp59 = (Tmp58 = HEX5BHEX5D_12860006(Tmp57.content, 1), Tmp58)[0][Tmp58[1]];
                if (ConstSet110[Tmp59.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp59.content.push(newStr_11601263("\n "));;
                var Tmp61 = (Tmp60 = HEX5BHEX5D_12860006(result_13095218, 1), Tmp60)[0][Tmp60[1]];
                if (ConstSet113[Tmp61.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                var Tmp63 = (Tmp62 = HEX5BHEX5D_12860006(Tmp61.content, 1), Tmp62)[0][Tmp62[1]];
                if (ConstSet112[Tmp63.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_12885216(Tmp63, "content", parseInline_13080095(parser_13095220[0], true));
                }
                else {
                  lastElement_13095219 = newElem_11601312(1, parseInline_13080095(parser_13095220[0], false));
                }
                
                break;
              case 35:
                var level_13395014 = 1;
                L64: do {
                    L65: while (true) {
                      if (!(level_13395014 < 6)) Tmp66 = false; else {                        Tmp66 = peekMatch_11645020(parser_13095220[0], 35, level_13395014);                      }                    if (!Tmp66) break L65;
                      level_13395014 += 1;
                    }
                } while(false);
                parser_13095220[0].pos += level_13395014;
                lastElement_13095219 = newElem_11601312((2 + level_13395014), []);
                if (nextMatch_11660228(parser_13095220[0], ConstSet114, 0)) {
                var id_13395033 = [""];
                L67: do {
                    L68: while (true) {
                      var ch_13400001 = parser_13095220[0].str.charCodeAt((parser_13095220[0].pos + 0));
                    if (!nextMatch_11660228(parser_13095220[0], ConstSet115, 0)) break L68;
                      add_11601033(id_13395033, 0, ch_13400001);
                    }
                } while(false);
                parser_13095220[0].pos += 1;
                var Tmp69 = lastElement_13095219;
                if (ConstSet116[Tmp69.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'attrs\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp69.attrs.push({Field0: "id", Field1: id_13395033[0]});;
                }
                
                var Tmp70 = lastElement_13095219;
                if (ConstSet117[Tmp70.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_12885216(Tmp70, "content", parseInline_13080095(parser_13095220[0], false));
                break;
              case 42:
              case 45:
              case 43:
                if (nextMatch_11660228(parser_13095220[0], ConstSet118, 1)) {
                lastElement_13095219 = newElem_11601312(9, []);
                var item_13405013 = newElem_11601312(11, []);
                var Tmp71 = item_13405013;
                if (ConstSet119[Tmp71.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_12885216(Tmp71, "content", parseInline_13080095(parser_13095220[0], false));
                var Tmp72 = lastElement_13095219;
                if (ConstSet120[Tmp72.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp72.content.push(item_13405013);;
                }
                else {
                  lastElement_13095219 = newElem_11601312(1, parseInline_13080095(parser_13095220[0], true));
                }
                
                break;
              case 48:
              case 49:
              case 50:
              case 51:
              case 52:
              case 53:
              case 54:
              case 55:
              case 56:
              case 57:
                var originalPos_13415011 = parser_13095220[0].pos;
                parser_13095220[0].pos += 1;
                L73: do {
                    L74: while (true) {
                    if (!nextMatch_11660228(parser_13095220[0], ConstSet121, 0)) break L74;
                    }
                } while(false);
                if (nextMatch_11660255(parser_13095220[0], 46, 0)) {
                lastElement_13095219 = newElem_11601312(10, []);
                var item_13415020 = newElem_11601312(11, []);
                var Tmp75 = item_13415020;
                if (ConstSet122[Tmp75.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                add_12885216(Tmp75, "content", parseInline_13080095(parser_13095220[0], false));
                var Tmp76 = lastElement_13095219;
                if (ConstSet123[Tmp76.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp76.content.push(item_13415020);;
                }
                else {
                  parser_13095220[0].pos = originalPos_13415011;
                  lastElement_13095219 = newElem_11601312(1, parseInline_13080095(parser_13095220[0], true));
                }
                
                break;
              case 62:
                lastElement_13095219 = newElem_11601312(12, []);
                parser_13095220[0].pos += 1;
                var Tmp77 = lastElement_13095219;
                if (ConstSet124[Tmp77.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
                Tmp77.content.push(newElem_11601312(1, parseInline_13080095(parser_13095220[0], false)));;
                break;
              default: 
                if (nextMatch_11660281(parser_13095220[0], makeNimstrLit("```"), 0)) {
                result_13095218.push(parseCodeBlock_12851313(parser_13095220[0]));;
                lastElement_13095219 = null;
                }
                else {
                  lastElement_13095219 = newElem_11601312(1, parseInline_13080095(parser_13095220[0], true));
                }
                
                break;
              }
            }
            }
            parser_13095220[0].pos += 1;
          }
      } while(false);
    } while(false);
    if (!((lastElement_13095219 == null))) {
    result_13095218.push(lastElement_13095219);;
    }
    

  return result_13095218;

}
function parseMarggers_13436027(text_13436029) {
  var result_13436031 = [];

    result_13436031 = nimCopy(null, parseTopLevel_13095214(text_13436029), NTI13095217);

  return result_13436031;

}
function add_11625302(x_11625305, x_11625305_Idx) {
    x_11625305[x_11625305_Idx] += "<";;

  
}
function add_11625340(x_11625343, x_11625343_Idx) {
    x_11625343[x_11625343_Idx] += " ";;

  
}
function add_11630004(x_11630007, x_11630007_Idx) {
    x_11630007[x_11630007_Idx] += ">";;

  
}
function toCstring_11625296(elem_11625298) {
    var Tmp1;
      var Tmp2;
        var Tmp4;
        var Tmp8;
      var Tmp11;
        var Tmp12;

  var result_11625299 = [null];

    if (elem_11625298.isText) {
    var Tmp1 = elem_11625298;
    if (ConstSet125[Tmp1.isText]===undefined) { raiseFieldError(makeNimstrLit("\'str\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
    result_11625299[0] = Tmp1.str;
    }
    else {
      result_11625299[0] = "";
      add_11625302(result_11625299, 0);
      var Tmp2 = elem_11625298;
      if (ConstSet126[Tmp2.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      result_11625299[0] += toJSStr(reprEnum(Tmp2.tag, NTI11601222));;
      L3: do {
        var attrName_11625335 = null;
        var attrName_11625335_Idx = 0;
        var attrValue_11625337 = null;
        var attrValue_11625337_Idx = 0;
        var colontmp__13490309 = [];
        var Tmp4 = elem_11625298;
        if (ConstSet127[Tmp4.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'attrs\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
        colontmp__13490309 = Tmp4.attrs;
        var i_13490311 = 0;
        var L_13490312 = (colontmp__13490309).length;
        L5: do {
            L6: while (true) {
            if (!(i_13490311 < L_13490312)) break L6;
              attrName_11625335 = colontmp__13490309[i_13490311]; attrName_11625335_Idx = "Field0";
              attrValue_11625337 = colontmp__13490309[i_13490311]; attrValue_11625337_Idx = "Field1";
              add_11625340(result_11625299, 0);
              result_11625299[0] += attrName_11625335[attrName_11625335_Idx];;
              if (!(((attrValue_11625337[attrValue_11625337_Idx]).length == 0))) {
              result_11625299[0] += "=\"";;
              result_11625299[0] += attrValue_11625337[attrValue_11625337_Idx];;
              result_11625299[0] += "\"";;
              }
              
              i_13490311 += 1;
            }
        } while(false);
      } while(false);
      add_11630004(result_11625299, 0);
      L7: do {
        var cont_11630032 = null;
        var cont_11630032_Idx = 0;
        var colontmp__13490315 = [];
        var Tmp8 = elem_11625298;
        if (ConstSet128[Tmp8.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'content\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
        colontmp__13490315 = Tmp8.content;
        var i_13490316 = 0;
        var L_13490317 = (colontmp__13490315).length;
        L9: do {
            L10: while (true) {
            if (!(i_13490316 < L_13490317)) break L10;
              cont_11630032 = colontmp__13490315; cont_11630032_Idx = i_13490316;
              result_11625299[0] += toCstring_11625296(cont_11630032[cont_11630032_Idx]);;
              i_13490316 += 1;
            }
        } while(false);
      } while(false);
      var Tmp11 = elem_11625298;
      if (ConstSet129[Tmp11.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
      switch (Tmp11.tag) {
      case 2:
      case 21:
      case 22:
        break;
      default: 
        result_11625299[0] += "</";;
        var Tmp12 = elem_11625298;
        if (ConstSet130[Tmp12.isText]!==undefined) { raiseFieldError(makeNimstrLit("\'tag\' is not accessible using discriminant \'isText\' of type \'MarggersElement\'")); }
        result_11625299[0] += toJSStr(reprEnum(Tmp12.tag, NTI11601222));;
        add_11630004(result_11625299, 0);
        break;
      }
    }
    

  return result_11625299[0];

}
function convertMarggers_13486014(text_13486016) {
  var result_13486017 = null;

    result_13486017 = "";
    L1: do {
      var elem_13486025 = null;
      var elem_13486025_Idx = 0;
      var colontmp__13490079 = [];
      colontmp__13490079 = parseMarggers_13436027(text_13486016);
      var i_13490081 = 0;
      var L_13490082 = (colontmp__13490079).length;
      L2: do {
          L3: while (true) {
          if (!(i_13490081 < L_13490082)) break L3;
            elem_13486025 = colontmp__13490079; elem_13486025_Idx = i_13490081;
            result_13486017 += toCstring_11625296(elem_13486025[elem_13486025_Idx]);;
            result_13486017 += "\n";;
            i_13490081 += 1;
          }
      } while(false);
    } while(false);

  return result_13486017;

}
function convert() {
    var input_13490063 = input_13490015();
    var output_13490064 = convertMarggers_13486014(input_13490063);
    document.getElementById("output").innerHTML = output_13490064;

  
}
function convertToSource() {
    var input_13490321 = input_13490015();
    var output_13490322 = convertMarggers_13486014(input_13490321);
    var sourceBlock_13490323 = document.createElement("pre");
    sourceBlock_13490323.textContent = output_13490322;
    var outputElement_13490324 = document.getElementById("output");
    outputElement_13490324.innerHTML = "";
    outputElement_13490324.appendChild(sourceBlock_13490323);

  
}
function filename_13490338() {
  var result_13490340 = null;

    result_13490340 = document.getElementById("filename").value || "output.html";

  return result_13490340;

}
function download() {
    var input_13490360 = input_13490015();
    var output_13490361 = convertMarggers_13486014(input_13490360);
    var blob_13490371 = new Blob([output_13490361], {type: 'text/html'});
    var url_13490372 = window.URL.createObjectURL(blob_13490371);
    var a_13490373 = document.createElement("a");
    a_13490373.style.display = "none";
    a_13490373.setAttribute("href", url_13490372);
    a_13490373.setAttribute("download", filename_13490338());
    document.body.appendChild(a_13490373);
    a_13490373.click();
    window.URL.revokeObjectURL(url_13490372);
    document.body.removeChild(a_13490373);

  
}
